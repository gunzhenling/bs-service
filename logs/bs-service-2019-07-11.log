2019-07-11 09:57:27,913  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 833 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-11 09:57:27,918  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-11 09:57:31,877  INFO 833 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$b02bdd5] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 09:57:32,389  INFO 833 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$2d144477] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 09:57:32,452  INFO 833 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$3750ac52] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 09:57:32,616  INFO 833 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-11 09:57:32,932  INFO 833 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-11 09:57:32,971  INFO 833 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 09:57:32,990  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-11 09:57:32,996  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 09:57:32,997  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 09:57:32,998  INFO 833 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 09:57:32,998  INFO 833 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 09:57:32,999  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-11 09:57:33,000  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 09:57:33,000  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 09:57:33,001  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-11 09:57:33,003  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 09:57:33,003  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 09:57:33,004  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 09:57:33,005  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 09:57:33,006  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 09:57:33,006  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 09:57:33,007  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 09:57:33,007  INFO 833 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 09:57:33,385  INFO 833 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-11 09:57:34,667  INFO 833 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-11 09:57:35,477  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$42911e14
2019-07-11 09:57:35,495  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$5df6ebcf
2019-07-11 09:57:35,652  INFO 833 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-11 09:57:35,653  INFO 833 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-11 09:57:37,849  INFO 833 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-11 09:57:39,342  INFO 833 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-11 09:57:40,904  INFO 833 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-11 09:57:43,145  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 17.238 seconds (JVM running for 19.918)
2019-07-11 09:57:43,682  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-11 09:57:43,946 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:57:44,022 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 09:57:44,093 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:57:44,159  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 09:57:43 CST 2019)
2019-07-11 09:57:44,166  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 09:57:43 CST 2019)
2019-07-11 09:58:39,767 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-11 09:58:39,768 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-11 09:58:39,782 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 09:58:39,785 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:58:39,843 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 503(String), alipay(String), 20190709(String), 10110011562641960364267(String), 2019070922001486611048342510(String), 5(Integer), 0(Integer), 2019-07-09 19:15:44.0(Timestamp), {"refund_amount":0.05,"支付宝交易号":"2019070922001486611048342510","商户订单号":"10110011562641960364267","业务类型":"交易","商品名称":"商品名称974","创建时间":"2019-07-09 11:15:43","完成时间":"2019-07-09 11:15:44","门店编号":"dev","对方账户":"*佳鸿(641***@qq.com)","订单金额（元）":0.05,"商家实收（元）":0.05,"退款批次号/请求号":"","服务费（元）":0.00,"备注":""}(String), 2019-07-11 09:58:39.767(Timestamp)
2019-07-11 09:58:39,851 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 09:58:39,857 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:39,858 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 09:58:39,865 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 09:58:39,866 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 09:58:39,876 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190709(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":58,"退款订单总笔数":24,"订单金额（元）":5107.15,"商家实收（元）":5107.15,"服务费（元）":-62.99,"实收净额（元）":5044.16}(String), null
2019-07-11 09:58:39,884 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 09:58:39,886 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:39,886 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 09:58:39,890 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:58:39,891 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 09:58:39,892 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190709(String), null, null
2019-07-11 09:58:39,897 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 09:58:39,929  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T09:57:43.687] parse successful
2019-07-11 09:58:39,963 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:58:39,964 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), alipay(String)
2019-07-11 09:58:40,001 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 09:58:40,002 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 09:58:40,003 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 503(String), 10110011562641960364267(String), alipay(String)
2019-07-11 09:58:40,007 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:58:40,008  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=503, tradeType=null, payType=alipay, orderNo=10110011562641960364267)
2019-07-11 09:58:40,016  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute payQuery payQuery-alipay-10110011562641960364267: PayQueryRequestVO(appId=503, tradeType=null, payType=alipay, orderNo=10110011562641960364267)
2019-07-11 09:58:40,017  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562641960364267,payType=alipay
2019-07-11 09:58:40,018  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562641960364267
2019-07-11 09:58:40,079 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:58:40,081 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-11 09:58:40,087 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 1
2019-07-11 09:58:40,091  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,payNotifyList return orderNo:10110011562641960364267
2019-07-11 09:58:40,092 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 09:58:40,093 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-11 09:58:40,098 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 09:58:40,104  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType return:  orderNo=10110011562641960364267,tradeType=lite
2019-07-11 09:58:40,114 ERROR 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562641960364267] exception: could not found alipay-config for appId: 503;tradeType:lite
2019-07-11 09:58:40,116 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:58:40,119 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 503(String)
2019-07-11 09:58:40,123 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:58:48,742 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 09:58:48,743 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190709(String)
2019-07-11 09:58:48,756 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 09:58:48,757 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:48,758 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 09:58:48,763 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 09:58:48,765 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 09:58:48,769 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-11 09:58:48.764(Timestamp)
2019-07-11 09:58:48,773 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 09:58:48,776 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:48,777 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 09:58:48,784 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 09:58:48,788 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:58:48,789 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), alipay(String)
2019-07-11 09:58:48,794 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 09:58:48,796 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:58:48,797 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 503(String)
2019-07-11 09:58:48,801 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 09:58:48,803 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:58:48,804 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 503(String)
2019-07-11 09:58:48,808 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:58:48,810 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:58:48,811 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 503(String)
2019-07-11 09:58:48,817 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 09:58:48,820  INFO 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-09T09:57:43.687 - result paysCount: 1, refundsCount: 0
2019-07-11 09:58:48,837 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:58:48,839 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 221(Integer), alipay(String), 支付(String), 10110011562641960364267(String), null, 5(Integer), null, 2019-07-09 19:15:44.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 09:58:48,844 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 1
2019-07-11 09:58:48,853 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 09:58:48,861 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 1(Integer), 1(Integer), 1(Integer), 0(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 221(Integer)
2019-07-11 09:58:48,867 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 09:58:48,898  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T09:57:43.687] createCompareBatch successful
2019-07-11 09:58:48,902 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:48,903 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 09:58:48,906 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:58:48,906  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 09:57:43 CST 2019)
2019-07-11 09:58:48,907  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 09:57:43 CST 2019)
2019-07-11 09:58:48,920  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 request: {nonce_str=W45AYuChvZK0msUEYLihGFfwbtQ8iRbg, bill_date=20190709, appid=wxd86049a121654669, sign=6F210B1D4DEBE141E9E1F4E9A4C54EE5C1FDB39026E7C06FED404705742442FD, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-11 09:58:49,598  INFO 833 --- [           main] wxpay java sdk                           : report worker num: 6
2019-07-11 09:58:49,603  INFO 833 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,W45AYuChvZK0msUEYLihGFfwbtQ8iRbg,1562810329,626,api.mch.weixin.qq.com,true,6000,8000,0,0,0,ABCAA746ABD3DA3A7F23D8B48D3C8160A8A1F7F834F7B8F6A3D46CA0A8133665
2019-07-11 09:58:49,604  INFO 833 --- [pool-2-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,W45AYuChvZK0msUEYLihGFfwbtQ8iRbg,1562810329,626,api.mch.weixin.qq.com,true,6000,8000,0,0,0,ABCAA746ABD3DA3A7F23D8B48D3C8160A8A1F7F834F7B8F6A3D46CA0A8133665
2019-07-11 09:58:49,605  INFO 833 --- [pool-2-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 09:58:49,604  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 09:58:49,605  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response content size: 149
2019-07-11 09:58:49,606  INFO 833 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 09:58:49,612  INFO 833 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 09:58:49,613  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 09:58:49,614  WARN 833 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-11 09:58:49,614 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 09:58:49,615 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190709(String), null, No Bill Exist(String)
2019-07-11 09:58:49,619 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 09:58:49,649  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T09:57:43.687] parse successful
2019-07-11 09:58:49,652 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:58:49,654 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), wx(String)
2019-07-11 09:58:49,657 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:58:49,658 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:58:49,660 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 503(String)
2019-07-11 09:58:49,665 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:58:49,668 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 09:58:49,669 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190709(String)
2019-07-11 09:58:49,673 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 09:58:49,674 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:49,675 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 09:58:49,679 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 09:58:49,680 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 09:58:49,681 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 09:58:49.679(Timestamp)
2019-07-11 09:58:49,685 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 09:58:49,686 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:49,687 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 09:58:49,690 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 09:58:49,690  INFO 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-09T09:57:43.687 - result is Null
2019-07-11 09:58:49,723  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T09:57:43.687] createCompareBatch successful
2019-07-11 09:58:49,726 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:49,726 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 09:58:49,728 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:58:49,729  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Wed Jul 10 09:57:43 CST 2019)
2019-07-11 09:58:49,729  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Wed Jul 10 09:57:43 CST 2019)
2019-07-11 09:58:49,729  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 09:58:49,744  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190710 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-10","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-11 09:58:50,156  INFO 833 --- [           main] sdk.biz.err                              : Summary^_^10000^_^null^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=DKKBvyXGzFzBEVVK3awf2cZspeP16NpezgK2ZpNe6FMsuCerZQA37YlKx4EhCJXqC+jUyaD+vKj8tYiiTEMxN0GWMKNclC+uQyciWCRYXCwlVblbgCXKSwVGyhlkcoRwc7RPrH79XoTG7n0Ia7Bu4FsJiI29k2g8dkJ42k6d4JY=&version=1.0&app_id=2016052401436400&sign_type=RSA&timestamp=2019-07-11 09:58:49^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-10","bill_type":"trade"}^_^20ms,373ms,18ms
2019-07-11 09:58:50,159  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190710 response: {"code":"10000","msg":"Success","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"10000\",\"msg\":\"Success\",\"bill_download_url\":\"http:\\/\\/dwbillcenter.alipay.com\\/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190710&downloadFileName=20882218614866000156_20190710.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190710.csv.zip&timestamp=1562810330&token=914af472ada24791c728b79cba770223\"},\"sign\":\"TY+GHBuqdibF9UMWtzCv/Chg+uQM7EgYOYnG7WOTgVkJ8HSlxEW+aAl1qz4QMo+wht+dZaE4tfU6v5LxMrkgV3FuwSHHQgdr0fAeZz8S0CY8mMym465fgTeBPXX2UiALd49PMu3rINKKoYFz9VAnoebyp31eY2d7+KOCVS5v9VE=\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-10\",\"bill_type\":\"trade\"}"},"bill_download_url":"http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190710&downloadFileName=20882218614866000156_20190710.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190710.csv.zip&timestamp=1562810330&token=914af472ada24791c728b79cba770223","success":true,"error_code":"10000"}
2019-07-11 09:58:50,159  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : alipay 503-Wed Jul 10 09:57:43 CST 2019 download-url: http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190710&downloadFileName=20882218614866000156_20190710.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190710.csv.zip&timestamp=1562810330&token=914af472ada24791c728b79cba770223
2019-07-11 09:58:50,349  WARN 833 --- [           main] o.a.h.c.protocol.ResponseProcessCookies  : Cookie rejected [zone="GZ00C", version:1, domain:.${session_domain}, path:/, expiry:null] Domain attribute ".${session_domain}" violates RFC 2109: domain must contain an embedded dot
2019-07-11 09:58:50,350  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file write to [alipay_503_2019-07-10.zip]
2019-07-11 09:58:50,354  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file [alipay_503_2019-07-10.zip] write success
2019-07-11 09:58:50,359 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:50,360 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 09:58:50,363 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 09:58:50,364 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 09:58:50,366 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190710(String), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":10,"退款订单总笔数":1,"订单金额（元）":2763.08,"商家实收（元）":2763.08,"服务费（元）":-19.00,"实收净额（元）":2744.08}(String), null
2019-07-11 09:58:50,369 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 09:58:50,371 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:50,371 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 09:58:50,374 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:58:50,374 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 09:58:50,375 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190710(String), null, null
2019-07-11 09:58:50,380 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 09:58:50,399  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-10T09:57:43.687] parse successful
2019-07-11 09:58:50,400 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:58:50,400 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190710(String), alipay(String)
2019-07-11 09:58:50,403 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:58:50,404 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:58:50,405 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 503(String)
2019-07-11 09:58:50,408 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:58:50,410 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 09:58:50,411 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190710(String)
2019-07-11 09:58:50,414 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 09:58:50,414 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:50,415 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 09:58:50,418 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 09:58:50,419 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 09:58:50,420 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190710(String), alipay(String), 20190710(String), 2019-07-11 09:58:50.419(Timestamp)
2019-07-11 09:58:50,424 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 09:58:50,425 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:50,425 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 09:58:50,429 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 09:58:50,430 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:58:50,431 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190710(String), alipay(String)
2019-07-11 09:58:50,434 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:58:50,434 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:58:50,436 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 503(String)
2019-07-11 09:58:50,439 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 09:58:50,440 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:58:50,440 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 503(String)
2019-07-11 09:58:50,444 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:58:50,444 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:58:50,445 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 503(String)
2019-07-11 09:58:50,448 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 09:58:50,449  INFO 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-10T09:57:43.687 - result paysCount: 0, refundsCount: 0
2019-07-11 09:58:50,490  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-10T09:57:43.687] createCompareBatch successful
2019-07-11 09:58:50,493 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:50,493 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 09:58:50,495 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:58:50,496  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Wed Jul 10 09:57:43 CST 2019)
2019-07-11 09:58:50,496  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=503, payType=wx, billDate=Wed Jul 10 09:57:43 CST 2019)
2019-07-11 09:58:50,496  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 request: {nonce_str=nSR4vYECZMjLp0gsEadmyAnpbJqTjvqX, bill_date=20190710, appid=wxd86049a121654669, sign=95E29D528390B0F34F543363F0DF471A199EF26C2C45E3054F325E2CCE1C333B, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-11 09:58:50,756  INFO 833 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,nSR4vYECZMjLp0gsEadmyAnpbJqTjvqX,1562810330,253,api.mch.weixin.qq.com,true,6000,8000,0,0,0,8FD37995E52F1CBBF1849E0C7AC971A0A1AC32AF9BC6146105B966FA9016F3BA
2019-07-11 09:58:50,757  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[Bill Creating]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 09:58:50,757  INFO 833 --- [pool-3-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,nSR4vYECZMjLp0gsEadmyAnpbJqTjvqX,1562810330,253,api.mch.weixin.qq.com,true,6000,8000,0,0,0,8FD37995E52F1CBBF1849E0C7AC971A0A1AC32AF9BC6146105B966FA9016F3BA
2019-07-11 09:58:50,757  INFO 833 --- [pool-3-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 09:58:50,757  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response content size: 149
2019-07-11 09:58:50,757  INFO 833 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[Bill Creating]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 09:58:50,758  INFO 833 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=Bill Creating, error_code=20002, return_code=FAIL}
2019-07-11 09:58:50,759  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response: {return_msg=Bill Creating, error_code=20002, return_code=FAIL}
2019-07-11 09:58:50,759  WARN 833 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: Bill Creating
2019-07-11 09:58:50,759 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 09:58:50,760 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190710(String), null, Bill Creating(String)
2019-07-11 09:58:50,763 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 09:58:50,782  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-10T09:57:43.687] parse successful
2019-07-11 09:58:50,783 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:58:50,783 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190710(String), wx(String)
2019-07-11 09:58:50,786 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:58:50,787 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:58:50,787 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 503(String)
2019-07-11 09:58:50,789 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:58:50,791 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 09:58:50,792 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190710(String)
2019-07-11 09:58:50,795 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 09:58:50,795 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:50,795 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 09:58:50,798 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 09:58:50,798 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 09:58:50,799 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 09:58:50.798(Timestamp)
2019-07-11 09:58:50,802 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 09:58:50,803 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:50,803 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 09:58:50,805 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 09:58:50,806  INFO 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-10T09:57:43.687 - result is Null
2019-07-11 09:58:50,832  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-10T09:57:43.687] createCompareBatch successful
2019-07-11 09:58:50,834 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:58:50,835 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 09:58:50,837 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:58:50,837  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 09:57:43 CST 2019)
2019-07-11 09:58:50,837  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 09:57:43 CST 2019)
2019-07-11 09:59:36,327 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-11 09:59:36,333 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-11 09:59:36,338 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 1
2019-07-11 09:59:47,554 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:47,554 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 09:59:47,562 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 09:59:47,563 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 09:59:47,564 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":58,"退款订单总笔数":24,"订单金额（元）":5107.15,"商家实收（元）":5107.15,"服务费（元）":-62.99,"实收净额（元）":5044.16}(String), null
2019-07-11 09:59:47,575 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 09:59:47,577 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:47,579 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 09:59:47,585 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:59:47,585 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:47,586 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), null, null
2019-07-11 09:59:47,592 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 09:59:47,624  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T09:57:43.687] parse successful
2019-07-11 09:59:47,624 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:59:47,625 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-11 09:59:47,628 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:47,631 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:59:47,632 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-11 09:59:47,635 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:47,638 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 09:59:47,639 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190709(String)
2019-07-11 09:59:47,644 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 09:59:47,646 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:47,646 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 09:59:47,650 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 09:59:47,651 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 09:59:47,652 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-11 09:59:47.651(Timestamp)
2019-07-11 09:59:47,657 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 09:59:47,659 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:47,660 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 09:59:47,665 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 09:59:47,666 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:59:47,667 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-11 09:59:47,670 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:47,671 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:59:47,672 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 09:59:47,687 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 14
2019-07-11 09:59:47,688 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:59:47,688 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-11 09:59:47,695 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:47,697 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:59:47,699 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 09:59:47,703 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 09:59:47,704  INFO 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-09T09:57:43.687 - result paysCount: 0, refundsCount: 0
2019-07-11 09:59:47,741  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T09:57:43.687] createCompareBatch successful
2019-07-11 09:59:47,746 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:47,746 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 09:59:47,750 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:59:47,750  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 09:57:43 CST 2019)
2019-07-11 09:59:47,750  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 09:57:43 CST 2019)
2019-07-11 09:59:47,751  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_101_20190709.csv] already exists, return local file
2019-07-11 09:59:47,761 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-11 09:59:47,761 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String)
2019-07-11 09:59:47,766 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 09:59:47,767 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-11 09:59:47,768 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String)
2019-07-11 09:59:47,774 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 09:59:47,775 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-11 09:59:47,776 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 09:59:47,780 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:47,782 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:47,788 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562630251366259(String), 4200000340201907096741436916(String), 19900(Integer), 119(Integer), null, {"merchant_income_charge":199.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000340201907096741436916","商户订单号":"10110011562630251366259","用户标识":"oF9zhvoGcCB1bh1dX_FnTS1RoI1w","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":199.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机","手续费":1.19000,"费率":"0.60%"}(String), 2019-07-11 09:59:47.774(Timestamp)
2019-07-11 09:59:47,796 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 09:59:47,798 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-11 09:59:47,799 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 09:59:47,803 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:47,804 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:47,805 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562660958366285(String), 4200000343201907096959558243(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000343201907096959558243","商户订单号":"10110011562660958366285","用户标识":"oF9zhvuwwXGs0OPoPdSuknufzzuc","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"口红","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 09:59:47.798(Timestamp)
2019-07-11 09:59:47,811 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 09:59:47,812 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-11 09:59:47,813 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 09:59:47,820 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:47,821 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:47,822 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562610950366258(String), 4200000353201907091881341553(String), 22900(Integer), 137(Integer), null, {"merchant_income_charge":229.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000353201907091881341553","商户订单号":"10110011562610950366258","用户标识":"oF9zhvs9znoUohMT1cJmQ6ZxFRFY","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"LQT","货币种类":"CNY","总金额":229.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"CHARLEE&KLTH 手提金属提把钱包小ck10840136-单肩斜跨女包小方包","手续费":1.37000,"费率":"0.60%"}(String), 2019-07-11 09:59:47.811(Timestamp)
2019-07-11 09:59:47,828 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 09:59:47,829 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-11 09:59:47,831 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 09:59:47,839 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:47,840 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:47,842 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562684369366311(String), 4200000354201907098493063836(String), 7200(Integer), 43(Integer), null, {"merchant_income_charge":72.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000354201907098493063836","商户订单号":"10110011562684369366311","用户标识":"o2st65Xf59UzUqdqHGjfP2i8mBC8","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"GDB_CREDIT","货币种类":"CNY","总金额":72.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女","手续费":0.43000,"费率":"0.60%"}(String), 2019-07-11 09:59:47.829(Timestamp)
2019-07-11 09:59:47,851 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 09:59:47,853 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:47,854 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 09:59:47,857 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 09:59:47,858 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 09:59:47,860 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), 4(Integer), 2(Integer), 50005(Integer), 40505(Integer), 0(Integer), {"总交易单数":6,"总交易额":500.05,"总退款金额":405.05,"手续费总金额":0.56000}(String), null
2019-07-11 09:59:47,866 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 09:59:47,867 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:47,868 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 09:59:47,872 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:59:47,873 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:47,874 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), null, null
2019-07-11 09:59:47,879 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 09:59:47,908  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T09:57:43.687] parse successful
2019-07-11 09:59:47,909 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:59:47,910 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), wx(String)
2019-07-11 09:59:47,920 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-11 09:59:47,922 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 09:59:47,923 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562610950366258(String), wx(String)
2019-07-11 09:59:47,928 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:47,929  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562610950366258)
2019-07-11 09:59:47,930  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562610950366258,payType=wx
2019-07-11 09:59:47,931  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562610950366258
2019-07-11 09:59:47,933 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:47,934 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 09:59:47,939 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:47,942 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:47,943 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 09:59:47,951 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:47,952  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562610950366258
2019-07-11 09:59:47,953 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 09:59:47,954 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 09:59:47,957 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:47,958 ERROR 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562610950366258] exception: not find PayRequestLog record by [orderNo:10110011562610950366258,payType:wx] 
2019-07-11 09:59:47,958 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 09:59:47,959 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562630251366259(String), wx(String)
2019-07-11 09:59:47,964 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:47,965  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562630251366259)
2019-07-11 09:59:47,966  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562630251366259,payType=wx
2019-07-11 09:59:47,966  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562630251366259
2019-07-11 09:59:47,967 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:47,967 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 09:59:47,971 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:47,972 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:47,973 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 09:59:47,976 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:47,977  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562630251366259
2019-07-11 09:59:47,977 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 09:59:47,978 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 09:59:47,981 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:47,982 ERROR 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562630251366259] exception: not find PayRequestLog record by [orderNo:10110011562630251366259,payType:wx] 
2019-07-11 09:59:47,983 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 09:59:47,983 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562660958366285(String), wx(String)
2019-07-11 09:59:47,986 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:47,987  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562660958366285)
2019-07-11 09:59:47,987  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562660958366285,payType=wx
2019-07-11 09:59:47,987  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562660958366285
2019-07-11 09:59:47,987 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:47,988 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 09:59:47,991 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:47,992 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:47,992 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 09:59:47,995 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:47,996  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562660958366285
2019-07-11 09:59:47,997 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 09:59:47,999 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 09:59:48,003 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:48,004 ERROR 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562660958366285] exception: not find PayRequestLog record by [orderNo:10110011562660958366285,payType:wx] 
2019-07-11 09:59:48,004 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 09:59:48,004 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562684369366311(String), wx(String)
2019-07-11 09:59:48,007 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:48,008  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562684369366311)
2019-07-11 09:59:48,008  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562684369366311,payType=wx
2019-07-11 09:59:48,008  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562684369366311
2019-07-11 09:59:48,009 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:48,009 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 09:59:48,013 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:48,014 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:48,014 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 09:59:48,018 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:48,019  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562684369366311
2019-07-11 09:59:48,019 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 09:59:48,019 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 09:59:48,022 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:48,023 ERROR 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562684369366311] exception: not find PayRequestLog record by [orderNo:10110011562684369366311,payType:wx] 
2019-07-11 09:59:48,023 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:59:48,024 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 101(String)
2019-07-11 09:59:48,030 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 2
2019-07-11 09:59:48,031 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 09:59:48,032 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String)
2019-07-11 09:59:48,035 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-11 09:59:48,036  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@5755a13c, appId=101, payType=wx, orderNo=10110011558860422365280, refundNo=refund10110011558860422365280)
2019-07-11 09:59:48,036  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011558860422365280,payType=wx
2019-07-11 09:59:48,037  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011558860422365280
2019-07-11 09:59:48,037 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:48,037 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 09:59:48,042 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:48,043 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:48,043 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 09:59:48,048 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:48,048  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011558860422365280
2019-07-11 09:59:48,048 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 09:59:48,049 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 09:59:48,052 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:48,053 ERROR 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011558860422365280] exception: not find PayRequestLog record by [orderNo:10110011558860422365280,payType:wx] 
2019-07-11 09:59:48,054 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 09:59:48,054 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String)
2019-07-11 09:59:48,057 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-11 09:59:48,058  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@c93c0d30, appId=101, payType=wx, orderNo=10110011561291536365966, refundNo=refund10110011561291536365966)
2019-07-11 09:59:48,058  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011561291536365966,payType=wx
2019-07-11 09:59:48,058  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011561291536365966
2019-07-11 09:59:48,059 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:48,059 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 09:59:48,063 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:48,064 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:48,065 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 09:59:48,069 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:48,070  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011561291536365966
2019-07-11 09:59:48,070 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 09:59:48,070 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 09:59:48,073 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:48,073 ERROR 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011561291536365966] exception: not find PayRequestLog record by [orderNo:10110011561291536365966,payType:wx] 
2019-07-11 09:59:48,076 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 09:59:48,076 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190709(String)
2019-07-11 09:59:48,081 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 09:59:48,081 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:48,082 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 09:59:48,085 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 09:59:48,086 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 09:59:48,087 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 09:59:48.086(Timestamp)
2019-07-11 09:59:48,094 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 09:59:48,095 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:48,095 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 09:59:48,100 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 09:59:48,101 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:59:48,102 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), wx(String)
2019-07-11 09:59:48,110 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-11 09:59:48,111 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:59:48,113 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 09:59:48,116 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 09:59:48,117 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:59:48,118 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 101(String)
2019-07-11 09:59:48,126 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 2
2019-07-11 09:59:48,127 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:59:48,128 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 09:59:48,134 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 09:59:48,138  INFO 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: wx, date: 2019-07-09T09:57:43.687 - result paysCount: 4, refundsCount: 2
2019-07-11 09:59:48,141 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:48,144 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 226(Integer), wx(String), 支付(String), 10110011562610950366258(String), null, 22900(Integer), null, 2019-07-11 22:58:50.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 226(Integer), wx(String), 支付(String), 10110011562630251366259(String), null, 19900(Integer), null, 2019-07-11 22:58:50.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 226(Integer), wx(String), 支付(String), 10110011562660958366285(String), null, 5(Integer), null, 2019-07-11 22:58:50.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 226(Integer), wx(String), 支付(String), 10110011562684369366311(String), null, 7200(Integer), null, 2019-07-11 22:58:50.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 226(Integer), wx(String), 退款(String), 10110011558860422365280(String), refund10110011558860422365280(String), 5(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 226(Integer), wx(String), 退款(String), 10110011561291536365966(String), refund10110011561291536365966(String), 40500(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 09:59:48,149 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 6
2019-07-11 09:59:48,150 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 09:59:48,152 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 6(Integer), 6(Integer), 4(Integer), 0(Integer), 2(Integer), 0(Integer), 50005(Integer), 0(Integer), 40505(Integer), 0(Integer), 299(Integer), -243(Integer), 226(Integer)
2019-07-11 09:59:48,158 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 09:59:48,190  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T09:57:43.687] createCompareBatch successful
2019-07-11 09:59:48,194 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:48,195 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 09:59:48,201 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:59:48,202  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Wed Jul 10 09:57:43 CST 2019)
2019-07-11 09:59:48,202  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Wed Jul 10 09:57:43 CST 2019)
2019-07-11 09:59:48,203  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=101,appId=alipay,config=AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 09:59:48,203  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190710 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-10","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-11 09:59:48,417  INFO 833 --- [           main] sdk.biz.err                              : Summary^_^10000^_^null^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=kmvbls9MtTbp1t6QV5yuC7o4+Qx/J3Q6Zywwy5eNRmwSZZ0NMrf3YgiCbHvtTf/Us6vbvHveMkp+X2o67nHB1p6FTPypMveVVkfFSipemUI8wmnhfFMLrV/ZxQHITG77gk1EmLatKZpS+LjvWcsbTBtHtxbA/rJNhOFCLuE0g60=&version=1.0&app_id=2016052401436400&sign_type=RSA&timestamp=2019-07-11 09:59:48^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-10","bill_type":"trade"}^_^4ms,209ms,1ms
2019-07-11 09:59:48,418  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190710 response: {"code":"10000","msg":"Success","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"10000\",\"msg\":\"Success\",\"bill_download_url\":\"http:\\/\\/dwbillcenter.alipay.com\\/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190710&downloadFileName=20882218614866000156_20190710.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190710.csv.zip&timestamp=1562810388&token=5363247a8d0070b9c529408b417cd868\"},\"sign\":\"odWU/CTclv+JCqAHkHG9liP89kqp9QWtclGIaXlTatvf34QmD3P4A5wrVFSGOnA1b2vjWSwb1gmk+PjwqHV3qNdfB5wxMFUP/fKVUiukf0OtRI1cW6bkAhsg/OFpq6/hrmBLXl0ZK1dpOMKA4FmkC9EyA/tdqKqlsxJKfSLJu9o=\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-10\",\"bill_type\":\"trade\"}"},"bill_download_url":"http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190710&downloadFileName=20882218614866000156_20190710.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190710.csv.zip&timestamp=1562810388&token=5363247a8d0070b9c529408b417cd868","success":true,"error_code":"10000"}
2019-07-11 09:59:48,418  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : alipay 101-Wed Jul 10 09:57:43 CST 2019 download-url: http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190710&downloadFileName=20882218614866000156_20190710.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190710.csv.zip&timestamp=1562810388&token=5363247a8d0070b9c529408b417cd868
2019-07-11 09:59:48,565  WARN 833 --- [           main] o.a.h.c.protocol.ResponseProcessCookies  : Cookie rejected [zone="GZ00C", version:1, domain:.${session_domain}, path:/, expiry:null] Domain attribute ".${session_domain}" violates RFC 2109: domain must contain an embedded dot
2019-07-11 09:59:48,565  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file write to [alipay_101_2019-07-10.zip]
2019-07-11 09:59:48,566  INFO 833 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file [alipay_101_2019-07-10.zip] write success
2019-07-11 09:59:48,569 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:48,570 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 09:59:48,579 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 09:59:48,580 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 09:59:48,581 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190710(String), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":10,"退款订单总笔数":1,"订单金额（元）":2763.08,"商家实收（元）":2763.08,"服务费（元）":-19.00,"实收净额（元）":2744.08}(String), null
2019-07-11 09:59:48,603 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 09:59:48,605 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:48,605 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 09:59:48,608 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:59:48,609 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:48,610 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190710(String), null, null
2019-07-11 09:59:48,614 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 09:59:48,648  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-10T09:57:43.687] parse successful
2019-07-11 09:59:48,649 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:59:48,650 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), alipay(String)
2019-07-11 09:59:48,653 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:48,654 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:59:48,654 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 101(String)
2019-07-11 09:59:48,657 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:48,661 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 09:59:48,662 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190710(String)
2019-07-11 09:59:48,666 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 09:59:48,667 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:48,668 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 09:59:48,671 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 09:59:48,672 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 09:59:48,673 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190710(String), alipay(String), 20190710(String), 2019-07-11 09:59:48.672(Timestamp)
2019-07-11 09:59:48,678 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 09:59:48,680 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:48,680 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 09:59:48,686 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 09:59:48,687 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:59:48,688 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), alipay(String)
2019-07-11 09:59:48,690 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:48,691 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:59:48,692 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 09:59:48,708 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 4
2019-07-11 09:59:48,709 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:59:48,709 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 101(String)
2019-07-11 09:59:48,713 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:48,713 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:59:48,714 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 09:59:48,721 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 09:59:48,722  INFO 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-10T09:57:43.687 - result paysCount: 0, refundsCount: 0
2019-07-11 09:59:48,803  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-10T09:57:43.687] createCompareBatch successful
2019-07-11 09:59:48,807 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:48,808 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 09:59:48,811 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:59:48,812  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Wed Jul 10 09:57:43 CST 2019)
2019-07-11 09:59:48,812  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=101, payType=wx, billDate=Wed Jul 10 09:57:43 CST 2019)
2019-07-11 09:59:48,814  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 request: {nonce_str=6sUqezzdslheu7rK5CjoYATKJJBIwH2y, bill_date=20190710, appid=wxf712db1e1042a294, sign=23539A4B5BC8208BEFE2A05D6268BF0A98BA0100401094EF52E23AD9E20828E0, bill_type=ALL, mch_id=1367026602, sign_type=HMAC-SHA256}
2019-07-11 09:59:49,042  INFO 833 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,6sUqezzdslheu7rK5CjoYATKJJBIwH2y,1562810389,221,api.mch.weixin.qq.com,true,6000,8000,0,0,0,A0511F376EC541C93FD6BD1ACD1915DD641B7BF93559298DDE97FD2F3979BB6C
2019-07-11 09:59:49,042  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : ﻿交易时间,公众账号ID,商户号,子商户号,设备号,微信订单号,商户订单号,用户标识,交易类型,交易状态,付款银行,货币种类,总金额,企业红包金额,微信退款单号,商户退款单号,退款金额,企业红包退款金额,退款类型,退款状态,商品名称,商户数据包,手续费,费率
`2019-07-10 17:19:23,`wxde9d2081b4401862,`1367026602,`0,`,`4200000344201907100111506573,`10110011562750358366328,`o2st65T1fiFkBV5u0VCK4hCcbd9g,`JSAPI,`SUCCESS,`CFT,`CNY,`0.05,`0.00,`0,`0,`0.00,`0.00,`,`,`口红,`,`0.00000,`0.60%
`2019-07-10 16:31:10,`wxde9d2081b4401862,`1367026602,`0,`,`4200000345201907108271098923,`10110011562747463366326,`o2st65Xf59UzUqdqHGjfP2i8mBC8,`JSAPI,`SUCCESS,`GZCB_CREDIT,`CNY,`72.00,`0.00,`0,`0,`0.00,`0.00,`,`,`[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女,`,`0.43000,`0.60%
`2019-07-10 02:17:15,`wxf712db1e1042a294,`1367026602,`0,`,`4200000348201907106511074240,`10110011562696226366313,`oF9zhvqxjkPiRuAtAE1I7DM8D8DM,`JSAPI,`SUCCESS,`ICBC_DEBIT,`CNY,`97.00,`0.00,`0,`0,`0.00,`0.00,`,`,`限时特惠法国欧缇丽大葡萄喷雾200ml,`,`0.58000,`0.60%
`2019-07-10 18:55:19,`wxde9d2081b4401862,`1367026602,`0,`,`4200000357201907106116812608,`10110011562756105366329,`o2st65Q1-foCJuSTbu43TTsROVEc,`JSAPI,`SUCCESS,`CITIC_CREDIT,`CNY,`389.00,`0.00,`0,`0,`0.00,`0.00,`,`,`【爆款断货王】李佳琦墙裂推荐蒋梦婕同款SKG便携非击打电极片颈部按摩仪4098,`,`2.33000,`0.60%
`2019-07-10 22:38:31,`wxf712db1e1042a294,`1367026602,`0,`,`4200000356201907109364537299,`10110011562769501366331,`oF9zhvufx-oO_DF93qVSb29GUK9s,`MWEB,`SUCCESS,`LQT,`CNY,`199.00,`0.00,`0,`0,`0.00,`0.00,`,`,`【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机,`,`1.19000,`0.60%
`2019-07-10 07:58:34,`wxde9d2081b4401862,`1367026602,`0,`,`4200000343201907102910159982,`10110011562716709366314,`o2st65TO8eXX0Jtoa1m1i82JiNXc,`JSAPI,`SUCCESS,`CFT,`CNY,`97.00,`0.00,`0,`0,`0.00,`0.00,`,`,`限时特惠法国欧缇丽大葡萄喷雾200ml,`,`0.58000,`0.60%
总交易单数,总交易额,总退款金额,总企业红包退款金额,手续费总金额
`6,`854.05,`0.00,`0.00,`5.11000

2019-07-11 09:59:49,042  INFO 833 --- [pool-4-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,6sUqezzdslheu7rK5CjoYATKJJBIwH2y,1562810389,221,api.mch.weixin.qq.com,true,6000,8000,0,0,0,A0511F376EC541C93FD6BD1ACD1915DD641B7BF93559298DDE97FD2F3979BB6C
2019-07-11 09:59:49,042  INFO 833 --- [pool-4-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 09:59:49,042  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response content size: 1721
2019-07-11 09:59:49,042  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file write to [wx_101_20190710.csv]
2019-07-11 09:59:49,048  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file [wx_101_20190710.csv] write success
2019-07-11 09:59:49,050 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-11 09:59:49,051 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 09:59:49,054 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,055 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:49,057 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562750358366328(String), 4200000344201907100111506573(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907100111506573","商户订单号":"10110011562750358366328","用户标识":"o2st65T1fiFkBV5u0VCK4hCcbd9g","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"口红","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 09:59:49.05(Timestamp)
2019-07-11 09:59:49,062 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 09:59:49,063 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-11 09:59:49,063 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 09:59:49,066 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,067 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:49,068 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562747463366326(String), 4200000345201907108271098923(String), 7200(Integer), 43(Integer), null, {"merchant_income_charge":72.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000345201907108271098923","商户订单号":"10110011562747463366326","用户标识":"o2st65Xf59UzUqdqHGjfP2i8mBC8","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"GZCB_CREDIT","货币种类":"CNY","总金额":72.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女","手续费":0.43000,"费率":"0.60%"}(String), 2019-07-11 09:59:49.063(Timestamp)
2019-07-11 09:59:49,073 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 09:59:49,075 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-11 09:59:49,075 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 09:59:49,078 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,079 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:49,080 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562696226366313(String), 4200000348201907106511074240(String), 9700(Integer), 58(Integer), null, {"merchant_income_charge":97.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000348201907106511074240","商户订单号":"10110011562696226366313","用户标识":"oF9zhvqxjkPiRuAtAE1I7DM8D8DM","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"ICBC_DEBIT","货币种类":"CNY","总金额":97.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"限时特惠法国欧缇丽大葡萄喷雾200ml","手续费":0.58000,"费率":"0.60%"}(String), 2019-07-11 09:59:49.074(Timestamp)
2019-07-11 09:59:49,085 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 09:59:49,086 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-11 09:59:49,087 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 09:59:49,091 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,091 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:49,092 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562756105366329(String), 4200000357201907106116812608(String), 38900(Integer), 233(Integer), null, {"merchant_income_charge":389.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000357201907106116812608","商户订单号":"10110011562756105366329","用户标识":"o2st65Q1-foCJuSTbu43TTsROVEc","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CITIC_CREDIT","货币种类":"CNY","总金额":389.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【爆款断货王】李佳琦墙裂推荐蒋梦婕同款SKG便携非击打电极片颈部按摩仪4098","手续费":2.33000,"费率":"0.60%"}(String), 2019-07-11 09:59:49.086(Timestamp)
2019-07-11 09:59:49,103 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 09:59:49,105 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-11 09:59:49,105 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 09:59:49,110 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,111 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:49,112 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562769501366331(String), 4200000356201907109364537299(String), 19900(Integer), 119(Integer), null, {"merchant_income_charge":199.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000356201907109364537299","商户订单号":"10110011562769501366331","用户标识":"oF9zhvufx-oO_DF93qVSb29GUK9s","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"LQT","货币种类":"CNY","总金额":199.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机","手续费":1.19000,"费率":"0.60%"}(String), 2019-07-11 09:59:49.105(Timestamp)
2019-07-11 09:59:49,117 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 09:59:49,118 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-11 09:59:49,119 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 09:59:49,123 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,124 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:49,126 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562716709366314(String), 4200000343201907102910159982(String), 9700(Integer), 58(Integer), null, {"merchant_income_charge":97.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000343201907102910159982","商户订单号":"10110011562716709366314","用户标识":"o2st65TO8eXX0Jtoa1m1i82JiNXc","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":97.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"限时特惠法国欧缇丽大葡萄喷雾200ml","手续费":0.58000,"费率":"0.60%"}(String), 2019-07-11 09:59:49.118(Timestamp)
2019-07-11 09:59:49,132 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 09:59:49,133 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:49,134 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 09:59:49,137 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 09:59:49,138 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 09:59:49,139 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190710(String), 6(Integer), 0(Integer), 85405(Integer), 0(Integer), 5(Integer), {"总交易单数":6,"总交易额":854.05,"总退款金额":0.00,"手续费总金额":5.11000}(String), null
2019-07-11 09:59:49,148 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 09:59:49,149 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:49,149 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 09:59:49,154 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:59:49,154 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:49,155 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190710(String), null, null
2019-07-11 09:59:49,160 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 09:59:49,192  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-10T09:57:43.687] parse successful
2019-07-11 09:59:49,193 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:59:49,194 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), wx(String)
2019-07-11 09:59:49,212 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 6
2019-07-11 09:59:49,216 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 09:59:49,218 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562696226366313(String), wx(String)
2019-07-11 09:59:49,221 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,222  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562696226366313)
2019-07-11 09:59:49,225  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562696226366313,payType=wx
2019-07-11 09:59:49,225  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562696226366313
2019-07-11 09:59:49,226 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:49,231 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 09:59:49,234 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:49,235 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:49,236 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 09:59:49,241 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:49,241  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562696226366313
2019-07-11 09:59:49,242 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 09:59:49,242 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 09:59:49,247 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,250 ERROR 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562696226366313] exception: not find PayRequestLog record by [orderNo:10110011562696226366313,payType:wx] 
2019-07-11 09:59:49,251 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 09:59:49,252 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562716709366314(String), wx(String)
2019-07-11 09:59:49,256 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,256  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562716709366314)
2019-07-11 09:59:49,257  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562716709366314,payType=wx
2019-07-11 09:59:49,257  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562716709366314
2019-07-11 09:59:49,258 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:49,258 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 09:59:49,262 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:49,268 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:49,270 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 09:59:49,275 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:49,276  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562716709366314
2019-07-11 09:59:49,277 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 09:59:49,277 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 09:59:49,282 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,283 ERROR 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562716709366314] exception: not find PayRequestLog record by [orderNo:10110011562716709366314,payType:wx] 
2019-07-11 09:59:49,284 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 09:59:49,284 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562747463366326(String), wx(String)
2019-07-11 09:59:49,287 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,288  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562747463366326)
2019-07-11 09:59:49,289  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562747463366326,payType=wx
2019-07-11 09:59:49,289  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562747463366326
2019-07-11 09:59:49,289 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:49,290 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 09:59:49,293 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:49,294 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:49,294 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 09:59:49,298 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:49,300  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562747463366326
2019-07-11 09:59:49,301 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 09:59:49,301 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 09:59:49,304 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,306 ERROR 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562747463366326] exception: not find PayRequestLog record by [orderNo:10110011562747463366326,payType:wx] 
2019-07-11 09:59:49,306 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 09:59:49,307 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562750358366328(String), wx(String)
2019-07-11 09:59:49,310 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,311  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562750358366328)
2019-07-11 09:59:49,311  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562750358366328,payType=wx
2019-07-11 09:59:49,311  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562750358366328
2019-07-11 09:59:49,312 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:49,312 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 09:59:49,317 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:49,318 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:49,319 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 09:59:49,323 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:49,323  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562750358366328
2019-07-11 09:59:49,324 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 09:59:49,324 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 09:59:49,327 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,328 ERROR 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562750358366328] exception: not find PayRequestLog record by [orderNo:10110011562750358366328,payType:wx] 
2019-07-11 09:59:49,328 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 09:59:49,329 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562756105366329(String), wx(String)
2019-07-11 09:59:49,333 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,333  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562756105366329)
2019-07-11 09:59:49,333  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562756105366329,payType=wx
2019-07-11 09:59:49,334  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562756105366329
2019-07-11 09:59:49,334 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:49,335 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 09:59:49,339 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:49,340 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:49,340 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 09:59:49,344 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:49,345  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562756105366329
2019-07-11 09:59:49,345 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 09:59:49,346 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 09:59:49,348 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,349 ERROR 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562756105366329] exception: not find PayRequestLog record by [orderNo:10110011562756105366329,payType:wx] 
2019-07-11 09:59:49,350 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 09:59:49,351 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562769501366331(String), wx(String)
2019-07-11 09:59:49,354 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,355  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562769501366331)
2019-07-11 09:59:49,355  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562769501366331,payType=wx
2019-07-11 09:59:49,355  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562769501366331
2019-07-11 09:59:49,356 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:49,356 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 09:59:49,360 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:49,360 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 09:59:49,361 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 09:59:49,364 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 09:59:49,365  INFO 833 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562769501366331
2019-07-11 09:59:49,365 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 09:59:49,365 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 09:59:49,368 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:49,369 ERROR 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562769501366331] exception: not find PayRequestLog record by [orderNo:10110011562769501366331,payType:wx] 
2019-07-11 09:59:49,369 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:59:49,370 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 101(String)
2019-07-11 09:59:49,374 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:49,378 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 09:59:49,379 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190710(String)
2019-07-11 09:59:49,383 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 09:59:49,384 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:49,384 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 09:59:49,391 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 09:59:49,392 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 09:59:49,394 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 09:59:49.392(Timestamp)
2019-07-11 09:59:49,400 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 09:59:49,401 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:49,401 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 09:59:49,406 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 09:59:49,407 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:59:49,407 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), wx(String)
2019-07-11 09:59:49,419 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 6
2019-07-11 09:59:49,420 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:59:49,421 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 09:59:49,425 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 09:59:49,426 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:59:49,426 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 101(String)
2019-07-11 09:59:49,430 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:49,431 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:59:49,431 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 09:59:49,435 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 09:59:49,436  INFO 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: wx, date: 2019-07-10T09:57:43.687 - result paysCount: 6, refundsCount: 0
2019-07-11 09:59:49,438 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:49,443 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 228(Integer), wx(String), 支付(String), 10110011562696226366313(String), null, 9700(Integer), null, 2019-07-11 22:58:51.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 228(Integer), wx(String), 支付(String), 10110011562716709366314(String), null, 9700(Integer), null, 2019-07-11 22:58:51.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 228(Integer), wx(String), 支付(String), 10110011562747463366326(String), null, 7200(Integer), null, 2019-07-11 22:58:51.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 228(Integer), wx(String), 支付(String), 10110011562750358366328(String), null, 5(Integer), null, 2019-07-11 22:58:51.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 228(Integer), wx(String), 支付(String), 10110011562756105366329(String), null, 38900(Integer), null, 2019-07-11 22:58:51.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 228(Integer), wx(String), 支付(String), 10110011562769501366331(String), null, 19900(Integer), null, 2019-07-11 22:58:51.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 09:59:49,452 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 6
2019-07-11 09:59:49,455 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 09:59:49,457 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 6(Integer), 6(Integer), 6(Integer), 0(Integer), 0(Integer), 0(Integer), 85405(Integer), 0(Integer), 0(Integer), 0(Integer), 511(Integer), 0(Integer), 228(Integer)
2019-07-11 09:59:49,466 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 09:59:49,492  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-10T09:57:43.687] createCompareBatch successful
2019-07-11 09:59:49,495 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:49,496 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 09:59:49,500 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:59:49,500  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 09:57:43 CST 2019)
2019-07-11 09:59:49,501  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 09:57:43 CST 2019)
2019-07-11 09:59:49,501  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_501_20190709.csv] already exists, return local file
2019-07-11 09:59:49,510 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-11 09:59:49,511 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String)
2019-07-11 09:59:49,515 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 09:59:49,516 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-11 09:59:49,517 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String)
2019-07-11 09:59:49,524 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 09:59:49,525 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-11 09:59:49,525 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String)
2019-07-11 09:59:49,531 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 09:59:49,532 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-11 09:59:49,533 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String)
2019-07-11 09:59:49,538 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 09:59:49,539 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-11 09:59:49,539 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String)
2019-07-11 09:59:49,544 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 09:59:49,545 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:49,545 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 09:59:49,551 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 09:59:49,552 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 09:59:49,553 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), 0(Integer), 5(Integer), 0(Integer), 25(Integer), 0(Integer), {"总交易单数":5,"总交易额":0.00,"总退款金额":0.25,"手续费总金额":0.00000}(String), null
2019-07-11 09:59:49,558 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 09:59:49,560 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:49,560 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 09:59:49,563 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:59:49,564 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:49,566 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), null, null
2019-07-11 09:59:49,575 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 09:59:49,600  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T09:57:43.687] parse successful
2019-07-11 09:59:49,602 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:59:49,602 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190709(String), wx(String)
2019-07-11 09:59:49,606 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:49,607 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:59:49,607 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 501(String)
2019-07-11 09:59:49,640 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 5
2019-07-11 09:59:49,640 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 09:59:49,641 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String)
2019-07-11 09:59:49,651 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 09:59:49,652 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 09:59:49,652 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String)
2019-07-11 09:59:49,657 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 09:59:49,661 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 09:59:49,665 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String)
2019-07-11 09:59:49,670 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 09:59:49,674 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 09:59:49,675 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String)
2019-07-11 09:59:49,680 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 09:59:49,685 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 09:59:49,689 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String)
2019-07-11 09:59:49,713 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 09:59:49,717 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 09:59:49,718 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190709(String)
2019-07-11 09:59:49,722 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 09:59:49,723 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:49,723 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 09:59:49,728 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 09:59:49,729 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 09:59:49,734 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 09:59:49.729(Timestamp)
2019-07-11 09:59:49,739 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 09:59:49,741 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:49,741 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 09:59:49,748 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 09:59:49,749 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:59:49,750 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190709(String), wx(String)
2019-07-11 09:59:49,753 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:49,753 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:59:49,754 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 09:59:49,757 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 09:59:49,758 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:59:49,759 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 501(String)
2019-07-11 09:59:49,767 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 5
2019-07-11 09:59:49,768 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:59:49,769 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 09:59:49,772 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 09:59:49,772  INFO 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 501, payType: wx, date: 2019-07-09T09:57:43.687 - result paysCount: 0, refundsCount: 5
2019-07-11 09:59:49,774 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:49,779 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 229(Integer), wx(String), 退款(String), 10110011560327103363921(String), refund10110011560327103363921(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 229(Integer), wx(String), 退款(String), 10110011560334037363923(String), refund10110011560334037363923(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 229(Integer), wx(String), 退款(String), 10110011560398938363931(String), refund10110011560398938363931(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 229(Integer), wx(String), 退款(String), 10110011561694500364202(String), refund10110011561694500364202(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 229(Integer), wx(String), 退款(String), 10110011561951929364204(String), refund10110011561951929364204(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 09:59:49,783 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 5
2019-07-11 09:59:49,786 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 09:59:49,788 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 5(Integer), 5(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 25(Integer), 0(Integer), 0(Integer), 0(Integer), 229(Integer)
2019-07-11 09:59:49,791 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 09:59:49,823  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T09:57:43.687] createCompareBatch successful
2019-07-11 09:59:49,826 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:49,826 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 09:59:49,828 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:59:49,829  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Wed Jul 10 09:57:43 CST 2019)
2019-07-11 09:59:49,829  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=501, payType=wx, billDate=Wed Jul 10 09:57:43 CST 2019)
2019-07-11 09:59:49,830  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 request: {nonce_str=72T7EUM4ORwRc3pzeEiA0hGjCuq9DQwE, bill_date=20190710, appid=wx1e86ddc5b2485ab2, sign=717435B06C95C7E12B756A7F9C6126B28DAA819ADEDCA45C07C9CC08C5656A96, bill_type=ALL, mch_id=1429146602, sign_type=HMAC-SHA256}
2019-07-11 09:59:50,042  INFO 833 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,72T7EUM4ORwRc3pzeEiA0hGjCuq9DQwE,1562810390,200,api.mch.weixin.qq.com,true,6000,8000,0,0,0,0783A3775B064990A6E9CD49E9D56A4CCA49C29A20C34DD8CB3DA5CAC81D3980
2019-07-11 09:59:50,042  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : ﻿交易时间,公众账号ID,商户号,子商户号,设备号,微信订单号,商户订单号,用户标识,交易类型,交易状态,付款银行,货币种类,总金额,企业红包金额,微信退款单号,商户退款单号,退款金额,企业红包退款金额,退款类型,退款状态,商品名称,商户数据包,手续费,费率
`2019-07-10 16:57:07,`wxc9d0a70977ecf5fe,`1429146602,`0,`,`4200000343201907100504762389,`10110011562749010364282,`oSyi-4rB8pMx1uqy6_GpbsCQ_4qw,`JSAPI,`SUCCESS,`CFT,`CNY,`0.05,`0.00,`0,`0,`0.00,`0.00,`,`,`商品名称374,`,`0.00000,`0.60%
总交易单数,总交易额,总退款金额,总企业红包退款金额,手续费总金额
`1,`0.05,`0.00,`0.00,`0.00000

2019-07-11 09:59:50,042  INFO 833 --- [pool-5-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,72T7EUM4ORwRc3pzeEiA0hGjCuq9DQwE,1562810390,200,api.mch.weixin.qq.com,true,6000,8000,0,0,0,0783A3775B064990A6E9CD49E9D56A4CCA49C29A20C34DD8CB3DA5CAC81D3980
2019-07-11 09:59:50,042  INFO 833 --- [pool-5-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 09:59:50,042  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response content size: 428
2019-07-11 09:59:50,042  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file write to [wx_501_20190710.csv]
2019-07-11 09:59:50,043  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file [wx_501_20190710.csv] write success
2019-07-11 09:59:50,045 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-11 09:59:50,045 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562749010364282(String), wx(String)
2019-07-11 09:59:50,047 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:50,048 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:50,049 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190710(String), 10110011562749010364282(String), 4200000343201907100504762389(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxc9d0a70977ecf5fe","商户号":"1429146602","子商户号":"0","微信订单号":"4200000343201907100504762389","商户订单号":"10110011562749010364282","用户标识":"oSyi-4rB8pMx1uqy6_GpbsCQ_4qw","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"商品名称374","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 09:59:50.044(Timestamp)
2019-07-11 09:59:50,055 DEBUG 833 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 09:59:50,056 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:50,056 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 09:59:50,062 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 09:59:50,063 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 09:59:50,064 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190710(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"总交易单数":1,"总交易额":0.05,"总退款金额":0.00,"手续费总金额":0.00000}(String), null
2019-07-11 09:59:50,067 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 09:59:50,067 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:50,067 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 09:59:50,069 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 09:59:50,069 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:50,070 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190710(String), null, null
2019-07-11 09:59:50,073 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 09:59:50,100  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-10T09:57:43.687] parse successful
2019-07-11 09:59:50,101 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:59:50,101 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190710(String), wx(String)
2019-07-11 09:59:50,104 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 09:59:50,105 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 09:59:50,106 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110011562749010364282(String), wx(String)
2019-07-11 09:59:50,111 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:50,111  INFO 833 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110011562749010364282)
2019-07-11 09:59:50,115  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110011562749010364282: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110011562749010364282)
2019-07-11 09:59:50,115  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110011562749010364282 request: {out_trade_no=10110011562749010364282}
2019-07-11 09:59:50,506  INFO 833 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,K1q5ZOAdJLzOHO37H2ZJKMtA0oFU2QwE,1562810390,386,api.mch.weixin.qq.com,true,6000,8000,0,0,0,64A4DE0FEDD70FE6781AFC36423D7167289B6F73CDE6940C2C74BCD8CFDC3B1F
2019-07-11 09:59:50,506  INFO 833 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[2ITcrcNbNkrOLWFx]]></nonce_str>
<sign><![CDATA[60D8B2B8CBA25EDCE6D38625551C65889E7D17F545BB297184A36DD47814A309]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[oSyi-4rB8pMx1uqy6_GpbsCQ_4qw]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[JSAPI]]></trade_type>
<bank_type><![CDATA[CFT]]></bank_type>
<total_fee>5</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000343201907100504762389]]></transaction_id>
<out_trade_no><![CDATA[10110011562749010364282]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190710165707]]></time_end>
<trade_state><![CDATA[SUCCESS]]></trade_state>
<cash_fee>5</cash_fee>
<trade_state_desc><![CDATA[支付成功]]></trade_state_desc>
</xml>
2019-07-11 09:59:50,506  INFO 833 --- [pool-6-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,K1q5ZOAdJLzOHO37H2ZJKMtA0oFU2QwE,1562810390,386,api.mch.weixin.qq.com,true,6000,8000,0,0,0,64A4DE0FEDD70FE6781AFC36423D7167289B6F73CDE6940C2C74BCD8CFDC3B1F
2019-07-11 09:59:50,506  INFO 833 --- [pool-6-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 09:59:50,508  INFO 833 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000343201907100504762389, nonce_str=2ITcrcNbNkrOLWFx, trade_state=SUCCESS, bank_type=CFT, openid=oSyi-4rB8pMx1uqy6_GpbsCQ_4qw, sign=60D8B2B8CBA25EDCE6D38625551C65889E7D17F545BB297184A36DD47814A309, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=5, out_trade_no=10110011562749010364282, appid=wx1e86ddc5b2485ab2, total_fee=5, trade_state_desc=支付成功, trade_type=JSAPI, result_code=SUCCESS, attach=, time_end=20190710165707, is_subscribe=N, return_code=SUCCESS}
2019-07-11 09:59:50,508  INFO 833 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110011562749010364282 response: {transaction_id=4200000343201907100504762389, nonce_str=2ITcrcNbNkrOLWFx, trade_state=SUCCESS, bank_type=CFT, openid=oSyi-4rB8pMx1uqy6_GpbsCQ_4qw, sign=60D8B2B8CBA25EDCE6D38625551C65889E7D17F545BB297184A36DD47814A309, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=5, out_trade_no=10110011562749010364282, appid=wx1e86ddc5b2485ab2, total_fee=5, trade_state_desc=支付成功, trade_type=JSAPI, result_code=SUCCESS, attach=, time_end=20190710165707, is_subscribe=N, return_code=SUCCESS}
2019-07-11 09:59:50,510 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 09:59:50,510 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110011562749010364282(String), wx(String)
2019-07-11 09:59:50,513 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 09:59:50,513 DEBUG 833 --- [           main] c.i.p.m.t.dao.PayQueryResultMapper.save  : ==>  Preparing: INSERT INTO pay_center3_pay_query_result (id, app_id, pay_type, order_No, trade_No, fee_Type, cash_Amount, total_Amount, extra, trade_Time, details) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:50,514 DEBUG 833 --- [           main] c.i.p.m.t.dao.PayQueryResultMapper.save  : ==> Parameters: null, 501(String), wx(String), 10110011562749010364282(String), 4200000343201907100504762389(String), CNY(String), 5(Integer), 5(Integer), null, 2019-07-10 16:57:07.0(Timestamp), {"transaction_id":"4200000343201907100504762389","nonce_str":"2ITcrcNbNkrOLWFx","trade_state":"SUCCESS","bank_type":"CFT","openid":"oSyi-4rB8pMx1uqy6_GpbsCQ_4qw","sign":"60D8B2B8CBA25EDCE6D38625551C65889E7D17F545BB297184A36DD47814A309","return_msg":"OK","fee_type":"CNY","mch_id":"1429146602","cash_fee":"5","out_trade_no":"10110011562749010364282","appid":"wx1e86ddc5b2485ab2","total_fee":"5","trade_state_desc":"支付成功","trade_type":"JSAPI","result_code":"SUCCESS","attach":"","time_end":"20190710165707","is_subscribe":"N","return_code":"SUCCESS"}(String)
2019-07-11 09:59:50,517 DEBUG 833 --- [           main] c.i.p.m.t.dao.PayQueryResultMapper.save  : <==    Updates: 1
2019-07-11 09:59:50,547 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:59:50,547 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 501(String)
2019-07-11 09:59:50,549 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:50,552 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 09:59:50,552 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190710(String)
2019-07-11 09:59:50,555 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 09:59:50,555 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:50,556 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 09:59:50,558 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 09:59:50,559 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 09:59:50,559 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 09:59:50.559(Timestamp)
2019-07-11 09:59:50,563 DEBUG 833 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 09:59:50,565 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 09:59:50,565 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 09:59:50,575 DEBUG 833 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 09:59:50,576 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 09:59:50,576 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190710(String), wx(String)
2019-07-11 09:59:50,580 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 09:59:50,582 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:59:50,582 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 09:59:50,585 DEBUG 833 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 09:59:50,586 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 09:59:50,586 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 501(String)
2019-07-11 09:59:50,588 DEBUG 833 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 09:59:50,589 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 09:59:50,590 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 09:59:50,592 DEBUG 833 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 09:59:50,592  INFO 833 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 501, payType: wx, date: 2019-07-10T09:57:43.687 - result paysCount: 1, refundsCount: 0
2019-07-11 09:59:50,593 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 09:59:50,594 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 230(Integer), wx(String), 支付(String), 10110011562749010364282(String), null, 5(Integer), null, 2019-07-11 22:58:52.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 09:59:50,598 DEBUG 833 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 1
2019-07-11 09:59:50,599 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 09:59:50,599 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 1(Integer), 1(Integer), 1(Integer), 0(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 230(Integer)
2019-07-11 09:59:50,602 DEBUG 833 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 09:59:50,630  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-10T09:57:43.687] createCompareBatch successful
2019-07-11 09:59:50,631  INFO 833 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-11 09:59:50,651  INFO 833 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-11 09:59:50,654  INFO 833 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-11 09:59:50,676  INFO 833 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-11 11:00:18,368  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 909 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-11 11:00:18,370  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-11 11:00:20,779  INFO 909 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$5fb857ac] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 11:00:21,098  INFO 909 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$81c9de4e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 11:00:21,134  INFO 909 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$8c064629] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 11:00:21,243  INFO 909 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-11 11:00:21,497  INFO 909 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-11 11:00:21,516  INFO 909 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 11:00:21,533  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-11 11:00:21,536  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:00:21,537  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:00:21,538  INFO 909 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 11:00:21,538  INFO 909 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 11:00:21,539  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-11 11:00:21,540  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:00:21,540  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:00:21,541  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-11 11:00:21,542  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:00:21,542  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:00:21,543  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 11:00:21,543  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:00:21,544  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:00:21,544  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 11:00:21,545  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:00:21,545  INFO 909 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:00:21,811  INFO 909 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-11 11:00:22,923  INFO 909 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-11 11:00:23,557  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$971223b6
2019-07-11 11:00:23,573  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$b277f171
2019-07-11 11:00:23,707  INFO 909 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-11 11:00:23,707  INFO 909 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-11 11:00:25,306  INFO 909 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-11 11:00:26,329  INFO 909 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-11 11:00:26,999  INFO 909 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-11 11:00:27,875  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 10.54 seconds (JVM running for 11.727)
2019-07-11 11:00:28,412  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-11 11:00:28,583 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:28,651 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 11:00:28,692 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:28,709  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 11:00:28 CST 2019)
2019-07-11 11:00:28,710  INFO 909 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 11:00:28 CST 2019)
2019-07-11 11:00:28,811 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:28,812 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String), 503(String)
2019-07-11 11:00:28,816 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:28,818 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:28,870 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 503(String), alipay(String), 20190709(String), 10110011562641960364267(String), 2019070922001486611048342510(String), 5(Integer), 0(Integer), 2019-07-09 19:15:44.0(Timestamp), {"refund_amount":0.05,"支付宝交易号":"2019070922001486611048342510","商户订单号":"10110011562641960364267","业务类型":"交易","商品名称":"商品名称974","创建时间":"2019-07-09 11:15:43","完成时间":"2019-07-09 11:15:44","门店编号":"dev","对方账户":"*佳鸿(641***@qq.com)","订单金额（元）":0.05,"商家实收（元）":0.05,"退款批次号/请求号":"","服务费（元）":0.00,"备注":""}(String), 2019-07-11 11:00:28.81(Timestamp)
2019-07-11 11:00:28,876 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:00:28,881 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:28,882 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 11:00:28,889 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:00:28,890 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 11:00:28,900 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190709(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":58,"退款订单总笔数":24,"订单金额（元）":5107.15,"商家实收（元）":5107.15,"服务费（元）":-62.99,"实收净额（元）":5044.16}(String), null
2019-07-11 11:00:28,907 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:28,908 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:28,909 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 11:00:28,912 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:28,913 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:28,915 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190709(String), null, null
2019-07-11 11:00:28,919 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:28,978  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T11:00:28.415] parse successful
2019-07-11 11:00:28,999 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:29,000 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), alipay(String)
2019-07-11 11:00:29,030 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 11:00:29,032 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:00:29,033 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 503(String), 10110011562641960364267(String), alipay(String)
2019-07-11 11:00:29,036 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:29,037  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=503, tradeType=null, payType=alipay, orderNo=10110011562641960364267)
2019-07-11 11:00:29,039  INFO 909 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute payQuery payQuery-alipay-10110011562641960364267: PayQueryRequestVO(appId=503, tradeType=null, payType=alipay, orderNo=10110011562641960364267)
2019-07-11 11:00:29,039  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562641960364267,payType=alipay
2019-07-11 11:00:29,040  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562641960364267
2019-07-11 11:00:29,081 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:29,082 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-11 11:00:29,089 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 1
2019-07-11 11:00:29,090  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,payNotifyList return orderNo:10110011562641960364267
2019-07-11 11:00:29,092 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:00:29,095 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-11 11:00:29,102 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 11:00:29,103  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType return:  orderNo=10110011562641960364267,tradeType=lite
2019-07-11 11:00:29,110 ERROR 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562641960364267] exception: could not found alipay-config for appId: 503;tradeType:lite
2019-07-11 11:00:29,111 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:29,112 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 503(String)
2019-07-11 11:00:29,116 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:29,121 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:00:29,123 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190709(String)
2019-07-11 11:00:29,126 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:00:29,128 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:29,129 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 11:00:29,135 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:00:29,136 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:00:29,142 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-11 11:00:29.136(Timestamp)
2019-07-11 11:00:29,148 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:00:29,150 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:29,153 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 11:00:29,167 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 11:00:29,173 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:29,176 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), alipay(String)
2019-07-11 11:00:29,182 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 11:00:29,184 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:29,186 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 503(String)
2019-07-11 11:00:29,189 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:29,192 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:29,193 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 503(String)
2019-07-11 11:00:29,196 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:29,198 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:29,200 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 503(String)
2019-07-11 11:00:29,206 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:29,208  INFO 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-09T11:00:28.415 - result paysCount: 1, refundsCount: 0
2019-07-11 11:00:29,222 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:29,229 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 231(Integer), alipay(String), 支付(String), 10110011562641960364267(String), null, 5(Integer), null, 2019-07-09 19:15:44.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 11:00:29,233 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 1
2019-07-11 11:00:29,240 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 11:00:29,242 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 1(Integer), 1(Integer), 1(Integer), 0(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 231(Integer)
2019-07-11 11:00:29,246 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 11:00:29,277  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T11:00:28.415] createCompareBatch successful
2019-07-11 11:00:29,280 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:29,281 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 11:00:29,284 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:29,285  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 11:00:28 CST 2019)
2019-07-11 11:00:29,286  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 11:00:28 CST 2019)
2019-07-11 11:00:29,294  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 request: {nonce_str=mqLEzClIFio4F73SQ6rH26NniHX1sEYB, bill_date=20190709, appid=wxd86049a121654669, sign=EF2AA172B5325291D59A28DEF93CA8D8D1C2E8E8A16D5D0297CF8FFB6D04D69A, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-11 11:00:29,794  INFO 909 --- [           main] wxpay java sdk                           : report worker num: 6
2019-07-11 11:00:29,797  INFO 909 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,mqLEzClIFio4F73SQ6rH26NniHX1sEYB,1562814029,455,api.mch.weixin.qq.com,true,6000,8000,0,0,0,131CEE91461DADEBA8C61161CC22E73C6AEACDEB29289E2C5CD21DC104F851BA
2019-07-11 11:00:29,797  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 11:00:29,797  INFO 909 --- [pool-2-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,mqLEzClIFio4F73SQ6rH26NniHX1sEYB,1562814029,455,api.mch.weixin.qq.com,true,6000,8000,0,0,0,131CEE91461DADEBA8C61161CC22E73C6AEACDEB29289E2C5CD21DC104F851BA
2019-07-11 11:00:29,797  INFO 909 --- [pool-2-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 11:00:29,797  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response content size: 149
2019-07-11 11:00:29,798  INFO 909 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 11:00:29,801  INFO 909 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 11:00:29,802  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 11:00:29,802  WARN 909 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-11 11:00:29,803 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:29,804 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190709(String), null, No Bill Exist(String)
2019-07-11 11:00:29,809 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:29,843  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T11:00:28.415] parse successful
2019-07-11 11:00:29,844 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:29,845 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), wx(String)
2019-07-11 11:00:29,848 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:29,849 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:29,850 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 503(String)
2019-07-11 11:00:29,853 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:29,855 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:00:29,856 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190709(String)
2019-07-11 11:00:29,859 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:00:29,861 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:29,861 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 11:00:29,864 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:00:29,865 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:00:29,867 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 11:00:29.865(Timestamp)
2019-07-11 11:00:29,871 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:00:29,872 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:29,873 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 11:00:29,876 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:00:29,876  INFO 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-09T11:00:28.415 - result is Null
2019-07-11 11:00:29,927  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T11:00:28.415] createCompareBatch successful
2019-07-11 11:00:29,931 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:29,931 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 11:00:29,933 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:29,934  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Wed Jul 10 11:00:28 CST 2019)
2019-07-11 11:00:29,935  INFO 909 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Wed Jul 10 11:00:28 CST 2019)
2019-07-11 11:00:29,939 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:29,940 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 11:00:29,942 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:00:29,943 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 11:00:29,944 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190710(String), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":10,"退款订单总笔数":1,"订单金额（元）":2763.08,"商家实收（元）":2763.08,"服务费（元）":-19.00,"实收净额（元）":2744.08}(String), null
2019-07-11 11:00:29,949 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:29,950 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:29,950 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 11:00:29,952 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:29,953 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:29,953 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190710(String), null, null
2019-07-11 11:00:29,957 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:30,002  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-10T11:00:28.415] parse successful
2019-07-11 11:00:30,002 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:30,003 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190710(String), alipay(String)
2019-07-11 11:00:30,006 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:30,007 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,007 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 503(String)
2019-07-11 11:00:30,010 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:30,012 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:00:30,014 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190710(String)
2019-07-11 11:00:30,017 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:00:30,018 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,019 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 11:00:30,022 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:00:30,023 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:00:30,023 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190710(String), alipay(String), 20190710(String), 2019-07-11 11:00:30.023(Timestamp)
2019-07-11 11:00:30,027 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:00:30,028 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,028 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 11:00:30,031 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 11:00:30,033 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:30,039 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190710(String), alipay(String)
2019-07-11 11:00:30,042 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:30,044 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:30,045 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 503(String)
2019-07-11 11:00:30,048 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:30,049 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,050 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 503(String)
2019-07-11 11:00:30,053 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:30,054 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:30,055 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 503(String)
2019-07-11 11:00:30,058 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:30,059  INFO 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-10T11:00:28.415 - result paysCount: 0, refundsCount: 0
2019-07-11 11:00:30,119  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-10T11:00:28.415] createCompareBatch successful
2019-07-11 11:00:30,122 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,122 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 11:00:30,125 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:30,126  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Wed Jul 10 11:00:28 CST 2019)
2019-07-11 11:00:30,126  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=503, payType=wx, billDate=Wed Jul 10 11:00:28 CST 2019)
2019-07-11 11:00:30,127  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 request: {nonce_str=HavJoXt6PbEH7Za09egVhq1mcQZ3mAF9, bill_date=20190710, appid=wxd86049a121654669, sign=14E7E1FEA412D0E5242F178EED235EA234E281C9FBD9A6DAA40D32BF7476AD09, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-11 11:00:30,319  INFO 909 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,HavJoXt6PbEH7Za09egVhq1mcQZ3mAF9,1562814030,188,api.mch.weixin.qq.com,true,6000,8000,0,0,0,54E046BB0804ACA735A8AB5A9BE48A311FB6CB40E90B08D6169FAA0E424FDE12
2019-07-11 11:00:30,319  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 11:00:30,319  INFO 909 --- [pool-3-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,HavJoXt6PbEH7Za09egVhq1mcQZ3mAF9,1562814030,188,api.mch.weixin.qq.com,true,6000,8000,0,0,0,54E046BB0804ACA735A8AB5A9BE48A311FB6CB40E90B08D6169FAA0E424FDE12
2019-07-11 11:00:30,319  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response content size: 149
2019-07-11 11:00:30,319  INFO 909 --- [pool-3-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 11:00:30,319  INFO 909 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 11:00:30,322  INFO 909 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 11:00:30,322  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 11:00:30,322  WARN 909 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-11 11:00:30,323 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:30,323 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190710(String), null, No Bill Exist(String)
2019-07-11 11:00:30,326 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:30,361  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-10T11:00:28.415] parse successful
2019-07-11 11:00:30,362 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:30,363 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190710(String), wx(String)
2019-07-11 11:00:30,366 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:30,367 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,367 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 503(String)
2019-07-11 11:00:30,370 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:30,373 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:00:30,373 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190710(String)
2019-07-11 11:00:30,377 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:00:30,378 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,378 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 11:00:30,401 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:00:30,401 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:00:30,402 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 11:00:30.401(Timestamp)
2019-07-11 11:00:30,406 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:00:30,407 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,407 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 11:00:30,410 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:00:30,410  INFO 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-10T11:00:28.415 - result is Null
2019-07-11 11:00:30,446  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-10T11:00:28.415] createCompareBatch successful
2019-07-11 11:00:30,449 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,450 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 11:00:30,454 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:30,454  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 11:00:28 CST 2019)
2019-07-11 11:00:30,455  INFO 909 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 11:00:28 CST 2019)
2019-07-11 11:00:30,469 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,469 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String), 101(String)
2019-07-11 11:00:30,474 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,475 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:30,477 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), alipay(String), 20190709(String), 10110011562641960364267(String), 2019070922001486611048342510(String), 5(Integer), 0(Integer), 2019-07-09 19:15:44.0(Timestamp), {"refund_amount":0.05,"支付宝交易号":"2019070922001486611048342510","商户订单号":"10110011562641960364267","业务类型":"交易","商品名称":"商品名称974","创建时间":"2019-07-09 11:15:43","完成时间":"2019-07-09 11:15:44","门店编号":"dev","对方账户":"*佳鸿(641***@qq.com)","订单金额（元）":0.05,"商家实收（元）":0.05,"退款批次号/请求号":"","服务费（元）":0.00,"备注":""}(String), 2019-07-11 11:00:30.468(Timestamp)
2019-07-11 11:00:30,482 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:00:30,483 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,483 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 11:00:30,486 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:00:30,487 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 11:00:30,488 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":58,"退款订单总笔数":24,"订单金额（元）":5107.15,"商家实收（元）":5107.15,"服务费（元）":-62.99,"实收净额（元）":5044.16}(String), null
2019-07-11 11:00:30,493 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:30,494 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,494 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 11:00:30,497 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:30,498 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:30,498 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), null, null
2019-07-11 11:00:30,503 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:30,537  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T11:00:28.415] parse successful
2019-07-11 11:00:30,537 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:30,538 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-11 11:00:30,542 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 11:00:30,543 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:00:30,543 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562641960364267(String), alipay(String)
2019-07-11 11:00:30,551 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 11:00:30,551 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,552 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-11 11:00:30,555 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:30,557 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:00:30,558 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190709(String)
2019-07-11 11:00:30,560 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:00:30,561 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,561 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 11:00:30,564 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:00:30,565 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:00:30,566 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-11 11:00:30.564(Timestamp)
2019-07-11 11:00:30,569 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:00:30,570 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,570 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 11:00:30,573 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 11:00:30,574 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:30,574 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-11 11:00:30,578 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 11:00:30,578 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:30,579 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 11:00:30,585 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 14
2019-07-11 11:00:30,586 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,586 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-11 11:00:30,589 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:30,589 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:30,590 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 11:00:30,592 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:30,593  INFO 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-09T11:00:28.415 - result paysCount: 15, refundsCount: 0
2019-07-11 11:00:30,598 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:30,608 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 235(Integer), alipay(String), 支付(String), 10110011562641960364267(String), null, 5(Integer), null, 2019-07-09 19:15:44.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 235(Integer), alipay(String), 支付(String), 10110011562578001364264(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 235(Integer), alipay(String), 支付(String), fanhangtest-331(String), null, 0(Integer), 100(Integer), null, -1(Integer), 支付平台查无此单(String), null, 235(Integer), alipay(String), 支付(String), fanhangtest-330(String), null, 0(Integer), 100(Integer), null, -1(Integer), 支付平台查无此单(String), null, 235(Integer), alipay(String), 支付(String), 10110011562575830364256(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 235(Integer), alipay(String), 支付(String), 10110011562573708364254(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 235(Integer), alipay(String), 支付(String), 10110011562575964364257(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 235(Integer), alipay(String), 支付(String), 10110011562576075364259(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 235(Integer), alipay(String), 支付(String), 10110011562576136364260(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 235(Integer), alipay(String), 支付(String), 10110011562576378364262(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 235(Integer), alipay(String), 支付(String), 10110011562576307364261(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 235(Integer), alipay(String), 支付(String), 10110011562575765364255(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 235(Integer), alipay(String), 支付(String), 10110011562578989364265(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 235(Integer), alipay(String), 支付(String), 10110011562576040364258(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 235(Integer), alipay(String), 支付(String), 10110011562576689364263(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null
2019-07-11 11:00:30,614 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 15
2019-07-11 11:00:30,616 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 11:00:30,617 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 15(Integer), 15(Integer), 1(Integer), 14(Integer), 0(Integer), 0(Integer), 5(Integer), 260(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 235(Integer)
2019-07-11 11:00:30,625 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 11:00:30,662  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T11:00:28.415] createCompareBatch successful
2019-07-11 11:00:30,665 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,665 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 11:00:30,667 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:30,668  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 11:00:28 CST 2019)
2019-07-11 11:00:30,668  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 11:00:28 CST 2019)
2019-07-11 11:00:30,669  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_101_20190709.csv] already exists, return local file
2019-07-11 11:00:30,680 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,681 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String), 101(String)
2019-07-11 11:00:30,685 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:00:30,686 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,687 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String), 101(String)
2019-07-11 11:00:30,691 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:00:30,692 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,693 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String), 101(String)
2019-07-11 11:00:30,696 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,697 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:30,701 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562630251366259(String), 4200000340201907096741436916(String), 19900(Integer), 119(Integer), null, {"merchant_income_charge":199.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000340201907096741436916","商户订单号":"10110011562630251366259","用户标识":"oF9zhvoGcCB1bh1dX_FnTS1RoI1w","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":199.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机","手续费":1.19000,"费率":"0.60%"}(String), 2019-07-11 11:00:30.692(Timestamp)
2019-07-11 11:00:30,706 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:00:30,707 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,708 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String), 101(String)
2019-07-11 11:00:30,711 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,712 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:30,713 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562660958366285(String), 4200000343201907096959558243(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000343201907096959558243","商户订单号":"10110011562660958366285","用户标识":"oF9zhvuwwXGs0OPoPdSuknufzzuc","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"口红","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 11:00:30.707(Timestamp)
2019-07-11 11:00:30,721 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:00:30,722 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,723 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String), 101(String)
2019-07-11 11:00:30,726 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,726 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:30,728 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562610950366258(String), 4200000353201907091881341553(String), 22900(Integer), 137(Integer), null, {"merchant_income_charge":229.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000353201907091881341553","商户订单号":"10110011562610950366258","用户标识":"oF9zhvs9znoUohMT1cJmQ6ZxFRFY","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"LQT","货币种类":"CNY","总金额":229.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"CHARLEE&KLTH 手提金属提把钱包小ck10840136-单肩斜跨女包小方包","手续费":1.37000,"费率":"0.60%"}(String), 2019-07-11 11:00:30.722(Timestamp)
2019-07-11 11:00:30,731 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:00:30,732 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,732 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String), 101(String)
2019-07-11 11:00:30,735 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,735 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:30,736 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562684369366311(String), 4200000354201907098493063836(String), 7200(Integer), 43(Integer), null, {"merchant_income_charge":72.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000354201907098493063836","商户订单号":"10110011562684369366311","用户标识":"o2st65Xf59UzUqdqHGjfP2i8mBC8","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"GDB_CREDIT","货币种类":"CNY","总金额":72.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女","手续费":0.43000,"费率":"0.60%"}(String), 2019-07-11 11:00:30.732(Timestamp)
2019-07-11 11:00:30,742 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:00:30,744 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,744 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 11:00:30,748 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:00:30,749 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 11:00:30,751 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), 4(Integer), 2(Integer), 50005(Integer), 40505(Integer), 0(Integer), {"总交易单数":6,"总交易额":500.05,"总退款金额":405.05,"手续费总金额":0.56000}(String), null
2019-07-11 11:00:30,755 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:30,757 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,758 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 11:00:30,760 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:30,761 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:30,762 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), null, null
2019-07-11 11:00:30,765 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:30,794  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T11:00:28.415] parse successful
2019-07-11 11:00:30,795 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:30,796 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), wx(String)
2019-07-11 11:00:30,803 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-11 11:00:30,804 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:00:30,809 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562630251366259(String), wx(String)
2019-07-11 11:00:30,812 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,813  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562630251366259)
2019-07-11 11:00:30,814  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562630251366259,payType=wx
2019-07-11 11:00:30,814  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562630251366259
2019-07-11 11:00:30,815 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:30,816 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 11:00:30,819 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:30,820 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:30,821 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 11:00:30,824 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:30,825  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562630251366259
2019-07-11 11:00:30,825 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:00:30,826 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 11:00:30,828 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,828 ERROR 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562630251366259] exception: not find PayRequestLog record by [orderNo:10110011562630251366259,payType:wx] 
2019-07-11 11:00:30,829 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:00:30,829 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562660958366285(String), wx(String)
2019-07-11 11:00:30,832 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,833  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562660958366285)
2019-07-11 11:00:30,833  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562660958366285,payType=wx
2019-07-11 11:00:30,833  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562660958366285
2019-07-11 11:00:30,834 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:30,834 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 11:00:30,837 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:30,838 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:30,840 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 11:00:30,844 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:30,845  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562660958366285
2019-07-11 11:00:30,846 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:00:30,846 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 11:00:30,849 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,850 ERROR 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562660958366285] exception: not find PayRequestLog record by [orderNo:10110011562660958366285,payType:wx] 
2019-07-11 11:00:30,851 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:00:30,851 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562610950366258(String), wx(String)
2019-07-11 11:00:30,854 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,856  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562610950366258)
2019-07-11 11:00:30,856  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562610950366258,payType=wx
2019-07-11 11:00:30,856  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562610950366258
2019-07-11 11:00:30,857 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:30,857 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 11:00:30,860 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:30,861 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:30,862 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 11:00:30,865 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:30,866  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562610950366258
2019-07-11 11:00:30,866 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:00:30,867 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 11:00:30,870 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,870 ERROR 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562610950366258] exception: not find PayRequestLog record by [orderNo:10110011562610950366258,payType:wx] 
2019-07-11 11:00:30,871 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:00:30,872 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562684369366311(String), wx(String)
2019-07-11 11:00:30,874 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,875  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562684369366311)
2019-07-11 11:00:30,875  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562684369366311,payType=wx
2019-07-11 11:00:30,876  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562684369366311
2019-07-11 11:00:30,876 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:30,877 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 11:00:30,879 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:30,880 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:30,881 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 11:00:30,883 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:30,884  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562684369366311
2019-07-11 11:00:30,885 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:00:30,885 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 11:00:30,890 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,891 ERROR 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562684369366311] exception: not find PayRequestLog record by [orderNo:10110011562684369366311,payType:wx] 
2019-07-11 11:00:30,891 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,892 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 101(String)
2019-07-11 11:00:30,896 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 2
2019-07-11 11:00:30,897 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:00:30,898 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String)
2019-07-11 11:00:30,901 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-11 11:00:30,902  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@c93c0d30, appId=101, payType=wx, orderNo=10110011561291536365966, refundNo=refund10110011561291536365966)
2019-07-11 11:00:30,903  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011561291536365966,payType=wx
2019-07-11 11:00:30,903  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011561291536365966
2019-07-11 11:00:30,904 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:30,904 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 11:00:30,907 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:30,909 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:30,909 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 11:00:30,913 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:30,914  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011561291536365966
2019-07-11 11:00:30,914 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:00:30,915 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 11:00:30,918 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,919 ERROR 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011561291536365966] exception: not find PayRequestLog record by [orderNo:10110011561291536365966,payType:wx] 
2019-07-11 11:00:30,920 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:00:30,920 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String)
2019-07-11 11:00:30,923 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-11 11:00:30,924  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@5755a13c, appId=101, payType=wx, orderNo=10110011558860422365280, refundNo=refund10110011558860422365280)
2019-07-11 11:00:30,924  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011558860422365280,payType=wx
2019-07-11 11:00:30,924  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011558860422365280
2019-07-11 11:00:30,924 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:30,925 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 11:00:30,927 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:30,928 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:30,929 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 11:00:30,932 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:30,932  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011558860422365280
2019-07-11 11:00:30,933 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:00:30,934 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 11:00:30,937 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:30,938 ERROR 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011558860422365280] exception: not find PayRequestLog record by [orderNo:10110011558860422365280,payType:wx] 
2019-07-11 11:00:30,942 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:00:30,945 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190709(String)
2019-07-11 11:00:30,948 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:00:30,949 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,950 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 11:00:30,954 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:00:30,954 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:00:30,956 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 11:00:30.954(Timestamp)
2019-07-11 11:00:30,959 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:00:30,960 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:30,961 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 11:00:30,964 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 11:00:30,965 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:30,965 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), wx(String)
2019-07-11 11:00:30,973 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-11 11:00:30,975 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:30,976 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 11:00:30,979 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:30,980 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:30,981 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 101(String)
2019-07-11 11:00:30,986 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 2
2019-07-11 11:00:30,990 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:30,991 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 11:00:30,995 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:30,996  INFO 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: wx, date: 2019-07-09T11:00:28.415 - result paysCount: 4, refundsCount: 2
2019-07-11 11:00:31,001 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,008 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 236(Integer), wx(String), 支付(String), 10110011562630251366259(String), null, 19900(Integer), null, 2019-07-11 23:59:33.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 236(Integer), wx(String), 支付(String), 10110011562660958366285(String), null, 5(Integer), null, 2019-07-11 23:59:33.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 236(Integer), wx(String), 支付(String), 10110011562610950366258(String), null, 22900(Integer), null, 2019-07-11 23:59:33.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 236(Integer), wx(String), 支付(String), 10110011562684369366311(String), null, 7200(Integer), null, 2019-07-11 23:59:33.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 236(Integer), wx(String), 退款(String), 10110011561291536365966(String), refund10110011561291536365966(String), 40500(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 236(Integer), wx(String), 退款(String), 10110011558860422365280(String), refund10110011558860422365280(String), 5(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 11:00:31,013 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 6
2019-07-11 11:00:31,015 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 11:00:31,017 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 6(Integer), 6(Integer), 4(Integer), 0(Integer), 2(Integer), 0(Integer), 50005(Integer), 0(Integer), 40505(Integer), 0(Integer), 299(Integer), -243(Integer), 236(Integer)
2019-07-11 11:00:31,022 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 11:00:31,105  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T11:00:28.415] createCompareBatch successful
2019-07-11 11:00:31,108 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,109 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 11:00:31,115 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:31,116  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Wed Jul 10 11:00:28 CST 2019)
2019-07-11 11:00:31,116  INFO 909 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Wed Jul 10 11:00:28 CST 2019)
2019-07-11 11:00:31,119 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,120 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 11:00:31,123 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:00:31,124 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 11:00:31,126 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190710(String), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":10,"退款订单总笔数":1,"订单金额（元）":2763.08,"商家实收（元）":2763.08,"服务费（元）":-19.00,"实收净额（元）":2744.08}(String), null
2019-07-11 11:00:31,130 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:31,131 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,133 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 11:00:31,137 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:31,138 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,139 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190710(String), null, null
2019-07-11 11:00:31,142 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:31,178  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-10T11:00:28.415] parse successful
2019-07-11 11:00:31,180 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:31,180 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), alipay(String)
2019-07-11 11:00:31,185 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:31,186 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,187 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 101(String)
2019-07-11 11:00:31,190 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:31,193 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:00:31,193 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190710(String)
2019-07-11 11:00:31,196 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:00:31,197 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,197 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 11:00:31,200 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:00:31,200 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:00:31,201 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190710(String), alipay(String), 20190710(String), 2019-07-11 11:00:31.2(Timestamp)
2019-07-11 11:00:31,205 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:00:31,207 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,208 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 11:00:31,212 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 11:00:31,213 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:31,213 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), alipay(String)
2019-07-11 11:00:31,216 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:31,217 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:31,217 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 11:00:31,225 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 4
2019-07-11 11:00:31,226 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,227 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 101(String)
2019-07-11 11:00:31,230 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:31,230 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:31,231 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 11:00:31,234 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:31,235  INFO 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-10T11:00:28.415 - result paysCount: 0, refundsCount: 0
2019-07-11 11:00:31,281  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-10T11:00:28.415] createCompareBatch successful
2019-07-11 11:00:31,284 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,285 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 11:00:31,288 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:31,288  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Wed Jul 10 11:00:28 CST 2019)
2019-07-11 11:00:31,288  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=101, payType=wx, billDate=Wed Jul 10 11:00:28 CST 2019)
2019-07-11 11:00:31,288  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_101_20190710.csv] already exists, return local file
2019-07-11 11:00:31,290 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,291 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562750358366328(String), wx(String), 101(String)
2019-07-11 11:00:31,294 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,295 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,296 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562750358366328(String), 4200000344201907100111506573(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907100111506573","商户订单号":"10110011562750358366328","用户标识":"o2st65T1fiFkBV5u0VCK4hCcbd9g","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"口红","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 11:00:31.29(Timestamp)
2019-07-11 11:00:31,301 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:00:31,301 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,302 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562747463366326(String), wx(String), 101(String)
2019-07-11 11:00:31,304 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,304 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,305 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562747463366326(String), 4200000345201907108271098923(String), 7200(Integer), 43(Integer), null, {"merchant_income_charge":72.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000345201907108271098923","商户订单号":"10110011562747463366326","用户标识":"o2st65Xf59UzUqdqHGjfP2i8mBC8","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"GZCB_CREDIT","货币种类":"CNY","总金额":72.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女","手续费":0.43000,"费率":"0.60%"}(String), 2019-07-11 11:00:31.301(Timestamp)
2019-07-11 11:00:31,310 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:00:31,310 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,311 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562696226366313(String), wx(String), 101(String)
2019-07-11 11:00:31,313 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,314 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,315 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562696226366313(String), 4200000348201907106511074240(String), 9700(Integer), 58(Integer), null, {"merchant_income_charge":97.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000348201907106511074240","商户订单号":"10110011562696226366313","用户标识":"oF9zhvqxjkPiRuAtAE1I7DM8D8DM","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"ICBC_DEBIT","货币种类":"CNY","总金额":97.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"限时特惠法国欧缇丽大葡萄喷雾200ml","手续费":0.58000,"费率":"0.60%"}(String), 2019-07-11 11:00:31.31(Timestamp)
2019-07-11 11:00:31,318 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:00:31,319 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,320 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562756105366329(String), wx(String), 101(String)
2019-07-11 11:00:31,322 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,323 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,323 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562756105366329(String), 4200000357201907106116812608(String), 38900(Integer), 233(Integer), null, {"merchant_income_charge":389.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000357201907106116812608","商户订单号":"10110011562756105366329","用户标识":"o2st65Q1-foCJuSTbu43TTsROVEc","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CITIC_CREDIT","货币种类":"CNY","总金额":389.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【爆款断货王】李佳琦墙裂推荐蒋梦婕同款SKG便携非击打电极片颈部按摩仪4098","手续费":2.33000,"费率":"0.60%"}(String), 2019-07-11 11:00:31.319(Timestamp)
2019-07-11 11:00:31,327 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:00:31,328 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,328 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562769501366331(String), wx(String), 101(String)
2019-07-11 11:00:31,331 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,332 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,333 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562769501366331(String), 4200000356201907109364537299(String), 19900(Integer), 119(Integer), null, {"merchant_income_charge":199.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000356201907109364537299","商户订单号":"10110011562769501366331","用户标识":"oF9zhvufx-oO_DF93qVSb29GUK9s","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"LQT","货币种类":"CNY","总金额":199.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机","手续费":1.19000,"费率":"0.60%"}(String), 2019-07-11 11:00:31.328(Timestamp)
2019-07-11 11:00:31,337 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:00:31,338 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,339 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562716709366314(String), wx(String), 101(String)
2019-07-11 11:00:31,342 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,344 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,345 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562716709366314(String), 4200000343201907102910159982(String), 9700(Integer), 58(Integer), null, {"merchant_income_charge":97.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000343201907102910159982","商户订单号":"10110011562716709366314","用户标识":"o2st65TO8eXX0Jtoa1m1i82JiNXc","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":97.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"限时特惠法国欧缇丽大葡萄喷雾200ml","手续费":0.58000,"费率":"0.60%"}(String), 2019-07-11 11:00:31.338(Timestamp)
2019-07-11 11:00:31,349 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:00:31,350 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,351 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 11:00:31,354 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:00:31,355 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 11:00:31,356 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190710(String), 6(Integer), 0(Integer), 85405(Integer), 0(Integer), 5(Integer), {"总交易单数":6,"总交易额":854.05,"总退款金额":0.00,"手续费总金额":5.11000}(String), null
2019-07-11 11:00:31,359 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:31,360 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,360 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 11:00:31,363 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:31,363 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,364 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190710(String), null, null
2019-07-11 11:00:31,368 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:31,446  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-10T11:00:28.415] parse successful
2019-07-11 11:00:31,447 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:31,447 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), wx(String)
2019-07-11 11:00:31,461 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 6
2019-07-11 11:00:31,462 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:00:31,462 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562750358366328(String), wx(String)
2019-07-11 11:00:31,465 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,466  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562750358366328)
2019-07-11 11:00:31,466  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562750358366328,payType=wx
2019-07-11 11:00:31,466  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562750358366328
2019-07-11 11:00:31,466 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:31,467 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 11:00:31,469 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:31,470 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:31,471 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 11:00:31,475 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:31,476  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562750358366328
2019-07-11 11:00:31,477 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:00:31,478 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 11:00:31,481 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,481 ERROR 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562750358366328] exception: not find PayRequestLog record by [orderNo:10110011562750358366328,payType:wx] 
2019-07-11 11:00:31,482 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:00:31,482 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562747463366326(String), wx(String)
2019-07-11 11:00:31,484 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,485  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562747463366326)
2019-07-11 11:00:31,485  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562747463366326,payType=wx
2019-07-11 11:00:31,485  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562747463366326
2019-07-11 11:00:31,486 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:31,486 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 11:00:31,489 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:31,489 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:31,490 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 11:00:31,492 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:31,493  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562747463366326
2019-07-11 11:00:31,493 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:00:31,493 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 11:00:31,495 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,496 ERROR 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562747463366326] exception: not find PayRequestLog record by [orderNo:10110011562747463366326,payType:wx] 
2019-07-11 11:00:31,496 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:00:31,497 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562696226366313(String), wx(String)
2019-07-11 11:00:31,499 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,499  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562696226366313)
2019-07-11 11:00:31,500  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562696226366313,payType=wx
2019-07-11 11:00:31,500  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562696226366313
2019-07-11 11:00:31,500 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:31,501 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 11:00:31,504 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:31,505 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:31,505 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 11:00:31,508 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:31,509  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562696226366313
2019-07-11 11:00:31,509 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:00:31,509 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 11:00:31,511 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,512 ERROR 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562696226366313] exception: not find PayRequestLog record by [orderNo:10110011562696226366313,payType:wx] 
2019-07-11 11:00:31,512 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:00:31,513 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562756105366329(String), wx(String)
2019-07-11 11:00:31,515 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,515  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562756105366329)
2019-07-11 11:00:31,516  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562756105366329,payType=wx
2019-07-11 11:00:31,516  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562756105366329
2019-07-11 11:00:31,516 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:31,516 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 11:00:31,519 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:31,520 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:31,520 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 11:00:31,524 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:31,524  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562756105366329
2019-07-11 11:00:31,525 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:00:31,525 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 11:00:31,527 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,528 ERROR 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562756105366329] exception: not find PayRequestLog record by [orderNo:10110011562756105366329,payType:wx] 
2019-07-11 11:00:31,528 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:00:31,528 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562769501366331(String), wx(String)
2019-07-11 11:00:31,531 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,532  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562769501366331)
2019-07-11 11:00:31,532  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562769501366331,payType=wx
2019-07-11 11:00:31,532  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562769501366331
2019-07-11 11:00:31,533 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:31,533 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 11:00:31,535 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:31,536 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:31,536 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 11:00:31,539 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:31,541  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562769501366331
2019-07-11 11:00:31,541 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:00:31,541 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 11:00:31,543 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,544 ERROR 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562769501366331] exception: not find PayRequestLog record by [orderNo:10110011562769501366331,payType:wx] 
2019-07-11 11:00:31,544 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:00:31,544 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562716709366314(String), wx(String)
2019-07-11 11:00:31,547 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,547  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562716709366314)
2019-07-11 11:00:31,547  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562716709366314,payType=wx
2019-07-11 11:00:31,547  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562716709366314
2019-07-11 11:00:31,548 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:31,548 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 11:00:31,550 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:31,551 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:00:31,551 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 11:00:31,554 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:00:31,554  INFO 909 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562716709366314
2019-07-11 11:00:31,555 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:00:31,555 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 11:00:31,558 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,558 ERROR 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562716709366314] exception: not find PayRequestLog record by [orderNo:10110011562716709366314,payType:wx] 
2019-07-11 11:00:31,559 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,559 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 101(String)
2019-07-11 11:00:31,562 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:31,567 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:00:31,567 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190710(String)
2019-07-11 11:00:31,570 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:00:31,571 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,571 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 11:00:31,575 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:00:31,576 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:00:31,577 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 11:00:31.576(Timestamp)
2019-07-11 11:00:31,581 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:00:31,583 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,584 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 11:00:31,587 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 11:00:31,588 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:31,589 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), wx(String)
2019-07-11 11:00:31,595 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 6
2019-07-11 11:00:31,596 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:31,597 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 11:00:31,600 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:31,601 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,601 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 101(String)
2019-07-11 11:00:31,604 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:31,605 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:31,608 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 11:00:31,611 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:31,612  INFO 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: wx, date: 2019-07-10T11:00:28.415 - result paysCount: 6, refundsCount: 0
2019-07-11 11:00:31,614 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,624 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 238(Integer), wx(String), 支付(String), 10110011562750358366328(String), null, 5(Integer), null, 2019-07-11 23:59:33.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 238(Integer), wx(String), 支付(String), 10110011562747463366326(String), null, 7200(Integer), null, 2019-07-11 23:59:33.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 238(Integer), wx(String), 支付(String), 10110011562696226366313(String), null, 9700(Integer), null, 2019-07-11 23:59:33.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 238(Integer), wx(String), 支付(String), 10110011562756105366329(String), null, 38900(Integer), null, 2019-07-11 23:59:33.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 238(Integer), wx(String), 支付(String), 10110011562769501366331(String), null, 19900(Integer), null, 2019-07-11 23:59:33.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 238(Integer), wx(String), 支付(String), 10110011562716709366314(String), null, 9700(Integer), null, 2019-07-11 23:59:33.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 11:00:31,632 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 6
2019-07-11 11:00:31,633 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 11:00:31,634 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 6(Integer), 6(Integer), 6(Integer), 0(Integer), 0(Integer), 0(Integer), 85405(Integer), 0(Integer), 0(Integer), 0(Integer), 511(Integer), 0(Integer), 238(Integer)
2019-07-11 11:00:31,647 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 11:00:31,679  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-10T11:00:28.415] createCompareBatch successful
2019-07-11 11:00:31,681 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,681 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 11:00:31,684 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:31,685  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 11:00:28 CST 2019)
2019-07-11 11:00:31,685  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 11:00:28 CST 2019)
2019-07-11 11:00:31,685  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_501_20190709.csv] already exists, return local file
2019-07-11 11:00:31,694 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,695 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String), 501(String)
2019-07-11 11:00:31,699 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:00:31,700 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,700 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String), 501(String)
2019-07-11 11:00:31,703 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:00:31,703 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,704 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String), 501(String)
2019-07-11 11:00:31,707 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:00:31,707 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,707 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String), 501(String)
2019-07-11 11:00:31,710 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:00:31,710 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,711 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String), 501(String)
2019-07-11 11:00:31,713 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:00:31,714 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,714 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 11:00:31,716 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:00:31,717 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 11:00:31,717 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), 0(Integer), 5(Integer), 0(Integer), 25(Integer), 0(Integer), {"总交易单数":5,"总交易额":0.00,"总退款金额":0.25,"手续费总金额":0.00000}(String), null
2019-07-11 11:00:31,721 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:31,721 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,722 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 11:00:31,725 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:31,725 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,726 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), null, null
2019-07-11 11:00:31,734 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:31,770  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T11:00:28.415] parse successful
2019-07-11 11:00:31,770 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:31,771 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190709(String), wx(String)
2019-07-11 11:00:31,775 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:31,777 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,777 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 501(String)
2019-07-11 11:00:31,788 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 5
2019-07-11 11:00:31,789 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:00:31,789 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String)
2019-07-11 11:00:31,794 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 11:00:31,795 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:00:31,795 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String)
2019-07-11 11:00:31,799 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 11:00:31,799 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:00:31,799 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String)
2019-07-11 11:00:31,803 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 11:00:31,803 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:00:31,803 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String)
2019-07-11 11:00:31,807 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 11:00:31,808 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:00:31,808 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String)
2019-07-11 11:00:31,811 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 11:00:31,814 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:00:31,814 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190709(String)
2019-07-11 11:00:31,818 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:00:31,818 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,818 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 11:00:31,821 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:00:31,821 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:00:31,822 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 11:00:31.821(Timestamp)
2019-07-11 11:00:31,825 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:00:31,826 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,827 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 11:00:31,831 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 11:00:31,832 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:31,833 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190709(String), wx(String)
2019-07-11 11:00:31,836 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:31,837 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:31,837 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 11:00:31,840 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:31,841 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,842 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 501(String)
2019-07-11 11:00:31,848 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 5
2019-07-11 11:00:31,849 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:31,849 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 11:00:31,852 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:31,852  INFO 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 501, payType: wx, date: 2019-07-09T11:00:28.415 - result paysCount: 0, refundsCount: 5
2019-07-11 11:00:31,854 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,856 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 239(Integer), wx(String), 退款(String), 10110011561694500364202(String), refund10110011561694500364202(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 239(Integer), wx(String), 退款(String), 10110011560398938363931(String), refund10110011560398938363931(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 239(Integer), wx(String), 退款(String), 10110011561951929364204(String), refund10110011561951929364204(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 239(Integer), wx(String), 退款(String), 10110011560334037363923(String), refund10110011560334037363923(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 239(Integer), wx(String), 退款(String), 10110011560327103363921(String), refund10110011560327103363921(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 11:00:31,860 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 5
2019-07-11 11:00:31,861 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 11:00:31,862 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 5(Integer), 5(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 25(Integer), 0(Integer), 0(Integer), 0(Integer), 239(Integer)
2019-07-11 11:00:31,866 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 11:00:31,920  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T11:00:28.415] createCompareBatch successful
2019-07-11 11:00:31,926 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,927 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 11:00:31,930 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:31,930  INFO 909 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Wed Jul 10 11:00:28 CST 2019)
2019-07-11 11:00:31,930  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=501, payType=wx, billDate=Wed Jul 10 11:00:28 CST 2019)
2019-07-11 11:00:31,931  INFO 909 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_501_20190710.csv] already exists, return local file
2019-07-11 11:00:31,932 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:31,932 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562749010364282(String), wx(String), 501(String)
2019-07-11 11:00:31,934 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:00:31,935 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,936 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190710(String), 10110011562749010364282(String), 4200000343201907100504762389(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxc9d0a70977ecf5fe","商户号":"1429146602","子商户号":"0","微信订单号":"4200000343201907100504762389","商户订单号":"10110011562749010364282","用户标识":"oSyi-4rB8pMx1uqy6_GpbsCQ_4qw","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"商品名称374","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 11:00:31.931(Timestamp)
2019-07-11 11:00:31,940 DEBUG 909 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:00:31,941 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,943 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 11:00:31,946 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:00:31,946 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 11:00:31,947 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190710(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"总交易单数":1,"总交易额":0.05,"总退款金额":0.00,"手续费总金额":0.00000}(String), null
2019-07-11 11:00:31,951 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:31,952 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:31,953 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 11:00:31,955 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:00:31,956 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:31,957 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190710(String), null, null
2019-07-11 11:00:31,961 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:00:31,995  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-10T11:00:28.415] parse successful
2019-07-11 11:00:31,996 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:31,997 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190710(String), wx(String)
2019-07-11 11:00:32,001 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 11:00:32,001 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:00:32,002 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110011562749010364282(String), wx(String)
2019-07-11 11:00:32,007 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 11:00:32,008 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:32,008 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 501(String)
2019-07-11 11:00:32,011 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:32,013 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:00:32,014 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190710(String)
2019-07-11 11:00:32,016 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:00:32,017 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:32,017 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 11:00:32,019 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:00:32,019 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:00:32,020 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 11:00:32.019(Timestamp)
2019-07-11 11:00:32,023 DEBUG 909 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:00:32,024 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:00:32,024 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 11:00:32,028 DEBUG 909 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 11:00:32,028 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:00:32,029 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190710(String), wx(String)
2019-07-11 11:00:32,032 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 11:00:32,033 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:32,034 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 11:00:32,037 DEBUG 909 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:32,037 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:00:32,038 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 501(String)
2019-07-11 11:00:32,040 DEBUG 909 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:00:32,041 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:00:32,042 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 11:00:32,045 DEBUG 909 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 11:00:32,046  INFO 909 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 501, payType: wx, date: 2019-07-10T11:00:28.415 - result paysCount: 1, refundsCount: 0
2019-07-11 11:00:32,047 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:00:32,048 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 240(Integer), wx(String), 支付(String), 10110011562749010364282(String), null, 5(Integer), null, 2019-07-11 23:59:34.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 11:00:32,051 DEBUG 909 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 1
2019-07-11 11:00:32,052 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 11:00:32,053 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 1(Integer), 1(Integer), 1(Integer), 0(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 240(Integer)
2019-07-11 11:00:32,057 DEBUG 909 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 11:00:32,112  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-10T11:00:28.415] createCompareBatch successful
2019-07-11 11:00:32,112  INFO 909 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-11 11:00:32,127  INFO 909 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-11 11:00:32,129  INFO 909 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-11 11:00:32,147  INFO 909 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-11 11:26:38,214  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 942 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-11 11:26:38,216  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-11 11:26:41,681  INFO 942 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$c890bfcc] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 11:26:42,068  INFO 942 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$eaa2466e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 11:26:42,120  INFO 942 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$f4deae49] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 11:26:42,260  INFO 942 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-11 11:26:42,589  INFO 942 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-11 11:26:42,617  INFO 942 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 11:26:42,628  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-11 11:26:42,632  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:26:42,633  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:26:42,633  INFO 942 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 11:26:42,634  INFO 942 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 11:26:42,634  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-11 11:26:42,635  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:26:42,635  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:26:42,636  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-11 11:26:42,636  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:26:42,637  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:26:42,637  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 11:26:42,638  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:26:42,638  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:26:42,638  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 11:26:42,639  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:26:42,639  INFO 942 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:26:42,989  INFO 942 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-11 11:26:44,280  INFO 942 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-11 11:26:44,985  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$b0e150e3
2019-07-11 11:26:45,003  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$cc471e9e
2019-07-11 11:26:45,168  INFO 942 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-11 11:26:45,168  INFO 942 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-11 11:26:47,344  INFO 942 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-11 11:26:48,632  INFO 942 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-11 11:26:49,667  INFO 942 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-11 11:26:51,077  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 14.155 seconds (JVM running for 16.492)
2019-07-11 11:26:51,500  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-11 11:26:51,754 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:26:51,798 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 11:26:51,878 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:26:51,896  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 11:26:51 CST 2019)
2019-07-11 11:26:51,896  INFO 942 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 11:26:51 CST 2019)
2019-07-11 11:27:13,419 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:27:13,420 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String), 503(String)
2019-07-11 11:27:13,425 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:27:13,428 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:27:13,481 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 503(String), alipay(String), 20190709(String), 10110011562641960364267(String), 2019070922001486611048342510(String), 5(Integer), 0(Integer), 2019-07-09 19:15:44.0(Timestamp), {"refund_amount":0.05,"支付宝交易号":"2019070922001486611048342510","商户订单号":"10110011562641960364267","业务类型":"交易","商品名称":"商品名称974","创建时间":"2019-07-09 11:15:43","完成时间":"2019-07-09 11:15:44","门店编号":"dev","对方账户":"*佳鸿(641***@qq.com)","订单金额（元）":0.05,"商家实收（元）":0.05,"退款批次号/请求号":"","服务费（元）":0.00,"备注":""}(String), 2019-07-11 11:27:13.418(Timestamp)
2019-07-11 11:27:13,486 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:27:19,563 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:27:19,565 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 11:27:19,570 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:27:19,572 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 11:27:19,581 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190709(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":58,"退款订单总笔数":24,"订单金额（元）":5107.15,"商家实收（元）":5107.15,"服务费（元）":-62.99,"实收净额（元）":5044.16}(String), null
2019-07-11 11:27:19,586 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 11:27:19,587 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:27:19,587 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 11:27:19,590 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:27:19,591 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:27:19,595 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190709(String), null, null
2019-07-11 11:27:19,599 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:27:19,628  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T11:26:51.504] parse successful
2019-07-11 11:27:19,648 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:27:19,649 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), alipay(String)
2019-07-11 11:27:19,685 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 11:27:19,686 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:27:19,688 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 503(String), 10110011562641960364267(String), alipay(String)
2019-07-11 11:27:19,691 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:27:19,692  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=503, tradeType=null, payType=alipay, orderNo=10110011562641960364267)
2019-07-11 11:27:19,694  INFO 942 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute payQuery payQuery-alipay-10110011562641960364267: PayQueryRequestVO(appId=503, tradeType=null, payType=alipay, orderNo=10110011562641960364267)
2019-07-11 11:27:19,695  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562641960364267,payType=alipay
2019-07-11 11:27:19,696  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562641960364267
2019-07-11 11:27:19,757 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:27:19,759 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-11 11:27:19,765 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 1
2019-07-11 11:27:19,766  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,payNotifyList return orderNo:10110011562641960364267
2019-07-11 11:27:19,768 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:27:19,769 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-11 11:27:19,774 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 11:27:19,775  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType return:  orderNo=10110011562641960364267,tradeType=lite
2019-07-11 11:27:19,782 ERROR 942 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562641960364267] exception: could not found alipay-config for appId: 503;tradeType:lite
2019-07-11 11:27:19,784 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:27:19,785 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 503(String)
2019-07-11 11:27:19,789 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:27:19,793 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:27:19,794 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190709(String)
2019-07-11 11:27:19,799 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:27:19,804 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:27:19,807 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 11:27:19,813 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:27:19,815 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:27:19,816 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-11 11:27:19.814(Timestamp)
2019-07-11 11:27:19,823 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:27:19,825 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:27:19,828 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 11:27:19,839 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 11:27:19,845 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:27:19,846 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), alipay(String)
2019-07-11 11:27:19,851 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 11:27:19,859 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:27:19,860 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 503(String)
2019-07-11 11:27:19,867 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 11:27:45,686 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:27:45,688 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 503(String)
2019-07-11 11:27:45,692 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:27:45,694 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:27:45,695 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 503(String)
2019-07-11 11:27:45,699 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 11:27:45,702  INFO 942 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-09T11:26:51.504 - result paysCount: 1, refundsCount: 0
2019-07-11 11:27:45,713 DEBUG 942 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:27:45,714 DEBUG 942 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 241(Integer), alipay(String), 支付(String), 10110011562641960364267(String), null, 5(Integer), null, 2019-07-09 19:15:44.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 11:27:45,718 DEBUG 942 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 1
2019-07-11 11:27:45,725 DEBUG 942 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 11:27:45,727 DEBUG 942 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 1(Integer), 1(Integer), 1(Integer), 0(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 241(Integer)
2019-07-11 11:27:45,731 DEBUG 942 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 11:27:45,762  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T11:26:51.504] createCompareBatch successful
2019-07-11 11:27:45,766 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:27:45,767 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 11:27:45,770 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:27:45,771  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 11:26:51 CST 2019)
2019-07-11 11:27:45,771  INFO 942 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 11:26:51 CST 2019)
2019-07-11 11:27:45,779  INFO 942 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 request: {nonce_str=x0NKRayRDYii4LYUidOYIIrehtz329zn, bill_date=20190709, appid=wxd86049a121654669, sign=BFB6C9D9A61B6961D4B8B50CD0A9378DEE20B8D99C617E566AF80C1E19D82455, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-11 11:27:46,407  INFO 942 --- [           main] wxpay java sdk                           : report worker num: 6
2019-07-11 11:27:46,410  INFO 942 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,x0NKRayRDYii4LYUidOYIIrehtz329zn,1562815666,584,api.mch.weixin.qq.com,true,6000,8000,0,0,0,00BD36C0556A5122BE68FC64A665B85F7FA8E88C3092C4112643194899DC658F
2019-07-11 11:27:46,411  INFO 942 --- [pool-2-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,x0NKRayRDYii4LYUidOYIIrehtz329zn,1562815666,584,api.mch.weixin.qq.com,true,6000,8000,0,0,0,00BD36C0556A5122BE68FC64A665B85F7FA8E88C3092C4112643194899DC658F
2019-07-11 11:27:46,412  INFO 942 --- [pool-2-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 11:27:46,412  INFO 942 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 11:27:46,413  INFO 942 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response content size: 149
2019-07-11 11:27:46,414  INFO 942 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 11:27:46,421  INFO 942 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 11:27:46,422  INFO 942 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 11:27:46,423  WARN 942 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-11 11:27:46,424 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:27:46,426 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190709(String), null, No Bill Exist(String)
2019-07-11 11:27:46,431 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:27:46,463  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T11:26:51.504] parse successful
2019-07-11 11:27:46,465 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:27:46,467 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), wx(String)
2019-07-11 11:27:46,472 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:27:46,473 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:27:46,473 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 503(String)
2019-07-11 11:27:46,477 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:27:46,482 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:27:46,483 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190709(String)
2019-07-11 11:27:46,487 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:27:46,488 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:27:46,489 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 11:27:46,492 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:27:46,493 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:27:46,495 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 11:27:46.493(Timestamp)
2019-07-11 11:27:46,500 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:27:46,501 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:27:46,501 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 11:27:46,504 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:27:46,505  INFO 942 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-09T11:26:51.504 - result is Null
2019-07-11 11:27:46,563  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T11:26:51.504] createCompareBatch successful
2019-07-11 11:27:46,566 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:27:46,567 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 11:27:46,570 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:27:46,576  WARN 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-10T11:26:51.504] parse exception: 账单[20190710]已解析
2019-07-11 11:27:46,580 ERROR 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190710]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$25239116.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-11 11:27:46,584 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:27:46,585 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 11:27:46,589 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:27:46,595  WARN 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-10T11:26:51.504] parse exception: 账单[20190710]已解析
2019-07-11 11:27:46,595 ERROR 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190710]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$25239116.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-11 11:27:46,599 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:27:46,599 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 11:27:46,602 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:27:46,602  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 11:26:51 CST 2019)
2019-07-11 11:27:46,603  INFO 942 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 11:26:51 CST 2019)
2019-07-11 11:27:46,621 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:27:46,622 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String), 101(String)
2019-07-11 11:27:46,625 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:27:46,626 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:27:46,627 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), alipay(String), 20190709(String), 10110011562641960364267(String), 2019070922001486611048342510(String), 5(Integer), 0(Integer), 2019-07-09 19:15:44.0(Timestamp), {"refund_amount":0.05,"支付宝交易号":"2019070922001486611048342510","商户订单号":"10110011562641960364267","业务类型":"交易","商品名称":"商品名称974","创建时间":"2019-07-09 11:15:43","完成时间":"2019-07-09 11:15:44","门店编号":"dev","对方账户":"*佳鸿(641***@qq.com)","订单金额（元）":0.05,"商家实收（元）":0.05,"退款批次号/请求号":"","服务费（元）":0.00,"备注":""}(String), 2019-07-11 11:27:46.62(Timestamp)
2019-07-11 11:27:46,632 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:28:16,891 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:28:16,892 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 11:28:16,896 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:28:16,896 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 11:28:16,898 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":58,"退款订单总笔数":24,"订单金额（元）":5107.15,"商家实收（元）":5107.15,"服务费（元）":-62.99,"实收净额（元）":5044.16}(String), null
2019-07-11 11:28:16,902 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 11:28:16,903 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:28:16,903 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 11:28:16,906 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:28:16,907 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:28:16,908 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), null, null
2019-07-11 11:28:16,912 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:28:16,934  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T11:26:51.504] parse successful
2019-07-11 11:28:16,934 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:28:16,935 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-11 11:28:16,939 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 11:28:16,940 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:28:16,941 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562641960364267(String), alipay(String)
2019-07-11 11:28:16,951 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 11:28:16,952 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:28:16,953 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-11 11:28:16,956 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:28:16,959 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:28:16,960 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190709(String)
2019-07-11 11:28:16,963 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:28:16,965 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:28:16,965 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 11:28:16,969 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:28:16,970 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:28:16,971 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-11 11:28:16.969(Timestamp)
2019-07-11 11:28:16,976 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:28:16,979 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:28:16,980 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 11:28:16,987 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 11:28:16,988 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:28:16,989 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-11 11:28:16,994 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 11:28:16,995 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:28:16,997 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 11:28:17,012 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 14
2019-07-11 11:31:51,087  INFO 942 --- [   scheduling-1] c.i.p.timer.RequestResultQueryTimer      : task payQuery start...
2019-07-11 11:31:51,106 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findUnqueryBetweenDate     : ==>  Preparing: select pr.id, pr.app_id, pr.pay_type, pr.channel, pr.order_no, pr.amount, pr.subject, pr.sign_type, pr.client_ip, pr.extra, pr.create_time from pay_center3_pay_request pr left join pay_center3_pay_query_result pqr on pr.pay_type = pqr.pay_type and pr.order_no = pqr.order_no where pqr.app_id is null and pr.create_time between ? and ? 
2019-07-11 11:31:51,108 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findUnqueryBetweenDate     : ==> Parameters: 2019-07-09 11:31:51.088(Timestamp), 2019-07-11 11:31:51.088(Timestamp)
2019-07-11 11:31:51,119 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findUnqueryBetweenDate     : <==      Total: 4
2019-07-11 11:31:51,120 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:31:51,121 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), fanhangtest-331(String), alipay(String)
2019-07-11 11:31:51,124 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:31:51,124  INFO 942 --- [   scheduling-1] c.i.p.timer.RequestResultQueryTimer      : task payQuery-alipay-fanhangtest-331 payQuery
2019-07-11 11:31:51,125  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=alipay, orderNo=fanhangtest-331)
2019-07-11 11:31:51,126  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute payQuery payQuery-alipay-fanhangtest-331: PayQueryRequestVO(appId=101, tradeType=null, payType=alipay, orderNo=fanhangtest-331)
2019-07-11 11:31:51,127  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=fanhangtest-331,payType=alipay
2019-07-11 11:31:51,128  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:fanhangtest-331
2019-07-11 11:31:51,128 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:31:51,129 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: fanhangtest-331(String), alipay(String)
2019-07-11 11:31:51,132 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:31:51,133 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:31:51,134 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: fanhangtest-331(String), alipay(String)
2019-07-11 11:31:51,139 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:31:51,140  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:fanhangtest-331
2019-07-11 11:31:51,140 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:31:51,141 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: fanhangtest-331(String), alipay(String)
2019-07-11 11:31:51,144 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 11:31:51,145  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType return:  orderNo=fanhangtest-331,tradeType=lite
2019-07-11 11:31:51,145  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : payQuery=: orderNo=fanhangtest-331,payType=alipay,config=AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 11:31:51,165  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id payQuery-alipay-fanhangtest-331 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"out_trade_no":"fanhangtest-331"},"api_method_name":"alipay.trade.query","text_params":{},"response_class":"com.alipay.api.response.AlipayTradeQueryResponse"}
2019-07-11 11:31:51,501 ERROR 942 --- [   scheduling-1] sdk.biz.err                              : ErrorScene^_^40004^_^ACQ.TRADE_NOT_EXIST^_^null^_^Mac OS X^_^2019-07-11 11:31:51^_^ProtocalMustParams:charset=UTF-8&method=alipay.trade.query&sign=fNn/jwXDMyD7X+05IuTd0LYvTRld6oOamixTJwDPFA0S56LUTwEi3f5RiUMSJ1+84D/JIw4nhcst/N4rmaK6qVwKAkagBrGSFbvKIK2cMvmvoTxCWvKHs+kYhrHWN51Je2ZgBv6FdLVw2TTGXEMeBWFaQBFhqiYHujWo2HQXtJE=&version=1.0&app_id=2016052401436400&sign_type=RSA&timestamp=2019-07-11 11:31:51^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"out_trade_no":"fanhangtest-331"}^_^Body:{"alipay_trade_query_response":{"code":"40004","msg":"Business Failed","sub_code":"ACQ.TRADE_NOT_EXIST","sub_msg":"交易不存在","buyer_pay_amount":"0.00","invoice_amount":"0.00","out_trade_no":"fanhangtest-331","point_amount":"0.00","receipt_amount":"0.00"},"sign":"Rds9dybDRzR3aLhtKKr4d8OvhICKpxahKjBMwh6LVZeFlJ1Uc3xLMOIi0QpCo9DkW8wPIgMccnOWQrNMdEG3UlpPY0lqRijEdIPbGXOvggGx6NI5mYybDRI/uX+2/Mej59+l++erRHP1OTr0W3+EVT1qiJuc1x7SXoNlAErJBKA="}^_^33ms,251ms,51ms
2019-07-11 11:31:51,510  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id payQuery-alipay-fanhangtest-331 response: {"code":"40004","msg":"Business Failed","sub_code":"ACQ.TRADE_NOT_EXIST","sub_msg":"交易不存在","body":"{\"alipay_trade_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"ACQ.TRADE_NOT_EXIST\",\"sub_msg\":\"交易不存在\",\"buyer_pay_amount\":\"0.00\",\"invoice_amount\":\"0.00\",\"out_trade_no\":\"fanhangtest-331\",\"point_amount\":\"0.00\",\"receipt_amount\":\"0.00\"},\"sign\":\"Rds9dybDRzR3aLhtKKr4d8OvhICKpxahKjBMwh6LVZeFlJ1Uc3xLMOIi0QpCo9DkW8wPIgMccnOWQrNMdEG3UlpPY0lqRijEdIPbGXOvggGx6NI5mYybDRI/uX+2/Mej59+l++erRHP1OTr0W3+EVT1qiJuc1x7SXoNlAErJBKA=\"}","params":{"biz_content":"{\"out_trade_no\":\"fanhangtest-331\"}"},"buyer_pay_amount":"0.00","invoice_amount":"0.00","out_trade_no":"fanhangtest-331","point_amount":"0.00","receipt_amount":"0.00","success":false,"error_code":"40004"}
2019-07-11 11:31:51,520  WARN 942 --- [   scheduling-1] c.i.p.timer.RequestResultQueryTimer      : task payQuery-alipay-fanhangtest-331 payQuery exception: Business Failed # ACQ.TRADE_NOT_EXIST # 交易不存在
2019-07-11 11:31:51,520 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:31:51,521 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562641124364266(String), alipay(String)
2019-07-11 11:31:51,524 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:31:51,525  INFO 942 --- [   scheduling-1] c.i.p.timer.RequestResultQueryTimer      : task payQuery-alipay-10110011562641124364266 payQuery
2019-07-11 11:31:51,525  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=alipay, orderNo=10110011562641124364266)
2019-07-11 11:31:51,527  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute payQuery payQuery-alipay-10110011562641124364266: PayQueryRequestVO(appId=101, tradeType=null, payType=alipay, orderNo=10110011562641124364266)
2019-07-11 11:31:51,529  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562641124364266,payType=alipay
2019-07-11 11:31:51,529  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562641124364266
2019-07-11 11:31:51,530 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:31:51,531 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562641124364266(String), alipay(String)
2019-07-11 11:31:51,534 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:31:51,536 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:31:51,539 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562641124364266(String), alipay(String)
2019-07-11 11:31:51,542 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:31:51,543  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562641124364266
2019-07-11 11:31:51,544 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:31:51,544 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562641124364266(String), alipay(String)
2019-07-11 11:31:51,549 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 11:31:51,550  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType return:  orderNo=10110011562641124364266,tradeType=lite
2019-07-11 11:31:51,550  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : payQuery=: orderNo=10110011562641124364266,payType=alipay,config=AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 11:31:51,550  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id payQuery-alipay-10110011562641124364266 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"out_trade_no":"10110011562641124364266"},"api_method_name":"alipay.trade.query","text_params":{},"response_class":"com.alipay.api.response.AlipayTradeQueryResponse"}
2019-07-11 11:31:51,673 ERROR 942 --- [   scheduling-1] sdk.biz.err                              : ErrorScene^_^40004^_^ACQ.TRADE_NOT_EXIST^_^null^_^Mac OS X^_^2019-07-11 11:31:51^_^ProtocalMustParams:charset=UTF-8&method=alipay.trade.query&sign=QqBgs4eZZiMOR0yqHF3JokxAUUTC/HV3CwqFSKGWzMSw7Ali7iwYUny7ym3yJCoBi8JnOvRwm5O3fHX+fWkdDqtI8iWqmZKM+ZqxoCvQ67wDyHH1+CS4NMlfGmypWApY+axPbOTFc78x383m9yJqEB4UY4z9JY0npYe8HSZUpUs=&version=1.0&app_id=2016052401436400&sign_type=RSA&timestamp=2019-07-11 11:31:51^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"out_trade_no":"10110011562641124364266"}^_^Body:{"alipay_trade_query_response":{"code":"40004","msg":"Business Failed","sub_code":"ACQ.TRADE_NOT_EXIST","sub_msg":"交易不存在","buyer_pay_amount":"0.00","invoice_amount":"0.00","out_trade_no":"10110011562641124364266","point_amount":"0.00","receipt_amount":"0.00"},"sign":"UhzK9Zp49zCZSS2STe5GxEA6dQQQVu72ecuxRu3yeSCJ4rE9LgHd4DVKFpRkgYR+8yut/KK3TMyE6GiAlVqHQfYlzqBZYJhTHJCktTl6a22Osn2kDIg5XfitXEb6fBKWnIl4pQD9uCwAMtWfxyJsH7pzySKf7BopcfGbZwKws9Q="}^_^3ms,118ms,1ms
2019-07-11 11:31:51,673  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id payQuery-alipay-10110011562641124364266 response: {"code":"40004","msg":"Business Failed","sub_code":"ACQ.TRADE_NOT_EXIST","sub_msg":"交易不存在","body":"{\"alipay_trade_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"ACQ.TRADE_NOT_EXIST\",\"sub_msg\":\"交易不存在\",\"buyer_pay_amount\":\"0.00\",\"invoice_amount\":\"0.00\",\"out_trade_no\":\"10110011562641124364266\",\"point_amount\":\"0.00\",\"receipt_amount\":\"0.00\"},\"sign\":\"UhzK9Zp49zCZSS2STe5GxEA6dQQQVu72ecuxRu3yeSCJ4rE9LgHd4DVKFpRkgYR+8yut/KK3TMyE6GiAlVqHQfYlzqBZYJhTHJCktTl6a22Osn2kDIg5XfitXEb6fBKWnIl4pQD9uCwAMtWfxyJsH7pzySKf7BopcfGbZwKws9Q=\"}","params":{"biz_content":"{\"out_trade_no\":\"10110011562641124364266\"}"},"buyer_pay_amount":"0.00","invoice_amount":"0.00","out_trade_no":"10110011562641124364266","point_amount":"0.00","receipt_amount":"0.00","success":false,"error_code":"40004"}
2019-07-11 11:31:51,680  WARN 942 --- [   scheduling-1] c.i.p.timer.RequestResultQueryTimer      : task payQuery-alipay-10110011562641124364266 payQuery exception: Business Failed # ACQ.TRADE_NOT_EXIST # 交易不存在
2019-07-11 11:31:51,681 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:31:51,681 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), fanhangtest-3330(String), alipay(String)
2019-07-11 11:31:51,684 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:31:51,685  INFO 942 --- [   scheduling-1] c.i.p.timer.RequestResultQueryTimer      : task payQuery-alipay-fanhangtest-3330 payQuery
2019-07-11 11:31:51,685  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=alipay, orderNo=fanhangtest-3330)
2019-07-11 11:31:51,687  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute payQuery payQuery-alipay-fanhangtest-3330: PayQueryRequestVO(appId=101, tradeType=null, payType=alipay, orderNo=fanhangtest-3330)
2019-07-11 11:31:51,687  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=fanhangtest-3330,payType=alipay
2019-07-11 11:31:51,687  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:fanhangtest-3330
2019-07-11 11:31:51,687 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:31:51,688 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: fanhangtest-3330(String), alipay(String)
2019-07-11 11:31:51,690 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:31:51,691 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:31:51,691 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: fanhangtest-3330(String), alipay(String)
2019-07-11 11:31:51,694 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:31:51,695  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:fanhangtest-3330
2019-07-11 11:31:51,696 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:31:51,696 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: fanhangtest-3330(String), alipay(String)
2019-07-11 11:31:51,703 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 11:31:51,703  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType return:  orderNo=fanhangtest-3330,tradeType=lite
2019-07-11 11:31:51,703  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : payQuery=: orderNo=fanhangtest-3330,payType=alipay,config=AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 11:31:51,704  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id payQuery-alipay-fanhangtest-3330 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"out_trade_no":"fanhangtest-3330"},"api_method_name":"alipay.trade.query","text_params":{},"response_class":"com.alipay.api.response.AlipayTradeQueryResponse"}
2019-07-11 11:31:51,768 ERROR 942 --- [   scheduling-1] sdk.biz.err                              : ErrorScene^_^40004^_^ACQ.TRADE_NOT_EXIST^_^null^_^Mac OS X^_^2019-07-11 11:31:51^_^ProtocalMustParams:charset=UTF-8&method=alipay.trade.query&sign=VAnr90f/MWsi8Rwwmd+F5OG8yY4wIbD1iH44QgDoZHKCCzhS5Q28dH7MAnR+v0Et5gc9vO6SeIv6hPrJpuyHlpMuYDk0zAGFGEn0wI4DD+rBj2vPYKM8LegiJif4PhtQfB0x7Ea8RL2FR3/vKTdOxRmvlY74JaHkbsYrXFjWiBY=&version=1.0&app_id=2016052401436400&sign_type=RSA&timestamp=2019-07-11 11:31:51^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"out_trade_no":"fanhangtest-3330"}^_^Body:{"alipay_trade_query_response":{"code":"40004","msg":"Business Failed","sub_code":"ACQ.TRADE_NOT_EXIST","sub_msg":"交易不存在","buyer_pay_amount":"0.00","invoice_amount":"0.00","out_trade_no":"fanhangtest-3330","point_amount":"0.00","receipt_amount":"0.00"},"sign":"GjgfGq3mcGMo0sxi6xFRxnAyLydlemQDRDp4zkjMz5YjMHW+mgrjV9/hPFX3JRVmDltH+GoRdB+yAK03QyZe8qAfuWtQoX1pnK4qHj0vBett0JQfu2rECTI2YwE3LkCx0+owk9gUB2OhcGYn+0pBWFsplpJEjwNN4cRoFHOC2hQ="}^_^3ms,59ms,1ms
2019-07-11 11:31:51,768  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id payQuery-alipay-fanhangtest-3330 response: {"code":"40004","msg":"Business Failed","sub_code":"ACQ.TRADE_NOT_EXIST","sub_msg":"交易不存在","body":"{\"alipay_trade_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"ACQ.TRADE_NOT_EXIST\",\"sub_msg\":\"交易不存在\",\"buyer_pay_amount\":\"0.00\",\"invoice_amount\":\"0.00\",\"out_trade_no\":\"fanhangtest-3330\",\"point_amount\":\"0.00\",\"receipt_amount\":\"0.00\"},\"sign\":\"GjgfGq3mcGMo0sxi6xFRxnAyLydlemQDRDp4zkjMz5YjMHW+mgrjV9/hPFX3JRVmDltH+GoRdB+yAK03QyZe8qAfuWtQoX1pnK4qHj0vBett0JQfu2rECTI2YwE3LkCx0+owk9gUB2OhcGYn+0pBWFsplpJEjwNN4cRoFHOC2hQ=\"}","params":{"biz_content":"{\"out_trade_no\":\"fanhangtest-3330\"}"},"buyer_pay_amount":"0.00","invoice_amount":"0.00","out_trade_no":"fanhangtest-3330","point_amount":"0.00","receipt_amount":"0.00","success":false,"error_code":"40004"}
2019-07-11 11:31:51,774  WARN 942 --- [   scheduling-1] c.i.p.timer.RequestResultQueryTimer      : task payQuery-alipay-fanhangtest-3330 payQuery exception: Business Failed # ACQ.TRADE_NOT_EXIST # 交易不存在
2019-07-11 11:31:51,774 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:31:51,775 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562742151364268(String), alipay(String)
2019-07-11 11:31:51,778 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:31:51,779  INFO 942 --- [   scheduling-1] c.i.p.timer.RequestResultQueryTimer      : task payQuery-alipay-10110011562742151364268 payQuery
2019-07-11 11:31:51,780  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=alipay, orderNo=10110011562742151364268)
2019-07-11 11:31:51,782  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute payQuery payQuery-alipay-10110011562742151364268: PayQueryRequestVO(appId=101, tradeType=null, payType=alipay, orderNo=10110011562742151364268)
2019-07-11 11:31:51,782  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562742151364268,payType=alipay
2019-07-11 11:31:51,782  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562742151364268
2019-07-11 11:31:51,783 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:31:51,784 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562742151364268(String), alipay(String)
2019-07-11 11:31:51,787 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:31:51,788 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:31:51,788 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562742151364268(String), alipay(String)
2019-07-11 11:31:51,792 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:31:51,792  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562742151364268
2019-07-11 11:31:51,792 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:31:51,793 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562742151364268(String), alipay(String)
2019-07-11 11:31:51,796 DEBUG 942 --- [   scheduling-1] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 11:31:51,797  INFO 942 --- [   scheduling-1] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType return:  orderNo=10110011562742151364268,tradeType=lite
2019-07-11 11:31:51,797  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : payQuery=: orderNo=10110011562742151364268,payType=alipay,config=AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 11:31:51,798  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id payQuery-alipay-10110011562742151364268 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"out_trade_no":"10110011562742151364268"},"api_method_name":"alipay.trade.query","text_params":{},"response_class":"com.alipay.api.response.AlipayTradeQueryResponse"}
2019-07-11 11:31:51,839 ERROR 942 --- [   scheduling-1] sdk.biz.err                              : ErrorScene^_^40004^_^ACQ.TRADE_NOT_EXIST^_^null^_^Mac OS X^_^2019-07-11 11:31:51^_^ProtocalMustParams:charset=UTF-8&method=alipay.trade.query&sign=IkWgIhGr4A2L+zDzB5Mk23c4LIB4gH7jUrTkifdzMWYKchzXlKbm6XMkcdvQZ8TmzSR5QPckpGAlPiUtOubmLKI0ijHlcdsJpj0tLYXvsEageP/6JkwOMNlLEED5k+Jt+Iej69YdvLsb5ZilUoHmf/K8Rem2oRdXVmc6TzllQ3w=&version=1.0&app_id=2016052401436400&sign_type=RSA&timestamp=2019-07-11 11:31:51^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"out_trade_no":"10110011562742151364268"}^_^Body:{"alipay_trade_query_response":{"code":"40004","msg":"Business Failed","sub_code":"ACQ.TRADE_NOT_EXIST","sub_msg":"交易不存在","buyer_pay_amount":"0.00","invoice_amount":"0.00","out_trade_no":"10110011562742151364268","point_amount":"0.00","receipt_amount":"0.00"},"sign":"s4ukRdNrattYl5/4W9QCcOoPDPfTGbh87CMr6lOrKpD3kvH+YUUOjrg6s/gXoHESHo2cwe8KJXp+bwexEZXAbYBd55K35GiLLOcuKSpKRJY963ntP1jWpFAfV5vtrtrdsRw7q2bbalN7p5X4QUQ1Ww4BrwtJHBJYcORe+KgsagY="}^_^2ms,37ms,2ms
2019-07-11 11:31:51,840  INFO 942 --- [   scheduling-1] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id payQuery-alipay-10110011562742151364268 response: {"code":"40004","msg":"Business Failed","sub_code":"ACQ.TRADE_NOT_EXIST","sub_msg":"交易不存在","body":"{\"alipay_trade_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"ACQ.TRADE_NOT_EXIST\",\"sub_msg\":\"交易不存在\",\"buyer_pay_amount\":\"0.00\",\"invoice_amount\":\"0.00\",\"out_trade_no\":\"10110011562742151364268\",\"point_amount\":\"0.00\",\"receipt_amount\":\"0.00\"},\"sign\":\"s4ukRdNrattYl5/4W9QCcOoPDPfTGbh87CMr6lOrKpD3kvH+YUUOjrg6s/gXoHESHo2cwe8KJXp+bwexEZXAbYBd55K35GiLLOcuKSpKRJY963ntP1jWpFAfV5vtrtrdsRw7q2bbalN7p5X4QUQ1Ww4BrwtJHBJYcORe+KgsagY=\"}","params":{"biz_content":"{\"out_trade_no\":\"10110011562742151364268\"}"},"buyer_pay_amount":"0.00","invoice_amount":"0.00","out_trade_no":"10110011562742151364268","point_amount":"0.00","receipt_amount":"0.00","success":false,"error_code":"40004"}
2019-07-11 11:31:51,845  WARN 942 --- [   scheduling-1] c.i.p.timer.RequestResultQueryTimer      : task payQuery-alipay-10110011562742151364268 payQuery exception: Business Failed # ACQ.TRADE_NOT_EXIST # 交易不存在
2019-07-11 11:31:51,845  INFO 942 --- [   scheduling-1] c.i.p.timer.RequestResultQueryTimer      : task payQuery finished...
2019-07-11 11:35:18,447 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:18,448 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-11 11:35:18,452 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:35:18,455 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:35:18,456 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 11:35:18,460 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 11:35:18,461  INFO 942 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-09T11:26:51.504 - result paysCount: 15, refundsCount: 0
2019-07-11 11:35:18,468 DEBUG 942 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:35:18,477 DEBUG 942 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 243(Integer), alipay(String), 支付(String), 10110011562641960364267(String), null, 5(Integer), null, 2019-07-09 19:15:44.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 243(Integer), alipay(String), 支付(String), 10110011562578001364264(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 243(Integer), alipay(String), 支付(String), fanhangtest-331(String), null, 0(Integer), 100(Integer), null, -1(Integer), 支付平台查无此单(String), null, 243(Integer), alipay(String), 支付(String), fanhangtest-330(String), null, 0(Integer), 100(Integer), null, -1(Integer), 支付平台查无此单(String), null, 243(Integer), alipay(String), 支付(String), 10110011562575830364256(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 243(Integer), alipay(String), 支付(String), 10110011562573708364254(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 243(Integer), alipay(String), 支付(String), 10110011562575964364257(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 243(Integer), alipay(String), 支付(String), 10110011562576075364259(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 243(Integer), alipay(String), 支付(String), 10110011562576136364260(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 243(Integer), alipay(String), 支付(String), 10110011562576378364262(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 243(Integer), alipay(String), 支付(String), 10110011562576307364261(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 243(Integer), alipay(String), 支付(String), 10110011562575765364255(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 243(Integer), alipay(String), 支付(String), 10110011562578989364265(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 243(Integer), alipay(String), 支付(String), 10110011562576040364258(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 243(Integer), alipay(String), 支付(String), 10110011562576689364263(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null
2019-07-11 11:35:18,522 DEBUG 942 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 15
2019-07-11 11:35:18,524 DEBUG 942 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 11:35:18,525 DEBUG 942 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 15(Integer), 15(Integer), 1(Integer), 14(Integer), 0(Integer), 0(Integer), 5(Integer), 260(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 243(Integer)
2019-07-11 11:35:18,529 DEBUG 942 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 11:35:18,575  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T11:26:51.504] createCompareBatch successful
2019-07-11 11:35:18,578 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:35:18,578 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 11:35:18,581 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:35:18,582  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 11:26:51 CST 2019)
2019-07-11 11:35:18,582  INFO 942 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 11:26:51 CST 2019)
2019-07-11 11:35:18,582  INFO 942 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_101_20190709.csv] already exists, return local file
2019-07-11 11:35:18,596 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:18,601 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String), 101(String)
2019-07-11 11:35:18,606 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:35:18,609 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:18,610 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String), 101(String)
2019-07-11 11:35:18,614 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:35:18,618 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:18,619 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String), 101(String)
2019-07-11 11:35:18,622 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,623 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:35:18,627 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562630251366259(String), 4200000340201907096741436916(String), 19900(Integer), 119(Integer), null, {"merchant_income_charge":199.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000340201907096741436916","商户订单号":"10110011562630251366259","用户标识":"oF9zhvoGcCB1bh1dX_FnTS1RoI1w","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":199.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机","手续费":1.19000,"费率":"0.60%"}(String), 2019-07-11 11:35:18.618(Timestamp)
2019-07-11 11:35:18,633 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:35:18,635 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:18,635 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String), 101(String)
2019-07-11 11:35:18,638 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,639 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:35:18,640 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562660958366285(String), 4200000343201907096959558243(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000343201907096959558243","商户订单号":"10110011562660958366285","用户标识":"oF9zhvuwwXGs0OPoPdSuknufzzuc","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"口红","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 11:35:18.634(Timestamp)
2019-07-11 11:35:18,644 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:35:18,645 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:18,646 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String), 101(String)
2019-07-11 11:35:18,649 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,653 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:35:18,656 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562610950366258(String), 4200000353201907091881341553(String), 22900(Integer), 137(Integer), null, {"merchant_income_charge":229.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000353201907091881341553","商户订单号":"10110011562610950366258","用户标识":"oF9zhvs9znoUohMT1cJmQ6ZxFRFY","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"LQT","货币种类":"CNY","总金额":229.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"CHARLEE&KLTH 手提金属提把钱包小ck10840136-单肩斜跨女包小方包","手续费":1.37000,"费率":"0.60%"}(String), 2019-07-11 11:35:18.645(Timestamp)
2019-07-11 11:35:18,660 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:35:18,662 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:18,662 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String), 101(String)
2019-07-11 11:35:18,665 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,666 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:35:18,667 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562684369366311(String), 4200000354201907098493063836(String), 7200(Integer), 43(Integer), null, {"merchant_income_charge":72.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000354201907098493063836","商户订单号":"10110011562684369366311","用户标识":"o2st65Xf59UzUqdqHGjfP2i8mBC8","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"GDB_CREDIT","货币种类":"CNY","总金额":72.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女","手续费":0.43000,"费率":"0.60%"}(String), 2019-07-11 11:35:18.661(Timestamp)
2019-07-11 11:35:18,671 DEBUG 942 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 11:35:18,673 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:35:18,674 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 11:35:18,676 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:35:18,680 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 11:35:18,683 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), 4(Integer), 2(Integer), 50005(Integer), 40505(Integer), 0(Integer), {"总交易单数":6,"总交易额":500.05,"总退款金额":405.05,"手续费总金额":0.56000}(String), null
2019-07-11 11:35:18,690 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 11:35:18,691 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:35:18,692 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 11:35:18,696 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:35:18,696 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:35:18,697 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), null, null
2019-07-11 11:35:18,701 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:35:18,726  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T11:26:51.504] parse successful
2019-07-11 11:35:18,727 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:35:18,729 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), wx(String)
2019-07-11 11:35:18,738 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-11 11:35:18,740 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:35:18,741 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562630251366259(String), wx(String)
2019-07-11 11:35:18,745 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,748  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562630251366259)
2019-07-11 11:35:18,750  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562630251366259,payType=wx
2019-07-11 11:35:18,750  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562630251366259
2019-07-11 11:35:18,751 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:35:18,751 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 11:35:18,755 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:35:18,763 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:35:18,764 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 11:35:18,768 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:35:18,769  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562630251366259
2019-07-11 11:35:18,769 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:35:18,770 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 11:35:18,777 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,778 ERROR 942 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562630251366259] exception: not find PayRequestLog record by [orderNo:10110011562630251366259,payType:wx] 
2019-07-11 11:35:18,780 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:35:18,780 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562660958366285(String), wx(String)
2019-07-11 11:35:18,783 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,785  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562660958366285)
2019-07-11 11:35:18,785  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562660958366285,payType=wx
2019-07-11 11:35:18,785  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562660958366285
2019-07-11 11:35:18,787 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:35:18,789 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 11:35:18,794 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:35:18,795 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:35:18,796 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 11:35:18,800 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:35:18,801  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562660958366285
2019-07-11 11:35:18,801 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:35:18,802 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 11:35:18,804 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,806 ERROR 942 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562660958366285] exception: not find PayRequestLog record by [orderNo:10110011562660958366285,payType:wx] 
2019-07-11 11:35:18,807 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:35:18,808 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562610950366258(String), wx(String)
2019-07-11 11:35:18,810 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,811  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562610950366258)
2019-07-11 11:35:18,811  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562610950366258,payType=wx
2019-07-11 11:35:18,811  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562610950366258
2019-07-11 11:35:18,812 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:35:18,812 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 11:35:18,815 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:35:18,816 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:35:18,817 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 11:35:18,821 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:35:18,821  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562610950366258
2019-07-11 11:35:18,822 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:35:18,822 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 11:35:18,825 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,825 ERROR 942 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562610950366258] exception: not find PayRequestLog record by [orderNo:10110011562610950366258,payType:wx] 
2019-07-11 11:35:18,826 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 11:35:18,826 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562684369366311(String), wx(String)
2019-07-11 11:35:18,829 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,829  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562684369366311)
2019-07-11 11:35:18,829  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562684369366311,payType=wx
2019-07-11 11:35:18,830  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562684369366311
2019-07-11 11:35:18,830 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:35:18,830 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 11:35:18,833 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:35:18,834 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:35:18,834 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 11:35:18,839 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:35:18,839  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562684369366311
2019-07-11 11:35:18,840 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:35:18,840 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 11:35:18,843 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,843 ERROR 942 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562684369366311] exception: not find PayRequestLog record by [orderNo:10110011562684369366311,payType:wx] 
2019-07-11 11:35:18,844 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:18,845 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 101(String)
2019-07-11 11:35:18,850 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 2
2019-07-11 11:35:18,853 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:35:18,853 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String)
2019-07-11 11:35:18,856 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-11 11:35:18,857  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@c93c0d30, appId=101, payType=wx, orderNo=10110011561291536365966, refundNo=refund10110011561291536365966)
2019-07-11 11:35:18,858  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011561291536365966,payType=wx
2019-07-11 11:35:18,858  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011561291536365966
2019-07-11 11:35:18,858 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:35:18,859 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 11:35:18,862 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:35:18,863 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:35:18,863 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 11:35:18,867 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:35:18,867  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011561291536365966
2019-07-11 11:35:18,868 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:35:18,869 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 11:35:18,872 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,875 ERROR 942 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011561291536365966] exception: not find PayRequestLog record by [orderNo:10110011561291536365966,payType:wx] 
2019-07-11 11:35:18,875 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:35:18,876 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String)
2019-07-11 11:35:18,878 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-11 11:35:18,879  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@5755a13c, appId=101, payType=wx, orderNo=10110011558860422365280, refundNo=refund10110011558860422365280)
2019-07-11 11:35:18,880  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011558860422365280,payType=wx
2019-07-11 11:35:18,880  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011558860422365280
2019-07-11 11:35:18,880 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:35:18,881 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 11:35:18,884 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:35:18,885 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 11:35:18,885 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 11:35:18,889 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 11:35:18,889  INFO 942 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011558860422365280
2019-07-11 11:35:18,890 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 11:35:18,890 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 11:35:18,893 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 11:35:18,894 ERROR 942 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011558860422365280] exception: not find PayRequestLog record by [orderNo:10110011558860422365280,payType:wx] 
2019-07-11 11:35:18,896 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:35:18,897 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190709(String)
2019-07-11 11:35:18,900 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:35:18,901 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:35:18,901 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 11:35:18,904 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:35:18,905 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:35:18,906 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 11:35:18.905(Timestamp)
2019-07-11 11:35:18,909 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:35:18,910 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:35:18,911 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 11:35:18,915 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 11:35:18,916 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:35:18,916 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), wx(String)
2019-07-11 11:35:18,925 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-11 11:35:18,927 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:35:18,928 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 11:35:18,932 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 11:35:46,774 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:46,775 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 101(String)
2019-07-11 11:35:46,781 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 2
2019-07-11 11:35:46,782 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:35:46,783 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 11:35:46,786 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 11:35:46,789  INFO 942 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: wx, date: 2019-07-09T11:26:51.504 - result paysCount: 4, refundsCount: 2
2019-07-11 11:35:46,792 DEBUG 942 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:35:46,795 DEBUG 942 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 244(Integer), wx(String), 支付(String), 10110011562630251366259(String), null, 19900(Integer), null, 2019-07-12 00:34:20.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 244(Integer), wx(String), 支付(String), 10110011562660958366285(String), null, 5(Integer), null, 2019-07-12 00:34:21.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 244(Integer), wx(String), 支付(String), 10110011562610950366258(String), null, 22900(Integer), null, 2019-07-12 00:34:21.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 244(Integer), wx(String), 支付(String), 10110011562684369366311(String), null, 7200(Integer), null, 2019-07-12 00:34:21.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 244(Integer), wx(String), 退款(String), 10110011561291536365966(String), refund10110011561291536365966(String), 40500(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 244(Integer), wx(String), 退款(String), 10110011558860422365280(String), refund10110011558860422365280(String), 5(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 11:35:46,805 DEBUG 942 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 6
2019-07-11 11:35:46,806 DEBUG 942 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 11:35:46,807 DEBUG 942 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 6(Integer), 6(Integer), 4(Integer), 0(Integer), 2(Integer), 0(Integer), 50005(Integer), 0(Integer), 40505(Integer), 0(Integer), 299(Integer), -243(Integer), 244(Integer)
2019-07-11 11:35:46,812 DEBUG 942 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 11:35:46,855  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T11:26:51.504] createCompareBatch successful
2019-07-11 11:35:46,858 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:35:46,859 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 11:35:46,863 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:35:46,873  WARN 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-10T11:26:51.504] parse exception: 账单[20190710]已解析
2019-07-11 11:35:46,874 ERROR 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190710]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$25239116.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-11 11:35:46,878 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:35:46,879 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 11:35:46,882 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:35:46,890  WARN 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-10T11:26:51.504] parse exception: 账单[20190710]已解析
2019-07-11 11:35:46,891 ERROR 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190710]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$25239116.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-11 11:35:46,894 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:35:46,895 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 11:35:46,897 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:35:46,898  INFO 942 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 11:26:51 CST 2019)
2019-07-11 11:35:46,898  INFO 942 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 11:26:51 CST 2019)
2019-07-11 11:35:46,898  INFO 942 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_501_20190709.csv] already exists, return local file
2019-07-11 11:35:46,900 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:46,900 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String), 501(String)
2019-07-11 11:35:46,905 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:35:46,909 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:46,910 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String), 501(String)
2019-07-11 11:35:46,928 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:35:46,929 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:46,929 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String), 501(String)
2019-07-11 11:35:46,936 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:35:46,937 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:46,944 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String), 501(String)
2019-07-11 11:35:46,947 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:35:46,951 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:46,951 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String), 501(String)
2019-07-11 11:35:46,956 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 11:35:46,957 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:35:46,958 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 11:35:46,962 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 11:35:46,963 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 11:35:46,965 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), 0(Integer), 5(Integer), 0(Integer), 25(Integer), 0(Integer), {"总交易单数":5,"总交易额":0.00,"总退款金额":0.25,"手续费总金额":0.00000}(String), null
2019-07-11 11:35:46,970 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 11:35:46,971 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:35:46,971 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 11:35:46,974 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 11:35:46,976 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 11:35:46,979 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), null, null
2019-07-11 11:35:46,988 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 11:35:47,020  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T11:26:51.504] parse successful
2019-07-11 11:35:47,021 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:35:47,021 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190709(String), wx(String)
2019-07-11 11:35:47,025 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:35:47,026 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:47,026 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 501(String)
2019-07-11 11:35:47,041 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 5
2019-07-11 11:35:47,042 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:35:47,046 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String)
2019-07-11 11:35:47,053 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 11:35:47,055 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:35:47,056 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String)
2019-07-11 11:35:47,060 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 11:35:47,061 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:35:47,061 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String)
2019-07-11 11:35:47,065 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 11:35:47,066 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:35:47,066 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String)
2019-07-11 11:35:47,071 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 11:35:47,073 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 11:35:47,074 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String)
2019-07-11 11:35:47,077 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 11:35:47,080 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 11:35:47,081 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190709(String)
2019-07-11 11:35:47,087 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 11:35:47,088 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:35:47,088 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 11:35:47,094 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:35:47,095 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 11:35:47,096 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 11:35:47.095(Timestamp)
2019-07-11 11:35:47,100 DEBUG 942 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 11:35:47,109 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:35:47,110 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 11:35:47,115 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 11:35:47,118 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 11:35:47,118 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190709(String), wx(String)
2019-07-11 11:35:47,121 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 11:35:47,126 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:35:47,129 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 11:35:47,133 DEBUG 942 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 11:35:49,450 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 11:35:49,450 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 501(String)
2019-07-11 11:35:49,458 DEBUG 942 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 5
2019-07-11 11:35:49,459 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:35:49,460 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 11:35:49,470 DEBUG 942 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 11:35:49,471  INFO 942 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 501, payType: wx, date: 2019-07-09T11:26:51.504 - result paysCount: 0, refundsCount: 5
2019-07-11 11:35:49,478 DEBUG 942 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 11:35:49,482 DEBUG 942 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 245(Integer), wx(String), 退款(String), 10110011561694500364202(String), refund10110011561694500364202(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 245(Integer), wx(String), 退款(String), 10110011560398938363931(String), refund10110011560398938363931(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 245(Integer), wx(String), 退款(String), 10110011561951929364204(String), refund10110011561951929364204(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 245(Integer), wx(String), 退款(String), 10110011560334037363923(String), refund10110011560334037363923(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 245(Integer), wx(String), 退款(String), 10110011560327103363921(String), refund10110011560327103363921(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 11:35:49,495 DEBUG 942 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 5
2019-07-11 11:35:49,496 DEBUG 942 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 11:35:49,497 DEBUG 942 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 5(Integer), 5(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 25(Integer), 0(Integer), 0(Integer), 0(Integer), 245(Integer)
2019-07-11 11:35:49,501 DEBUG 942 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 11:35:49,529  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T11:26:51.504] createCompareBatch successful
2019-07-11 11:35:49,531 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:35:49,532 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 11:35:49,535 DEBUG 942 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:35:49,541  WARN 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-10T11:26:51.504] parse exception: 账单[20190710]已解析
2019-07-11 11:35:49,542 ERROR 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190710]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$25239116.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-11 11:35:49,542  INFO 942 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-11 11:35:49,561  INFO 942 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-11 11:35:49,563  INFO 942 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-11 11:35:49,580  INFO 942 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-11 11:55:24,089  INFO 1034 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 1034 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-11 11:55:24,090  INFO 1034 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-11 11:55:26,491  INFO 1034 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$23593c35] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 11:55:26,840  INFO 1034 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$456ac2d7] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 11:55:26,883  INFO 1034 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$4fa72ab2] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 11:55:26,996  INFO 1034 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-11 11:55:27,245  INFO 1034 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-11 11:55:27,263  INFO 1034 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 11:55:27,281  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-11 11:55:27,285  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:55:27,286  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:55:27,287  INFO 1034 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 11:55:27,287  INFO 1034 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 11:55:27,288  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-11 11:55:27,288  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:55:27,289  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:55:27,289  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-11 11:55:27,290  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:55:27,290  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:55:27,291  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 11:55:27,292  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:55:27,292  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:55:27,293  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 11:55:27,293  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 11:55:27,293  INFO 1034 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 11:55:27,541  INFO 1034 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-11 11:55:28,677  INFO 1034 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-11 11:55:29,318  INFO 1034 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$1af587f0
2019-07-11 11:55:29,334  INFO 1034 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$365b55ab
2019-07-11 11:55:29,455  INFO 1034 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-11 11:55:29,460  INFO 1034 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-11 11:55:31,035  INFO 1034 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-11 11:55:32,042  INFO 1034 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-11 11:55:32,711  INFO 1034 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-11 11:55:33,634  INFO 1034 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 10.548 seconds (JVM running for 11.737)
2019-07-11 11:55:34,412 DEBUG 1034 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 11:55:34,466 DEBUG 1034 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 11:55:34,524 DEBUG 1034 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 11:55:34,537  WARN 1034 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T00:00:00.000] parse exception: 账单[20190709]已解析
2019-07-11 11:55:34,543 ERROR 1034 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190709]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$8f37c823.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimerTest.findBetweenDate(BillDownloadTimerTest.java:65)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-11 11:55:34,600 DEBUG 1034 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 11:55:34,602 DEBUG 1034 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 11:55:34,620 DEBUG 1034 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 14
2019-07-11 11:55:34,646  INFO 1034 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-11 11:55:34,648  INFO 1034 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-11 11:55:34,678  INFO 1034 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-11 16:47:24,574  INFO 3689 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 3689 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-11 16:47:24,578  INFO 3689 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-11 16:47:28,110  INFO 3689 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$7ee74777] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 16:47:28,469  INFO 3689 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$a0f8ce19] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 16:47:28,539  INFO 3689 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$ab3535f4] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 16:47:28,704  INFO 3689 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-11 16:47:29,008  INFO 3689 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-11 16:47:29,037  INFO 3689 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 16:47:29,048  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-11 16:47:29,053  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:47:29,054  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:47:29,055  INFO 3689 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 16:47:29,055  INFO 3689 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 16:47:29,056  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-11 16:47:29,057  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:47:29,057  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:47:29,058  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-11 16:47:29,058  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:47:29,059  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:47:29,059  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 16:47:29,060  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:47:29,060  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:47:29,061  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 16:47:29,061  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:47:29,061  INFO 3689 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:47:29,394  INFO 3689 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-11 16:47:30,838  INFO 3689 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-11 16:47:31,601  INFO 3689 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$b32f8492
2019-07-11 16:47:31,618  INFO 3689 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$ce95524d
2019-07-11 16:47:31,807  INFO 3689 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-11 16:47:31,808  INFO 3689 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-11 16:47:33,998  INFO 3689 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-11 16:47:35,331  INFO 3689 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-11 16:47:36,511  INFO 3689 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-11 16:47:38,009  INFO 3689 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 14.809 seconds (JVM running for 17.203)
2019-07-11 16:47:38,670 DEBUG 3689 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:47:38,722 DEBUG 3689 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 16:47:38,803 DEBUG 3689 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 4
2019-07-11 16:47:38,829  INFO 3689 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-11 16:47:38,832  INFO 3689 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-11 16:47:38,855  INFO 3689 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-11 16:54:08,847  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 3693 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-11 16:54:08,849  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-11 16:54:11,273  INFO 3693 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$eb212a27] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 16:54:11,609  INFO 3693 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$d32b0c9] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 16:54:11,651  INFO 3693 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$176f18a4] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 16:54:11,773  INFO 3693 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-11 16:54:12,028  INFO 3693 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-11 16:54:12,050  INFO 3693 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 16:54:12,071  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-11 16:54:12,075  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:54:12,076  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:54:12,076  INFO 3693 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 16:54:12,077  INFO 3693 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 16:54:12,078  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-11 16:54:12,078  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:54:12,079  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:54:12,080  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-11 16:54:12,080  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:54:12,081  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:54:12,081  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 16:54:12,082  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:54:12,082  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:54:12,083  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 16:54:12,083  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:54:12,083  INFO 3693 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:54:12,332  INFO 3693 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-11 16:54:13,402  INFO 3693 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-11 16:54:14,030  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$c236ceff
2019-07-11 16:54:14,049  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$dd9c9cba
2019-07-11 16:54:14,191  INFO 3693 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-11 16:54:14,192  INFO 3693 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-11 16:54:15,796  INFO 3693 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-11 16:54:16,899  INFO 3693 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-11 16:54:17,586  INFO 3693 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-11 16:54:18,492  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 10.747 seconds (JVM running for 11.972)
2019-07-11 16:54:18,991  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-11 16:54:19,195 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:19,260 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 16:54:19,321 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:19,346  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 16:54:18 CST 2019)
2019-07-11 16:54:19,347  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 16:54:18 CST 2019)
2019-07-11 16:54:19,347  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 16:54:19,414  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190709 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-09","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-11 16:54:20,060 ERROR 3693 --- [           main] sdk.biz.err                              : ErrorScene^_^40004^_^isp.bill_not_exist^_^null^_^Mac OS X^_^2019-07-11 16:54:20^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=KaKUaKVtZXkxskqkuu3Zwp1uXQAAHJgdQCvm4Cgo+NFYGBTKhDR7A/+HX6HRN1rcmr/NnhfJDsEOJSxoMvgV2r7PJhGebdq+2aG3RviKK4ap8BdvyArQ/LeZMp/Cp8cAbhhKxbFi1P2XiELc5N/VJlVwW1tICelrpf23YR59/wAF6tY8XLkaNLD5h0HBDNouyqkHDbmiGhdpz3tu+u6hLm3YXZi04xAGIcGYh2omlZBx8GeF9Fq1DGwT4B0gzzh4wPo+LOk7/MGHo7kEEtRRKgDd0PYpUjB610ZjCUqxGu6gPqIrH7k9P4DoHw8Tlo2yfN++9ALESd0xNIp5u95wIA==&version=1.0&app_id=2018042660058300&sign_type=RSA2&timestamp=2019-07-11 16:54:19^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-09","bill_type":"trade"}^_^Body:{"alipay_data_dataservice_bill_downloadurl_query_response":{"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在"},"sign":"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw=="}^_^51ms,579ms,14ms
2019-07-11 16:54:20,063  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190709 response: {"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"isp.bill_not_exist\",\"sub_msg\":\"账单不存在\"},\"sign\":\"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw==\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-09\",\"bill_type\":\"trade\"}"},"error_code":"40004","success":false}
2019-07-11 16:54:20,064  WARN 3693 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: Business Failed # isp.bill_not_exist # 账单不存在
2019-07-11 16:54:20,066 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:20,070 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190709(String), null, Business Failed # isp.bill_not_exist # 账单不存在(String)
2019-07-11 16:54:20,079 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:20,130  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T16:54:18.994] parse successful
2019-07-11 16:54:20,156 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:20,157 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), alipay(String)
2019-07-11 16:54:20,165 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:20,167 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:20,168 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 503(String)
2019-07-11 16:54:20,173 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:20,180 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:54:20,181 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190709(String)
2019-07-11 16:54:20,192 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:54:20,193 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:20,194 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 16:54:20,204 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:54:20,205 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:54:20,209 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-11 16:54:20.204(Timestamp)
2019-07-11 16:54:20,220 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:54:20,222 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:20,223 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 16:54:20,229 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:54:20,229  INFO 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-09T16:54:18.994 - result is Null
2019-07-11 16:54:20,306  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T16:54:18.994] createCompareBatch successful
2019-07-11 16:54:20,312 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:20,313 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 16:54:20,318 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:20,319  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 16:54:18 CST 2019)
2019-07-11 16:54:20,320  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 16:54:18 CST 2019)
2019-07-11 16:54:20,327  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 request: {nonce_str=GysIwHYLAmdU7y1nBQit9dHhKCInooiS, bill_date=20190709, appid=wxd86049a121654669, sign=A7B78C0161D8EAA6FDAA6A6424B19B751AB0AA31D0F6F89D89815AF3E06D557F, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-11 16:54:20,888  INFO 3693 --- [           main] wxpay java sdk                           : report worker num: 6
2019-07-11 16:54:20,892  INFO 3693 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,GysIwHYLAmdU7y1nBQit9dHhKCInooiS,1562835260,508,api.mch.weixin.qq.com,true,6000,8000,0,0,0,E345F27457714B418C2A74DF927DFBA292D41A6246B4A3043A56C1AA9C1B6165
2019-07-11 16:54:20,893  INFO 3693 --- [pool-2-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,GysIwHYLAmdU7y1nBQit9dHhKCInooiS,1562835260,508,api.mch.weixin.qq.com,true,6000,8000,0,0,0,E345F27457714B418C2A74DF927DFBA292D41A6246B4A3043A56C1AA9C1B6165
2019-07-11 16:54:20,893  INFO 3693 --- [pool-2-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 16:54:20,894  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 16:54:20,894  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response content size: 149
2019-07-11 16:54:20,894  INFO 3693 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 16:54:20,898  INFO 3693 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 16:54:20,898  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 16:54:20,899  WARN 3693 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-11 16:54:20,899 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:20,900 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190709(String), null, No Bill Exist(String)
2019-07-11 16:54:20,903 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:20,957  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T16:54:18.994] parse successful
2019-07-11 16:54:20,958 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:20,958 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), wx(String)
2019-07-11 16:54:20,961 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:20,962 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:20,962 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 503(String)
2019-07-11 16:54:20,966 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:20,969 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:54:20,969 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190709(String)
2019-07-11 16:54:20,977 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:54:20,977 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:20,978 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 16:54:20,981 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:54:20,982 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:54:20,983 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 16:54:20.982(Timestamp)
2019-07-11 16:54:20,988 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:54:20,990 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:20,992 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 16:54:20,997 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:54:20,998  INFO 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-09T16:54:18.994 - result is Null
2019-07-11 16:54:21,034  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T16:54:18.994] createCompareBatch successful
2019-07-11 16:54:21,037 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:21,037 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 16:54:21,040 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:21,041  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Wed Jul 10 16:54:18 CST 2019)
2019-07-11 16:54:21,041  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Wed Jul 10 16:54:18 CST 2019)
2019-07-11 16:54:21,041  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 16:54:21,042  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190710 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-10","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-11 16:54:21,182 ERROR 3693 --- [           main] sdk.biz.err                              : ErrorScene^_^40004^_^isp.bill_not_exist^_^null^_^Mac OS X^_^2019-07-11 16:54:21^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=fS8+YU4upl/AwKcMeeR5LxFZJIcrz0jf77m6bcFs0v/3Khelc71XkMB9J7TtjmgE/4S7/iXaIgefujYzHQFLXCNJ5s3qB2V1mOg2QOAMFuJrrA2CGyZGR6DOMEL5DhBGkrNfiJzv/57opgE0awD+eaStcU7PVNbKgCNcojXIEdDyzBAzC7Cmmx56GY4pzrorYAYRKPMSYpx3m0bsK5htXgxoeweFHoD2UL1vblMdwsxDNUyumkzvOQIkFuJLwiX2pQo4ZDcqoZJ1HcRPmawNyoZLHG6rHW18i/qoqz/q5FaHxkCYjs7y/fhqCKlGOp3KvYhbOmFRUqojNuLbYgz/PA==&version=1.0&app_id=2018042660058300&sign_type=RSA2&timestamp=2019-07-11 16:54:21^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-10","bill_type":"trade"}^_^Body:{"alipay_data_dataservice_bill_downloadurl_query_response":{"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在"},"sign":"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw=="}^_^12ms,126ms,1ms
2019-07-11 16:54:21,183  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190710 response: {"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"isp.bill_not_exist\",\"sub_msg\":\"账单不存在\"},\"sign\":\"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw==\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-10\",\"bill_type\":\"trade\"}"},"error_code":"40004","success":false}
2019-07-11 16:54:21,183  WARN 3693 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: Business Failed # isp.bill_not_exist # 账单不存在
2019-07-11 16:54:21,184 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:21,185 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190710(String), null, Business Failed # isp.bill_not_exist # 账单不存在(String)
2019-07-11 16:54:21,189 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:21,216  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-10T16:54:18.994] parse successful
2019-07-11 16:54:21,218 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:21,218 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190710(String), alipay(String)
2019-07-11 16:54:21,221 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:21,222 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:21,223 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 503(String)
2019-07-11 16:54:21,228 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:21,231 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:54:21,232 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190710(String)
2019-07-11 16:54:21,235 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:54:21,237 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:21,237 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 16:54:21,240 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:54:21,241 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:54:21,241 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190710(String), alipay(String), 20190710(String), 2019-07-11 16:54:21.241(Timestamp)
2019-07-11 16:54:21,245 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:54:21,246 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:21,246 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 16:54:21,249 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:54:21,250  INFO 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-10T16:54:18.994 - result is Null
2019-07-11 16:54:21,283  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-10T16:54:18.994] createCompareBatch successful
2019-07-11 16:54:21,286 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:21,286 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 16:54:21,289 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:21,290  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Wed Jul 10 16:54:18 CST 2019)
2019-07-11 16:54:21,290  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=503, payType=wx, billDate=Wed Jul 10 16:54:18 CST 2019)
2019-07-11 16:54:21,291  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 request: {nonce_str=I2idnosyjJI7htkpBLAaOkaMDqH6MV3p, bill_date=20190710, appid=wxd86049a121654669, sign=64BD2C00D59FAFAC2E1E3BC6EA1FBF8FD20241013EA0ACE57415C888ADFD7F5D, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-11 16:54:21,542  INFO 3693 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,I2idnosyjJI7htkpBLAaOkaMDqH6MV3p,1562835261,247,api.mch.weixin.qq.com,true,6000,8000,0,0,0,3A9EB0F03B7ECD030CF3B391C277C8E45A191ACFCA2CF8CCEB490ED6C009668C
2019-07-11 16:54:21,543  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 16:54:21,543  INFO 3693 --- [pool-3-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,I2idnosyjJI7htkpBLAaOkaMDqH6MV3p,1562835261,247,api.mch.weixin.qq.com,true,6000,8000,0,0,0,3A9EB0F03B7ECD030CF3B391C277C8E45A191ACFCA2CF8CCEB490ED6C009668C
2019-07-11 16:54:21,543  INFO 3693 --- [pool-3-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 16:54:21,543  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response content size: 149
2019-07-11 16:54:21,543  INFO 3693 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 16:54:21,545  INFO 3693 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 16:54:21,545  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 16:54:21,545  WARN 3693 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-11 16:54:21,546 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:21,546 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190710(String), null, No Bill Exist(String)
2019-07-11 16:54:21,550 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:21,574  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-10T16:54:18.994] parse successful
2019-07-11 16:54:21,575 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:21,575 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190710(String), wx(String)
2019-07-11 16:54:21,578 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:21,579 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:21,579 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 503(String)
2019-07-11 16:54:21,582 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:21,584 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:54:21,585 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190710(String)
2019-07-11 16:54:21,588 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:54:21,588 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:21,589 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 16:54:21,592 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:54:21,593 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:54:21,593 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 16:54:21.593(Timestamp)
2019-07-11 16:54:21,597 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:54:21,598 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:21,599 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 16:54:21,601 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:54:21,602  INFO 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-10T16:54:18.994 - result is Null
2019-07-11 16:54:21,633  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-10T16:54:18.994] createCompareBatch successful
2019-07-11 16:54:21,635 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:21,636 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 16:54:21,640 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:21,641  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 16:54:18 CST 2019)
2019-07-11 16:54:21,641  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 16:54:18 CST 2019)
2019-07-11 16:54:21,642  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=101,appId=alipay,config=AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 16:54:21,642  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190709 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-09","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-11 16:54:21,819  INFO 3693 --- [           main] sdk.biz.err                              : Summary^_^10000^_^null^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=Z4DPp1nFEUvchNFkdubOIZZ1o9yGoMn9Hzu03UEXCF7K8d8nLaN8JVTNUqBUBs5KZkPw5n87zqZT26yo30x7tzWaplFw/QfNCDHtH2JSTCx5jh02tgRlsaum5Sc7Js9JvVbLJiPsjUlbs6NILM80I1wZl3bTgNKvUdUgLGw/2sk=&version=1.0&app_id=2016052401436400&sign_type=RSA&timestamp=2019-07-11 16:54:21^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-09","bill_type":"trade"}^_^4ms,172ms,1ms
2019-07-11 16:54:21,820  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190709 response: {"code":"10000","msg":"Success","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"10000\",\"msg\":\"Success\",\"bill_download_url\":\"http:\\/\\/dwbillcenter.alipay.com\\/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190709&downloadFileName=20882218614866000156_20190709.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190709.csv.zip&timestamp=1562835261&token=0cca4e9d8761801bf66c382c17acd4b0\"},\"sign\":\"VJ6DodYXk4BnCi0sQxlwichmGMvELK71ApOiWPtJ3sRV60/v+W51SHRTnFd6Oer4DHlUJqoR4I8ERpP6rd6nF0EDe7yZ9tgX61oOx1WJevbAl2sQbhx8bDqaRKnc4TGUIIULP1izvbtY9Fpa3CVq+WW1OIHJF/qokCrgpHJyHic=\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-09\",\"bill_type\":\"trade\"}"},"bill_download_url":"http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190709&downloadFileName=20882218614866000156_20190709.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190709.csv.zip&timestamp=1562835261&token=0cca4e9d8761801bf66c382c17acd4b0","error_code":"10000","success":true}
2019-07-11 16:54:21,820  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : alipay 101-Tue Jul 09 16:54:18 CST 2019 download-url: http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190709&downloadFileName=20882218614866000156_20190709.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190709.csv.zip&timestamp=1562835261&token=0cca4e9d8761801bf66c382c17acd4b0
2019-07-11 16:54:22,059  WARN 3693 --- [           main] o.a.h.c.protocol.ResponseProcessCookies  : Cookie rejected [zone="GZ00C", version:1, domain:.${session_domain}, path:/, expiry:null] Domain attribute ".${session_domain}" violates RFC 2109: domain must contain an embedded dot
2019-07-11 16:54:22,060  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file write to [alipay_101_2019-07-09.zip]
2019-07-11 16:54:22,063  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file [alipay_101_2019-07-09.zip] write success
2019-07-11 16:54:22,160 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:22,161 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String), 101(String)
2019-07-11 16:54:22,164 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:22,165 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:22,180 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), alipay(String), 20190709(String), 10110011562641960364267(String), 2019070922001486611048342510(String), 5(Integer), 0(Integer), 2019-07-09 19:15:44.0(Timestamp), {"refund_amount":0.05,"支付宝交易号":"2019070922001486611048342510","商户订单号":"10110011562641960364267","业务类型":"交易","商品名称":"商品名称974","创建时间":"2019-07-09 11:15:43","完成时间":"2019-07-09 11:15:44","门店编号":"dev","对方账户":"*佳鸿(641***@qq.com)","订单金额（元）":0.05,"商家实收（元）":0.05,"退款批次号/请求号":"","服务费（元）":0.00,"备注":""}(String), 2019-07-11 16:54:22.159(Timestamp)
2019-07-11 16:54:22,188 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:54:22,190 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:22,191 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 16:54:22,197 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:54:22,199 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 16:54:22,211 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":58,"退款订单总笔数":24,"订单金额（元）":5107.15,"商家实收（元）":5107.15,"服务费（元）":-62.99,"实收净额（元）":5044.16}(String), null
2019-07-11 16:54:22,215 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:22,216 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:22,216 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 16:54:22,222 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:22,223 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:22,224 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), null, null
2019-07-11 16:54:22,229 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:22,260  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T16:54:18.994] parse successful
2019-07-11 16:54:22,261 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:22,262 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-11 16:54:22,289 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 16:54:22,292 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:54:22,295 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562641960364267(String), alipay(String)
2019-07-11 16:54:22,304 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 16:54:22,306 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:22,307 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-11 16:54:22,312 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:22,316 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:54:22,317 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190709(String)
2019-07-11 16:54:22,323 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:54:22,324 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:22,324 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 16:54:22,329 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:54:22,330 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:54:22,331 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-11 16:54:22.33(Timestamp)
2019-07-11 16:54:22,336 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:54:22,337 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:22,337 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 16:54:22,347 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 16:54:22,351 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:22,351 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-11 16:54:22,356 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 16:54:22,398 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:54:22,399 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 16:54:22,415 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 14
2019-07-11 16:54:22,420 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:22,421 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-11 16:54:22,424 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:22,426 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:54:22,428 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 16:54:22,431 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 16:54:22,431  INFO 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-09T16:54:18.994 - result paysCount: 15, refundsCount: 0
2019-07-11 16:54:22,453 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:22,460 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 250(Integer), alipay(String), 支付(String), 10110011562641960364267(String), null, 5(Integer), null, 2019-07-09 19:15:44.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 250(Integer), alipay(String), 支付(String), 10110011562578001364264(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 250(Integer), alipay(String), 支付(String), fanhangtest-331(String), null, 0(Integer), 100(Integer), null, -1(Integer), 支付平台查无此单(String), null, 250(Integer), alipay(String), 支付(String), fanhangtest-330(String), null, 0(Integer), 100(Integer), null, -1(Integer), 支付平台查无此单(String), null, 250(Integer), alipay(String), 支付(String), 10110011562575830364256(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 250(Integer), alipay(String), 支付(String), 10110011562573708364254(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 250(Integer), alipay(String), 支付(String), 10110011562575964364257(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 250(Integer), alipay(String), 支付(String), 10110011562576075364259(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 250(Integer), alipay(String), 支付(String), 10110011562576136364260(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 250(Integer), alipay(String), 支付(String), 10110011562576378364262(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 250(Integer), alipay(String), 支付(String), 10110011562576307364261(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 250(Integer), alipay(String), 支付(String), 10110011562575765364255(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 250(Integer), alipay(String), 支付(String), 10110011562578989364265(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 250(Integer), alipay(String), 支付(String), 10110011562576040364258(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 250(Integer), alipay(String), 支付(String), 10110011562576689364263(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null
2019-07-11 16:54:22,467 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 15
2019-07-11 16:54:22,474 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 16:54:22,475 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 15(Integer), 15(Integer), 1(Integer), 14(Integer), 0(Integer), 0(Integer), 5(Integer), 260(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 250(Integer)
2019-07-11 16:54:22,479 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 16:54:22,508  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T16:54:18.994] createCompareBatch successful
2019-07-11 16:54:22,512 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:22,513 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 16:54:22,516 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:22,516  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 16:54:18 CST 2019)
2019-07-11 16:54:22,516  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 16:54:18 CST 2019)
2019-07-11 16:54:22,517  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 request: {nonce_str=7GZMqotLlJRchZ5aoDK0RBDAaqLvWCyi, bill_date=20190709, appid=wxf712db1e1042a294, sign=28B614E6A3960E9566681E842D88564F805E4533E57DE88457FE3390F1284A78, bill_type=ALL, mch_id=1367026602, sign_type=HMAC-SHA256}
2019-07-11 16:54:22,742  INFO 3693 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,7GZMqotLlJRchZ5aoDK0RBDAaqLvWCyi,1562835262,222,api.mch.weixin.qq.com,true,6000,8000,0,0,0,D6EF5D74C8842697AB1E8D287BF120E5D423612F5E3ED4827C48C9404373A966
2019-07-11 16:54:22,743  INFO 3693 --- [pool-4-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,7GZMqotLlJRchZ5aoDK0RBDAaqLvWCyi,1562835262,222,api.mch.weixin.qq.com,true,6000,8000,0,0,0,D6EF5D74C8842697AB1E8D287BF120E5D423612F5E3ED4827C48C9404373A966
2019-07-11 16:54:22,743  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : ﻿交易时间,公众账号ID,商户号,子商户号,设备号,微信订单号,商户订单号,用户标识,交易类型,交易状态,付款银行,货币种类,总金额,企业红包金额,微信退款单号,商户退款单号,退款金额,企业红包退款金额,退款类型,退款状态,商品名称,商户数据包,手续费,费率
`2019-07-09 10:15:35,`wxf712db1e1042a294,`1367026602,`0,`,`4200000297201906233184249390,`10110011561291536365966,`oF9zhvgYZ-Fy68cIOpnbNUOIhJ34,`MWEB,`REFUND,`LQT,`CNY,`0.00,`0.00,`50000600752019070910412896587,`refund10110011561291536365966,`405.00,`0.00,`ORIGINAL,`SUCCESS,`LONGCHAMP 珑骧 女士织物单肩包中号长柄 2605,`,`-2.43000,`0.60%
`2019-07-09 16:24:48,`wxf712db1e1042a294,`1367026602,`0,`,`4200000299201905263010571491,`10110011558860422365280,`oF9zhvuwwXGs0OPoPdSuknufzzuc,`MWEB,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000300612019070910499890270,`refund10110011558860422365280,`0.05,`0.00,`ORIGINAL,`SUCCESS,`chenjhtest,`,`0.00000,`0.60%
`2019-07-09 07:57:40,`wxf712db1e1042a294,`1367026602,`0,`,`4200000340201907096741436916,`10110011562630251366259,`oF9zhvoGcCB1bh1dX_FnTS1RoI1w,`JSAPI,`SUCCESS,`CFT,`CNY,`199.00,`0.00,`0,`0,`0.00,`0.00,`,`,`【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机,`,`1.19000,`0.60%
`2019-07-09 16:29:28,`wxf712db1e1042a294,`1367026602,`0,`,`4200000343201907096959558243,`10110011562660958366285,`oF9zhvuwwXGs0OPoPdSuknufzzuc,`MWEB,`SUCCESS,`CFT,`CNY,`0.05,`0.00,`0,`0,`0.00,`0.00,`,`,`口红,`,`0.00000,`0.60%
`2019-07-09 02:36:01,`wxf712db1e1042a294,`1367026602,`0,`,`4200000353201907091881341553,`10110011562610950366258,`oF9zhvs9znoUohMT1cJmQ6ZxFRFY,`MWEB,`SUCCESS,`LQT,`CNY,`229.00,`0.00,`0,`0,`0.00,`0.00,`,`,`CHARLEE&KLTH 手提金属提把钱包小ck10840136-单肩斜跨女包小方包,`,`1.37000,`0.60%
`2019-07-09 22:59:35,`wxde9d2081b4401862,`1367026602,`0,`,`4200000354201907098493063836,`10110011562684369366311,`o2st65Xf59UzUqdqHGjfP2i8mBC8,`JSAPI,`SUCCESS,`GDB_CREDIT,`CNY,`72.00,`0.00,`0,`0,`0.00,`0.00,`,`,`[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女,`,`0.43000,`0.60%
总交易单数,总交易额,总退款金额,总企业红包退款金额,手续费总金额
`6,`500.05,`405.05,`0.00,`0.56000

2019-07-11 16:54:22,743  INFO 3693 --- [pool-4-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 16:54:22,743  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response content size: 1848
2019-07-11 16:54:22,743  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file write to [wx_101_20190709.csv]
2019-07-11 16:54:22,748  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file [wx_101_20190709.csv] write success
2019-07-11 16:54:22,756 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:22,756 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String), 101(String)
2019-07-11 16:54:22,764 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 16:54:22,765 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:22,765 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String), 101(String)
2019-07-11 16:54:22,770 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 16:54:22,771 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:22,771 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String), 101(String)
2019-07-11 16:54:22,774 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:22,775 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:22,779 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562630251366259(String), 4200000340201907096741436916(String), 19900(Integer), 119(Integer), null, {"merchant_income_charge":199.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000340201907096741436916","商户订单号":"10110011562630251366259","用户标识":"oF9zhvoGcCB1bh1dX_FnTS1RoI1w","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":199.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机","手续费":1.19000,"费率":"0.60%"}(String), 2019-07-11 16:54:22.77(Timestamp)
2019-07-11 16:54:22,797 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:54:22,799 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:22,799 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String), 101(String)
2019-07-11 16:54:22,802 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:22,803 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:22,805 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562660958366285(String), 4200000343201907096959558243(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000343201907096959558243","商户订单号":"10110011562660958366285","用户标识":"oF9zhvuwwXGs0OPoPdSuknufzzuc","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"口红","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 16:54:22.798(Timestamp)
2019-07-11 16:54:22,809 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:54:22,810 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:22,811 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String), 101(String)
2019-07-11 16:54:22,814 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:22,815 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:22,817 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562610950366258(String), 4200000353201907091881341553(String), 22900(Integer), 137(Integer), null, {"merchant_income_charge":229.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000353201907091881341553","商户订单号":"10110011562610950366258","用户标识":"oF9zhvs9znoUohMT1cJmQ6ZxFRFY","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"LQT","货币种类":"CNY","总金额":229.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"CHARLEE&KLTH 手提金属提把钱包小ck10840136-单肩斜跨女包小方包","手续费":1.37000,"费率":"0.60%"}(String), 2019-07-11 16:54:22.81(Timestamp)
2019-07-11 16:54:22,822 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:54:22,824 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:22,825 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String), 101(String)
2019-07-11 16:54:22,828 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:22,829 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:22,830 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562684369366311(String), 4200000354201907098493063836(String), 7200(Integer), 43(Integer), null, {"merchant_income_charge":72.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000354201907098493063836","商户订单号":"10110011562684369366311","用户标识":"o2st65Xf59UzUqdqHGjfP2i8mBC8","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"GDB_CREDIT","货币种类":"CNY","总金额":72.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女","手续费":0.43000,"费率":"0.60%"}(String), 2019-07-11 16:54:22.823(Timestamp)
2019-07-11 16:54:22,834 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:54:22,835 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:22,836 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 16:54:22,839 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:54:22,839 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 16:54:22,841 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), 4(Integer), 2(Integer), 50005(Integer), 40505(Integer), 0(Integer), {"总交易单数":6,"总交易额":500.05,"总退款金额":405.05,"手续费总金额":0.56000}(String), null
2019-07-11 16:54:22,846 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:22,847 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:22,847 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 16:54:22,850 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:22,851 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:22,852 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), null, null
2019-07-11 16:54:22,855 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:22,884  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T16:54:18.994] parse successful
2019-07-11 16:54:22,885 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:22,886 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), wx(String)
2019-07-11 16:54:22,896 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-11 16:54:22,898 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:54:22,899 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562630251366259(String), wx(String)
2019-07-11 16:54:22,903 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:22,904  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562630251366259)
2019-07-11 16:54:22,905  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562630251366259,payType=wx
2019-07-11 16:54:22,905  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562630251366259
2019-07-11 16:54:22,907 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:22,907 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 16:54:22,911 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:22,913 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:22,913 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 16:54:22,918 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:22,918  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562630251366259
2019-07-11 16:54:22,919 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:54:22,920 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 16:54:22,930 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:22,931 ERROR 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562630251366259] exception: not find PayRequestLog record by [orderNo:10110011562630251366259,payType:wx] 
2019-07-11 16:54:22,931 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:54:22,932 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562660958366285(String), wx(String)
2019-07-11 16:54:22,935 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:22,936  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562660958366285)
2019-07-11 16:54:22,936  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562660958366285,payType=wx
2019-07-11 16:54:22,937  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562660958366285
2019-07-11 16:54:22,938 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:22,938 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 16:54:22,942 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:22,943 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:22,943 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 16:54:22,948 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:22,949  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562660958366285
2019-07-11 16:54:22,952 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:54:22,952 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 16:54:22,955 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:22,956 ERROR 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562660958366285] exception: not find PayRequestLog record by [orderNo:10110011562660958366285,payType:wx] 
2019-07-11 16:54:22,957 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:54:22,957 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562610950366258(String), wx(String)
2019-07-11 16:54:22,960 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:22,961  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562610950366258)
2019-07-11 16:54:22,962  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562610950366258,payType=wx
2019-07-11 16:54:22,962  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562610950366258
2019-07-11 16:54:22,963 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:22,963 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 16:54:22,967 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:22,968 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:22,968 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 16:54:22,973 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:22,973  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562610950366258
2019-07-11 16:54:22,974 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:54:22,974 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 16:54:22,978 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:22,978 ERROR 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562610950366258] exception: not find PayRequestLog record by [orderNo:10110011562610950366258,payType:wx] 
2019-07-11 16:54:22,979 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:54:22,979 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562684369366311(String), wx(String)
2019-07-11 16:54:22,982 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:22,983  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562684369366311)
2019-07-11 16:54:22,983  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562684369366311,payType=wx
2019-07-11 16:54:22,983  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562684369366311
2019-07-11 16:54:22,984 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:22,984 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 16:54:22,988 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:22,989 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:22,989 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 16:54:22,995 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:22,996  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562684369366311
2019-07-11 16:54:22,996 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:54:22,997 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 16:54:22,999 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,000 ERROR 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562684369366311] exception: not find PayRequestLog record by [orderNo:10110011562684369366311,payType:wx] 
2019-07-11 16:54:23,001 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:23,001 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 101(String)
2019-07-11 16:54:23,007 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 2
2019-07-11 16:54:23,009 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 16:54:23,010 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String)
2019-07-11 16:54:23,014 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-11 16:54:23,015  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@c93c0d30, appId=101, payType=wx, orderNo=10110011561291536365966, refundNo=refund10110011561291536365966)
2019-07-11 16:54:23,015  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011561291536365966,payType=wx
2019-07-11 16:54:23,015  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011561291536365966
2019-07-11 16:54:23,016 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:23,016 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 16:54:23,019 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:23,019 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:23,019 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 16:54:23,023 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:23,023  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011561291536365966
2019-07-11 16:54:23,024 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:54:23,024 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 16:54:23,027 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,027 ERROR 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011561291536365966] exception: not find PayRequestLog record by [orderNo:10110011561291536365966,payType:wx] 
2019-07-11 16:54:23,028 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 16:54:23,028 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String)
2019-07-11 16:54:23,031 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-11 16:54:23,031  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@5755a13c, appId=101, payType=wx, orderNo=10110011558860422365280, refundNo=refund10110011558860422365280)
2019-07-11 16:54:23,032  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011558860422365280,payType=wx
2019-07-11 16:54:23,032  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011558860422365280
2019-07-11 16:54:23,032 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:23,032 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 16:54:23,035 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:23,036 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:23,037 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 16:54:23,040 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:23,041  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011558860422365280
2019-07-11 16:54:23,042 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:54:23,042 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 16:54:23,045 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,045 ERROR 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011558860422365280] exception: not find PayRequestLog record by [orderNo:10110011558860422365280,payType:wx] 
2019-07-11 16:54:23,048 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:54:23,049 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190709(String)
2019-07-11 16:54:23,052 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:54:23,054 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:23,054 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 16:54:23,057 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:54:23,058 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:54:23,060 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 16:54:23.058(Timestamp)
2019-07-11 16:54:23,063 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:54:23,065 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:23,066 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 16:54:23,070 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 16:54:23,071 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:23,072 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), wx(String)
2019-07-11 16:54:23,080 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-11 16:54:23,080 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:54:23,081 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 16:54:23,085 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 16:54:23,086 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:23,087 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 101(String)
2019-07-11 16:54:23,096 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 2
2019-07-11 16:54:23,097 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:54:23,098 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 16:54:23,100 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 16:54:23,102  INFO 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: wx, date: 2019-07-09T16:54:18.994 - result paysCount: 4, refundsCount: 2
2019-07-11 16:54:23,105 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:23,114 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 251(Integer), wx(String), 支付(String), 10110011562630251366259(String), null, 19900(Integer), null, 2019-07-12 05:53:25.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 251(Integer), wx(String), 支付(String), 10110011562660958366285(String), null, 5(Integer), null, 2019-07-12 05:53:25.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 251(Integer), wx(String), 支付(String), 10110011562610950366258(String), null, 22900(Integer), null, 2019-07-12 05:53:25.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 251(Integer), wx(String), 支付(String), 10110011562684369366311(String), null, 7200(Integer), null, 2019-07-12 05:53:25.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 251(Integer), wx(String), 退款(String), 10110011561291536365966(String), refund10110011561291536365966(String), 40500(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 251(Integer), wx(String), 退款(String), 10110011558860422365280(String), refund10110011558860422365280(String), 5(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 16:54:23,119 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 6
2019-07-11 16:54:23,120 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 16:54:23,121 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 6(Integer), 6(Integer), 4(Integer), 0(Integer), 2(Integer), 0(Integer), 50005(Integer), 0(Integer), 40505(Integer), 0(Integer), 299(Integer), -243(Integer), 251(Integer)
2019-07-11 16:54:23,129 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 16:54:23,167  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T16:54:18.994] createCompareBatch successful
2019-07-11 16:54:23,171 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:23,172 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 16:54:23,175 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:23,176  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Wed Jul 10 16:54:18 CST 2019)
2019-07-11 16:54:23,176  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Wed Jul 10 16:54:18 CST 2019)
2019-07-11 16:54:23,176  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=101,appId=alipay,config=AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 16:54:23,177  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190710 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-10","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-11 16:54:23,277  INFO 3693 --- [           main] sdk.biz.err                              : Summary^_^10000^_^null^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=Zs+0qJJ69W8jiETda4y7y75wFsPZFqk++jXKQ8n9p7MkdVxrw09spivNfRHOKe4dg+wgI8UCyLBcJLre4ITiMh69axhD9BC7zJJze63ZNc6VcaWPZnc+7a9KJnwQrdmc7sBogme5rfKCayvVUy23pQPOa2yQ3H17t4h3iCxGZpo=&version=1.0&app_id=2016052401436400&sign_type=RSA&timestamp=2019-07-11 16:54:23^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-10","bill_type":"trade"}^_^3ms,96ms,1ms
2019-07-11 16:54:23,278  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190710 response: {"code":"10000","msg":"Success","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"10000\",\"msg\":\"Success\",\"bill_download_url\":\"http:\\/\\/dwbillcenter.alipay.com\\/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190710&downloadFileName=20882218614866000156_20190710.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190710.csv.zip&timestamp=1562835263&token=890679b97983bdefc0e140f872204f46\"},\"sign\":\"fKpUI8WHXHT6xa6nz6La80d7j170qkjybZG4YaG+Y+sqfPsCvPaZZ/eB+W2kVKPFY1bYpMGQ264VUpt1mN/4Fnx3QOosSAynqtUMXCLtiABuDQ7pT3n95EGv9tM8nb42ixJZO2n3T7DVFvXIIFn7qHemmgzAS373z/rxumy7sQs=\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-10\",\"bill_type\":\"trade\"}"},"bill_download_url":"http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190710&downloadFileName=20882218614866000156_20190710.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190710.csv.zip&timestamp=1562835263&token=890679b97983bdefc0e140f872204f46","error_code":"10000","success":true}
2019-07-11 16:54:23,278  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : alipay 101-Wed Jul 10 16:54:18 CST 2019 download-url: http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190710&downloadFileName=20882218614866000156_20190710.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190710.csv.zip&timestamp=1562835263&token=890679b97983bdefc0e140f872204f46
2019-07-11 16:54:23,417  WARN 3693 --- [           main] o.a.h.c.protocol.ResponseProcessCookies  : Cookie rejected [zone="GZ00C", version:1, domain:.${session_domain}, path:/, expiry:null] Domain attribute ".${session_domain}" violates RFC 2109: domain must contain an embedded dot
2019-07-11 16:54:23,417  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file write to [alipay_101_2019-07-10.zip]
2019-07-11 16:54:23,418  INFO 3693 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file [alipay_101_2019-07-10.zip] write success
2019-07-11 16:54:23,422 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:23,424 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 16:54:23,428 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:54:23,429 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 16:54:23,431 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190710(String), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":10,"退款订单总笔数":1,"订单金额（元）":2763.08,"商家实收（元）":2763.08,"服务费（元）":-19.00,"实收净额（元）":2744.08}(String), null
2019-07-11 16:54:23,436 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:23,438 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:23,439 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 16:54:23,443 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:23,443 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:23,444 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190710(String), null, null
2019-07-11 16:54:23,448 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:23,475  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-10T16:54:18.994] parse successful
2019-07-11 16:54:23,476 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:23,477 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), alipay(String)
2019-07-11 16:54:23,480 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:23,481 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:23,481 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 101(String)
2019-07-11 16:54:23,484 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:23,487 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:54:23,488 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190710(String)
2019-07-11 16:54:23,491 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:54:23,492 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:23,492 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 16:54:23,496 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:54:23,496 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:54:23,497 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190710(String), alipay(String), 20190710(String), 2019-07-11 16:54:23.496(Timestamp)
2019-07-11 16:54:23,501 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:54:23,502 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:23,502 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 16:54:23,505 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 16:54:23,506 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:23,506 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), alipay(String)
2019-07-11 16:54:23,509 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:23,509 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:54:23,510 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 16:54:23,516 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 4
2019-07-11 16:54:23,517 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:23,518 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 101(String)
2019-07-11 16:54:23,520 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:23,521 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:54:23,522 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 16:54:23,525 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 16:54:23,526  INFO 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-10T16:54:18.994 - result paysCount: 0, refundsCount: 0
2019-07-11 16:54:23,559  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-10T16:54:18.994] createCompareBatch successful
2019-07-11 16:54:23,561 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:23,562 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 16:54:23,565 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:23,565  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Wed Jul 10 16:54:18 CST 2019)
2019-07-11 16:54:23,566  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=101, payType=wx, billDate=Wed Jul 10 16:54:18 CST 2019)
2019-07-11 16:54:23,566  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 request: {nonce_str=NtaZgu8enKwb6RUnPO8VuzioYLsB4nVV, bill_date=20190710, appid=wxf712db1e1042a294, sign=56D1679589D9408033BA0A798E66DBB11892F2493D891CE3D591C372B147AE59, bill_type=ALL, mch_id=1367026602, sign_type=HMAC-SHA256}
2019-07-11 16:54:23,818  INFO 3693 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,NtaZgu8enKwb6RUnPO8VuzioYLsB4nVV,1562835263,249,api.mch.weixin.qq.com,true,6000,8000,0,0,0,518DD3CBE3200357D6456C7C8BA0D7FCE0E7EB51944DA46198AAF8D6590DAD64
2019-07-11 16:54:23,818  INFO 3693 --- [pool-5-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,NtaZgu8enKwb6RUnPO8VuzioYLsB4nVV,1562835263,249,api.mch.weixin.qq.com,true,6000,8000,0,0,0,518DD3CBE3200357D6456C7C8BA0D7FCE0E7EB51944DA46198AAF8D6590DAD64
2019-07-11 16:54:23,818  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : ﻿交易时间,公众账号ID,商户号,子商户号,设备号,微信订单号,商户订单号,用户标识,交易类型,交易状态,付款银行,货币种类,总金额,企业红包金额,微信退款单号,商户退款单号,退款金额,企业红包退款金额,退款类型,退款状态,商品名称,商户数据包,手续费,费率
`2019-07-10 17:19:23,`wxde9d2081b4401862,`1367026602,`0,`,`4200000344201907100111506573,`10110011562750358366328,`o2st65T1fiFkBV5u0VCK4hCcbd9g,`JSAPI,`SUCCESS,`CFT,`CNY,`0.05,`0.00,`0,`0,`0.00,`0.00,`,`,`口红,`,`0.00000,`0.60%
`2019-07-10 16:31:10,`wxde9d2081b4401862,`1367026602,`0,`,`4200000345201907108271098923,`10110011562747463366326,`o2st65Xf59UzUqdqHGjfP2i8mBC8,`JSAPI,`SUCCESS,`GZCB_CREDIT,`CNY,`72.00,`0.00,`0,`0,`0.00,`0.00,`,`,`[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女,`,`0.43000,`0.60%
`2019-07-10 02:17:15,`wxf712db1e1042a294,`1367026602,`0,`,`4200000348201907106511074240,`10110011562696226366313,`oF9zhvqxjkPiRuAtAE1I7DM8D8DM,`JSAPI,`SUCCESS,`ICBC_DEBIT,`CNY,`97.00,`0.00,`0,`0,`0.00,`0.00,`,`,`限时特惠法国欧缇丽大葡萄喷雾200ml,`,`0.58000,`0.60%
`2019-07-10 18:55:19,`wxde9d2081b4401862,`1367026602,`0,`,`4200000357201907106116812608,`10110011562756105366329,`o2st65Q1-foCJuSTbu43TTsROVEc,`JSAPI,`SUCCESS,`CITIC_CREDIT,`CNY,`389.00,`0.00,`0,`0,`0.00,`0.00,`,`,`【爆款断货王】李佳琦墙裂推荐蒋梦婕同款SKG便携非击打电极片颈部按摩仪4098,`,`2.33000,`0.60%
`2019-07-10 22:38:31,`wxf712db1e1042a294,`1367026602,`0,`,`4200000356201907109364537299,`10110011562769501366331,`oF9zhvufx-oO_DF93qVSb29GUK9s,`MWEB,`SUCCESS,`LQT,`CNY,`199.00,`0.00,`0,`0,`0.00,`0.00,`,`,`【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机,`,`1.19000,`0.60%
`2019-07-10 07:58:34,`wxde9d2081b4401862,`1367026602,`0,`,`4200000343201907102910159982,`10110011562716709366314,`o2st65TO8eXX0Jtoa1m1i82JiNXc,`JSAPI,`SUCCESS,`CFT,`CNY,`97.00,`0.00,`0,`0,`0.00,`0.00,`,`,`限时特惠法国欧缇丽大葡萄喷雾200ml,`,`0.58000,`0.60%
总交易单数,总交易额,总退款金额,总企业红包退款金额,手续费总金额
`6,`854.05,`0.00,`0.00,`5.11000

2019-07-11 16:54:23,819  INFO 3693 --- [pool-5-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 16:54:23,819  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response content size: 1721
2019-07-11 16:54:23,819  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file write to [wx_101_20190710.csv]
2019-07-11 16:54:23,819  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file [wx_101_20190710.csv] write success
2019-07-11 16:54:23,821 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:23,822 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562750358366328(String), wx(String), 101(String)
2019-07-11 16:54:23,825 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,825 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:23,827 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562750358366328(String), 4200000344201907100111506573(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907100111506573","商户订单号":"10110011562750358366328","用户标识":"o2st65T1fiFkBV5u0VCK4hCcbd9g","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"口红","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 16:54:23.821(Timestamp)
2019-07-11 16:54:23,830 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:54:23,832 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:23,832 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562747463366326(String), wx(String), 101(String)
2019-07-11 16:54:23,835 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,835 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:23,836 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562747463366326(String), 4200000345201907108271098923(String), 7200(Integer), 43(Integer), null, {"merchant_income_charge":72.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000345201907108271098923","商户订单号":"10110011562747463366326","用户标识":"o2st65Xf59UzUqdqHGjfP2i8mBC8","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"GZCB_CREDIT","货币种类":"CNY","总金额":72.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女","手续费":0.43000,"费率":"0.60%"}(String), 2019-07-11 16:54:23.831(Timestamp)
2019-07-11 16:54:23,840 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:54:23,841 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:23,841 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562696226366313(String), wx(String), 101(String)
2019-07-11 16:54:23,843 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,844 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:23,845 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562696226366313(String), 4200000348201907106511074240(String), 9700(Integer), 58(Integer), null, {"merchant_income_charge":97.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000348201907106511074240","商户订单号":"10110011562696226366313","用户标识":"oF9zhvqxjkPiRuAtAE1I7DM8D8DM","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"ICBC_DEBIT","货币种类":"CNY","总金额":97.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"限时特惠法国欧缇丽大葡萄喷雾200ml","手续费":0.58000,"费率":"0.60%"}(String), 2019-07-11 16:54:23.84(Timestamp)
2019-07-11 16:54:23,848 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:54:23,849 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:23,850 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562756105366329(String), wx(String), 101(String)
2019-07-11 16:54:23,852 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,853 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:23,853 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562756105366329(String), 4200000357201907106116812608(String), 38900(Integer), 233(Integer), null, {"merchant_income_charge":389.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000357201907106116812608","商户订单号":"10110011562756105366329","用户标识":"o2st65Q1-foCJuSTbu43TTsROVEc","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CITIC_CREDIT","货币种类":"CNY","总金额":389.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【爆款断货王】李佳琦墙裂推荐蒋梦婕同款SKG便携非击打电极片颈部按摩仪4098","手续费":2.33000,"费率":"0.60%"}(String), 2019-07-11 16:54:23.849(Timestamp)
2019-07-11 16:54:23,858 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:54:23,859 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:23,859 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562769501366331(String), wx(String), 101(String)
2019-07-11 16:54:23,862 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,862 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:23,863 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562769501366331(String), 4200000356201907109364537299(String), 19900(Integer), 119(Integer), null, {"merchant_income_charge":199.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000356201907109364537299","商户订单号":"10110011562769501366331","用户标识":"oF9zhvufx-oO_DF93qVSb29GUK9s","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"LQT","货币种类":"CNY","总金额":199.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机","手续费":1.19000,"费率":"0.60%"}(String), 2019-07-11 16:54:23.858(Timestamp)
2019-07-11 16:54:23,867 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:54:23,868 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:23,869 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562716709366314(String), wx(String), 101(String)
2019-07-11 16:54:23,871 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,874 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:23,875 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562716709366314(String), 4200000343201907102910159982(String), 9700(Integer), 58(Integer), null, {"merchant_income_charge":97.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000343201907102910159982","商户订单号":"10110011562716709366314","用户标识":"o2st65TO8eXX0Jtoa1m1i82JiNXc","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":97.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"限时特惠法国欧缇丽大葡萄喷雾200ml","手续费":0.58000,"费率":"0.60%"}(String), 2019-07-11 16:54:23.868(Timestamp)
2019-07-11 16:54:23,879 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:54:23,880 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:23,880 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 16:54:23,883 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:54:23,883 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 16:54:23,885 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190710(String), 6(Integer), 0(Integer), 85405(Integer), 0(Integer), 5(Integer), {"总交易单数":6,"总交易额":854.05,"总退款金额":0.00,"手续费总金额":5.11000}(String), null
2019-07-11 16:54:23,889 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:23,890 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:23,890 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 16:54:23,893 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:23,893 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:23,895 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190710(String), null, null
2019-07-11 16:54:23,898 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:23,925  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-10T16:54:18.994] parse successful
2019-07-11 16:54:23,926 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:23,926 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), wx(String)
2019-07-11 16:54:23,939 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 6
2019-07-11 16:54:23,939 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:54:23,940 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562750358366328(String), wx(String)
2019-07-11 16:54:23,942 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,943  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562750358366328)
2019-07-11 16:54:23,943  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562750358366328,payType=wx
2019-07-11 16:54:23,943  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562750358366328
2019-07-11 16:54:23,943 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:23,944 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 16:54:23,946 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:23,947 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:23,948 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 16:54:23,950 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:23,951  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562750358366328
2019-07-11 16:54:23,951 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:54:23,952 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 16:54:23,954 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,954 ERROR 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562750358366328] exception: not find PayRequestLog record by [orderNo:10110011562750358366328,payType:wx] 
2019-07-11 16:54:23,955 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:54:23,955 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562747463366326(String), wx(String)
2019-07-11 16:54:23,957 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,958  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562747463366326)
2019-07-11 16:54:23,958  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562747463366326,payType=wx
2019-07-11 16:54:23,958  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562747463366326
2019-07-11 16:54:23,958 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:23,959 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 16:54:23,962 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:23,962 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:23,964 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 16:54:23,966 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:23,967  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562747463366326
2019-07-11 16:54:23,967 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:54:23,968 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 16:54:23,970 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,970 ERROR 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562747463366326] exception: not find PayRequestLog record by [orderNo:10110011562747463366326,payType:wx] 
2019-07-11 16:54:23,971 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:54:23,971 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562696226366313(String), wx(String)
2019-07-11 16:54:23,973 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,973  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562696226366313)
2019-07-11 16:54:23,974  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562696226366313,payType=wx
2019-07-11 16:54:23,974  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562696226366313
2019-07-11 16:54:23,974 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:23,974 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 16:54:23,977 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:23,978 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:23,978 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 16:54:23,981 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:23,982  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562696226366313
2019-07-11 16:54:23,982 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:54:23,982 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 16:54:23,984 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,985 ERROR 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562696226366313] exception: not find PayRequestLog record by [orderNo:10110011562696226366313,payType:wx] 
2019-07-11 16:54:23,985 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:54:23,986 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562756105366329(String), wx(String)
2019-07-11 16:54:23,988 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:23,989  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562756105366329)
2019-07-11 16:54:23,989  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562756105366329,payType=wx
2019-07-11 16:54:23,989  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562756105366329
2019-07-11 16:54:23,990 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:23,990 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 16:54:23,993 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:23,994 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:23,994 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 16:54:23,997 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:23,997  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562756105366329
2019-07-11 16:54:23,998 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:54:23,998 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 16:54:24,000 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:24,001 ERROR 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562756105366329] exception: not find PayRequestLog record by [orderNo:10110011562756105366329,payType:wx] 
2019-07-11 16:54:24,002 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:54:24,002 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562769501366331(String), wx(String)
2019-07-11 16:54:24,005 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:24,005  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562769501366331)
2019-07-11 16:54:24,005  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562769501366331,payType=wx
2019-07-11 16:54:24,005  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562769501366331
2019-07-11 16:54:24,006 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:24,006 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 16:54:24,009 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:24,010 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:24,010 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 16:54:24,013 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:24,013  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562769501366331
2019-07-11 16:54:24,014 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:54:24,014 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 16:54:24,017 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:24,018 ERROR 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562769501366331] exception: not find PayRequestLog record by [orderNo:10110011562769501366331,payType:wx] 
2019-07-11 16:54:24,019 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:54:24,019 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562716709366314(String), wx(String)
2019-07-11 16:54:24,022 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:24,023  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562716709366314)
2019-07-11 16:54:24,023  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562716709366314,payType=wx
2019-07-11 16:54:24,023  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562716709366314
2019-07-11 16:54:24,023 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:24,024 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 16:54:24,027 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:24,027 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:54:24,028 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 16:54:24,031 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:54:24,032  INFO 3693 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562716709366314
2019-07-11 16:54:24,033 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:54:24,033 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 16:54:24,036 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:24,036 ERROR 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562716709366314] exception: not find PayRequestLog record by [orderNo:10110011562716709366314,payType:wx] 
2019-07-11 16:54:24,037 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:24,038 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 101(String)
2019-07-11 16:54:24,041 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:24,044 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:54:24,045 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190710(String)
2019-07-11 16:54:24,048 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:54:24,049 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:24,049 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 16:54:24,052 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:54:24,053 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:54:24,054 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 16:54:24.053(Timestamp)
2019-07-11 16:54:24,057 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:54:24,060 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:24,061 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 16:54:24,064 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 16:54:24,065 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:24,066 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), wx(String)
2019-07-11 16:54:24,072 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 6
2019-07-11 16:54:24,073 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:54:24,074 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 16:54:24,077 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 16:54:24,078 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:24,079 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 101(String)
2019-07-11 16:54:24,081 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:24,082 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:54:24,082 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 16:54:24,085 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 16:54:24,085  INFO 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: wx, date: 2019-07-10T16:54:18.994 - result paysCount: 6, refundsCount: 0
2019-07-11 16:54:24,088 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:24,093 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 253(Integer), wx(String), 支付(String), 10110011562750358366328(String), null, 5(Integer), null, 2019-07-12 05:53:26.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 253(Integer), wx(String), 支付(String), 10110011562747463366326(String), null, 7200(Integer), null, 2019-07-12 05:53:26.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 253(Integer), wx(String), 支付(String), 10110011562696226366313(String), null, 9700(Integer), null, 2019-07-12 05:53:26.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 253(Integer), wx(String), 支付(String), 10110011562756105366329(String), null, 38900(Integer), null, 2019-07-12 05:53:26.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 253(Integer), wx(String), 支付(String), 10110011562769501366331(String), null, 19900(Integer), null, 2019-07-12 05:53:26.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 253(Integer), wx(String), 支付(String), 10110011562716709366314(String), null, 9700(Integer), null, 2019-07-12 05:53:26.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 16:54:24,097 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 6
2019-07-11 16:54:24,099 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 16:54:24,100 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 6(Integer), 6(Integer), 6(Integer), 0(Integer), 0(Integer), 0(Integer), 85405(Integer), 0(Integer), 0(Integer), 0(Integer), 511(Integer), 0(Integer), 253(Integer)
2019-07-11 16:54:24,103 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 16:54:24,134  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-10T16:54:18.994] createCompareBatch successful
2019-07-11 16:54:24,136 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:24,137 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 16:54:24,139 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:24,139  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 16:54:18 CST 2019)
2019-07-11 16:54:24,141  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 16:54:18 CST 2019)
2019-07-11 16:54:24,143  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 request: {nonce_str=FYp6kTtCTpxYUCOLqM6HNHE5bYlaKTf4, bill_date=20190709, appid=wx1e86ddc5b2485ab2, sign=5B678791E3975C8B41CC5DFCA8F472A934B8F5D2F534BB4968845C1E97013B22, bill_type=ALL, mch_id=1429146602, sign_type=HMAC-SHA256}
2019-07-11 16:54:24,399  INFO 3693 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,FYp6kTtCTpxYUCOLqM6HNHE5bYlaKTf4,1562835264,253,api.mch.weixin.qq.com,true,6000,8000,0,0,0,E95FE0912289966C33A94ABB7FA7146EC3212CEF50FD6DBCC1A0699EB9DDF376
2019-07-11 16:54:24,400  INFO 3693 --- [pool-6-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,FYp6kTtCTpxYUCOLqM6HNHE5bYlaKTf4,1562835264,253,api.mch.weixin.qq.com,true,6000,8000,0,0,0,E95FE0912289966C33A94ABB7FA7146EC3212CEF50FD6DBCC1A0699EB9DDF376
2019-07-11 16:54:24,400  INFO 3693 --- [pool-6-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 16:54:24,400  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : ﻿交易时间,公众账号ID,商户号,子商户号,设备号,微信订单号,商户订单号,用户标识,交易类型,交易状态,付款银行,货币种类,总金额,企业红包金额,微信退款单号,商户退款单号,退款金额,企业红包退款金额,退款类型,退款状态,商品名称,商户数据包,手续费,费率
`2019-07-09 15:04:25,`wx9b5cb757426e00d9,`1429146602,`0,`,`4200000300201906281787713838,`10110011561694500364202,`ok1_lw3e743joDk95Hb9U153nwk8,`JSAPI,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000600872019070910515745012,`refund10110011561694500364202,`0.05,`0.00,`ORIGINAL,`SUCCESS,`定向专用,`,`0.00000,`0.60%
`2019-07-09 14:25:16,`wx9b5cb757426e00d9,`1429146602,`0,`,`4200000303201906137721154482,`10110011560398938363931,`ok1_lw3e743joDk95Hb9U153nwk8,`MWEB,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000200882019070910306564674,`refund10110011560398938363931,`0.05,`0.00,`ORIGINAL,`SUCCESS,`发给34524香港总部,`,`0.00000,`0.60%
`2019-07-09 14:59:46,`wxc9d0a70977ecf5fe,`1429146602,`0,`,`4200000294201907012576189376,`10110011561951929364204,`oSyi-4jrMh4wtNEJDSMk-h-wxcUM,`JSAPI,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000000892019070910499055214,`refund10110011561951929364204,`0.05,`0.00,`ORIGINAL,`SUCCESS,`定向专用,`,`0.00000,`0.60%
`2019-07-09 14:26:49,`wxc9d0a70977ecf5fe,`1429146602,`0,`,`4200000302201906127476731585,`10110011560334037363923,`oSyi-4jrMh4wtNEJDSMk-h-wxcUM,`JSAPI,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000100702019070910536509454,`refund10110011560334037363923,`0.05,`0.00,`ORIGINAL,`SUCCESS,`发给34524香港总部,`,`0.00000,`0.60%
`2019-07-09 14:36:48,`wxc9d0a70977ecf5fe,`1429146602,`0,`,`4200000295201906127291057886,`10110011560327103363921,`oSyi-4jrMh4wtNEJDSMk-h-wxcUM,`JSAPI,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000600922019070910376228007,`refund10110011560327103363921,`0.05,`0.00,`ORIGINAL,`SUCCESS,`发给34524香港总部,`,`0.00000,`0.60%
总交易单数,总交易额,总退款金额,总企业红包退款金额,手续费总金额
`5,`0.00,`0.25,`0.00,`0.00000

2019-07-11 16:54:24,400  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response content size: 1707
2019-07-11 16:54:24,400  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file write to [wx_501_20190709.csv]
2019-07-11 16:54:24,401  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file [wx_501_20190709.csv] write success
2019-07-11 16:54:24,406 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:24,407 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String), 501(String)
2019-07-11 16:54:24,409 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 16:54:24,410 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:24,410 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String), 501(String)
2019-07-11 16:54:24,413 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 16:54:24,414 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:24,414 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String), 501(String)
2019-07-11 16:54:24,417 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 16:54:24,418 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:24,418 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String), 501(String)
2019-07-11 16:54:24,421 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 16:54:24,421 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:24,422 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String), 501(String)
2019-07-11 16:54:24,426 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 16:54:24,426 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:24,426 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 16:54:24,428 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:54:24,429 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 16:54:24,429 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), 0(Integer), 5(Integer), 0(Integer), 25(Integer), 0(Integer), {"总交易单数":5,"总交易额":0.00,"总退款金额":0.25,"手续费总金额":0.00000}(String), null
2019-07-11 16:54:24,432 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:24,433 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:24,433 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 16:54:24,435 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:24,436 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:24,436 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), null, null
2019-07-11 16:54:24,440 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:24,467  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T16:54:18.994] parse successful
2019-07-11 16:54:24,468 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:24,468 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190709(String), wx(String)
2019-07-11 16:54:24,470 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:24,471 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:24,472 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 501(String)
2019-07-11 16:54:24,484 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 5
2019-07-11 16:54:24,486 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 16:54:24,487 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String)
2019-07-11 16:54:24,491 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 16:54:24,492 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 16:54:24,492 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String)
2019-07-11 16:54:24,495 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 16:54:24,496 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 16:54:24,496 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String)
2019-07-11 16:54:24,499 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 16:54:24,500 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 16:54:24,500 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String)
2019-07-11 16:54:24,504 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 16:54:24,504 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 16:54:24,504 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String)
2019-07-11 16:54:24,508 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 16:54:24,511 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:54:24,511 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190709(String)
2019-07-11 16:54:24,514 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:54:24,515 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:24,515 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 16:54:24,517 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:54:24,518 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:54:24,519 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 16:54:24.518(Timestamp)
2019-07-11 16:54:24,522 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:54:24,524 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:24,526 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 16:54:24,532 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 16:54:24,533 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:24,534 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190709(String), wx(String)
2019-07-11 16:54:24,538 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:24,539 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:54:24,540 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 16:54:24,544 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 16:54:24,546 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:24,547 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 501(String)
2019-07-11 16:54:24,555 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 5
2019-07-11 16:54:24,557 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:54:24,562 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 16:54:24,566 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 16:54:24,567  INFO 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 501, payType: wx, date: 2019-07-09T16:54:18.994 - result paysCount: 0, refundsCount: 5
2019-07-11 16:54:24,572 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:24,577 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 254(Integer), wx(String), 退款(String), 10110011561694500364202(String), refund10110011561694500364202(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 254(Integer), wx(String), 退款(String), 10110011560398938363931(String), refund10110011560398938363931(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 254(Integer), wx(String), 退款(String), 10110011561951929364204(String), refund10110011561951929364204(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 254(Integer), wx(String), 退款(String), 10110011560334037363923(String), refund10110011560334037363923(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 254(Integer), wx(String), 退款(String), 10110011560327103363921(String), refund10110011560327103363921(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 16:54:24,583 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 5
2019-07-11 16:54:24,584 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 16:54:24,584 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 5(Integer), 5(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 25(Integer), 0(Integer), 0(Integer), 0(Integer), 254(Integer)
2019-07-11 16:54:24,589 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 16:54:24,618  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T16:54:18.994] createCompareBatch successful
2019-07-11 16:54:24,622 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:24,623 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 16:54:24,626 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:24,627  INFO 3693 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Wed Jul 10 16:54:18 CST 2019)
2019-07-11 16:54:24,627  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=501, payType=wx, billDate=Wed Jul 10 16:54:18 CST 2019)
2019-07-11 16:54:24,628  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 request: {nonce_str=GzlIDekIj2JSLczvKKScXgX2dq2mEjWM, bill_date=20190710, appid=wx1e86ddc5b2485ab2, sign=952ECC05B6E480F8F1FDDF524B80AF0CBAEAAB9E1C9B49EE4A1D88B0EF4DD6AD, bill_type=ALL, mch_id=1429146602, sign_type=HMAC-SHA256}
2019-07-11 16:54:24,875  INFO 3693 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,GzlIDekIj2JSLczvKKScXgX2dq2mEjWM,1562835264,243,api.mch.weixin.qq.com,true,6000,8000,0,0,0,AC4765258102756E5C509CBC96F2F153E2B0D2738543BC7F824FC1DF92C17975
2019-07-11 16:54:24,875  INFO 3693 --- [pool-7-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,GzlIDekIj2JSLczvKKScXgX2dq2mEjWM,1562835264,243,api.mch.weixin.qq.com,true,6000,8000,0,0,0,AC4765258102756E5C509CBC96F2F153E2B0D2738543BC7F824FC1DF92C17975
2019-07-11 16:54:24,875  INFO 3693 --- [pool-7-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 16:54:24,875  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : ﻿交易时间,公众账号ID,商户号,子商户号,设备号,微信订单号,商户订单号,用户标识,交易类型,交易状态,付款银行,货币种类,总金额,企业红包金额,微信退款单号,商户退款单号,退款金额,企业红包退款金额,退款类型,退款状态,商品名称,商户数据包,手续费,费率
`2019-07-10 16:57:07,`wxc9d0a70977ecf5fe,`1429146602,`0,`,`4200000343201907100504762389,`10110011562749010364282,`oSyi-4rB8pMx1uqy6_GpbsCQ_4qw,`JSAPI,`SUCCESS,`CFT,`CNY,`0.05,`0.00,`0,`0,`0.00,`0.00,`,`,`商品名称374,`,`0.00000,`0.60%
总交易单数,总交易额,总退款金额,总企业红包退款金额,手续费总金额
`1,`0.05,`0.00,`0.00,`0.00000

2019-07-11 16:54:24,875  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response content size: 428
2019-07-11 16:54:24,875  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file write to [wx_501_20190710.csv]
2019-07-11 16:54:24,876  INFO 3693 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file [wx_501_20190710.csv] write success
2019-07-11 16:54:24,877 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:24,878 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562749010364282(String), wx(String), 501(String)
2019-07-11 16:54:24,880 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:54:24,881 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:24,883 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190710(String), 10110011562749010364282(String), 4200000343201907100504762389(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxc9d0a70977ecf5fe","商户号":"1429146602","子商户号":"0","微信订单号":"4200000343201907100504762389","商户订单号":"10110011562749010364282","用户标识":"oSyi-4rB8pMx1uqy6_GpbsCQ_4qw","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"商品名称374","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 16:54:24.877(Timestamp)
2019-07-11 16:54:24,887 DEBUG 3693 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:54:24,888 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:24,888 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 16:54:24,891 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:54:24,891 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 16:54:24,892 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190710(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"总交易单数":1,"总交易额":0.05,"总退款金额":0.00,"手续费总金额":0.00000}(String), null
2019-07-11 16:54:24,896 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:24,896 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:24,897 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 16:54:24,899 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:54:24,899 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:24,900 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190710(String), null, null
2019-07-11 16:54:24,903 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:54:24,935  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-10T16:54:18.994] parse successful
2019-07-11 16:54:24,936 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:24,937 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190710(String), wx(String)
2019-07-11 16:54:24,941 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 16:54:24,941 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:54:24,942 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110011562749010364282(String), wx(String)
2019-07-11 16:54:24,945 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 16:54:24,946 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:24,947 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 501(String)
2019-07-11 16:54:24,949 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:24,951 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:54:24,952 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190710(String)
2019-07-11 16:54:24,954 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:54:24,955 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:24,955 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 16:54:24,957 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:54:24,958 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:54:24,959 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 16:54:24.958(Timestamp)
2019-07-11 16:54:24,962 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:54:24,963 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:54:24,963 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 16:54:24,966 DEBUG 3693 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 16:54:24,967 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:54:24,967 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190710(String), wx(String)
2019-07-11 16:54:24,970 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 16:54:24,971 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:54:24,972 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 16:54:24,974 DEBUG 3693 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 16:54:24,975 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:54:24,975 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 501(String)
2019-07-11 16:54:24,977 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:54:24,978 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:54:24,978 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 16:54:24,980 DEBUG 3693 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 16:54:24,981  INFO 3693 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 501, payType: wx, date: 2019-07-10T16:54:18.994 - result paysCount: 1, refundsCount: 0
2019-07-11 16:54:24,981 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:54:24,982 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 255(Integer), wx(String), 支付(String), 10110011562749010364282(String), null, 5(Integer), null, 2019-07-12 05:53:27.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 16:54:24,985 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 1
2019-07-11 16:54:24,985 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 16:54:24,986 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 1(Integer), 1(Integer), 1(Integer), 0(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 255(Integer)
2019-07-11 16:54:24,989 DEBUG 3693 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 16:54:25,018  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-10T16:54:18.994] createCompareBatch successful
2019-07-11 16:54:25,018  INFO 3693 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-11 16:54:25,030  INFO 3693 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-11 16:54:25,032  INFO 3693 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-11 16:54:25,058  INFO 3693 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-11 16:57:54,967  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 3697 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-11 16:57:54,972  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-11 16:57:58,634  INFO 3697 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$98d75d27] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 16:57:58,982  INFO 3697 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$bae8e3c9] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 16:57:59,038  INFO 3697 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$c5254ba4] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 16:57:59,199  INFO 3697 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-11 16:57:59,525  INFO 3697 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-11 16:57:59,559  INFO 3697 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 16:57:59,571  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-11 16:57:59,576  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:57:59,577  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:57:59,578  INFO 3697 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 16:57:59,579  INFO 3697 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 16:57:59,580  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-11 16:57:59,580  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:57:59,580  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:57:59,581  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-11 16:57:59,582  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:57:59,583  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:57:59,585  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 16:57:59,586  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:57:59,587  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:57:59,588  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 16:57:59,589  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 16:57:59,591  INFO 3697 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 16:58:00,015  INFO 3697 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-11 16:58:01,403  INFO 3697 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-11 16:58:02,174  INFO 3697 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$3a95dcd4
2019-07-11 16:58:02,194  INFO 3697 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$55fbaa8f
2019-07-11 16:58:02,356  INFO 3697 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-11 16:58:02,356  INFO 3697 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-11 16:58:04,702  INFO 3697 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-11 16:58:06,070  INFO 3697 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-11 16:58:07,382  INFO 3697 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-11 16:58:09,095  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 15.842 seconds (JVM running for 18.623)
2019-07-11 16:58:09,592  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-11 16:58:09,881 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:09,942 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 16:58:10,065 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:58:10,094  WARN 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T16:58:09.599] parse exception: 账单[20190709]已解析
2019-07-11 16:58:10,137 ERROR 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190709]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$aed81d07.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-11 16:58:10,147 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:10,148 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 16:58:10,155 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:58:10,172  WARN 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T16:58:09.599] parse exception: 账单[20190709]已解析
2019-07-11 16:58:10,173 ERROR 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190709]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$aed81d07.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-11 16:58:10,178 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:10,179 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 16:58:10,190 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:58:10,208  INFO 3697 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Wed Jul 10 16:58:09 CST 2019)
2019-07-11 16:58:10,210  INFO 3697 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Wed Jul 10 16:58:09 CST 2019)
2019-07-11 16:58:10,211  INFO 3697 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 16:58:10,316  INFO 3697 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190710 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-10","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-11 16:58:11,026 ERROR 3697 --- [           main] sdk.biz.err                              : ErrorScene^_^40004^_^isp.bill_not_exist^_^null^_^Mac OS X^_^2019-07-11 16:58:11^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=Kxow4a6qtg6nXZuXctSNzuQkpSk+nNvDnlAO62x0cJShJy3moP5DV1P5xQd6JvFs7vnnOzj+y4nULy2UilVIVKs1eL5PMppcK1vEwMbKX8sL+P0qHE5KR9EcmizIk+JWUeDFGEB7qxbYbq/fraNRXfBjofQQBJgX16gEn90vsS8YwTV/4HEG1H1RMWOaqoai7mTmoHYWMI9bSza2UsDWcmBdTJPawMR/qc9wqPl1wLrpCOLbS+mKKb8lQX+VgGn/gqsIYAuWLJCNrUBEtvkouVo84ANiYnOo/cqwT+CSuhnNZiEEhn0Nuqs5vunXGFepIcZouUOsvb6+B4Wbaz/1bA==&version=1.0&app_id=2018042660058300&sign_type=RSA2&timestamp=2019-07-11 16:58:10^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-10","bill_type":"trade"}^_^Body:{"alipay_data_dataservice_bill_downloadurl_query_response":{"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在"},"sign":"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw=="}^_^96ms,552ms,57ms
2019-07-11 16:58:11,056  INFO 3697 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190710 response: {"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"isp.bill_not_exist\",\"sub_msg\":\"账单不存在\"},\"sign\":\"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw==\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-10\",\"bill_type\":\"trade\"}"},"error_code":"40004","success":false}
2019-07-11 16:58:11,058  WARN 3697 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: Business Failed # isp.bill_not_exist # 账单不存在
2019-07-11 16:58:11,066 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:58:11,075 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190710(String), null, Business Failed # isp.bill_not_exist # 账单不存在(String)
2019-07-11 16:58:11,297 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:58:11,641  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-10T16:58:09.599] parse successful
2019-07-11 16:58:11,644 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:58:11,646 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190710(String), alipay(String)
2019-07-11 16:58:11,674 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:58:11,676 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:58:11,678 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 503(String)
2019-07-11 16:58:11,688 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:58:11,700 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:58:11,701 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190710(String)
2019-07-11 16:58:11,714 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:58:11,716 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:11,717 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 16:58:11,724 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:58:11,725 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:58:11,733 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190710(String), alipay(String), 20190710(String), 2019-07-11 16:58:11.724(Timestamp)
2019-07-11 16:58:11,743 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:58:11,745 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:11,746 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 16:58:11,752 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:58:11,753  INFO 3697 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-10T16:58:09.599 - result is Null
2019-07-11 16:58:11,786  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-10T16:58:09.599] createCompareBatch successful
2019-07-11 16:58:11,792 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:11,792 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 16:58:11,798 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:58:11,798  INFO 3697 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Wed Jul 10 16:58:09 CST 2019)
2019-07-11 16:58:11,798  INFO 3697 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=503, payType=wx, billDate=Wed Jul 10 16:58:09 CST 2019)
2019-07-11 16:58:11,808  INFO 3697 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 request: {nonce_str=VWUe9a9Y1b0DxjKvtEmvUITTgNfYKJmd, bill_date=20190710, appid=wxd86049a121654669, sign=F08F8ECEE48150B98A35D163618467D97BEFAA16BF558F67ED4A60A5EB051B0C, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-11 16:58:12,422  INFO 3697 --- [           main] wxpay java sdk                           : report worker num: 6
2019-07-11 16:58:12,428  INFO 3697 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,VWUe9a9Y1b0DxjKvtEmvUITTgNfYKJmd,1562835492,569,api.mch.weixin.qq.com,true,6000,8000,0,0,0,CF72CB20C3E6670B29B3E7E8C5E11191AEF9B979AEFCB0F1CE711F9B94182C5A
2019-07-11 16:58:12,429  INFO 3697 --- [pool-2-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,VWUe9a9Y1b0DxjKvtEmvUITTgNfYKJmd,1562835492,569,api.mch.weixin.qq.com,true,6000,8000,0,0,0,CF72CB20C3E6670B29B3E7E8C5E11191AEF9B979AEFCB0F1CE711F9B94182C5A
2019-07-11 16:58:12,429  INFO 3697 --- [pool-2-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 16:58:12,429  INFO 3697 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 16:58:12,432  INFO 3697 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response content size: 149
2019-07-11 16:58:12,433  INFO 3697 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 16:58:12,436  INFO 3697 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 16:58:12,436  INFO 3697 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 16:58:12,436  WARN 3697 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-11 16:58:12,437 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:58:12,438 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190710(String), null, No Bill Exist(String)
2019-07-11 16:58:12,448 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:58:12,486  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-10T16:58:09.599] parse successful
2019-07-11 16:58:12,487 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:58:12,488 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190710(String), wx(String)
2019-07-11 16:58:12,494 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:58:12,495 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:58:12,496 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 503(String)
2019-07-11 16:58:12,503 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:58:12,509 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:58:12,509 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190710(String)
2019-07-11 16:58:12,516 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:58:12,517 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:12,518 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 16:58:12,541 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:58:12,543 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:58:12,544 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 16:58:12.543(Timestamp)
2019-07-11 16:58:12,556 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:58:12,557 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:12,559 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 16:58:12,564 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:58:12,566  INFO 3697 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-10T16:58:09.599 - result is Null
2019-07-11 16:58:12,601  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-10T16:58:09.599] createCompareBatch successful
2019-07-11 16:58:12,607 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:12,607 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 16:58:12,614 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:58:12,630  WARN 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T16:58:09.599] parse exception: 账单[20190709]已解析
2019-07-11 16:58:12,631 ERROR 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190709]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$aed81d07.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-11 16:58:12,636 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:12,637 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 16:58:12,642 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:58:12,659  WARN 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T16:58:09.599] parse exception: 账单[20190709]已解析
2019-07-11 16:58:12,660 ERROR 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190709]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$aed81d07.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-11 16:58:12,665 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:12,666 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 16:58:12,673 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:58:12,674  INFO 3697 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Wed Jul 10 16:58:09 CST 2019)
2019-07-11 16:58:12,674  INFO 3697 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Wed Jul 10 16:58:09 CST 2019)
2019-07-11 16:58:12,896 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:12,897 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 16:58:12,906 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:58:12,907 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 16:58:12,925 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190710(String), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":10,"退款订单总笔数":1,"订单金额（元）":2763.08,"商家实收（元）":2763.08,"服务费（元）":-19.00,"实收净额（元）":2744.08}(String), null
2019-07-11 16:58:12,935 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 16:58:12,936 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:12,937 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 16:58:12,943 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:58:12,944 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:58:12,945 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190710(String), null, null
2019-07-11 16:58:12,957 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:58:12,999  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-10T16:58:09.599] parse successful
2019-07-11 16:58:13,001 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:58:13,001 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), alipay(String)
2019-07-11 16:58:13,007 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:58:13,008 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:58:13,009 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 101(String)
2019-07-11 16:58:13,014 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:58:13,021 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:58:13,022 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190710(String)
2019-07-11 16:58:13,030 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:58:13,032 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:13,033 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 16:58:13,040 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:58:13,041 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:58:13,042 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190710(String), alipay(String), 20190710(String), 2019-07-11 16:58:13.041(Timestamp)
2019-07-11 16:58:13,057 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:58:13,059 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:58:13,067 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 16:58:13,132 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 16:58:13,140 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:58:13,141 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), alipay(String)
2019-07-11 16:58:13,151 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:58:13,248 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:58:13,249 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 16:58:13,268 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 4
2019-07-11 16:59:21,293 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:59:21,294 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 101(String)
2019-07-11 16:59:21,305 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:59:21,307 DEBUG 3697 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:59:21,308 DEBUG 3697 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 16:59:21,311 DEBUG 3697 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 16:59:21,314  INFO 3697 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-10T16:58:09.599 - result paysCount: 0, refundsCount: 0
2019-07-11 16:59:21,344  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-10T16:58:09.599] createCompareBatch successful
2019-07-11 16:59:21,347 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:59:21,348 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 16:59:21,351 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:59:21,351  INFO 3697 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Wed Jul 10 16:58:09 CST 2019)
2019-07-11 16:59:21,352  INFO 3697 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=101, payType=wx, billDate=Wed Jul 10 16:58:09 CST 2019)
2019-07-11 16:59:21,352  INFO 3697 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_101_20190710.csv] already exists, return local file
2019-07-11 16:59:21,368 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:59:21,369 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562750358366328(String), wx(String), 101(String)
2019-07-11 16:59:21,372 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,375 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:59:21,379 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562750358366328(String), 4200000344201907100111506573(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907100111506573","商户订单号":"10110011562750358366328","用户标识":"o2st65T1fiFkBV5u0VCK4hCcbd9g","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"口红","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 16:59:21.367(Timestamp)
2019-07-11 16:59:21,384 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:59:21,386 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:59:21,387 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562747463366326(String), wx(String), 101(String)
2019-07-11 16:59:21,390 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,391 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:59:21,393 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562747463366326(String), 4200000345201907108271098923(String), 7200(Integer), 43(Integer), null, {"merchant_income_charge":72.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000345201907108271098923","商户订单号":"10110011562747463366326","用户标识":"o2st65Xf59UzUqdqHGjfP2i8mBC8","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"GZCB_CREDIT","货币种类":"CNY","总金额":72.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女","手续费":0.43000,"费率":"0.60%"}(String), 2019-07-11 16:59:21.386(Timestamp)
2019-07-11 16:59:21,398 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:59:21,399 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:59:21,400 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562696226366313(String), wx(String), 101(String)
2019-07-11 16:59:21,403 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,404 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:59:21,405 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562696226366313(String), 4200000348201907106511074240(String), 9700(Integer), 58(Integer), null, {"merchant_income_charge":97.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000348201907106511074240","商户订单号":"10110011562696226366313","用户标识":"oF9zhvqxjkPiRuAtAE1I7DM8D8DM","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"ICBC_DEBIT","货币种类":"CNY","总金额":97.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"限时特惠法国欧缇丽大葡萄喷雾200ml","手续费":0.58000,"费率":"0.60%"}(String), 2019-07-11 16:59:21.399(Timestamp)
2019-07-11 16:59:21,413 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:59:21,414 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:59:21,415 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562756105366329(String), wx(String), 101(String)
2019-07-11 16:59:21,421 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,422 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:59:21,423 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562756105366329(String), 4200000357201907106116812608(String), 38900(Integer), 233(Integer), null, {"merchant_income_charge":389.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000357201907106116812608","商户订单号":"10110011562756105366329","用户标识":"o2st65Q1-foCJuSTbu43TTsROVEc","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CITIC_CREDIT","货币种类":"CNY","总金额":389.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【爆款断货王】李佳琦墙裂推荐蒋梦婕同款SKG便携非击打电极片颈部按摩仪4098","手续费":2.33000,"费率":"0.60%"}(String), 2019-07-11 16:59:21.414(Timestamp)
2019-07-11 16:59:21,429 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:59:21,431 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:59:21,431 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562769501366331(String), wx(String), 101(String)
2019-07-11 16:59:21,436 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,437 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:59:21,438 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562769501366331(String), 4200000356201907109364537299(String), 19900(Integer), 119(Integer), null, {"merchant_income_charge":199.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000356201907109364537299","商户订单号":"10110011562769501366331","用户标识":"oF9zhvufx-oO_DF93qVSb29GUK9s","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"LQT","货币种类":"CNY","总金额":199.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机","手续费":1.19000,"费率":"0.60%"}(String), 2019-07-11 16:59:21.43(Timestamp)
2019-07-11 16:59:21,446 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:59:21,447 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:59:21,448 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562716709366314(String), wx(String), 101(String)
2019-07-11 16:59:21,451 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,452 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:59:21,454 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562716709366314(String), 4200000343201907102910159982(String), 9700(Integer), 58(Integer), null, {"merchant_income_charge":97.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000343201907102910159982","商户订单号":"10110011562716709366314","用户标识":"o2st65TO8eXX0Jtoa1m1i82JiNXc","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":97.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"限时特惠法国欧缇丽大葡萄喷雾200ml","手续费":0.58000,"费率":"0.60%"}(String), 2019-07-11 16:59:21.447(Timestamp)
2019-07-11 16:59:21,459 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:59:21,461 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:59:21,461 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 16:59:21,464 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:59:21,465 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 16:59:21,468 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190710(String), 6(Integer), 0(Integer), 85405(Integer), 0(Integer), 5(Integer), {"总交易单数":6,"总交易额":854.05,"总退款金额":0.00,"手续费总金额":5.11000}(String), null
2019-07-11 16:59:21,474 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 16:59:21,475 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:59:21,475 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 16:59:21,481 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:59:21,482 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:59:21,483 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190710(String), null, null
2019-07-11 16:59:21,489 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:59:21,521  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-10T16:58:09.599] parse successful
2019-07-11 16:59:21,522 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:59:21,523 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), wx(String)
2019-07-11 16:59:21,534 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 6
2019-07-11 16:59:21,536 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:59:21,537 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562750358366328(String), wx(String)
2019-07-11 16:59:21,541 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,541  INFO 3697 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562750358366328)
2019-07-11 16:59:21,542  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562750358366328,payType=wx
2019-07-11 16:59:21,542  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562750358366328
2019-07-11 16:59:21,543 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:59:21,543 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 16:59:21,547 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:59:21,548 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:59:21,549 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 16:59:21,554 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:59:21,554  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562750358366328
2019-07-11 16:59:21,555 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:59:21,556 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 16:59:21,562 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,564 ERROR 3697 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562750358366328] exception: not find PayRequestLog record by [orderNo:10110011562750358366328,payType:wx] 
2019-07-11 16:59:21,564 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:59:21,565 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562747463366326(String), wx(String)
2019-07-11 16:59:21,571 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,571  INFO 3697 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562747463366326)
2019-07-11 16:59:21,571  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562747463366326,payType=wx
2019-07-11 16:59:21,572  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562747463366326
2019-07-11 16:59:21,572 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:59:21,572 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 16:59:21,575 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:59:21,576 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:59:21,577 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 16:59:21,580 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:59:21,581  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562747463366326
2019-07-11 16:59:21,582 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:59:21,582 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 16:59:21,584 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,585 ERROR 3697 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562747463366326] exception: not find PayRequestLog record by [orderNo:10110011562747463366326,payType:wx] 
2019-07-11 16:59:21,586 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:59:21,586 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562696226366313(String), wx(String)
2019-07-11 16:59:21,589 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,589  INFO 3697 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562696226366313)
2019-07-11 16:59:21,590  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562696226366313,payType=wx
2019-07-11 16:59:21,590  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562696226366313
2019-07-11 16:59:21,591 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:59:21,591 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 16:59:21,595 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:59:21,596 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:59:21,597 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 16:59:21,600 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:59:21,601  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562696226366313
2019-07-11 16:59:21,601 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:59:21,602 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 16:59:21,605 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,611 ERROR 3697 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562696226366313] exception: not find PayRequestLog record by [orderNo:10110011562696226366313,payType:wx] 
2019-07-11 16:59:21,612 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:59:21,612 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562756105366329(String), wx(String)
2019-07-11 16:59:21,615 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,615  INFO 3697 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562756105366329)
2019-07-11 16:59:21,616  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562756105366329,payType=wx
2019-07-11 16:59:21,616  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562756105366329
2019-07-11 16:59:21,616 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:59:21,616 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 16:59:21,618 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:59:21,619 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:59:21,619 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 16:59:21,622 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:59:21,623  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562756105366329
2019-07-11 16:59:21,626 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:59:21,627 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 16:59:21,630 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,630 ERROR 3697 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562756105366329] exception: not find PayRequestLog record by [orderNo:10110011562756105366329,payType:wx] 
2019-07-11 16:59:21,631 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:59:21,631 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562769501366331(String), wx(String)
2019-07-11 16:59:21,633 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,634  INFO 3697 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562769501366331)
2019-07-11 16:59:21,634  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562769501366331,payType=wx
2019-07-11 16:59:21,634  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562769501366331
2019-07-11 16:59:21,635 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:59:21,635 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 16:59:21,638 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:59:21,639 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:59:21,639 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 16:59:21,643 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:59:21,644  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562769501366331
2019-07-11 16:59:21,645 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:59:21,646 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 16:59:21,649 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,651 ERROR 3697 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562769501366331] exception: not find PayRequestLog record by [orderNo:10110011562769501366331,payType:wx] 
2019-07-11 16:59:21,652 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:59:21,652 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562716709366314(String), wx(String)
2019-07-11 16:59:21,657 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,658  INFO 3697 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562716709366314)
2019-07-11 16:59:21,658  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562716709366314,payType=wx
2019-07-11 16:59:21,658  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562716709366314
2019-07-11 16:59:21,659 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:59:21,659 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 16:59:21,664 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:59:21,666 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 16:59:21,667 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 16:59:21,670 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 16:59:21,671  INFO 3697 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562716709366314
2019-07-11 16:59:21,672 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 16:59:21,675 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 16:59:21,679 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:21,679 ERROR 3697 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562716709366314] exception: not find PayRequestLog record by [orderNo:10110011562716709366314,payType:wx] 
2019-07-11 16:59:21,680 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:59:21,681 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 101(String)
2019-07-11 16:59:21,684 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:59:21,687 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:59:21,688 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190710(String)
2019-07-11 16:59:21,692 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:59:21,693 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:59:21,694 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 16:59:21,698 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:59:21,699 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:59:21,701 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 16:59:21.698(Timestamp)
2019-07-11 16:59:21,705 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:59:21,707 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:59:21,708 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 16:59:21,712 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 16:59:21,713 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:59:21,713 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), wx(String)
2019-07-11 16:59:21,726 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 6
2019-07-11 16:59:21,727 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:59:21,729 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 16:59:21,733 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 16:59:24,242 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:59:24,242 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 101(String)
2019-07-11 16:59:24,248 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:59:24,250 DEBUG 3697 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:59:24,251 DEBUG 3697 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 16:59:24,258 DEBUG 3697 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 16:59:24,259  INFO 3697 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: wx, date: 2019-07-10T16:58:09.599 - result paysCount: 6, refundsCount: 0
2019-07-11 16:59:24,279 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:59:24,282 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 259(Integer), wx(String), 支付(String), 10110011562750358366328(String), null, 5(Integer), null, 2019-07-12 05:58:24.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 259(Integer), wx(String), 支付(String), 10110011562747463366326(String), null, 7200(Integer), null, 2019-07-12 05:58:24.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 259(Integer), wx(String), 支付(String), 10110011562696226366313(String), null, 9700(Integer), null, 2019-07-12 05:58:24.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 259(Integer), wx(String), 支付(String), 10110011562756105366329(String), null, 38900(Integer), null, 2019-07-12 05:58:24.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 259(Integer), wx(String), 支付(String), 10110011562769501366331(String), null, 19900(Integer), null, 2019-07-12 05:58:24.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 259(Integer), wx(String), 支付(String), 10110011562716709366314(String), null, 9700(Integer), null, 2019-07-12 05:58:24.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 16:59:24,307 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 6
2019-07-11 16:59:24,316 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 16:59:24,317 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 6(Integer), 6(Integer), 6(Integer), 0(Integer), 0(Integer), 0(Integer), 85405(Integer), 0(Integer), 0(Integer), 0(Integer), 511(Integer), 0(Integer), 259(Integer)
2019-07-11 16:59:24,334 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 16:59:24,363  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-10T16:58:09.599] createCompareBatch successful
2019-07-11 16:59:24,367 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:59:24,368 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 16:59:24,372 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:59:24,382  WARN 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T16:58:09.599] parse exception: 账单[20190709]已解析
2019-07-11 16:59:24,383 ERROR 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190709]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$aed81d07.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-11 16:59:24,387 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:59:24,387 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 16:59:24,391 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:59:24,392  INFO 3697 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Wed Jul 10 16:58:09 CST 2019)
2019-07-11 16:59:24,392  INFO 3697 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=501, payType=wx, billDate=Wed Jul 10 16:58:09 CST 2019)
2019-07-11 16:59:24,392  INFO 3697 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_501_20190710.csv] already exists, return local file
2019-07-11 16:59:24,394 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 16:59:24,394 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562749010364282(String), wx(String), 501(String)
2019-07-11 16:59:24,398 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 16:59:24,398 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:59:24,400 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190710(String), 10110011562749010364282(String), 4200000343201907100504762389(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxc9d0a70977ecf5fe","商户号":"1429146602","子商户号":"0","微信订单号":"4200000343201907100504762389","商户订单号":"10110011562749010364282","用户标识":"oSyi-4rB8pMx1uqy6_GpbsCQ_4qw","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"商品名称374","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 16:59:24.393(Timestamp)
2019-07-11 16:59:24,406 DEBUG 3697 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 16:59:24,407 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:59:24,407 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 16:59:24,410 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 16:59:24,410 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 16:59:24,411 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190710(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"总交易单数":1,"总交易额":0.05,"总退款金额":0.00,"手续费总金额":0.00000}(String), null
2019-07-11 16:59:24,417 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 16:59:24,417 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:59:24,417 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 16:59:24,419 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 16:59:24,420 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 16:59:24,420 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190710(String), null, null
2019-07-11 16:59:24,426 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 16:59:24,470  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-10T16:58:09.599] parse successful
2019-07-11 16:59:24,471 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:59:24,472 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190710(String), wx(String)
2019-07-11 16:59:24,479 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 16:59:24,480 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 16:59:24,480 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110011562749010364282(String), wx(String)
2019-07-11 16:59:24,493 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 16:59:24,494 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:59:24,494 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 501(String)
2019-07-11 16:59:24,498 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:59:24,501 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 16:59:24,501 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190710(String)
2019-07-11 16:59:24,505 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 16:59:24,506 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:59:24,506 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 16:59:24,509 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 16:59:24,510 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 16:59:24,511 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 16:59:24.51(Timestamp)
2019-07-11 16:59:24,518 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 16:59:24,519 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 16:59:24,520 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 16:59:24,524 DEBUG 3697 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 16:59:24,525 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 16:59:24,526 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190710(String), wx(String)
2019-07-11 16:59:24,530 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 16:59:24,531 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:59:24,532 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 16:59:24,536 DEBUG 3697 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-11 16:59:25,173 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 16:59:25,173 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 501(String)
2019-07-11 16:59:25,178 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 16:59:25,179 DEBUG 3697 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-11 16:59:25,179 DEBUG 3697 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 16:59:25,185 DEBUG 3697 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-11 16:59:25,185  INFO 3697 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 501, payType: wx, date: 2019-07-10T16:58:09.599 - result paysCount: 1, refundsCount: 0
2019-07-11 16:59:25,186 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 16:59:25,188 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 260(Integer), wx(String), 支付(String), 10110011562749010364282(String), null, 5(Integer), null, 2019-07-12 05:58:27.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 16:59:25,196 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 1
2019-07-11 16:59:25,197 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 16:59:25,198 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 1(Integer), 1(Integer), 1(Integer), 0(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 260(Integer)
2019-07-11 16:59:25,205 DEBUG 3697 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 16:59:25,239  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-10T16:58:09.599] createCompareBatch successful
2019-07-11 16:59:25,239  INFO 3697 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-11 16:59:25,259  INFO 3697 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-11 16:59:25,261  INFO 3697 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-11 16:59:25,287  INFO 3697 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-11 17:30:21,501  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 3727 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-11 17:30:21,504  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-11 17:30:23,973  INFO 3727 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$bd7eaca5] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 17:30:24,329  INFO 3727 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$df903347] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 17:30:24,370  INFO 3727 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$e9cc9b22] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-11 17:30:24,502  INFO 3727 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-11 17:30:24,827  INFO 3727 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-11 17:30:24,848  INFO 3727 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 17:30:24,869  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-11 17:30:24,872  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 17:30:24,873  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 17:30:24,873  INFO 3727 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 17:30:24,874  INFO 3727 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-11 17:30:24,874  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-11 17:30:24,875  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 17:30:24,875  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 17:30:24,876  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-11 17:30:24,877  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 17:30:24,877  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 17:30:24,878  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 17:30:24,878  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 17:30:24,879  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 17:30:24,879  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-11 17:30:24,880  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-11 17:30:24,880  INFO 3727 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-11 17:30:25,137  INFO 3727 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-11 17:30:26,407  INFO 3727 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-11 17:30:27,112  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$d1af90b0
2019-07-11 17:30:27,126  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$ed155e6b
2019-07-11 17:30:27,257  INFO 3727 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-11 17:30:27,258  INFO 3727 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-11 17:30:28,885  INFO 3727 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-11 17:30:29,924  INFO 3727 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-11 17:30:30,605  INFO 3727 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-11 17:30:31,537  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 11.127 seconds (JVM running for 12.309)
2019-07-11 17:30:32,110  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-11 17:30:32,304 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:32,353 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 17:30:32,406 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:32,420  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 17:30:32 CST 2019)
2019-07-11 17:30:32,421  INFO 3727 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 17:30:32 CST 2019)
2019-07-11 17:30:32,422  INFO 3727 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 17:30:32,490  INFO 3727 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190709 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-09","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-11 17:30:32,981 ERROR 3727 --- [           main] sdk.biz.err                              : ErrorScene^_^40004^_^isp.bill_not_exist^_^null^_^Mac OS X^_^2019-07-11 17:30:32^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=HOvqtmvNSNBlM1F5S2JsfXHpBQ/zDIQfG3BUdyofxwuIRKxVEQCy0Xhm4CbcH0fwVKzBH2VdxcXgv6FjjLq1gV0ORl6orNqtoKOXLqzvhnysPFSk9fGSQ3d3dGtijX5xk4OnKpcYUihKdEp/FcIY7osG26iF47pMujTJYQ+KFcI9LR5jm0PX2jjDMvNrRM0S+GEzq2Ph9BXi+ty+2n5B/vGAhtxb+XC+RPA5rhoJ8DSL38YFzG6EBaDCb8lq6L/HCVuW6sCyMIHQC5SsgIEyypJ6Ytpl+VKYmnv/W9x1fIiX0LHoUwu+BmKHd9oArMtQv5wOTz1jDslFiUBRaCuE2g==&version=1.0&app_id=2018042660058300&sign_type=RSA2&timestamp=2019-07-11 17:30:32^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-09","bill_type":"trade"}^_^Body:{"alipay_data_dataservice_bill_downloadurl_query_response":{"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在"},"sign":"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw=="}^_^56ms,417ms,16ms
2019-07-11 17:30:32,983  INFO 3727 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190709 response: {"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"isp.bill_not_exist\",\"sub_msg\":\"账单不存在\"},\"sign\":\"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw==\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-09\",\"bill_type\":\"trade\"}"},"success":false,"error_code":"40004"}
2019-07-11 17:30:32,984  WARN 3727 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: Business Failed # isp.bill_not_exist # 账单不存在
2019-07-11 17:30:32,987 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:32,991 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190709(String), null, Business Failed # isp.bill_not_exist # 账单不存在(String)
2019-07-11 17:30:32,999 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:33,034  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T17:30:32.113] parse successful
2019-07-11 17:30:33,057 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:33,060 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), alipay(String)
2019-07-11 17:30:33,068 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:33,070 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:33,073 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 503(String)
2019-07-11 17:30:33,078 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:33,085 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 17:30:33,086 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190709(String)
2019-07-11 17:30:33,093 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 17:30:33,095 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:33,096 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 17:30:33,104 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 17:30:33,105 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 17:30:33,108 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-11 17:30:33.105(Timestamp)
2019-07-11 17:30:33,116 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 17:30:33,118 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:33,119 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-11 17:30:33,123 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 17:30:33,124  INFO 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-09T17:30:32.113 - result is Null
2019-07-11 17:30:33,156  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T17:30:32.113] createCompareBatch successful
2019-07-11 17:30:33,159 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:33,160 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 17:30:33,164 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:33,165  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 17:30:32 CST 2019)
2019-07-11 17:30:33,165  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 17:30:32 CST 2019)
2019-07-11 17:30:33,171  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 request: {nonce_str=0rXMvAmcPnyk9vm2mm0uD3oqy6mggKAi, bill_date=20190709, appid=wxd86049a121654669, sign=DF97594E6D6696152A6E030CD55F87E77C6C191966F15FCA5A9E2A3393407150, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-11 17:30:33,651  INFO 3727 --- [           main] wxpay java sdk                           : report worker num: 6
2019-07-11 17:30:33,653  INFO 3727 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,0rXMvAmcPnyk9vm2mm0uD3oqy6mggKAi,1562837433,445,api.mch.weixin.qq.com,true,6000,8000,0,0,0,E3D6964D7DDF0A18B9AC4CB26A77D75CD4EB83F48CFF6669659C186A8EF0D593
2019-07-11 17:30:33,654  INFO 3727 --- [pool-2-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,0rXMvAmcPnyk9vm2mm0uD3oqy6mggKAi,1562837433,445,api.mch.weixin.qq.com,true,6000,8000,0,0,0,E3D6964D7DDF0A18B9AC4CB26A77D75CD4EB83F48CFF6669659C186A8EF0D593
2019-07-11 17:30:33,654  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 17:30:33,654  INFO 3727 --- [pool-2-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 17:30:33,654  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response content size: 149
2019-07-11 17:30:33,654  INFO 3727 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 17:30:33,656  INFO 3727 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 17:30:33,657  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 17:30:33,657  WARN 3727 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-11 17:30:33,657 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:33,658 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190709(String), null, No Bill Exist(String)
2019-07-11 17:30:33,662 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:33,695  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T17:30:32.113] parse successful
2019-07-11 17:30:33,696 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:33,696 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), wx(String)
2019-07-11 17:30:33,701 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:33,702 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:33,702 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 503(String)
2019-07-11 17:30:33,707 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:33,712 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 17:30:33,712 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190709(String)
2019-07-11 17:30:33,718 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 17:30:33,719 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:33,720 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 17:30:33,723 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 17:30:33,724 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 17:30:33,725 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 17:30:33.724(Timestamp)
2019-07-11 17:30:33,730 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 17:30:33,731 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:33,732 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-11 17:30:33,736 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 17:30:33,737  INFO 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-09T17:30:32.113 - result is Null
2019-07-11 17:30:33,763  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T17:30:32.113] createCompareBatch successful
2019-07-11 17:30:33,766 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:33,767 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 17:30:33,770 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:33,771  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Wed Jul 10 17:30:32 CST 2019)
2019-07-11 17:30:33,771  INFO 3727 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Wed Jul 10 17:30:32 CST 2019)
2019-07-11 17:30:33,771  INFO 3727 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-11 17:30:33,772  INFO 3727 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190710 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-10","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-11 17:30:33,884 ERROR 3727 --- [           main] sdk.biz.err                              : ErrorScene^_^40004^_^isp.bill_not_exist^_^null^_^Mac OS X^_^2019-07-11 17:30:33^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=n3dQtLeHMbU8hIv8/yqStiwT/UI5OXsDPegu8Ii/SNmeJr8OcPPe+tE6GZVNjEVVJtTSzAEYqE8oeU1ULcH83MBeJhSZZMxN5kK0Ccqkrlo7kIQwCIOA1s448YoyptrVFbUjM2pxj2QG/TDyL0+SE2l48qlGE7Bst4GIXz3PWOaTUsEq7fVSC/pC5iegSOkUirrbThNgDGRa4q0xgq3G8b85EST4gHgq5UOsRpKYSSIWTvPBK62BWHQ6L6AQlnrIWGQY9POlXAyY8ElaBT3l9+C8IFfkJ5qAwd5ffF1xM2Z0nrdZylxI/wBLWx4cdL/juLajNf4KddDn3EQoxC+cbA==&version=1.0&app_id=2018042660058300&sign_type=RSA2&timestamp=2019-07-11 17:30:33^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-10","bill_type":"trade"}^_^Body:{"alipay_data_dataservice_bill_downloadurl_query_response":{"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在"},"sign":"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw=="}^_^14ms,97ms,1ms
2019-07-11 17:30:33,885  INFO 3727 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190710 response: {"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"isp.bill_not_exist\",\"sub_msg\":\"账单不存在\"},\"sign\":\"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw==\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-10\",\"bill_type\":\"trade\"}"},"success":false,"error_code":"40004"}
2019-07-11 17:30:33,885  WARN 3727 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: Business Failed # isp.bill_not_exist # 账单不存在
2019-07-11 17:30:33,886 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:33,887 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190710(String), null, Business Failed # isp.bill_not_exist # 账单不存在(String)
2019-07-11 17:30:33,892 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:33,956  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-10T17:30:32.113] parse successful
2019-07-11 17:30:33,957 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:33,957 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190710(String), alipay(String)
2019-07-11 17:30:33,961 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:33,961 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:33,962 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 503(String)
2019-07-11 17:30:33,966 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:33,970 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 17:30:33,971 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190710(String)
2019-07-11 17:30:33,976 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 17:30:33,978 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:33,978 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 17:30:33,983 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 17:30:33,984 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 17:30:33,984 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190710(String), alipay(String), 20190710(String), 2019-07-11 17:30:33.983(Timestamp)
2019-07-11 17:30:33,990 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 17:30:33,991 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:33,992 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190710(String)
2019-07-11 17:30:33,995 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 17:30:33,995  INFO 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-10T17:30:32.113 - result is Null
2019-07-11 17:30:34,030  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-10T17:30:32.113] createCompareBatch successful
2019-07-11 17:30:34,033 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:34,033 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 17:30:34,036 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:34,037  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Wed Jul 10 17:30:32 CST 2019)
2019-07-11 17:30:34,037  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=503, payType=wx, billDate=Wed Jul 10 17:30:32 CST 2019)
2019-07-11 17:30:34,038  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 request: {nonce_str=aEk6tmN0uLacw3sc1W0PCkeFGWQefX1d, bill_date=20190710, appid=wxd86049a121654669, sign=91842BE65643C3222CE92E98038E6408186920D25CA7F69A6669795FAA883EFE, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-11 17:30:34,243  INFO 3727 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,aEk6tmN0uLacw3sc1W0PCkeFGWQefX1d,1562837434,201,api.mch.weixin.qq.com,true,6000,8000,0,0,0,36F0379A82A9C7FC575F8CA5A64ADB52CC60C9A63B53988ACB36B340CD4C98A0
2019-07-11 17:30:34,243  INFO 3727 --- [pool-3-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,aEk6tmN0uLacw3sc1W0PCkeFGWQefX1d,1562837434,201,api.mch.weixin.qq.com,true,6000,8000,0,0,0,36F0379A82A9C7FC575F8CA5A64ADB52CC60C9A63B53988ACB36B340CD4C98A0
2019-07-11 17:30:34,243  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 17:30:34,243  INFO 3727 --- [pool-3-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-11 17:30:34,243  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response content size: 149
2019-07-11 17:30:34,243  INFO 3727 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-11 17:30:34,245  INFO 3727 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 17:30:34,245  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190710 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-11 17:30:34,246  WARN 3727 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-11 17:30:34,246 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:34,246 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190710(String), null, No Bill Exist(String)
2019-07-11 17:30:34,253 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:34,280  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-10T17:30:32.113] parse successful
2019-07-11 17:30:34,281 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:34,281 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190710(String), wx(String)
2019-07-11 17:30:34,284 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:34,285 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:34,285 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 503(String)
2019-07-11 17:30:34,299 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:34,302 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 17:30:34,302 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190710(String)
2019-07-11 17:30:34,309 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 17:30:34,309 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:34,310 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 17:30:34,314 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 17:30:34,315 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 17:30:34,316 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 17:30:34.314(Timestamp)
2019-07-11 17:30:34,324 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 17:30:34,325 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:34,326 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190710(String)
2019-07-11 17:30:34,331 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 17:30:34,332  INFO 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-10T17:30:32.113 - result is Null
2019-07-11 17:30:34,383  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-10T17:30:32.113] createCompareBatch successful
2019-07-11 17:30:34,387 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:34,388 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 17:30:34,416 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:34,416  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 17:30:32 CST 2019)
2019-07-11 17:30:34,416  INFO 3727 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 17:30:32 CST 2019)
2019-07-11 17:30:34,538 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:34,539 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String), 101(String)
2019-07-11 17:30:34,545 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:34,546 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:34,556 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), alipay(String), 20190709(String), 10110011562641960364267(String), 2019070922001486611048342510(String), 5(Integer), 0(Integer), 2019-07-09 19:15:44.0(Timestamp), {"refund_amount":0.05,"支付宝交易号":"2019070922001486611048342510","商户订单号":"10110011562641960364267","业务类型":"交易","商品名称":"商品名称974","创建时间":"2019-07-09 11:15:43","完成时间":"2019-07-09 11:15:44","门店编号":"dev","对方账户":"*佳鸿(641***@qq.com)","订单金额（元）":0.05,"商家实收（元）":0.05,"退款批次号/请求号":"","服务费（元）":0.00,"备注":""}(String), 2019-07-11 17:30:34.537(Timestamp)
2019-07-11 17:30:34,565 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 17:30:34,566 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:34,567 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 17:30:34,570 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 17:30:34,571 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 17:30:34,576 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":58,"退款订单总笔数":24,"订单金额（元）":5107.15,"商家实收（元）":5107.15,"服务费（元）":-62.99,"实收净额（元）":5044.16}(String), null
2019-07-11 17:30:34,592 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:34,594 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:34,594 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 17:30:34,599 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:34,600 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:34,601 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), null, null
2019-07-11 17:30:34,607 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:34,644  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T17:30:32.113] parse successful
2019-07-11 17:30:34,646 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:34,646 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-11 17:30:34,679 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 17:30:34,681 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 17:30:34,683 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562641960364267(String), alipay(String)
2019-07-11 17:30:34,697 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 17:30:34,698 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:34,699 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-11 17:30:34,705 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:34,708 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 17:30:34,709 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190709(String)
2019-07-11 17:30:34,718 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 17:30:34,719 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:34,720 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 17:30:34,731 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 17:30:34,732 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 17:30:34,733 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-11 17:30:34.732(Timestamp)
2019-07-11 17:30:34,746 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 17:30:34,750 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:34,751 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-11 17:30:34,760 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 17:30:34,764 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:34,766 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-11 17:30:34,772 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 17:30:34,829 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-11 17:30:34,831 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 17:30:34,841 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-11 17:30:34,843 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:34,843 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-11 17:30:34,850 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:34,851 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-11 17:30:34,853 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 17:30:34,876 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-11 17:30:34,877  INFO 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-09T17:30:32.113 - result paysCount: 1, refundsCount: 0
2019-07-11 17:30:34,889 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:34,891 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 265(Integer), alipay(String), 支付(String), 10110011562641960364267(String), null, 5(Integer), null, 2019-07-09 19:15:44.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 17:30:34,898 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 1
2019-07-11 17:30:34,905 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 17:30:34,906 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 1(Integer), 1(Integer), 1(Integer), 0(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 265(Integer)
2019-07-11 17:30:34,915 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 17:30:34,982  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T17:30:32.113] createCompareBatch successful
2019-07-11 17:30:34,989 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:34,989 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 17:30:34,996 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:34,996  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 17:30:32 CST 2019)
2019-07-11 17:30:34,997  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 17:30:32 CST 2019)
2019-07-11 17:30:34,997  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_101_20190709.csv] already exists, return local file
2019-07-11 17:30:35,010 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,011 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String), 101(String)
2019-07-11 17:30:35,017 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 17:30:35,018 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,018 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String), 101(String)
2019-07-11 17:30:35,024 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 17:30:35,025 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,025 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String), 101(String)
2019-07-11 17:30:35,030 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,030 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,033 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562630251366259(String), 4200000340201907096741436916(String), 19900(Integer), 119(Integer), null, {"merchant_income_charge":199.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000340201907096741436916","商户订单号":"10110011562630251366259","用户标识":"oF9zhvoGcCB1bh1dX_FnTS1RoI1w","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":199.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机","手续费":1.19000,"费率":"0.60%"}(String), 2019-07-11 17:30:35.025(Timestamp)
2019-07-11 17:30:35,042 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 17:30:35,043 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,043 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String), 101(String)
2019-07-11 17:30:35,047 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,048 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,049 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562660958366285(String), 4200000343201907096959558243(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000343201907096959558243","商户订单号":"10110011562660958366285","用户标识":"oF9zhvuwwXGs0OPoPdSuknufzzuc","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"口红","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 17:30:35.043(Timestamp)
2019-07-11 17:30:35,055 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 17:30:35,056 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,057 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String), 101(String)
2019-07-11 17:30:35,067 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,069 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,070 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562610950366258(String), 4200000353201907091881341553(String), 22900(Integer), 137(Integer), null, {"merchant_income_charge":229.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000353201907091881341553","商户订单号":"10110011562610950366258","用户标识":"oF9zhvs9znoUohMT1cJmQ6ZxFRFY","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"LQT","货币种类":"CNY","总金额":229.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"CHARLEE&KLTH 手提金属提把钱包小ck10840136-单肩斜跨女包小方包","手续费":1.37000,"费率":"0.60%"}(String), 2019-07-11 17:30:35.056(Timestamp)
2019-07-11 17:30:35,078 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 17:30:35,079 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,080 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String), 101(String)
2019-07-11 17:30:35,084 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,085 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,086 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562684369366311(String), 4200000354201907098493063836(String), 7200(Integer), 43(Integer), null, {"merchant_income_charge":72.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000354201907098493063836","商户订单号":"10110011562684369366311","用户标识":"o2st65Xf59UzUqdqHGjfP2i8mBC8","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"GDB_CREDIT","货币种类":"CNY","总金额":72.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女","手续费":0.43000,"费率":"0.60%"}(String), 2019-07-11 17:30:35.079(Timestamp)
2019-07-11 17:30:35,096 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 17:30:35,099 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:35,101 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 17:30:35,105 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 17:30:35,106 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 17:30:35,108 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), 4(Integer), 2(Integer), 50005(Integer), 40505(Integer), 0(Integer), {"总交易单数":6,"总交易额":500.05,"总退款金额":405.05,"手续费总金额":0.56000}(String), null
2019-07-11 17:30:35,113 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:35,114 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:35,115 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 17:30:35,118 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:35,119 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,120 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), null, null
2019-07-11 17:30:35,132 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:35,180  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T17:30:32.113] parse successful
2019-07-11 17:30:35,181 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:35,182 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), wx(String)
2019-07-11 17:30:35,192 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-11 17:30:35,193 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 17:30:35,194 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562630251366259(String), wx(String)
2019-07-11 17:30:35,197 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,200  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562630251366259)
2019-07-11 17:30:35,201  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562630251366259,payType=wx
2019-07-11 17:30:35,202  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562630251366259
2019-07-11 17:30:35,203 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:35,204 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 17:30:35,207 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:35,208 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:35,209 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 17:30:35,214 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:35,215  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562630251366259
2019-07-11 17:30:35,215 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 17:30:35,216 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-11 17:30:35,218 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,219 ERROR 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562630251366259] exception: not find PayRequestLog record by [orderNo:10110011562630251366259,payType:wx] 
2019-07-11 17:30:35,220 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 17:30:35,221 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562660958366285(String), wx(String)
2019-07-11 17:30:35,229 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,230  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562660958366285)
2019-07-11 17:30:35,230  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562660958366285,payType=wx
2019-07-11 17:30:35,230  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562660958366285
2019-07-11 17:30:35,231 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:35,231 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 17:30:35,234 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:35,235 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:35,236 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 17:30:35,243 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:35,244  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562660958366285
2019-07-11 17:30:35,244 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 17:30:35,244 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-11 17:30:35,248 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,249 ERROR 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562660958366285] exception: not find PayRequestLog record by [orderNo:10110011562660958366285,payType:wx] 
2019-07-11 17:30:35,249 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 17:30:35,249 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562610950366258(String), wx(String)
2019-07-11 17:30:35,253 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,253  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562610950366258)
2019-07-11 17:30:35,253  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562610950366258,payType=wx
2019-07-11 17:30:35,253  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562610950366258
2019-07-11 17:30:35,254 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:35,254 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 17:30:35,259 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:35,261 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:35,261 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 17:30:35,266 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:35,266  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562610950366258
2019-07-11 17:30:35,267 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 17:30:35,267 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-11 17:30:35,272 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,273 ERROR 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562610950366258] exception: not find PayRequestLog record by [orderNo:10110011562610950366258,payType:wx] 
2019-07-11 17:30:35,274 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 17:30:35,274 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562684369366311(String), wx(String)
2019-07-11 17:30:35,281 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,281  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562684369366311)
2019-07-11 17:30:35,282  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562684369366311,payType=wx
2019-07-11 17:30:35,282  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562684369366311
2019-07-11 17:30:35,282 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:35,283 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 17:30:35,286 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:35,287 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:35,287 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 17:30:35,291 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:35,291  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562684369366311
2019-07-11 17:30:35,292 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 17:30:35,292 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-11 17:30:35,331 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,332 ERROR 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562684369366311] exception: not find PayRequestLog record by [orderNo:10110011562684369366311,payType:wx] 
2019-07-11 17:30:35,332 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,333 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 101(String)
2019-07-11 17:30:35,340 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 2
2019-07-11 17:30:35,342 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 17:30:35,342 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String)
2019-07-11 17:30:35,356 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-11 17:30:35,357  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@c93c0d30, appId=101, payType=wx, orderNo=10110011561291536365966, refundNo=refund10110011561291536365966)
2019-07-11 17:30:35,358  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011561291536365966,payType=wx
2019-07-11 17:30:35,358  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011561291536365966
2019-07-11 17:30:35,358 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:35,358 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 17:30:35,401 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:35,403 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:35,404 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 17:30:35,409 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:35,414  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011561291536365966
2019-07-11 17:30:35,414 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 17:30:35,415 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-11 17:30:35,418 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,419 ERROR 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011561291536365966] exception: not find PayRequestLog record by [orderNo:10110011561291536365966,payType:wx] 
2019-07-11 17:30:35,419 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 17:30:35,419 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String)
2019-07-11 17:30:35,424 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-11 17:30:35,425  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@5755a13c, appId=101, payType=wx, orderNo=10110011558860422365280, refundNo=refund10110011558860422365280)
2019-07-11 17:30:35,425  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011558860422365280,payType=wx
2019-07-11 17:30:35,425  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011558860422365280
2019-07-11 17:30:35,426 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:35,426 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 17:30:35,429 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:35,432 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:35,434 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 17:30:35,438 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:35,439  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011558860422365280
2019-07-11 17:30:35,439 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 17:30:35,439 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-11 17:30:35,445 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,452 ERROR 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011558860422365280] exception: not find PayRequestLog record by [orderNo:10110011558860422365280,payType:wx] 
2019-07-11 17:30:35,456 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 17:30:35,457 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190709(String)
2019-07-11 17:30:35,461 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 17:30:35,463 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:35,464 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 17:30:35,469 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 17:30:35,470 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 17:30:35,472 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 17:30:35.47(Timestamp)
2019-07-11 17:30:35,481 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 17:30:35,482 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:35,483 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-11 17:30:35,490 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 17:30:35,491 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:35,492 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), wx(String)
2019-07-11 17:30:35,501 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-11 17:30:35,503 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-11 17:30:35,504 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 17:30:35,510 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-11 17:30:35,511 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,512 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 101(String)
2019-07-11 17:30:35,520 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 2
2019-07-11 17:30:35,521 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-11 17:30:35,522 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 17:30:35,526 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-11 17:30:35,527  INFO 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: wx, date: 2019-07-09T17:30:32.113 - result paysCount: 4, refundsCount: 2
2019-07-11 17:30:35,529 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,537 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 266(Integer), wx(String), 支付(String), 10110011562630251366259(String), null, 19900(Integer), null, 2019-07-12 06:29:37.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 266(Integer), wx(String), 支付(String), 10110011562660958366285(String), null, 5(Integer), null, 2019-07-12 06:29:37.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 266(Integer), wx(String), 支付(String), 10110011562610950366258(String), null, 22900(Integer), null, 2019-07-12 06:29:37.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 266(Integer), wx(String), 支付(String), 10110011562684369366311(String), null, 7200(Integer), null, 2019-07-12 06:29:37.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 266(Integer), wx(String), 退款(String), 10110011561291536365966(String), refund10110011561291536365966(String), 40500(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 266(Integer), wx(String), 退款(String), 10110011558860422365280(String), refund10110011558860422365280(String), 5(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 17:30:35,545 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 6
2019-07-11 17:30:35,547 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 17:30:35,548 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 6(Integer), 6(Integer), 4(Integer), 0(Integer), 2(Integer), 0(Integer), 50005(Integer), 0(Integer), 40505(Integer), 0(Integer), 299(Integer), -243(Integer), 266(Integer)
2019-07-11 17:30:35,560 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 17:30:35,598  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T17:30:32.113] createCompareBatch successful
2019-07-11 17:30:35,603 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:35,604 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 17:30:35,607 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:35,608  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Wed Jul 10 17:30:32 CST 2019)
2019-07-11 17:30:35,608  INFO 3727 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Wed Jul 10 17:30:32 CST 2019)
2019-07-11 17:30:35,611 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:35,612 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 17:30:35,618 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 17:30:35,620 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 17:30:35,621 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190710(String), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":10,"退款订单总笔数":1,"订单金额（元）":2763.08,"商家实收（元）":2763.08,"服务费（元）":-19.00,"实收净额（元）":2744.08}(String), null
2019-07-11 17:30:35,626 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:35,627 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:35,628 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 17:30:35,631 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:35,632 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,632 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190710(String), null, null
2019-07-11 17:30:35,638 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:35,672  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-10T17:30:32.113] parse successful
2019-07-11 17:30:35,673 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:35,674 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), alipay(String)
2019-07-11 17:30:35,678 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:35,679 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,679 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 101(String)
2019-07-11 17:30:35,687 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:35,690 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 17:30:35,691 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190710(String)
2019-07-11 17:30:35,695 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 17:30:35,696 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:35,697 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 17:30:35,702 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 17:30:35,703 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 17:30:35,704 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190710(String), alipay(String), 20190710(String), 2019-07-11 17:30:35.703(Timestamp)
2019-07-11 17:30:35,709 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 17:30:35,710 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:35,710 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190710(String)
2019-07-11 17:30:35,716 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 17:30:35,717 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:35,717 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), alipay(String)
2019-07-11 17:30:35,721 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:35,721 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-11 17:30:35,722 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 17:30:35,727 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 1
2019-07-11 17:30:35,728 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,729 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), alipay(String), 101(String)
2019-07-11 17:30:35,733 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:35,734 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-11 17:30:35,735 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-11 17:30:35,740 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-11 17:30:35,742  INFO 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-10T17:30:32.113 - result paysCount: 0, refundsCount: 0
2019-07-11 17:30:35,780  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-10T17:30:32.113] createCompareBatch successful
2019-07-11 17:30:35,785 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:35,786 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 17:30:35,789 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:35,790  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Wed Jul 10 17:30:32 CST 2019)
2019-07-11 17:30:35,791  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=101, payType=wx, billDate=Wed Jul 10 17:30:32 CST 2019)
2019-07-11 17:30:35,791  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_101_20190710.csv] already exists, return local file
2019-07-11 17:30:35,793 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,794 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562750358366328(String), wx(String), 101(String)
2019-07-11 17:30:35,799 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,800 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,805 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562750358366328(String), 4200000344201907100111506573(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907100111506573","商户订单号":"10110011562750358366328","用户标识":"o2st65T1fiFkBV5u0VCK4hCcbd9g","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"口红","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 17:30:35.792(Timestamp)
2019-07-11 17:30:35,812 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 17:30:35,813 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,814 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562747463366326(String), wx(String), 101(String)
2019-07-11 17:30:35,820 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,821 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,822 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562747463366326(String), 4200000345201907108271098923(String), 7200(Integer), 43(Integer), null, {"merchant_income_charge":72.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000345201907108271098923","商户订单号":"10110011562747463366326","用户标识":"o2st65Xf59UzUqdqHGjfP2i8mBC8","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"GZCB_CREDIT","货币种类":"CNY","总金额":72.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女","手续费":0.43000,"费率":"0.60%"}(String), 2019-07-11 17:30:35.813(Timestamp)
2019-07-11 17:30:35,833 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 17:30:35,834 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,836 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562696226366313(String), wx(String), 101(String)
2019-07-11 17:30:35,841 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,842 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,843 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562696226366313(String), 4200000348201907106511074240(String), 9700(Integer), 58(Integer), null, {"merchant_income_charge":97.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000348201907106511074240","商户订单号":"10110011562696226366313","用户标识":"oF9zhvqxjkPiRuAtAE1I7DM8D8DM","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"ICBC_DEBIT","货币种类":"CNY","总金额":97.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"限时特惠法国欧缇丽大葡萄喷雾200ml","手续费":0.58000,"费率":"0.60%"}(String), 2019-07-11 17:30:35.834(Timestamp)
2019-07-11 17:30:35,853 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 17:30:35,854 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,855 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562756105366329(String), wx(String), 101(String)
2019-07-11 17:30:35,859 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,860 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,861 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562756105366329(String), 4200000357201907106116812608(String), 38900(Integer), 233(Integer), null, {"merchant_income_charge":389.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000357201907106116812608","商户订单号":"10110011562756105366329","用户标识":"o2st65Q1-foCJuSTbu43TTsROVEc","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CITIC_CREDIT","货币种类":"CNY","总金额":389.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【爆款断货王】李佳琦墙裂推荐蒋梦婕同款SKG便携非击打电极片颈部按摩仪4098","手续费":2.33000,"费率":"0.60%"}(String), 2019-07-11 17:30:35.854(Timestamp)
2019-07-11 17:30:35,870 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 17:30:35,871 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,871 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562769501366331(String), wx(String), 101(String)
2019-07-11 17:30:35,878 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,879 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,879 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562769501366331(String), 4200000356201907109364537299(String), 19900(Integer), 119(Integer), null, {"merchant_income_charge":199.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000356201907109364537299","商户订单号":"10110011562769501366331","用户标识":"oF9zhvufx-oO_DF93qVSb29GUK9s","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"LQT","货币种类":"CNY","总金额":199.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机","手续费":1.19000,"费率":"0.60%"}(String), 2019-07-11 17:30:35.87(Timestamp)
2019-07-11 17:30:35,889 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 17:30:35,890 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:35,891 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562716709366314(String), wx(String), 101(String)
2019-07-11 17:30:35,895 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:35,896 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,897 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190710(String), 10110011562716709366314(String), 4200000343201907102910159982(String), 9700(Integer), 58(Integer), null, {"merchant_income_charge":97.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000343201907102910159982","商户订单号":"10110011562716709366314","用户标识":"o2st65TO8eXX0Jtoa1m1i82JiNXc","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":97.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"限时特惠法国欧缇丽大葡萄喷雾200ml","手续费":0.58000,"费率":"0.60%"}(String), 2019-07-11 17:30:35.89(Timestamp)
2019-07-11 17:30:35,912 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 17:30:35,913 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:35,913 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 17:30:35,917 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 17:30:35,917 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 17:30:35,918 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190710(String), 6(Integer), 0(Integer), 85405(Integer), 0(Integer), 5(Integer), {"总交易单数":6,"总交易额":854.05,"总退款金额":0.00,"手续费总金额":5.11000}(String), null
2019-07-11 17:30:35,923 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:35,924 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:35,925 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 17:30:35,933 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:35,934 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:35,935 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190710(String), null, null
2019-07-11 17:30:35,940 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:36,019  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-10T17:30:32.113] parse successful
2019-07-11 17:30:36,021 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:36,021 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), wx(String)
2019-07-11 17:30:36,033 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 6
2019-07-11 17:30:36,034 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 17:30:36,035 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562750358366328(String), wx(String)
2019-07-11 17:30:36,038 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:36,039  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562750358366328)
2019-07-11 17:30:36,039  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562750358366328,payType=wx
2019-07-11 17:30:36,039  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562750358366328
2019-07-11 17:30:36,040 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:36,040 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 17:30:36,044 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:36,045 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:36,045 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 17:30:36,056 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:36,056  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562750358366328
2019-07-11 17:30:36,057 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 17:30:36,058 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562750358366328(String), wx(String)
2019-07-11 17:30:36,073 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:36,074 ERROR 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562750358366328] exception: not find PayRequestLog record by [orderNo:10110011562750358366328,payType:wx] 
2019-07-11 17:30:36,074 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 17:30:36,074 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562747463366326(String), wx(String)
2019-07-11 17:30:36,080 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:36,080  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562747463366326)
2019-07-11 17:30:36,080  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562747463366326,payType=wx
2019-07-11 17:30:36,080  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562747463366326
2019-07-11 17:30:36,081 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:36,081 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 17:30:36,085 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:36,087 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:36,087 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 17:30:36,094 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:36,095  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562747463366326
2019-07-11 17:30:36,095 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 17:30:36,096 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562747463366326(String), wx(String)
2019-07-11 17:30:36,099 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:36,099 ERROR 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562747463366326] exception: not find PayRequestLog record by [orderNo:10110011562747463366326,payType:wx] 
2019-07-11 17:30:36,100 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 17:30:36,100 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562696226366313(String), wx(String)
2019-07-11 17:30:36,103 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:36,104  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562696226366313)
2019-07-11 17:30:36,104  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562696226366313,payType=wx
2019-07-11 17:30:36,104  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562696226366313
2019-07-11 17:30:36,105 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:36,105 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 17:30:36,108 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:36,109 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:36,110 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 17:30:36,113 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:36,114  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562696226366313
2019-07-11 17:30:36,115 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 17:30:36,115 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562696226366313(String), wx(String)
2019-07-11 17:30:36,120 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:36,120 ERROR 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562696226366313] exception: not find PayRequestLog record by [orderNo:10110011562696226366313,payType:wx] 
2019-07-11 17:30:36,121 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 17:30:36,121 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562756105366329(String), wx(String)
2019-07-11 17:30:36,125 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:36,125  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562756105366329)
2019-07-11 17:30:36,125  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562756105366329,payType=wx
2019-07-11 17:30:36,125  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562756105366329
2019-07-11 17:30:36,126 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:36,126 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 17:30:36,134 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:36,135 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:36,136 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 17:30:36,141 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:36,142  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562756105366329
2019-07-11 17:30:36,142 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 17:30:36,143 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562756105366329(String), wx(String)
2019-07-11 17:30:36,147 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:36,148 ERROR 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562756105366329] exception: not find PayRequestLog record by [orderNo:10110011562756105366329,payType:wx] 
2019-07-11 17:30:36,148 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 17:30:36,148 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562769501366331(String), wx(String)
2019-07-11 17:30:36,156 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:36,157  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562769501366331)
2019-07-11 17:30:36,157  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562769501366331,payType=wx
2019-07-11 17:30:36,157  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562769501366331
2019-07-11 17:30:36,157 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:36,158 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 17:30:36,163 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:36,164 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:36,164 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 17:30:36,172 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:36,172  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562769501366331
2019-07-11 17:30:36,172 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 17:30:36,172 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562769501366331(String), wx(String)
2019-07-11 17:30:36,178 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:36,179 ERROR 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562769501366331] exception: not find PayRequestLog record by [orderNo:10110011562769501366331,payType:wx] 
2019-07-11 17:30:36,179 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 17:30:36,179 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562716709366314(String), wx(String)
2019-07-11 17:30:36,186 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:36,186  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562716709366314)
2019-07-11 17:30:36,186  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562716709366314,payType=wx
2019-07-11 17:30:36,186  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562716709366314
2019-07-11 17:30:36,187 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:36,187 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 17:30:36,191 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:36,192 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-11 17:30:36,193 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 17:30:36,198 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-11 17:30:36,198  INFO 3727 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562716709366314
2019-07-11 17:30:36,199 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-11 17:30:36,199 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562716709366314(String), wx(String)
2019-07-11 17:30:36,203 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:36,204 ERROR 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562716709366314] exception: not find PayRequestLog record by [orderNo:10110011562716709366314,payType:wx] 
2019-07-11 17:30:36,204 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:36,205 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 101(String)
2019-07-11 17:30:36,208 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:36,212 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 17:30:36,212 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190710(String)
2019-07-11 17:30:36,222 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 17:30:36,223 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:36,223 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 17:30:36,232 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 17:30:36,233 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 17:30:36,234 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 17:30:36.232(Timestamp)
2019-07-11 17:30:36,244 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 17:30:36,245 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:36,245 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190710(String)
2019-07-11 17:30:36,251 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 17:30:36,253 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:36,254 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190710(String), wx(String)
2019-07-11 17:30:36,262 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 6
2019-07-11 17:30:36,263 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-11 17:30:36,263 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 17:30:36,272 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-11 17:30:36,272 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:36,272 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 101(String)
2019-07-11 17:30:36,276 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:36,277 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-11 17:30:36,278 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-11 17:30:36,289 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-11 17:30:36,289  INFO 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: wx, date: 2019-07-10T17:30:32.113 - result paysCount: 6, refundsCount: 0
2019-07-11 17:30:36,292 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:36,295 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 268(Integer), wx(String), 支付(String), 10110011562750358366328(String), null, 5(Integer), null, 2019-07-12 06:29:38.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 268(Integer), wx(String), 支付(String), 10110011562747463366326(String), null, 7200(Integer), null, 2019-07-12 06:29:38.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 268(Integer), wx(String), 支付(String), 10110011562696226366313(String), null, 9700(Integer), null, 2019-07-12 06:29:38.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 268(Integer), wx(String), 支付(String), 10110011562756105366329(String), null, 38900(Integer), null, 2019-07-12 06:29:38.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 268(Integer), wx(String), 支付(String), 10110011562769501366331(String), null, 19900(Integer), null, 2019-07-12 06:29:38.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 268(Integer), wx(String), 支付(String), 10110011562716709366314(String), null, 9700(Integer), null, 2019-07-12 06:29:38.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 17:30:36,305 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 6
2019-07-11 17:30:36,307 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 17:30:36,308 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 6(Integer), 6(Integer), 6(Integer), 0(Integer), 0(Integer), 0(Integer), 85405(Integer), 0(Integer), 0(Integer), 0(Integer), 511(Integer), 0(Integer), 268(Integer)
2019-07-11 17:30:36,317 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 17:30:36,387  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-10T17:30:32.113] createCompareBatch successful
2019-07-11 17:30:36,394 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:36,394 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 17:30:36,398 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:36,398  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 17:30:32 CST 2019)
2019-07-11 17:30:36,399  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 17:30:32 CST 2019)
2019-07-11 17:30:36,400  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_501_20190709.csv] already exists, return local file
2019-07-11 17:30:36,408 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:36,408 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String), 501(String)
2019-07-11 17:30:36,436 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 17:30:36,437 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:36,437 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String), 501(String)
2019-07-11 17:30:36,442 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 17:30:36,443 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:36,443 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String), 501(String)
2019-07-11 17:30:36,448 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 17:30:36,449 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:36,449 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String), 501(String)
2019-07-11 17:30:36,454 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 17:30:36,454 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:36,454 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String), 501(String)
2019-07-11 17:30:36,459 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-11 17:30:36,460 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:36,460 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 17:30:36,467 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 17:30:36,467 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 17:30:36,468 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), 0(Integer), 5(Integer), 0(Integer), 25(Integer), 0(Integer), {"总交易单数":5,"总交易额":0.00,"总退款金额":0.25,"手续费总金额":0.00000}(String), null
2019-07-11 17:30:36,484 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:36,485 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:36,485 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 17:30:36,489 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:36,490 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:36,490 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), null, null
2019-07-11 17:30:36,497 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:36,533  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T17:30:32.113] parse successful
2019-07-11 17:30:36,534 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:36,534 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190709(String), wx(String)
2019-07-11 17:30:36,540 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:36,541 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:36,541 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 501(String)
2019-07-11 17:30:36,553 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 5
2019-07-11 17:30:36,554 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 17:30:36,554 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String)
2019-07-11 17:30:36,559 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 17:30:36,559 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 17:30:36,560 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String)
2019-07-11 17:30:36,564 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 17:30:36,565 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 17:30:36,565 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String)
2019-07-11 17:30:36,569 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 17:30:36,570 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 17:30:36,571 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String)
2019-07-11 17:30:36,579 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 17:30:36,580 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-11 17:30:36,580 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String)
2019-07-11 17:30:36,585 DEBUG 3727 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-11 17:30:36,588 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 17:30:36,588 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190709(String)
2019-07-11 17:30:36,593 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 17:30:36,593 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:36,593 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 17:30:36,596 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 17:30:36,597 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 17:30:36,598 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190709(String), wx(String), 20190709(String), 2019-07-11 17:30:36.597(Timestamp)
2019-07-11 17:30:36,607 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 17:30:36,608 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:36,609 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-11 17:30:36,616 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 17:30:36,617 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:36,618 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190709(String), wx(String)
2019-07-11 17:30:36,624 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:36,625 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-11 17:30:36,626 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 17:30:36,630 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-11 17:30:36,634 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:36,634 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 501(String)
2019-07-11 17:30:36,643 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 5
2019-07-11 17:30:36,644 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-11 17:30:36,645 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 17:30:36,653 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-11 17:30:36,654  INFO 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 501, payType: wx, date: 2019-07-09T17:30:32.113 - result paysCount: 0, refundsCount: 5
2019-07-11 17:30:36,656 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:36,662 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 269(Integer), wx(String), 退款(String), 10110011561694500364202(String), refund10110011561694500364202(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 269(Integer), wx(String), 退款(String), 10110011560398938363931(String), refund10110011560398938363931(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 269(Integer), wx(String), 退款(String), 10110011561951929364204(String), refund10110011561951929364204(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 269(Integer), wx(String), 退款(String), 10110011560334037363923(String), refund10110011560334037363923(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 269(Integer), wx(String), 退款(String), 10110011560327103363921(String), refund10110011560327103363921(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 17:30:36,671 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 5
2019-07-11 17:30:36,672 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 17:30:36,676 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 5(Integer), 5(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 25(Integer), 0(Integer), 0(Integer), 0(Integer), 269(Integer)
2019-07-11 17:30:36,684 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 17:30:36,722  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T17:30:32.113] createCompareBatch successful
2019-07-11 17:30:36,727 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:36,728 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 17:30:36,731 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:36,731  INFO 3727 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Wed Jul 10 17:30:32 CST 2019)
2019-07-11 17:30:36,731  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190710: DownloadBillRequestVO(appId=501, payType=wx, billDate=Wed Jul 10 17:30:32 CST 2019)
2019-07-11 17:30:36,732  INFO 3727 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_501_20190710.csv] already exists, return local file
2019-07-11 17:30:36,733 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:36,734 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562749010364282(String), wx(String), 501(String)
2019-07-11 17:30:36,737 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-11 17:30:36,738 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:36,739 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190710(String), 10110011562749010364282(String), 4200000343201907100504762389(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxc9d0a70977ecf5fe","商户号":"1429146602","子商户号":"0","微信订单号":"4200000343201907100504762389","商户订单号":"10110011562749010364282","用户标识":"oSyi-4rB8pMx1uqy6_GpbsCQ_4qw","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"商品名称374","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-11 17:30:36.732(Timestamp)
2019-07-11 17:30:36,747 DEBUG 3727 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-11 17:30:36,748 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:36,748 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 17:30:36,752 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-11 17:30:36,753 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-11 17:30:36,753 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190710(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"总交易单数":1,"总交易额":0.05,"总退款金额":0.00,"手续费总金额":0.00000}(String), null
2019-07-11 17:30:36,760 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:36,761 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:36,761 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 17:30:36,764 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-11 17:30:36,765 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:36,765 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190710(String), null, null
2019-07-11 17:30:36,774 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-11 17:30:36,807  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-10T17:30:32.113] parse successful
2019-07-11 17:30:36,808 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:36,808 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190710(String), wx(String)
2019-07-11 17:30:36,815 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 17:30:36,818 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-11 17:30:36,819 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110011562749010364282(String), wx(String)
2019-07-11 17:30:36,824 DEBUG 3727 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-11 17:30:36,825 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:36,825 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 501(String)
2019-07-11 17:30:36,829 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:36,834 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-11 17:30:36,834 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190710(String)
2019-07-11 17:30:36,840 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-11 17:30:36,840 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:36,840 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 17:30:36,844 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-11 17:30:36,844 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-11 17:30:36,845 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190710(String), wx(String), 20190710(String), 2019-07-11 17:30:36.844(Timestamp)
2019-07-11 17:30:36,850 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-11 17:30:36,852 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-11 17:30:36,852 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190710(String)
2019-07-11 17:30:36,858 DEBUG 3727 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-11 17:30:36,859 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-11 17:30:36,859 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190710(String), wx(String)
2019-07-11 17:30:36,865 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-11 17:30:36,866 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-11 17:30:36,866 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 17:30:36,878 DEBUG 3727 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-11 17:30:36,879 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-11 17:30:36,880 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190710(String), wx(String), 501(String)
2019-07-11 17:30:36,886 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-11 17:30:36,886 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-11 17:30:36,887 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-10 00:00:00.0(Timestamp), 2019-07-10 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-11 17:30:36,891 DEBUG 3727 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-11 17:30:36,891  INFO 3727 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 501, payType: wx, date: 2019-07-10T17:30:32.113 - result paysCount: 1, refundsCount: 0
2019-07-11 17:30:36,892 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-11 17:30:36,893 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 270(Integer), wx(String), 支付(String), 10110011562749010364282(String), null, 5(Integer), null, 2019-07-12 06:29:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-11 17:30:36,900 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 1
2019-07-11 17:30:36,902 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-11 17:30:36,902 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 1(Integer), 1(Integer), 1(Integer), 0(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 270(Integer)
2019-07-11 17:30:36,912 DEBUG 3727 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-11 17:30:36,967  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-10T17:30:32.113] createCompareBatch successful
2019-07-11 17:30:36,968  INFO 3727 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-11 17:30:36,994  INFO 3727 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-11 17:30:36,997  INFO 3727 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-11 17:30:37,026  INFO 3727 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed

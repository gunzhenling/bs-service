2019-07-10 14:34:02,070  INFO 2973 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 2973 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-10 14:34:02,073  INFO 2973 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-10 14:34:04,923  INFO 2973 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$96a8e551] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-10 14:34:05,319  INFO 2973 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$b8ba6bf3] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-10 14:34:05,358  INFO 2973 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$c2f6d3ce] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-10 14:34:05,491  INFO 2973 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-10 14:34:05,791  INFO 2973 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-10 14:34:05,812  INFO 2973 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-10 14:34:05,835  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-10 14:34:05,839  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 14:34:05,839  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 14:34:05,840  INFO 2973 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-10 14:34:05,841  INFO 2973 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-10 14:34:05,843  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-10 14:34:05,845  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 14:34:05,845  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 14:34:05,847  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-10 14:34:05,848  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 14:34:05,849  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 14:34:05,850  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-10 14:34:05,851  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 14:34:05,851  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 14:34:05,856  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-10 14:34:05,857  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 14:34:05,858  INFO 2973 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 14:34:06,235  INFO 2973 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-10 14:34:07,405  INFO 2973 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-10 14:34:08,067  INFO 2973 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$54d28ae4
2019-07-10 14:34:08,080  INFO 2973 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$7038589f
2019-07-10 14:34:08,207  INFO 2973 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-10 14:34:08,208  INFO 2973 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-10 14:34:09,906  INFO 2973 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-10 14:34:10,938  INFO 2973 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-10 14:34:11,712  INFO 2973 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-10 14:34:12,596  INFO 2973 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 11.635 seconds (JVM running for 13.809)
2019-07-10 14:34:13,238  INFO 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-10 14:34:13,431 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:34:13,483 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190708(String)
2019-07-10 14:34:13,537 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:34:13,546  WARN 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-08T14:34:13.241] parse exception: 账单[20190708]已解析
2019-07-10 14:34:13,574 ERROR 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$c914cb17.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:34:13,578 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:34:13,579 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190708(String)
2019-07-10 14:34:13,583 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:34:13,593  WARN 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-08T14:34:13.241] parse exception: 账单[20190708]已解析
2019-07-10 14:34:13,594 ERROR 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$c914cb17.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:34:13,600 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:34:13,601 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-10 14:34:13,609 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:34:13,615  WARN 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T14:34:13.241] parse exception: 账单[20190709]已解析
2019-07-10 14:34:13,616 ERROR 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190709]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$c914cb17.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:34:13,619 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:34:13,620 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-10 14:34:13,625 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:34:13,632  WARN 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T14:34:13.241] parse exception: 账单[20190709]已解析
2019-07-10 14:34:13,633 ERROR 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190709]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$c914cb17.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:34:13,638 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:34:13,639 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190708(String)
2019-07-10 14:34:13,643 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:34:13,648  WARN 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-08T14:34:13.241] parse exception: 账单[20190708]已解析
2019-07-10 14:34:13,649 ERROR 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$c914cb17.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:34:13,653 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:34:13,654 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190708(String)
2019-07-10 14:34:13,657 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:34:13,663  WARN 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-08T14:34:13.241] parse exception: 账单[20190708]已解析
2019-07-10 14:34:13,663 ERROR 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$c914cb17.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:34:13,665 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:34:13,666 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-10 14:34:13,669 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:34:13,675  WARN 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T14:34:13.241] parse exception: 账单[20190709]已解析
2019-07-10 14:34:13,675 ERROR 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190709]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$c914cb17.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:34:13,677 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:34:13,678 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-10 14:34:13,681 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:34:13,686  WARN 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T14:34:13.241] parse exception: 账单[20190709]已解析
2019-07-10 14:34:13,687 ERROR 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190709]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$c914cb17.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:34:13,689 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:34:13,692 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190708(String)
2019-07-10 14:34:13,695 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:34:13,702  WARN 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-08T14:34:13.241] parse exception: 账单[20190708]已解析
2019-07-10 14:34:13,705 ERROR 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$c914cb17.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:34:13,708 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:34:13,709 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-10 14:34:13,712 DEBUG 2973 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:34:13,718  WARN 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T14:34:13.241] parse exception: 账单[20190709]已解析
2019-07-10 14:34:13,719 ERROR 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190709]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$c914cb17.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:34:13,720  INFO 2973 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-10 14:34:13,739  INFO 2973 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-10 14:34:13,742  INFO 2973 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-10 14:34:13,762  INFO 2973 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-10 14:36:23,869  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 2975 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-10 14:36:23,877  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-10 14:36:26,589  INFO 2975 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$5fb857ac] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-10 14:36:26,836  INFO 2975 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$81c9de4e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-10 14:36:26,985  INFO 2975 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$8c064629] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-10 14:36:27,099  INFO 2975 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-10 14:36:27,376  INFO 2975 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-10 14:36:27,397  INFO 2975 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-10 14:36:27,416  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-10 14:36:27,420  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 14:36:27,421  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 14:36:27,421  INFO 2975 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-10 14:36:27,424  INFO 2975 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-10 14:36:27,425  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-10 14:36:27,426  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 14:36:27,427  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 14:36:27,429  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-10 14:36:27,430  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 14:36:27,430  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 14:36:27,430  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-10 14:36:27,431  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 14:36:27,431  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 14:36:27,432  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-10 14:36:27,433  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 14:36:27,433  INFO 2975 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 14:36:27,685  INFO 2975 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-10 14:36:28,876  INFO 2975 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-10 14:36:29,550  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$971223b6
2019-07-10 14:36:29,566  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$b277f171
2019-07-10 14:36:29,735  INFO 2975 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-10 14:36:29,736  INFO 2975 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-10 14:36:31,426  INFO 2975 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-10 14:36:32,507  INFO 2975 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-10 14:36:33,336  INFO 2975 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-10 14:36:34,247  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 11.237 seconds (JVM running for 12.567)
2019-07-10 14:36:34,868  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-10 14:36:35,085 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:35,139 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190708(String)
2019-07-10 14:36:35,191 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:36:35,202  WARN 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-08T14:36:34.870] parse exception: 账单[20190708]已解析
2019-07-10 14:36:35,233 ERROR 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$b5463e9.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:36:35,236 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:35,237 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190708(String)
2019-07-10 14:36:35,241 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:36:35,248  WARN 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-08T14:36:34.870] parse exception: 账单[20190708]已解析
2019-07-10 14:36:35,249 ERROR 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$b5463e9.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:36:35,254 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:35,255 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-10 14:36:35,260 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 14:36:35,273  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 14:36:34 CST 2019)
2019-07-10 14:36:35,274  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 14:36:34 CST 2019)
2019-07-10 14:36:35,274  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-10 14:36:35,343  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190709 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-09","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-10 14:36:35,688  INFO 2975 --- [           main] sdk.biz.err                              : Summary^_^10000^_^null^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=guXmgiJl3E6p6IQeWPkCBUJLFM5LxOA63cktZUro2/HmFNEEbPdWPOsp1i2wP6sF8IElwfE1KK8b8QzDPiuzHLTGQTOsVR+bR+E0nw2lvGiZRIpP9B2IDnrQxxbTTOqtjDMJGFtq9wuiEHJKpRHnHNmeVPqCg2XBe1xIRYA+tUI=&version=1.0&app_id=2016052401436400&sign_type=RSA&timestamp=2019-07-10 14:36:35^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-09","bill_type":"trade"}^_^33ms,293ms,17ms
2019-07-10 14:36:35,691  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190709 response: {"code":"10000","msg":"Success","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"10000\",\"msg\":\"Success\",\"bill_download_url\":\"http:\\/\\/dwbillcenter.alipay.com\\/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190709&downloadFileName=20882218614866000156_20190709.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190709.csv.zip&timestamp=1562740595&token=29701ae764d91e0eea48f5006a530823\"},\"sign\":\"c7K0HJIB+yGCEC8pz/iSnXo+2lsfDzNZFLmAVeqb5cASLHvufS7e7tGQBRTuAwuL1P1yJyaYMSePkfrX5jh+PxBi11II5IVhnUTt/SSa+Y4LvNQuqgum01ILW5IzntaViivdUlqv7Al4aMl5cDNdUmZ2hcbAgqnHP5amO6qndvQ=\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-09\",\"bill_type\":\"trade\"}"},"bill_download_url":"http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190709&downloadFileName=20882218614866000156_20190709.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190709.csv.zip&timestamp=1562740595&token=29701ae764d91e0eea48f5006a530823","success":true,"error_code":"10000"}
2019-07-10 14:36:35,691  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : alipay 503-Tue Jul 09 14:36:34 CST 2019 download-url: http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190709&downloadFileName=20882218614866000156_20190709.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190709.csv.zip&timestamp=1562740595&token=29701ae764d91e0eea48f5006a530823
2019-07-10 14:36:36,093  WARN 2975 --- [           main] o.a.h.c.protocol.ResponseProcessCookies  : Cookie rejected [zone="GZ00C", version:1, domain:.${session_domain}, path:/, expiry:null] Domain attribute ".${session_domain}" violates RFC 2109: domain must contain an embedded dot
2019-07-10 14:36:36,095  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file write to [alipay_503_2019-07-09.zip]
2019-07-10 14:36:36,098  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file [alipay_503_2019-07-09.zip] write success
2019-07-10 14:36:36,201 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-10 14:36:36,203 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-10 14:36:36,208 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:36,211 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:36,234 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 503(String), alipay(String), 20190709(String), 10110011562641960364267(String), 2019070922001486611048342510(String), 5(Integer), 0(Integer), 2019-07-09 19:15:44.0(Timestamp), {"refund_amount":0.05,"支付宝交易号":"2019070922001486611048342510","商户订单号":"10110011562641960364267","业务类型":"交易","商品名称":"商品名称974","创建时间":"2019-07-09 11:15:43","完成时间":"2019-07-09 11:15:44","门店编号":"dev","对方账户":"*佳鸿(641***@qq.com)","订单金额（元）":0.05,"商家实收（元）":0.05,"退款批次号/请求号":"","服务费（元）":0.00,"备注":""}(String), 2019-07-10 14:36:36.2(Timestamp)
2019-07-10 14:36:36,266 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-10 14:36:36,270 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:36,270 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-10 14:36:36,273 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-10 14:36:36,274 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-10 14:36:36,282 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190709(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":58,"退款订单总笔数":24,"订单金额（元）":5107.15,"商家实收（元）":5107.15,"服务费（元）":-62.99,"实收净额（元）":5044.16}(String), null
2019-07-10 14:36:36,286 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-10 14:36:36,287 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:36,288 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-10 14:36:36,291 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 14:36:36,292 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:36,294 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190709(String), null, null
2019-07-10 14:36:36,298 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-10 14:36:36,331  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T14:36:34.870] parse successful
2019-07-10 14:36:36,334 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:36,335 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String)
2019-07-10 14:36:36,386 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-10 14:36:36,387 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 14:36:36,388 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-10 14:36:36,402 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-10 14:36:36,404 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:36,405 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String)
2019-07-10 14:36:36,408 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 14:36:36,415 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-10 14:36:36,416 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190709(String)
2019-07-10 14:36:36,420 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-10 14:36:36,421 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:36,421 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-10 14:36:36,426 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:36:36,427 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-10 14:36:36,432 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-10 14:36:36.427(Timestamp)
2019-07-10 14:36:36,437 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-10 14:36:36,439 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:36,441 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-10 14:36:36,448 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-10 14:36:36,453 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:36,454 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String)
2019-07-10 14:36:36,459 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-10 14:36:36,511 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? 
2019-07-10 14:36:36,512 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String)
2019-07-10 14:36:36,530 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 14
2019-07-10 14:36:36,532 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:36,533 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String)
2019-07-10 14:36:36,537 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 14:36:36,539 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? 
2019-07-10 14:36:36,541 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String)
2019-07-10 14:36:36,547 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-10 14:36:36,550  INFO 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-09T14:36:34.870 - result paysCount: 15, refundsCount: 0
2019-07-10 14:36:36,568 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:36,576 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 211(Integer), alipay(String), 支付(String), 10110011562641960364267(String), null, 5(Integer), null, 2019-07-09 19:15:44.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 211(Integer), alipay(String), 支付(String), 10110011562578001364264(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 211(Integer), alipay(String), 支付(String), fanhangtest-331(String), null, 0(Integer), 100(Integer), null, -1(Integer), 支付平台查无此单(String), null, 211(Integer), alipay(String), 支付(String), fanhangtest-330(String), null, 0(Integer), 100(Integer), null, -1(Integer), 支付平台查无此单(String), null, 211(Integer), alipay(String), 支付(String), 10110011562575830364256(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 211(Integer), alipay(String), 支付(String), 10110011562573708364254(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 211(Integer), alipay(String), 支付(String), 10110011562575964364257(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 211(Integer), alipay(String), 支付(String), 10110011562576075364259(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 211(Integer), alipay(String), 支付(String), 10110011562576136364260(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 211(Integer), alipay(String), 支付(String), 10110011562576378364262(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 211(Integer), alipay(String), 支付(String), 10110011562576307364261(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 211(Integer), alipay(String), 支付(String), 10110011562575765364255(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 211(Integer), alipay(String), 支付(String), 10110011562578989364265(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 211(Integer), alipay(String), 支付(String), 10110011562576040364258(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 211(Integer), alipay(String), 支付(String), 10110011562576689364263(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null
2019-07-10 14:36:36,582 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 15
2019-07-10 14:36:36,591 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-10 14:36:36,592 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 15(Integer), 15(Integer), 1(Integer), 14(Integer), 0(Integer), 0(Integer), 5(Integer), 260(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 211(Integer)
2019-07-10 14:36:36,597 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-10 14:36:36,623  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T14:36:34.870] createCompareBatch successful
2019-07-10 14:36:36,629 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:36,629 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-10 14:36:36,633 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 14:36:36,634  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 14:36:34 CST 2019)
2019-07-10 14:36:36,635  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 14:36:34 CST 2019)
2019-07-10 14:36:36,640  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 request: {nonce_str=q0gno6gAoNsdIYXEmTjFZrIar9f9VYg9, bill_date=20190709, appid=wxd86049a121654669, sign=13D7D0D37CC1A81CAADE5F4DE95667DED6B39352A47B089513A605E1AB0E639B, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-10 14:36:37,039  INFO 2975 --- [           main] wxpay java sdk                           : report worker num: 6
2019-07-10 14:36:37,041  INFO 2975 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,q0gno6gAoNsdIYXEmTjFZrIar9f9VYg9,1562740597,344,api.mch.weixin.qq.com,true,6000,8000,0,0,0,AAB3E560969B67CE92780831FD17D0A6CF499154704EF4F16F81FD639737D8DD
2019-07-10 14:36:37,042  INFO 2975 --- [pool-2-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,q0gno6gAoNsdIYXEmTjFZrIar9f9VYg9,1562740597,344,api.mch.weixin.qq.com,true,6000,8000,0,0,0,AAB3E560969B67CE92780831FD17D0A6CF499154704EF4F16F81FD639737D8DD
2019-07-10 14:36:37,042  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-10 14:36:37,042  INFO 2975 --- [pool-2-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-10 14:36:37,042  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response content size: 149
2019-07-10 14:36:37,042  INFO 2975 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-10 14:36:37,046  INFO 2975 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-10 14:36:37,046  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-10 14:36:37,046  WARN 2975 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-10 14:36:37,047 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:37,048 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190709(String), null, No Bill Exist(String)
2019-07-10 14:36:37,052 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-10 14:36:37,081  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T14:36:34.870] parse successful
2019-07-10 14:36:37,082 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:37,082 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String)
2019-07-10 14:36:37,086 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 14:36:37,086 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:37,087 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String)
2019-07-10 14:36:37,096 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 5
2019-07-10 14:36:37,098 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:37,099 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String)
2019-07-10 14:36:37,104 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:37,106 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:37,106 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String)
2019-07-10 14:36:37,113 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:37,114 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:37,115 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String)
2019-07-10 14:36:37,119 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:37,120 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:37,120 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String)
2019-07-10 14:36:37,125 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:37,126 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:37,126 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String)
2019-07-10 14:36:37,131 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:37,134 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-10 14:36:37,134 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190709(String)
2019-07-10 14:36:37,138 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-10 14:36:37,138 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:37,139 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-10 14:36:37,142 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:36:37,143 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-10 14:36:37,144 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190709(String), wx(String), 20190709(String), 2019-07-10 14:36:37.143(Timestamp)
2019-07-10 14:36:37,149 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-10 14:36:37,150 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:37,151 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-10 14:36:37,154 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-10 14:36:37,155  INFO 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-09T14:36:34.870 - result is Null
2019-07-10 14:36:37,200  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T14:36:34.870] createCompareBatch successful
2019-07-10 14:36:37,203 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:37,204 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190708(String)
2019-07-10 14:36:37,208 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:36:37,215  WARN 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-08T14:36:34.870] parse exception: 账单[20190708]已解析
2019-07-10 14:36:37,215 ERROR 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$b5463e9.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:36:37,218 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:37,220 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190708(String)
2019-07-10 14:36:37,223 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:36:37,231  WARN 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-08T14:36:34.870] parse exception: 账单[20190708]已解析
2019-07-10 14:36:37,232 ERROR 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$b5463e9.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:36:37,236 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:37,236 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-10 14:36:37,240 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 14:36:37,240  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 14:36:34 CST 2019)
2019-07-10 14:36:37,240  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 14:36:34 CST 2019)
2019-07-10 14:36:37,241  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=101,appId=alipay,config=AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-10 14:36:37,241  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190709 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-09","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-10 14:36:37,345  INFO 2975 --- [           main] sdk.biz.err                              : Summary^_^10000^_^null^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=gwRLqCY7WsimaMqJCV+xMoIySKrceb+fNr1VY6UVodOD1PKF7pBbPylMYuON1X26qufMtjnTm47fm0R97OQ7w6x0pjhbRZbGlC6qTm3Pcs7IgM56c/HXN3nMYGB9hHdICaZ1WAt7C28WpDelS13+DPCF2I0DVocJcwodOUBYiKk=&version=1.0&app_id=2016052401436400&sign_type=RSA&timestamp=2019-07-10 14:36:37^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-09","bill_type":"trade"}^_^3ms,100ms,1ms
2019-07-10 14:36:37,348  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190709 response: {"code":"10000","msg":"Success","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"10000\",\"msg\":\"Success\",\"bill_download_url\":\"http:\\/\\/dwbillcenter.alipay.com\\/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190709&downloadFileName=20882218614866000156_20190709.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190709.csv.zip&timestamp=1562740597&token=87f25a9d203401cfc7f1fb3fac566606\"},\"sign\":\"rHvnDNc0seiLvUA/zX+bD+QnWuS0OnfPU5FAr/mA+Cu3h17M104/tKHqJIN6ieJ7MEsGp4Et5ku4wtRgL0WkWgZ2+dWBbCyBlP/tap7KTDn2wGrfga56VDMw8ZV0CMl8Ziel45Ey0VAZMlfZ3J4pY0ZJnyc5j1CgGk+wAcBfNBo=\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-09\",\"bill_type\":\"trade\"}"},"bill_download_url":"http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190709&downloadFileName=20882218614866000156_20190709.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190709.csv.zip&timestamp=1562740597&token=87f25a9d203401cfc7f1fb3fac566606","success":true,"error_code":"10000"}
2019-07-10 14:36:37,348  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : alipay 101-Tue Jul 09 14:36:34 CST 2019 download-url: http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190709&downloadFileName=20882218614866000156_20190709.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190709.csv.zip&timestamp=1562740597&token=87f25a9d203401cfc7f1fb3fac566606
2019-07-10 14:36:37,452  WARN 2975 --- [           main] o.a.h.c.protocol.ResponseProcessCookies  : Cookie rejected [zone="GZ00C", version:1, domain:.${session_domain}, path:/, expiry:null] Domain attribute ".${session_domain}" violates RFC 2109: domain must contain an embedded dot
2019-07-10 14:36:37,452  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file write to [alipay_101_2019-07-09.zip]
2019-07-10 14:36:37,453  INFO 2975 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file [alipay_101_2019-07-09.zip] write success
2019-07-10 14:36:37,467 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-10 14:36:37,468 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-10 14:36:37,473 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 1
2019-07-10 14:36:37,474 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:37,475 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-10 14:36:37,478 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-10 14:36:37,479 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-10 14:36:37,480 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":58,"退款订单总笔数":24,"订单金额（元）":5107.15,"商家实收（元）":5107.15,"服务费（元）":-62.99,"实收净额（元）":5044.16}(String), null
2019-07-10 14:36:37,485 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-10 14:36:37,487 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:37,487 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-10 14:36:37,490 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 14:36:37,491 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:37,491 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), null, null
2019-07-10 14:36:37,496 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-10 14:36:37,523  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T14:36:34.870] parse successful
2019-07-10 14:36:37,524 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:37,525 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String)
2019-07-10 14:36:37,532 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-10 14:36:37,533 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 14:36:37,533 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-10 14:36:37,539 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-10 14:36:37,540 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:37,541 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String)
2019-07-10 14:36:37,544 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 14:36:37,547 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-10 14:36:37,547 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190709(String)
2019-07-10 14:36:37,551 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-10 14:36:37,551 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:37,552 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-10 14:36:37,555 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:36:37,555 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-10 14:36:37,556 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-10 14:36:37.555(Timestamp)
2019-07-10 14:36:37,560 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-10 14:36:37,561 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:37,562 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-10 14:36:37,565 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-10 14:36:37,566 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:37,566 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String)
2019-07-10 14:36:37,570 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-10 14:36:37,571 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? 
2019-07-10 14:36:37,572 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String)
2019-07-10 14:36:37,581 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 14
2019-07-10 14:36:37,582 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:37,582 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String)
2019-07-10 14:36:37,585 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 14:36:37,586 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? 
2019-07-10 14:36:37,586 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String)
2019-07-10 14:36:37,589 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-10 14:36:37,589  INFO 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-09T14:36:34.870 - result paysCount: 15, refundsCount: 0
2019-07-10 14:36:37,593 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:37,600 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 213(Integer), alipay(String), 支付(String), 10110011562641960364267(String), null, 5(Integer), null, 2019-07-09 19:15:44.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 213(Integer), alipay(String), 支付(String), 10110011562578001364264(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 213(Integer), alipay(String), 支付(String), fanhangtest-331(String), null, 0(Integer), 100(Integer), null, -1(Integer), 支付平台查无此单(String), null, 213(Integer), alipay(String), 支付(String), fanhangtest-330(String), null, 0(Integer), 100(Integer), null, -1(Integer), 支付平台查无此单(String), null, 213(Integer), alipay(String), 支付(String), 10110011562575830364256(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 213(Integer), alipay(String), 支付(String), 10110011562573708364254(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 213(Integer), alipay(String), 支付(String), 10110011562575964364257(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 213(Integer), alipay(String), 支付(String), 10110011562576075364259(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 213(Integer), alipay(String), 支付(String), 10110011562576136364260(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 213(Integer), alipay(String), 支付(String), 10110011562576378364262(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 213(Integer), alipay(String), 支付(String), 10110011562576307364261(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 213(Integer), alipay(String), 支付(String), 10110011562575765364255(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 213(Integer), alipay(String), 支付(String), 10110011562578989364265(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 213(Integer), alipay(String), 支付(String), 10110011562576040364258(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null, 213(Integer), alipay(String), 支付(String), 10110011562576689364263(String), null, 0(Integer), 5(Integer), null, -1(Integer), 支付平台查无此单(String), null
2019-07-10 14:36:37,720 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 15
2019-07-10 14:36:37,722 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-10 14:36:37,723 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 15(Integer), 15(Integer), 1(Integer), 14(Integer), 0(Integer), 0(Integer), 5(Integer), 260(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 213(Integer)
2019-07-10 14:36:37,727 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-10 14:36:37,756  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T14:36:34.870] createCompareBatch successful
2019-07-10 14:36:37,758 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:37,758 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-10 14:36:37,761 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 14:36:37,762  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 14:36:34 CST 2019)
2019-07-10 14:36:37,762  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 14:36:34 CST 2019)
2019-07-10 14:36:37,763  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 request: {nonce_str=c4n0gUkpG03k4ESwjpG5lTNJUstV7LtQ, bill_date=20190709, appid=wxf712db1e1042a294, sign=DECFB4A7631D38B0A1A7807DC8D6B074445BAEB4BE4A16C2DD0E5C1F12C671B5, bill_type=ALL, mch_id=1367026602, sign_type=HMAC-SHA256}
2019-07-10 14:36:38,004  INFO 2975 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,c4n0gUkpG03k4ESwjpG5lTNJUstV7LtQ,1562740598,236,api.mch.weixin.qq.com,true,6000,8000,0,0,0,831E8E1DB3153BD7791D7DAFDA35B7056AE9A91C745F989EF7B9A2DC1EA07D13
2019-07-10 14:36:38,004  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : ﻿交易时间,公众账号ID,商户号,子商户号,设备号,微信订单号,商户订单号,用户标识,交易类型,交易状态,付款银行,货币种类,总金额,企业红包金额,微信退款单号,商户退款单号,退款金额,企业红包退款金额,退款类型,退款状态,商品名称,商户数据包,手续费,费率
`2019-07-09 10:15:35,`wxf712db1e1042a294,`1367026602,`0,`,`4200000297201906233184249390,`10110011561291536365966,`oF9zhvgYZ-Fy68cIOpnbNUOIhJ34,`MWEB,`REFUND,`LQT,`CNY,`0.00,`0.00,`50000600752019070910412896587,`refund10110011561291536365966,`405.00,`0.00,`ORIGINAL,`SUCCESS,`LONGCHAMP 珑骧 女士织物单肩包中号长柄 2605,`,`-2.43000,`0.60%
`2019-07-09 16:24:48,`wxf712db1e1042a294,`1367026602,`0,`,`4200000299201905263010571491,`10110011558860422365280,`oF9zhvuwwXGs0OPoPdSuknufzzuc,`MWEB,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000300612019070910499890270,`refund10110011558860422365280,`0.05,`0.00,`ORIGINAL,`SUCCESS,`chenjhtest,`,`0.00000,`0.60%
`2019-07-09 07:57:40,`wxf712db1e1042a294,`1367026602,`0,`,`4200000340201907096741436916,`10110011562630251366259,`oF9zhvoGcCB1bh1dX_FnTS1RoI1w,`JSAPI,`SUCCESS,`CFT,`CNY,`199.00,`0.00,`0,`0,`0.00,`0.00,`,`,`【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机,`,`1.19000,`0.60%
`2019-07-09 16:29:28,`wxf712db1e1042a294,`1367026602,`0,`,`4200000343201907096959558243,`10110011562660958366285,`oF9zhvuwwXGs0OPoPdSuknufzzuc,`MWEB,`SUCCESS,`CFT,`CNY,`0.05,`0.00,`0,`0,`0.00,`0.00,`,`,`口红,`,`0.00000,`0.60%
`2019-07-09 02:36:01,`wxf712db1e1042a294,`1367026602,`0,`,`4200000353201907091881341553,`10110011562610950366258,`oF9zhvs9znoUohMT1cJmQ6ZxFRFY,`MWEB,`SUCCESS,`LQT,`CNY,`229.00,`0.00,`0,`0,`0.00,`0.00,`,`,`CHARLEE&KLTH 手提金属提把钱包小ck10840136-单肩斜跨女包小方包,`,`1.37000,`0.60%
`2019-07-09 22:59:35,`wxde9d2081b4401862,`1367026602,`0,`,`4200000354201907098493063836,`10110011562684369366311,`o2st65Xf59UzUqdqHGjfP2i8mBC8,`JSAPI,`SUCCESS,`GDB_CREDIT,`CNY,`72.00,`0.00,`0,`0,`0.00,`0.00,`,`,`[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女,`,`0.43000,`0.60%
总交易单数,总交易额,总退款金额,总企业红包退款金额,手续费总金额
`6,`500.05,`405.05,`0.00,`0.56000

2019-07-10 14:36:38,004  INFO 2975 --- [pool-3-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,c4n0gUkpG03k4ESwjpG5lTNJUstV7LtQ,1562740598,236,api.mch.weixin.qq.com,true,6000,8000,0,0,0,831E8E1DB3153BD7791D7DAFDA35B7056AE9A91C745F989EF7B9A2DC1EA07D13
2019-07-10 14:36:38,004  INFO 2975 --- [pool-3-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-10 14:36:38,004  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response content size: 1848
2019-07-10 14:36:38,004  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file write to [wx_101_20190709.csv]
2019-07-10 14:36:38,008  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file [wx_101_20190709.csv] write success
2019-07-10 14:36:38,016 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 14:36:38,017 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String)
2019-07-10 14:36:38,020 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 0
2019-07-10 14:36:38,020 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillRefundLogMapper.save   : ==>  Preparing: INSERT INTO pay_center3_bill_refund_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:38,024 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillRefundLogMapper.save   : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011561291536365966(String), refund10110011561291536365966(String), 4200000297201906233184249390(String), 40500(Integer), -243(Integer), null, {"merchant_income_charge":0.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000297201906233184249390","商户订单号":"10110011561291536365966","用户标识":"oF9zhvgYZ-Fy68cIOpnbNUOIhJ34","交易类型":"MWEB","交易状态":"REFUND","付款银行":"LQT","货币种类":"CNY","总金额":0.00,"微信退款单号":"50000600752019070910412896587","商户退款单号":"refund10110011561291536365966","退款金额":405.00,"退款类型":"ORIGINAL","退款状态":"SUCCESS","商品名称":"LONGCHAMP 珑骧 女士织物单肩包中号长柄 2605","手续费":-2.43000,"费率":"0.60%"}(String), 2019-07-10 14:36:38.015(Timestamp)
2019-07-10 14:36:38,028 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillRefundLogMapper.save   : <==    Updates: 1
2019-07-10 14:36:38,029 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 14:36:38,030 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String)
2019-07-10 14:36:38,032 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 0
2019-07-10 14:36:38,033 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillRefundLogMapper.save   : ==>  Preparing: INSERT INTO pay_center3_bill_refund_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:38,034 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillRefundLogMapper.save   : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011558860422365280(String), refund10110011558860422365280(String), 4200000299201905263010571491(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000299201905263010571491","商户订单号":"10110011558860422365280","用户标识":"oF9zhvuwwXGs0OPoPdSuknufzzuc","交易类型":"MWEB","交易状态":"REFUND","付款银行":"CFT","货币种类":"CNY","总金额":0.00,"微信退款单号":"50000300612019070910499890270","商户退款单号":"refund10110011558860422365280","退款金额":0.05,"退款类型":"ORIGINAL","退款状态":"SUCCESS","商品名称":"chenjhtest","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-10 14:36:38.029(Timestamp)
2019-07-10 14:36:38,038 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillRefundLogMapper.save   : <==    Updates: 1
2019-07-10 14:36:38,039 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,040 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 14:36:38,042 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,043 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:38,045 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562630251366259(String), 4200000340201907096741436916(String), 19900(Integer), 119(Integer), null, {"merchant_income_charge":199.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000340201907096741436916","商户订单号":"10110011562630251366259","用户标识":"oF9zhvoGcCB1bh1dX_FnTS1RoI1w","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":199.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机","手续费":1.19000,"费率":"0.60%"}(String), 2019-07-10 14:36:38.039(Timestamp)
2019-07-10 14:36:38,049 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-10 14:36:38,050 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,051 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 14:36:38,055 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,056 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:38,057 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562660958366285(String), 4200000343201907096959558243(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000343201907096959558243","商户订单号":"10110011562660958366285","用户标识":"oF9zhvuwwXGs0OPoPdSuknufzzuc","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"口红","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-10 14:36:38.05(Timestamp)
2019-07-10 14:36:38,061 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-10 14:36:38,062 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,064 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 14:36:38,067 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,068 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:38,069 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562610950366258(String), 4200000353201907091881341553(String), 22900(Integer), 137(Integer), null, {"merchant_income_charge":229.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000353201907091881341553","商户订单号":"10110011562610950366258","用户标识":"oF9zhvs9znoUohMT1cJmQ6ZxFRFY","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"LQT","货币种类":"CNY","总金额":229.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"CHARLEE&KLTH 手提金属提把钱包小ck10840136-单肩斜跨女包小方包","手续费":1.37000,"费率":"0.60%"}(String), 2019-07-10 14:36:38.062(Timestamp)
2019-07-10 14:36:38,074 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-10 14:36:38,075 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,075 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 14:36:38,078 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,079 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:38,080 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562684369366311(String), 4200000354201907098493063836(String), 7200(Integer), 43(Integer), null, {"merchant_income_charge":72.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000354201907098493063836","商户订单号":"10110011562684369366311","用户标识":"o2st65Xf59UzUqdqHGjfP2i8mBC8","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"GDB_CREDIT","货币种类":"CNY","总金额":72.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女","手续费":0.43000,"费率":"0.60%"}(String), 2019-07-10 14:36:38.075(Timestamp)
2019-07-10 14:36:38,085 DEBUG 2975 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-10 14:36:38,086 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:38,087 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-10 14:36:38,089 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-10 14:36:38,090 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-10 14:36:38,093 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), 4(Integer), 2(Integer), 50005(Integer), 40505(Integer), 0(Integer), {"总交易单数":6,"总交易额":500.05,"总退款金额":405.05,"手续费总金额":0.56000}(String), null
2019-07-10 14:36:38,099 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-10 14:36:38,102 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:38,103 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-10 14:36:38,106 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 14:36:38,107 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:38,108 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), null, null
2019-07-10 14:36:38,112 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-10 14:36:38,138  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T14:36:34.870] parse successful
2019-07-10 14:36:38,139 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:38,140 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String)
2019-07-10 14:36:38,147 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-10 14:36:38,148 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,148 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 14:36:38,154 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,156  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562610950366258)
2019-07-10 14:36:38,157  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562610950366258,payType=wx
2019-07-10 14:36:38,157  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562610950366258
2019-07-10 14:36:38,159 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,160 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 14:36:38,167 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,169 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,170 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 14:36:38,175 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,176  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562610950366258
2019-07-10 14:36:38,177 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,187 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 14:36:38,190 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,191 ERROR 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562610950366258] exception: not find PayRequestLog record by [orderNo:10110011562610950366258,payType:wx] 
2019-07-10 14:36:38,192 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,192 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 14:36:38,200 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,201  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562630251366259)
2019-07-10 14:36:38,201  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562630251366259,payType=wx
2019-07-10 14:36:38,201  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562630251366259
2019-07-10 14:36:38,202 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,202 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 14:36:38,205 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,207 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,207 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 14:36:38,211 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,215  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562630251366259
2019-07-10 14:36:38,216 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,216 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 14:36:38,219 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,221 ERROR 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562630251366259] exception: not find PayRequestLog record by [orderNo:10110011562630251366259,payType:wx] 
2019-07-10 14:36:38,222 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,222 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 14:36:38,226 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,227  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562660958366285)
2019-07-10 14:36:38,228  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562660958366285,payType=wx
2019-07-10 14:36:38,228  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562660958366285
2019-07-10 14:36:38,229 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,230 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 14:36:38,233 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,234 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,234 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 14:36:38,239 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,240  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562660958366285
2019-07-10 14:36:38,240 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,241 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 14:36:38,246 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,246 ERROR 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562660958366285] exception: not find PayRequestLog record by [orderNo:10110011562660958366285,payType:wx] 
2019-07-10 14:36:38,248 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,248 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 14:36:38,252 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,253  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562684369366311)
2019-07-10 14:36:38,253  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562684369366311,payType=wx
2019-07-10 14:36:38,253  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562684369366311
2019-07-10 14:36:38,254 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,254 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 14:36:38,257 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,258 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,258 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 14:36:38,261 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,262  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562684369366311
2019-07-10 14:36:38,265 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,267 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 14:36:38,270 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,270 ERROR 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562684369366311] exception: not find PayRequestLog record by [orderNo:10110011562684369366311,payType:wx] 
2019-07-10 14:36:38,271 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:38,272 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String)
2019-07-10 14:36:38,282 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 7
2019-07-10 14:36:38,283 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,284 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String)
2019-07-10 14:36:38,287 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-10 14:36:38,288  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@5755a13c, appId=101, payType=wx, orderNo=10110011558860422365280, refundNo=refund10110011558860422365280)
2019-07-10 14:36:38,288  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011558860422365280,payType=wx
2019-07-10 14:36:38,288  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011558860422365280
2019-07-10 14:36:38,289 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,289 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-10 14:36:38,292 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,293 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,293 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-10 14:36:38,298 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,300  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011558860422365280
2019-07-10 14:36:38,301 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,301 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-10 14:36:38,306 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,307 ERROR 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011558860422365280] exception: not find PayRequestLog record by [orderNo:10110011558860422365280,payType:wx] 
2019-07-10 14:36:38,307 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,308 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String)
2019-07-10 14:36:38,311 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,313 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,314 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String)
2019-07-10 14:36:38,317 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,318 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,318 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String)
2019-07-10 14:36:38,322 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,323 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,323 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String)
2019-07-10 14:36:38,326 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-10 14:36:38,327  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@c93c0d30, appId=101, payType=wx, orderNo=10110011561291536365966, refundNo=refund10110011561291536365966)
2019-07-10 14:36:38,328  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011561291536365966,payType=wx
2019-07-10 14:36:38,328  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011561291536365966
2019-07-10 14:36:38,330 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,331 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-10 14:36:38,334 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,336 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,336 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-10 14:36:38,340 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,340  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011561291536365966
2019-07-10 14:36:38,341 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,342 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-10 14:36:38,344 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,345 ERROR 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011561291536365966] exception: not find PayRequestLog record by [orderNo:10110011561291536365966,payType:wx] 
2019-07-10 14:36:38,345 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,346 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String)
2019-07-10 14:36:38,350 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,351 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,351 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String)
2019-07-10 14:36:38,355 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,357 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-10 14:36:38,358 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190709(String)
2019-07-10 14:36:38,370 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-10 14:36:38,371 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:38,372 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-10 14:36:38,376 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:36:38,382 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-10 14:36:38,389 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190709(String), wx(String), 20190709(String), 2019-07-10 14:36:38.382(Timestamp)
2019-07-10 14:36:38,396 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-10 14:36:38,399 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:38,400 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-10 14:36:38,404 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-10 14:36:38,405 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:38,406 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String)
2019-07-10 14:36:38,414 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-10 14:36:38,415 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? 
2019-07-10 14:36:38,416 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String)
2019-07-10 14:36:38,419 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-10 14:36:38,420 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:38,421 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String)
2019-07-10 14:36:38,438 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 7
2019-07-10 14:36:38,440 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? 
2019-07-10 14:36:38,441 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String)
2019-07-10 14:36:38,444 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-10 14:36:38,445  INFO 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: wx, date: 2019-07-09T14:36:34.870 - result paysCount: 4, refundsCount: 7
2019-07-10 14:36:38,451 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:38,457 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 214(Integer), wx(String), 支付(String), 10110011562610950366258(String), null, 22900(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 214(Integer), wx(String), 支付(String), 10110011562630251366259(String), null, 19900(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 214(Integer), wx(String), 支付(String), 10110011562660958366285(String), null, 5(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 214(Integer), wx(String), 支付(String), 10110011562684369366311(String), null, 7200(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 214(Integer), wx(String), 退款(String), 10110011558860422365280(String), refund10110011558860422365280(String), 5(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 214(Integer), wx(String), 退款(String), 10110011560327103363921(String), refund10110011560327103363921(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 214(Integer), wx(String), 退款(String), 10110011560334037363923(String), refund10110011560334037363923(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 214(Integer), wx(String), 退款(String), 10110011560398938363931(String), refund10110011560398938363931(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 214(Integer), wx(String), 退款(String), 10110011561291536365966(String), refund10110011561291536365966(String), 40500(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 214(Integer), wx(String), 退款(String), 10110011561694500364202(String), refund10110011561694500364202(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 214(Integer), wx(String), 退款(String), 10110011561951929364204(String), refund10110011561951929364204(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-10 14:36:38,465 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 11
2019-07-10 14:36:38,467 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-10 14:36:38,468 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 11(Integer), 11(Integer), 4(Integer), 0(Integer), 2(Integer), 0(Integer), 50005(Integer), 0(Integer), 40505(Integer), 0(Integer), 299(Integer), -243(Integer), 214(Integer)
2019-07-10 14:36:38,472 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-10 14:36:38,498  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T14:36:34.870] createCompareBatch successful
2019-07-10 14:36:38,503 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:38,504 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190708(String)
2019-07-10 14:36:38,507 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:36:38,512  WARN 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-08T14:36:34.870] parse exception: 账单[20190708]已解析
2019-07-10 14:36:38,513 ERROR 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$b5463e9.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 14:36:38,516 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:38,517 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-10 14:36:38,519 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 14:36:38,520  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 14:36:34 CST 2019)
2019-07-10 14:36:38,520  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 14:36:34 CST 2019)
2019-07-10 14:36:38,521  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 request: {nonce_str=0voztaYoWYXBYMdKDtjBGRX2BblYSoUw, bill_date=20190709, appid=wx1e86ddc5b2485ab2, sign=7A33F3761E201A466D7CDB8401BB139C4DC11D9D423AB20E7901A1FFF93DB387, bill_type=ALL, mch_id=1429146602, sign_type=HMAC-SHA256}
2019-07-10 14:36:38,748  INFO 2975 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,0voztaYoWYXBYMdKDtjBGRX2BblYSoUw,1562740598,224,api.mch.weixin.qq.com,true,6000,8000,0,0,0,3320C3B514FC81CE5BB97221B5031739E34F6B067D0A89C97167010533FB4F01
2019-07-10 14:36:38,748  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : ﻿交易时间,公众账号ID,商户号,子商户号,设备号,微信订单号,商户订单号,用户标识,交易类型,交易状态,付款银行,货币种类,总金额,企业红包金额,微信退款单号,商户退款单号,退款金额,企业红包退款金额,退款类型,退款状态,商品名称,商户数据包,手续费,费率
`2019-07-09 15:04:25,`wx9b5cb757426e00d9,`1429146602,`0,`,`4200000300201906281787713838,`10110011561694500364202,`ok1_lw3e743joDk95Hb9U153nwk8,`JSAPI,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000600872019070910515745012,`refund10110011561694500364202,`0.05,`0.00,`ORIGINAL,`SUCCESS,`定向专用,`,`0.00000,`0.60%
`2019-07-09 14:25:16,`wx9b5cb757426e00d9,`1429146602,`0,`,`4200000303201906137721154482,`10110011560398938363931,`ok1_lw3e743joDk95Hb9U153nwk8,`MWEB,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000200882019070910306564674,`refund10110011560398938363931,`0.05,`0.00,`ORIGINAL,`SUCCESS,`发给34524香港总部,`,`0.00000,`0.60%
`2019-07-09 14:59:46,`wxc9d0a70977ecf5fe,`1429146602,`0,`,`4200000294201907012576189376,`10110011561951929364204,`oSyi-4jrMh4wtNEJDSMk-h-wxcUM,`JSAPI,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000000892019070910499055214,`refund10110011561951929364204,`0.05,`0.00,`ORIGINAL,`SUCCESS,`定向专用,`,`0.00000,`0.60%
`2019-07-09 14:26:49,`wxc9d0a70977ecf5fe,`1429146602,`0,`,`4200000302201906127476731585,`10110011560334037363923,`oSyi-4jrMh4wtNEJDSMk-h-wxcUM,`JSAPI,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000100702019070910536509454,`refund10110011560334037363923,`0.05,`0.00,`ORIGINAL,`SUCCESS,`发给34524香港总部,`,`0.00000,`0.60%
`2019-07-09 14:36:48,`wxc9d0a70977ecf5fe,`1429146602,`0,`,`4200000295201906127291057886,`10110011560327103363921,`oSyi-4jrMh4wtNEJDSMk-h-wxcUM,`JSAPI,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000600922019070910376228007,`refund10110011560327103363921,`0.05,`0.00,`ORIGINAL,`SUCCESS,`发给34524香港总部,`,`0.00000,`0.60%
总交易单数,总交易额,总退款金额,总企业红包退款金额,手续费总金额
`5,`0.00,`0.25,`0.00,`0.00000

2019-07-10 14:36:38,748  INFO 2975 --- [pool-4-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,0voztaYoWYXBYMdKDtjBGRX2BblYSoUw,1562740598,224,api.mch.weixin.qq.com,true,6000,8000,0,0,0,3320C3B514FC81CE5BB97221B5031739E34F6B067D0A89C97167010533FB4F01
2019-07-10 14:36:38,748  INFO 2975 --- [pool-4-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-10 14:36:38,748  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response content size: 1707
2019-07-10 14:36:38,748  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file write to [wx_501_20190709.csv]
2019-07-10 14:36:38,749  INFO 2975 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file [wx_501_20190709.csv] write success
2019-07-10 14:36:38,750 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 14:36:38,750 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String)
2019-07-10 14:36:38,753 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,754 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 14:36:38,754 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String)
2019-07-10 14:36:38,756 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,757 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 14:36:38,757 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String)
2019-07-10 14:36:38,760 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,760 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 14:36:38,761 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String)
2019-07-10 14:36:38,763 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,764 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 14:36:38,764 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String)
2019-07-10 14:36:38,767 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,767 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:38,768 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-10 14:36:38,770 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-10 14:36:38,771 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-10 14:36:38,772 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), 0(Integer), 5(Integer), 0(Integer), 25(Integer), 0(Integer), {"总交易单数":5,"总交易额":0.00,"总退款金额":0.25,"手续费总金额":0.00000}(String), null
2019-07-10 14:36:38,775 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-10 14:36:38,776 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:38,776 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-10 14:36:38,778 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 14:36:38,779 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:38,780 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), null, null
2019-07-10 14:36:38,783 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-10 14:36:38,810  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T14:36:34.870] parse successful
2019-07-10 14:36:38,811 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:38,814 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String)
2019-07-10 14:36:38,823 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-10 14:36:38,823 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,824 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 14:36:38,827 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,831  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562610950366258)
2019-07-10 14:36:38,831  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562610950366258,payType=wx
2019-07-10 14:36:38,832  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562610950366258
2019-07-10 14:36:38,832 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,833 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 14:36:38,838 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,839 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,840 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 14:36:38,843 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,843  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562610950366258
2019-07-10 14:36:38,843 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,844 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 14:36:38,846 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,847 ERROR 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562610950366258] exception: not find PayRequestLog record by [orderNo:10110011562610950366258,payType:wx] 
2019-07-10 14:36:38,847 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,848 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 14:36:38,851 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,851  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562630251366259)
2019-07-10 14:36:38,852  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562630251366259,payType=wx
2019-07-10 14:36:38,852  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562630251366259
2019-07-10 14:36:38,852 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,852 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 14:36:38,855 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,855 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,855 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 14:36:38,858 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,858  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562630251366259
2019-07-10 14:36:38,859 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,859 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 14:36:38,861 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,862 ERROR 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562630251366259] exception: not find PayRequestLog record by [orderNo:10110011562630251366259,payType:wx] 
2019-07-10 14:36:38,862 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,862 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 14:36:38,865 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,866  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562660958366285)
2019-07-10 14:36:38,866  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562660958366285,payType=wx
2019-07-10 14:36:38,866  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562660958366285
2019-07-10 14:36:38,866 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,866 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 14:36:38,869 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,869 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,869 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 14:36:38,872 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,873  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562660958366285
2019-07-10 14:36:38,873 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,873 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 14:36:38,876 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,876 ERROR 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562660958366285] exception: not find PayRequestLog record by [orderNo:10110011562660958366285,payType:wx] 
2019-07-10 14:36:38,876 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,876 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 14:36:38,879 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,880  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562684369366311)
2019-07-10 14:36:38,880  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562684369366311,payType=wx
2019-07-10 14:36:38,880  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562684369366311
2019-07-10 14:36:38,881 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,881 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 14:36:38,883 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,884 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,884 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 14:36:38,887 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,888  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562684369366311
2019-07-10 14:36:38,888 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,888 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 14:36:38,890 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,891 ERROR 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562684369366311] exception: not find PayRequestLog record by [orderNo:10110011562684369366311,payType:wx] 
2019-07-10 14:36:38,891 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:38,892 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String)
2019-07-10 14:36:38,898 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 7
2019-07-10 14:36:38,899 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,900 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String)
2019-07-10 14:36:38,903 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-10 14:36:38,904  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@5755a13c, appId=101, payType=wx, orderNo=10110011558860422365280, refundNo=refund10110011558860422365280)
2019-07-10 14:36:38,904  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011558860422365280,payType=wx
2019-07-10 14:36:38,904  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011558860422365280
2019-07-10 14:36:38,905 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,905 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-10 14:36:38,908 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,909 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,909 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-10 14:36:38,912 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,914  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011558860422365280
2019-07-10 14:36:38,914 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,915 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-10 14:36:38,918 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,918 ERROR 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011558860422365280] exception: not find PayRequestLog record by [orderNo:10110011558860422365280,payType:wx] 
2019-07-10 14:36:38,919 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,919 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String)
2019-07-10 14:36:38,924 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,924 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,925 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String)
2019-07-10 14:36:38,932 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,934 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,935 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String)
2019-07-10 14:36:38,938 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,940 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,940 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String)
2019-07-10 14:36:38,943 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-10 14:36:38,943  INFO 2975 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@c93c0d30, appId=101, payType=wx, orderNo=10110011561291536365966, refundNo=refund10110011561291536365966)
2019-07-10 14:36:38,944  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011561291536365966,payType=wx
2019-07-10 14:36:38,944  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011561291536365966
2019-07-10 14:36:38,946 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,948 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-10 14:36:38,953 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,954 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 14:36:38,955 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-10 14:36:38,958 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 14:36:38,958  INFO 2975 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011561291536365966
2019-07-10 14:36:38,959 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 14:36:38,960 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-10 14:36:38,963 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 14:36:38,966 ERROR 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011561291536365966] exception: not find PayRequestLog record by [orderNo:10110011561291536365966,payType:wx] 
2019-07-10 14:36:38,966 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,967 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String)
2019-07-10 14:36:38,970 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,971 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 14:36:38,971 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String)
2019-07-10 14:36:38,974 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 14:36:38,977 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-10 14:36:38,978 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190709(String)
2019-07-10 14:36:38,982 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-10 14:36:38,983 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:38,983 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-10 14:36:38,985 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 14:36:38,987 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-10 14:36:38,988 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190709(String), wx(String), 20190709(String), 2019-07-10 14:36:38.986(Timestamp)
2019-07-10 14:36:38,992 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-10 14:36:38,993 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 14:36:38,994 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-10 14:36:38,998 DEBUG 2975 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-10 14:36:38,999 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:39,000 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String)
2019-07-10 14:36:39,005 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-10 14:36:39,006 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? 
2019-07-10 14:36:39,006 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String)
2019-07-10 14:36:39,010 DEBUG 2975 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-10 14:36:39,011 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? 
2019-07-10 14:36:39,011 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String)
2019-07-10 14:36:39,019 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 7
2019-07-10 14:36:39,022 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? 
2019-07-10 14:36:39,023 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String)
2019-07-10 14:36:39,026 DEBUG 2975 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-10 14:36:39,026  INFO 2975 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 501, payType: wx, date: 2019-07-09T14:36:34.870 - result paysCount: 4, refundsCount: 7
2019-07-10 14:36:39,029 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 14:36:39,042 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 215(Integer), wx(String), 支付(String), 10110011562610950366258(String), null, 22900(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 215(Integer), wx(String), 支付(String), 10110011562630251366259(String), null, 19900(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 215(Integer), wx(String), 支付(String), 10110011562660958366285(String), null, 5(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 215(Integer), wx(String), 支付(String), 10110011562684369366311(String), null, 7200(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 215(Integer), wx(String), 退款(String), 10110011558860422365280(String), refund10110011558860422365280(String), 5(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 215(Integer), wx(String), 退款(String), 10110011560327103363921(String), refund10110011560327103363921(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 215(Integer), wx(String), 退款(String), 10110011560334037363923(String), refund10110011560334037363923(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 215(Integer), wx(String), 退款(String), 10110011560398938363931(String), refund10110011560398938363931(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 215(Integer), wx(String), 退款(String), 10110011561291536365966(String), refund10110011561291536365966(String), 40500(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 215(Integer), wx(String), 退款(String), 10110011561694500364202(String), refund10110011561694500364202(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 215(Integer), wx(String), 退款(String), 10110011561951929364204(String), refund10110011561951929364204(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-10 14:36:39,049 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 11
2019-07-10 14:36:39,050 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-10 14:36:39,051 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 11(Integer), 11(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 25(Integer), 0(Integer), 299(Integer), -243(Integer), 215(Integer)
2019-07-10 14:36:39,059 DEBUG 2975 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-10 14:36:39,281  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T14:36:34.870] createCompareBatch successful
2019-07-10 14:36:39,282  INFO 2975 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-10 14:36:39,296  INFO 2975 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-10 14:36:39,298  INFO 2975 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-10 14:36:39,316  INFO 2975 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-10 16:33:16,759  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 6200 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-10 16:33:16,764  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-10 16:33:19,338  INFO 6200 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$5fb857ac] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-10 16:33:19,707  INFO 6200 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$81c9de4e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-10 16:33:19,750  INFO 6200 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$8c064629] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-10 16:33:19,864  INFO 6200 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-10 16:33:20,111  INFO 6200 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-10 16:33:20,132  INFO 6200 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-10 16:33:20,155  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-10 16:33:20,158  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 16:33:20,159  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 16:33:20,160  INFO 6200 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-10 16:33:20,160  INFO 6200 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-10 16:33:20,161  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-10 16:33:20,162  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 16:33:20,162  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 16:33:20,163  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-10 16:33:20,164  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 16:33:20,165  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 16:33:20,165  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-10 16:33:20,168  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 16:33:20,169  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 16:33:20,170  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-10 16:33:20,170  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-10 16:33:20,170  INFO 6200 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-10 16:33:20,447  INFO 6200 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-10 16:33:21,707  INFO 6200 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-10 16:33:22,358  INFO 6200 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$971223b6
2019-07-10 16:33:22,374  INFO 6200 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$b277f171
2019-07-10 16:33:22,535  INFO 6200 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-10 16:33:22,536  INFO 6200 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-10 16:33:24,256  INFO 6200 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-10 16:33:25,336  INFO 6200 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-10 16:33:26,119  INFO 6200 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-10 16:33:27,108  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 11.233 seconds (JVM running for 12.461)
2019-07-10 16:33:27,701  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-10 16:33:27,885 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:27,943 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190708(String)
2019-07-10 16:33:27,996 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 16:33:28,008  WARN 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-08T16:33:27.704] parse exception: 账单[20190708]已解析
2019-07-10 16:33:28,045 ERROR 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$b5463e9.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 16:33:28,050 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:28,051 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190708(String)
2019-07-10 16:33:28,069 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 16:33:28,076  WARN 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-08T16:33:27.704] parse exception: 账单[20190708]已解析
2019-07-10 16:33:28,076 ERROR 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$b5463e9.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 16:33:28,080 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:28,080 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-10 16:33:28,086 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 16:33:28,099  INFO 6200 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 16:33:27 CST 2019)
2019-07-10 16:33:28,102  INFO 6200 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 09 16:33:27 CST 2019)
2019-07-10 16:33:28,243 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-10 16:33:28,245 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-10 16:33:28,257 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:28,259 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 16:33:28,311 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 503(String), alipay(String), 20190709(String), 10110011562641960364267(String), 2019070922001486611048342510(String), 5(Integer), 0(Integer), 2019-07-09 19:15:44.0(Timestamp), {"refund_amount":0.05,"支付宝交易号":"2019070922001486611048342510","商户订单号":"10110011562641960364267","业务类型":"交易","商品名称":"商品名称974","创建时间":"2019-07-09 11:15:43","完成时间":"2019-07-09 11:15:44","门店编号":"dev","对方账户":"*佳鸿(641***@qq.com)","订单金额（元）":0.05,"商家实收（元）":0.05,"退款批次号/请求号":"","服务费（元）":0.00,"备注":""}(String), 2019-07-10 16:33:28.242(Timestamp)
2019-07-10 16:33:28,320 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-10 16:33:28,324 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:28,325 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-10 16:33:28,329 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-10 16:33:28,330 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-10 16:33:28,343 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190709(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":58,"退款订单总笔数":24,"订单金额（元）":5107.15,"商家实收（元）":5107.15,"服务费（元）":-62.99,"实收净额（元）":5044.16}(String), null
2019-07-10 16:33:28,349 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-10 16:33:28,350 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:28,351 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-10 16:33:28,355 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 16:33:28,356 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-10 16:33:28,357 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190709(String), null, null
2019-07-10 16:33:28,362 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-10 16:33:28,393  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T16:33:27.704] parse successful
2019-07-10 16:33:28,395 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-10 16:33:28,396 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), alipay(String)
2019-07-10 16:33:28,426 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-10 16:33:28,427 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 16:33:28,427 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-10 16:33:28,439 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-10 16:33:28,441 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-10 16:33:28,442 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 503(String)
2019-07-10 16:33:28,446 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 16:33:28,449 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-10 16:33:28,450 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190709(String)
2019-07-10 16:33:28,455 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-10 16:33:28,456 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:28,457 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-10 16:33:28,462 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 16:33:28,463 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-10 16:33:28,465 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-10 16:33:28.463(Timestamp)
2019-07-10 16:33:28,470 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-10 16:33:28,474 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:28,475 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190709(String)
2019-07-10 16:33:28,480 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-10 16:33:28,483 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-10 16:33:28,484 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), alipay(String)
2019-07-10 16:33:28,488 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-10 16:33:28,524 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-10 16:33:28,526 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 503(String)
2019-07-10 16:33:28,529 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-10 16:33:28,532 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-10 16:33:28,533 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 503(String)
2019-07-10 16:33:28,539 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 16:33:28,540 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-10 16:33:28,542 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 503(String)
2019-07-10 16:33:28,580 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-10 16:33:28,582  INFO 6200 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-09T16:33:27.704 - result paysCount: 1, refundsCount: 0
2019-07-10 16:33:28,591 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 16:33:28,593 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 216(Integer), alipay(String), 支付(String), 10110011562641960364267(String), null, 5(Integer), null, 2019-07-09 19:15:44.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-10 16:33:28,597 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 1
2019-07-10 16:33:28,609 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-10 16:33:28,610 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 1(Integer), 1(Integer), 1(Integer), 0(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 216(Integer)
2019-07-10 16:33:28,615 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-10 16:33:28,660  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-09T16:33:27.704] createCompareBatch successful
2019-07-10 16:33:28,662 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:28,663 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-10 16:33:28,666 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 16:33:28,681  INFO 6200 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 16:33:27 CST 2019)
2019-07-10 16:33:28,682  INFO 6200 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 09 16:33:27 CST 2019)
2019-07-10 16:33:28,702  INFO 6200 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 request: {nonce_str=KnAM8A39IhcKe9LezmynVnG2urjapt5F, bill_date=20190709, appid=wxd86049a121654669, sign=EC7D98274493363B7961A23E02B00091A6F93F7A0BC197A35DD1AF80AD1F2D21, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-10 16:33:29,266  INFO 6200 --- [           main] wxpay java sdk                           : report worker num: 6
2019-07-10 16:33:29,271  INFO 6200 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,KnAM8A39IhcKe9LezmynVnG2urjapt5F,1562747609,510,api.mch.weixin.qq.com,true,6000,8000,0,0,0,3564CE05C9CB72501E1FC4D5CBFBD50D8A7CBBF6F5C4B973D41C88824038E4CC
2019-07-10 16:33:29,271  INFO 6200 --- [pool-2-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,KnAM8A39IhcKe9LezmynVnG2urjapt5F,1562747609,510,api.mch.weixin.qq.com,true,6000,8000,0,0,0,3564CE05C9CB72501E1FC4D5CBFBD50D8A7CBBF6F5C4B973D41C88824038E4CC
2019-07-10 16:33:29,272  INFO 6200 --- [pool-2-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-10 16:33:29,272  INFO 6200 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-10 16:33:29,272  INFO 6200 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response content size: 149
2019-07-10 16:33:29,272  INFO 6200 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-10 16:33:29,276  INFO 6200 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-10 16:33:29,277  INFO 6200 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190709 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-10 16:33:29,277  WARN 6200 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-10 16:33:29,278 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-10 16:33:29,279 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190709(String), null, No Bill Exist(String)
2019-07-10 16:33:29,283 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-10 16:33:29,319  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T16:33:27.704] parse successful
2019-07-10 16:33:29,320 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-10 16:33:29,321 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190709(String), wx(String)
2019-07-10 16:33:29,325 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 16:33:29,326 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-10 16:33:29,327 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 503(String)
2019-07-10 16:33:29,331 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 16:33:29,337 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-10 16:33:29,338 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190709(String)
2019-07-10 16:33:29,342 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-10 16:33:29,343 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,343 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-10 16:33:29,347 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 16:33:29,348 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-10 16:33:29,349 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190709(String), wx(String), 20190709(String), 2019-07-10 16:33:29.348(Timestamp)
2019-07-10 16:33:29,355 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-10 16:33:29,357 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,358 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190709(String)
2019-07-10 16:33:29,361 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-10 16:33:29,362  INFO 6200 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-09T16:33:27.704 - result is Null
2019-07-10 16:33:29,403  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-09T16:33:27.704] createCompareBatch successful
2019-07-10 16:33:29,407 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,408 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190708(String)
2019-07-10 16:33:29,412 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 16:33:29,420  WARN 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-08T16:33:27.704] parse exception: 账单[20190708]已解析
2019-07-10 16:33:29,420 ERROR 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$b5463e9.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 16:33:29,424 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,425 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190708(String)
2019-07-10 16:33:29,429 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 16:33:29,435  WARN 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-08T16:33:27.704] parse exception: 账单[20190708]已解析
2019-07-10 16:33:29,437 ERROR 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$b5463e9.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 16:33:29,441 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,442 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-10 16:33:29,445 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 16:33:29,446  INFO 6200 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 16:33:27 CST 2019)
2019-07-10 16:33:29,449  INFO 6200 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 16:33:27 CST 2019)
2019-07-10 16:33:29,462 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,463 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String)
2019-07-10 16:33:29,471 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 1
2019-07-10 16:33:29,472 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,472 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-10 16:33:29,476 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-10 16:33:29,477 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-10 16:33:29,478 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":58,"退款订单总笔数":24,"订单金额（元）":5107.15,"商家实收（元）":5107.15,"服务费（元）":-62.99,"实收净额（元）":5044.16}(String), null
2019-07-10 16:33:29,482 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-10 16:33:29,483 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,484 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-10 16:33:29,490 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 16:33:29,491 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-10 16:33:29,492 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), null, null
2019-07-10 16:33:29,496 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-10 16:33:29,544  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T16:33:27.704] parse successful
2019-07-10 16:33:29,545 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-10 16:33:29,546 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-10 16:33:29,550 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 16:33:29,551 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-10 16:33:29,552 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-10 16:33:29,555 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 16:33:29,558 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-10 16:33:29,559 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190709(String)
2019-07-10 16:33:29,564 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-10 16:33:29,566 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,569 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-10 16:33:29,572 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 16:33:29,573 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-10 16:33:29,574 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-10 16:33:29.573(Timestamp)
2019-07-10 16:33:29,578 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-10 16:33:29,580 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,582 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-10 16:33:29,587 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-10 16:33:29,588 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-10 16:33:29,589 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-10 16:33:29,593 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 16:33:29,594 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-10 16:33:29,595 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-10 16:33:29,606 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 14
2019-07-10 16:33:29,607 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-10 16:33:29,608 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-10 16:33:29,611 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 16:33:29,612 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-10 16:33:29,613 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-10 16:33:29,616 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-10 16:33:29,616  INFO 6200 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-09T16:33:27.704 - result paysCount: 0, refundsCount: 0
2019-07-10 16:33:29,651  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T16:33:27.704] createCompareBatch successful
2019-07-10 16:33:29,657 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,658 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-10 16:33:29,661 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 16:33:29,662  INFO 6200 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 16:33:27 CST 2019)
2019-07-10 16:33:29,662  INFO 6200 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 09 16:33:27 CST 2019)
2019-07-10 16:33:29,663  INFO 6200 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_101_20190709.csv] already exists, return local file
2019-07-10 16:33:29,675 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 16:33:29,676 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String)
2019-07-10 16:33:29,681 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-10 16:33:29,682 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 16:33:29,683 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String)
2019-07-10 16:33:29,692 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-10 16:33:29,693 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,694 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 16:33:29,697 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,699 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 16:33:29,702 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562630251366259(String), 4200000340201907096741436916(String), 19900(Integer), 119(Integer), null, {"merchant_income_charge":199.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000340201907096741436916","商户订单号":"10110011562630251366259","用户标识":"oF9zhvoGcCB1bh1dX_FnTS1RoI1w","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":199.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618】罗拉如炬（Lowra rouge） 出风口低辐射电吹风机","手续费":1.19000,"费率":"0.60%"}(String), 2019-07-10 16:33:29.693(Timestamp)
2019-07-10 16:33:29,707 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-10 16:33:29,708 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,709 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 16:33:29,712 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,712 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 16:33:29,714 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562660958366285(String), 4200000343201907096959558243(String), 5(Integer), 0(Integer), null, {"merchant_income_charge":0.05,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000343201907096959558243","商户订单号":"10110011562660958366285","用户标识":"oF9zhvuwwXGs0OPoPdSuknufzzuc","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":0.05,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"口红","手续费":0.00000,"费率":"0.60%"}(String), 2019-07-10 16:33:29.708(Timestamp)
2019-07-10 16:33:29,718 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-10 16:33:29,719 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,720 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 16:33:29,723 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,723 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 16:33:29,724 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562610950366258(String), 4200000353201907091881341553(String), 22900(Integer), 137(Integer), null, {"merchant_income_charge":229.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000353201907091881341553","商户订单号":"10110011562610950366258","用户标识":"oF9zhvs9znoUohMT1cJmQ6ZxFRFY","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"LQT","货币种类":"CNY","总金额":229.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"CHARLEE&KLTH 手提金属提把钱包小ck10840136-单肩斜跨女包小方包","手续费":1.37000,"费率":"0.60%"}(String), 2019-07-10 16:33:29.719(Timestamp)
2019-07-10 16:33:29,728 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-10 16:33:29,730 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,731 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 16:33:29,734 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,734 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 16:33:29,736 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190709(String), 10110011562684369366311(String), 4200000354201907098493063836(String), 7200(Integer), 43(Integer), null, {"merchant_income_charge":72.00,"公众账号ID":"wxde9d2081b4401862","商户号":"1367026602","子商户号":"0","微信订单号":"4200000354201907098493063836","商户订单号":"10110011562684369366311","用户标识":"o2st65Xf59UzUqdqHGjfP2i8mBC8","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"GDB_CREDIT","货币种类":"CNY","总金额":72.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"[限时特惠]遮阳帽女大号韩版出游沙滩帽防晒折叠大檐纯棉帽子太阳帽渔夫帽女","手续费":0.43000,"费率":"0.60%"}(String), 2019-07-10 16:33:29.73(Timestamp)
2019-07-10 16:33:29,741 DEBUG 6200 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-10 16:33:29,742 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,742 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-10 16:33:29,745 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-10 16:33:29,746 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-10 16:33:29,748 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), 4(Integer), 2(Integer), 50005(Integer), 40505(Integer), 0(Integer), {"总交易单数":6,"总交易额":500.05,"总退款金额":405.05,"手续费总金额":0.56000}(String), null
2019-07-10 16:33:29,753 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-10 16:33:29,757 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,758 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-10 16:33:29,762 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 16:33:29,763 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-10 16:33:29,764 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190709(String), null, null
2019-07-10 16:33:29,768 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-10 16:33:29,806  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T16:33:27.704] parse successful
2019-07-10 16:33:29,807 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-10 16:33:29,807 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), wx(String)
2019-07-10 16:33:29,814 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-10 16:33:29,815 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,815 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 16:33:29,820 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,821  INFO 6200 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562610950366258)
2019-07-10 16:33:29,821  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562610950366258,payType=wx
2019-07-10 16:33:29,822  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562610950366258
2019-07-10 16:33:29,824 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 16:33:29,824 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 16:33:29,827 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 16:33:29,828 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 16:33:29,829 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 16:33:29,832 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 16:33:29,833  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562610950366258
2019-07-10 16:33:29,833 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,834 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562610950366258(String), wx(String)
2019-07-10 16:33:29,839 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,842 ERROR 6200 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562610950366258] exception: not find PayRequestLog record by [orderNo:10110011562610950366258,payType:wx] 
2019-07-10 16:33:29,842 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,842 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 16:33:29,845 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,846  INFO 6200 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562630251366259)
2019-07-10 16:33:29,846  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562630251366259,payType=wx
2019-07-10 16:33:29,847  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562630251366259
2019-07-10 16:33:29,847 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 16:33:29,847 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 16:33:29,850 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 16:33:29,851 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 16:33:29,852 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 16:33:29,856 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 16:33:29,856  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562630251366259
2019-07-10 16:33:29,857 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,857 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562630251366259(String), wx(String)
2019-07-10 16:33:29,859 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,860 ERROR 6200 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562630251366259] exception: not find PayRequestLog record by [orderNo:10110011562630251366259,payType:wx] 
2019-07-10 16:33:29,861 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,861 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 16:33:29,864 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,865  INFO 6200 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562660958366285)
2019-07-10 16:33:29,865  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562660958366285,payType=wx
2019-07-10 16:33:29,866  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562660958366285
2019-07-10 16:33:29,866 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 16:33:29,867 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 16:33:29,870 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 16:33:29,871 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 16:33:29,872 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 16:33:29,875 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 16:33:29,876  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562660958366285
2019-07-10 16:33:29,876 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,877 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562660958366285(String), wx(String)
2019-07-10 16:33:29,879 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,879 ERROR 6200 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562660958366285] exception: not find PayRequestLog record by [orderNo:10110011562660958366285,payType:wx] 
2019-07-10 16:33:29,880 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,881 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 16:33:29,883 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,885  INFO 6200 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011562684369366311)
2019-07-10 16:33:29,886  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011562684369366311,payType=wx
2019-07-10 16:33:29,887  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011562684369366311
2019-07-10 16:33:29,887 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 16:33:29,889 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 16:33:29,892 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 16:33:29,893 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 16:33:29,893 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 16:33:29,900 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 16:33:29,904  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011562684369366311
2019-07-10 16:33:29,905 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,905 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011562684369366311(String), wx(String)
2019-07-10 16:33:29,908 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,909 ERROR 6200 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011562684369366311] exception: not find PayRequestLog record by [orderNo:10110011562684369366311,payType:wx] 
2019-07-10 16:33:29,910 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-10 16:33:29,911 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 101(String)
2019-07-10 16:33:29,926 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 2
2019-07-10 16:33:29,932 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 16:33:29,933 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011558860422365280(String), wx(String)
2019-07-10 16:33:29,937 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-10 16:33:29,938  INFO 6200 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@5755a13c, appId=101, payType=wx, orderNo=10110011558860422365280, refundNo=refund10110011558860422365280)
2019-07-10 16:33:29,938  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011558860422365280,payType=wx
2019-07-10 16:33:29,938  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011558860422365280
2019-07-10 16:33:29,939 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 16:33:29,939 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-10 16:33:29,942 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 16:33:29,944 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 16:33:29,944 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-10 16:33:29,948 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 16:33:29,957  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011558860422365280
2019-07-10 16:33:29,958 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,958 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011558860422365280(String), wx(String)
2019-07-10 16:33:29,961 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,962 ERROR 6200 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011558860422365280] exception: not find PayRequestLog record by [orderNo:10110011558860422365280,payType:wx] 
2019-07-10 16:33:29,962 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 16:33:29,963 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561291536365966(String), wx(String)
2019-07-10 16:33:29,965 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 0
2019-07-10 16:33:29,966  INFO 6200 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request refundQuery: RefundQueryRequestVO(super=com.intbee.payment.modules.trade.vo.RefundQueryRequestVO@c93c0d30, appId=101, payType=wx, orderNo=10110011561291536365966, refundNo=refund10110011561291536365966)
2019-07-10 16:33:29,966  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011561291536365966,payType=wx
2019-07-10 16:33:29,966  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011561291536365966
2019-07-10 16:33:29,967 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 16:33:29,967 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-10 16:33:29,970 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 16:33:29,971 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-10 16:33:29,971 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-10 16:33:29,974 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-10 16:33:29,974  INFO 6200 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011561291536365966
2019-07-10 16:33:29,975 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? 
2019-07-10 16:33:29,975 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011561291536365966(String), wx(String)
2019-07-10 16:33:29,977 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-10 16:33:29,978 ERROR 6200 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : refundQuery [refund10110011561291536365966] exception: not find PayRequestLog record by [orderNo:10110011561291536365966,payType:wx] 
2019-07-10 16:33:29,980 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-10 16:33:29,981 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190709(String)
2019-07-10 16:33:29,983 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-10 16:33:29,984 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,985 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-10 16:33:29,990 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 16:33:29,991 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-10 16:33:29,993 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190709(String), wx(String), 20190709(String), 2019-07-10 16:33:29.99(Timestamp)
2019-07-10 16:33:29,997 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-10 16:33:29,998 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:29,998 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190709(String)
2019-07-10 16:33:30,001 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-10 16:33:30,002 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-10 16:33:30,004 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), wx(String)
2019-07-10 16:33:30,010 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-10 16:33:30,011 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-10 16:33:30,012 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-10 16:33:30,020 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-10 16:33:30,021 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-10 16:33:30,022 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 101(String)
2019-07-10 16:33:30,026 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 2
2019-07-10 16:33:30,027 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-10 16:33:30,028 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-10 16:33:30,031 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-10 16:33:30,032  INFO 6200 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: wx, date: 2019-07-09T16:33:27.704 - result paysCount: 4, refundsCount: 2
2019-07-10 16:33:30,038 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 16:33:30,041 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 219(Integer), wx(String), 支付(String), 10110011562610950366258(String), null, 22900(Integer), null, 2019-07-11 05:32:31.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 219(Integer), wx(String), 支付(String), 10110011562630251366259(String), null, 19900(Integer), null, 2019-07-11 05:32:30.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 219(Integer), wx(String), 支付(String), 10110011562660958366285(String), null, 5(Integer), null, 2019-07-11 05:32:30.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 219(Integer), wx(String), 支付(String), 10110011562684369366311(String), null, 7200(Integer), null, 2019-07-11 05:32:31.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 219(Integer), wx(String), 退款(String), 10110011558860422365280(String), refund10110011558860422365280(String), 5(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 219(Integer), wx(String), 退款(String), 10110011561291536365966(String), refund10110011561291536365966(String), 40500(Integer), null, 2019-07-11 03:35:39.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-10 16:33:30,045 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 6
2019-07-10 16:33:30,047 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-10 16:33:30,048 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 6(Integer), 6(Integer), 4(Integer), 0(Integer), 2(Integer), 0(Integer), 50005(Integer), 0(Integer), 40505(Integer), 0(Integer), 299(Integer), -243(Integer), 219(Integer)
2019-07-10 16:33:30,054 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-10 16:33:30,086  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-09T16:33:27.704] createCompareBatch successful
2019-07-10 16:33:30,088 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:30,089 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190708(String)
2019-07-10 16:33:30,092 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 16:33:30,097  WARN 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-08T16:33:27.704] parse exception: 账单[20190708]已解析
2019-07-10 16:33:30,097 ERROR 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190708]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$b5463e9.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-10 16:33:30,099 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:30,100 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-10 16:33:30,102 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 16:33:30,103  INFO 6200 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 16:33:27 CST 2019)
2019-07-10 16:33:30,105  INFO 6200 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 09 16:33:27 CST 2019)
2019-07-10 16:33:30,106  INFO 6200 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_501_20190709.csv] already exists, return local file
2019-07-10 16:33:30,109 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 16:33:30,110 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String)
2019-07-10 16:33:30,114 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-10 16:33:30,114 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 16:33:30,115 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String)
2019-07-10 16:33:30,119 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-10 16:33:30,119 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 16:33:30,120 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String)
2019-07-10 16:33:30,124 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-10 16:33:30,124 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 16:33:30,125 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String)
2019-07-10 16:33:30,128 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-10 16:33:30,129 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? 
2019-07-10 16:33:30,130 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String)
2019-07-10 16:33:30,133 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-10 16:33:30,133 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:30,134 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-10 16:33:30,136 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-10 16:33:30,137 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-10 16:33:30,137 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), 0(Integer), 5(Integer), 0(Integer), 25(Integer), 0(Integer), {"总交易单数":5,"总交易额":0.00,"总退款金额":0.25,"手续费总金额":0.00000}(String), null
2019-07-10 16:33:30,141 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-10 16:33:30,142 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:30,142 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-10 16:33:30,145 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-10 16:33:30,146 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-10 16:33:30,147 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190709(String), null, null
2019-07-10 16:33:30,151 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-10 16:33:30,185  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T16:33:27.704] parse successful
2019-07-10 16:33:30,186 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-10 16:33:30,186 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190709(String), wx(String)
2019-07-10 16:33:30,189 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 16:33:30,189 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-10 16:33:30,190 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 501(String)
2019-07-10 16:33:30,199 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 5
2019-07-10 16:33:30,199 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 16:33:30,200 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560327103363921(String), wx(String)
2019-07-10 16:33:30,204 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 16:33:30,204 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 16:33:30,205 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560334037363923(String), wx(String)
2019-07-10 16:33:30,208 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 16:33:30,209 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 16:33:30,209 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011560398938363931(String), wx(String)
2019-07-10 16:33:30,212 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 16:33:30,212 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 16:33:30,212 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561694500364202(String), wx(String)
2019-07-10 16:33:30,216 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 16:33:30,216 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-10 16:33:30,217 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110011561951929364204(String), wx(String)
2019-07-10 16:33:30,220 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-10 16:33:30,222 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-10 16:33:30,223 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190709(String)
2019-07-10 16:33:30,226 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-10 16:33:30,227 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:30,227 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-10 16:33:30,230 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-10 16:33:30,231 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-10 16:33:30,232 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190709(String), wx(String), 20190709(String), 2019-07-10 16:33:30.231(Timestamp)
2019-07-10 16:33:30,237 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-10 16:33:30,238 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-10 16:33:30,239 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190709(String)
2019-07-10 16:33:30,242 DEBUG 6200 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-10 16:33:30,243 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-10 16:33:30,243 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190709(String), wx(String)
2019-07-10 16:33:30,246 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-10 16:33:30,247 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-10 16:33:30,248 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-10 16:33:30,250 DEBUG 6200 --- [           main] c.i.p.m.t.d.P.findBetweenDate            : <==      Total: 0
2019-07-10 16:33:30,251 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-10 16:33:30,251 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), wx(String), 501(String)
2019-07-10 16:33:30,260 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 5
2019-07-10 16:33:30,261 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==>  Preparing: select id, app_id, pay_type, order_no, refund_no, total_amount, refund_amount, client_ip, extra, create_time from pay_center3_refund_request where create_time between ? and ? and pay_type=? and app_id=? 
2019-07-10 16:33:30,262 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-10 16:33:30,265 DEBUG 6200 --- [           main] c.i.p.m.t.d.R.findBetweenDate            : <==      Total: 0
2019-07-10 16:33:30,266  INFO 6200 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 501, payType: wx, date: 2019-07-09T16:33:27.704 - result paysCount: 0, refundsCount: 5
2019-07-10 16:33:30,269 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==>  Preparing: INSERT INTO pay_center3_bill_compare_detail (`batch_id`, `pay_type`, `operate_type`, `order_no`, `refund_no`, `bill_amount`, `request_amount`, `trade_time`, `compare_status`, `compare_desc`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) , (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-10 16:33:30,273 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.batchSave                  : ==> Parameters: 220(Integer), wx(String), 退款(String), 10110011560327103363921(String), refund10110011560327103363921(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 220(Integer), wx(String), 退款(String), 10110011560334037363923(String), refund10110011560334037363923(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 220(Integer), wx(String), 退款(String), 10110011560398938363931(String), refund10110011560398938363931(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 220(Integer), wx(String), 退款(String), 10110011561694500364202(String), refund10110011561694500364202(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null, 220(Integer), wx(String), 退款(String), 10110011561951929364204(String), refund10110011561951929364204(String), 5(Integer), null, 2019-07-10 23:42:08.0(Timestamp), 1(Integer), 支付中心查无此单(String), null
2019-07-10 16:33:30,277 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.batchSave                  : <==    Updates: 5
2019-07-10 16:33:30,278 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.update                     : ==>  Preparing: update pay_center3_bill_compare_batch set `mistake_count` = ?, `unhandle_mistake_count` = ?, `bill_pay_count` = ?, `request_pay_count` = ?, `bill_refund_count` = ?, `request_refund_count` = ?, `bill_pay_amount` = ?, `request_pay_amount` = ?, `bill_refund_amount` = ?, `request_refund_amount` = ?, `pay_service_charge` = ?, `refund_service_charge` = ? where id = ? 
2019-07-10 16:33:30,279 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.update                     : ==> Parameters: 5(Integer), 5(Integer), 0(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), 0(Integer), 25(Integer), 0(Integer), 0(Integer), 0(Integer), 220(Integer)
2019-07-10 16:33:30,283 DEBUG 6200 --- [           main] c.i.p.m.t.d.B.update                     : <==    Updates: 1
2019-07-10 16:33:30,318  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-09T16:33:27.704] createCompareBatch successful
2019-07-10 16:33:30,318  INFO 6200 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-10 16:33:30,334  INFO 6200 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-10 16:33:30,337  INFO 6200 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-10 16:33:30,356  INFO 6200 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed

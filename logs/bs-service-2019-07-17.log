2019-07-17 13:58:34,994  INFO 2835 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 2835 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 13:58:35,000  INFO 2835 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-17 13:58:46,628  INFO 2837 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 2837 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 13:58:46,632  INFO 2837 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-17 13:58:50,345  INFO 2837 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$1807df3e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 13:58:50,686  INFO 2837 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$3a1965e0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 13:58:50,736  INFO 2837 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$4455cdbb] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 13:58:50,885  INFO 2837 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 13:58:51,222  INFO 2837 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 13:58:51,270  INFO 2837 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 13:58:51,286  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 13:58:51,293  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 13:58:51,294  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 13:58:51,295  INFO 2837 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 13:58:51,296  INFO 2837 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 13:58:51,298  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 13:58:51,299  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 13:58:51,300  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 13:58:51,303  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 13:58:51,305  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 13:58:51,306  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 13:58:51,306  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 13:58:51,308  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 13:58:51,308  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 13:58:51,309  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 13:58:51,310  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 13:58:51,311  INFO 2837 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 13:58:51,959  INFO 2837 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 13:58:54,087  INFO 2837 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 13:58:54,925  INFO 2837 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$1646aaae
2019-07-17 13:58:54,951  INFO 2837 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$31ac7869
2019-07-17 13:58:55,181  INFO 2837 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 13:58:55,181  INFO 2837 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 13:58:57,188  INFO 2837 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 13:58:58,598  INFO 2837 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 13:58:59,502  INFO 2837 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 13:59:00,856  INFO 2837 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 15.745 seconds (JVM running for 19.559)
2019-07-17 13:59:01,667 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 13:59:01,733 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-17 13:59:01,795 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 13:59:01,816  INFO 2837 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 00:00:00 CST 2019)
2019-07-17 13:59:01,817  INFO 2837 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190709: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 09 00:00:00 CST 2019)
2019-07-17 13:59:01,997 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 13:59:01,999 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011562641960364267(String), alipay(String), 101(String)
2019-07-17 13:59:02,002 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 13:59:02,005 DEBUG 2837 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 13:59:02,059 DEBUG 2837 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), alipay(String), 20190709(String), 10110011562641960364267(String), 2019070922001486611048342510(String), 5(Integer), 0(Integer), 2019-07-09 19:15:44.0(Timestamp), {"refund_amount":0.05,"支付宝交易号":"2019070922001486611048342510","商户订单号":"10110011562641960364267","业务类型":"交易","商品名称":"商品名称974","创建时间":"2019-07-09 11:15:43","完成时间":"2019-07-09 11:15:44","门店编号":"dev","对方账户":"*佳鸿(641***@qq.com)","订单金额（元）":0.05,"商家实收（元）":0.05,"退款批次号/请求号":"","服务费（元）":0.00,"备注":""}(String), 2019-07-17 13:59:01.997(Timestamp)
2019-07-17 13:59:02,068 DEBUG 2837 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 13:59:02,075 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 13:59:02,076 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-17 13:59:02,079 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 13:59:02,081 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 13:59:02,090 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), 1(Integer), 0(Integer), 5(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":58,"退款订单总笔数":24,"订单金额（元）":5107.15,"商家实收（元）":5107.15,"服务费（元）":-62.99,"实收净额（元）":5044.16}(String), null
2019-07-17 13:59:02,095 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 13:59:02,096 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 13:59:02,097 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-17 13:59:02,099 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 13:59:02,101 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 13:59:02,102 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190709(String), null, null
2019-07-17 13:59:02,106 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 13:59:02,138  INFO 2837 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T00:00:00.000] parse successful
2019-07-17 13:59:02,141 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 13:59:02,142 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-17 13:59:02,178 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-17 13:59:02,180 DEBUG 2837 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 13:59:02,184 DEBUG 2837 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011562641960364267(String), alipay(String)
2019-07-17 13:59:02,215 DEBUG 2837 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-17 13:59:02,218 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 13:59:02,219 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-17 13:59:02,222 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 13:59:02,225 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 13:59:02,226 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190709(String)
2019-07-17 13:59:02,230 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 13:59:02,231 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 13:59:02,232 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-17 13:59:02,238 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 13:59:02,239 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 13:59:02,243 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190709(String), alipay(String), 20190709(String), 2019-07-17 13:59:02.239(Timestamp)
2019-07-17 13:59:02,249 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 13:59:02,250 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 13:59:02,251 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190709(String)
2019-07-17 13:59:02,257 DEBUG 2837 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 13:59:02,263 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 13:59:02,264 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190709(String), alipay(String)
2019-07-17 13:59:02,272 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 1
2019-07-17 13:59:02,342 DEBUG 2837 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 13:59:02,345 DEBUG 2837 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-17 13:59:02,352 DEBUG 2837 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 13:59:02,363 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 13:59:02,375 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2076(Integer), 101(String), alipay(String), 20190709(String), 10110011562641960364267(String), 2019070922001486611048342510(String), 5(Integer), 0(Integer), 2019-07-09 19:15:44.0(Timestamp), {"备注":"","业务类型":"交易","创建时间":"2019-07-09 11:15:43","商品名称":"商品名称974","完成时间":"2019-07-09 11:15:44","对方账户":"*佳鸿(641***@qq.com)","门店编号":"dev","refund_amount":0.05,"商户订单号":"10110011562641960364267","支付宝交易号":"2019070922001486611048342510","服务费（元）":0,"商家实收（元）":0.05,"订单金额（元）":0.05,"退款批次号/请求号":""}(String), 2019-07-17 13:59:02.0(Timestamp)
2019-07-17 13:59:02,379 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.saveBatch                  : <==    Updates: 1
2019-07-17 13:59:02,380  INFO 2837 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : comparePayList-billPayLogCachService.saveBatch:  appId=101; payType=alipay;leftBillPayLogs=[BillPayLog(id=2076, appId=101, payType=alipay, billDate=20190709, orderNo=10110011562641960364267, tradeNo=2019070922001486611048342510, payAmount=5, serviceCharge=0, tradeTime=Tue Jul 09 19:15:44 CST 2019, details={备注=, 业务类型=交易, 创建时间=2019-07-09 11:15:43, 商品名称=商品名称974, 完成时间=2019-07-09 11:15:44, 对方账户=*佳鸿(641***@qq.com), 门店编号=dev, refund_amount=0.05, 商户订单号=10110011562641960364267, 支付宝交易号=2019070922001486611048342510, 服务费（元）=0, 商家实收（元）=0.05, 订单金额（元）=0.05, 退款批次号/请求号=}, createTime=Wed Jul 17 13:59:02 CST 2019)]
2019-07-17 13:59:02,381 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log_cach where pay_type = ? and app_id = ? and DATE_ADD(create_time,INTERVAL 4 DAY) < NOW() ORDER BY create_time DESC 
2019-07-17 13:59:02,382 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==> Parameters: alipay(String), 101(String)
2019-07-17 13:59:02,385 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : <==      Total: 0
2019-07-17 13:59:02,386 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 13:59:02,387 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190709(String), alipay(String), 101(String)
2019-07-17 13:59:02,390 DEBUG 2837 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 13:59:02,392 DEBUG 2837 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-17 13:59:02,394 DEBUG 2837 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-09 00:00:00.0(Timestamp), 2019-07-09 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-17 13:59:02,397 DEBUG 2837 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 13:59:02,398  INFO 2837 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-09T00:00:00.000 - result paysCount: 0, refundsCount: 0
2019-07-17 13:59:02,433  INFO 2837 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-09T00:00:00.000] createCompareBatch successful
2019-07-17 13:59:02,795  INFO 2837 --- [       Thread-7] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 13:59:02,796  INFO 2837 --- [       Thread-7] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 13:59:02,813  INFO 2837 --- [       Thread-7] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-17 15:17:33,317  INFO 7587 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 7587 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 15:17:33,323  INFO 7587 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-17 15:17:36,880  INFO 7587 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$79f769a1] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:17:37,160  INFO 7587 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$9c08f043] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:17:37,213  INFO 7587 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$a645581e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:17:37,357  INFO 7587 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 15:17:37,685  INFO 7587 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 15:17:37,726  INFO 7587 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 15:17:37,737  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 15:17:37,741  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:17:37,743  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:17:37,744  INFO 7587 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:17:37,745  INFO 7587 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:17:37,746  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 15:17:37,748  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:17:37,748  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:17:37,750  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 15:17:37,753  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:17:37,754  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:17:37,756  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:17:37,758  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:17:37,758  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:17:37,759  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:17:37,760  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:17:37,760  INFO 7587 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:17:38,088  INFO 7587 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 15:17:39,396  INFO 7587 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 15:17:40,166  INFO 7587 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$1d434460
2019-07-17 15:17:40,191  INFO 7587 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$38a9121b
2019-07-17 15:17:40,394  INFO 7587 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 15:17:40,395  INFO 7587 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 15:17:42,298  INFO 7587 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 15:17:43,724  INFO 7587 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 15:17:44,561  INFO 7587 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 15:17:45,883  INFO 7587 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 13.821 seconds (JVM running for 16.937)
2019-07-17 15:17:46,431  INFO 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-17 15:17:46,777 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:46,846 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190715(String)
2019-07-17 15:17:46,911 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:17:46,935  INFO 7587 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Mon Jul 15 15:17:46 CST 2019)
2019-07-17 15:17:46,937  INFO 7587 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190715: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Mon Jul 15 15:17:46 CST 2019)
2019-07-17 15:17:46,937  INFO 7587 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 15:17:47,025  INFO 7587 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190715 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-15","bill_type":"trade"},"text_params":{},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-17 15:17:47,688 ERROR 7587 --- [           main] sdk.biz.err                              : ErrorScene^_^40004^_^isp.bill_not_exist^_^null^_^Mac OS X^_^2019-07-17 15:17:47^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=B34+pQroJieYaeTRQlU91c8Youb00O1wpSlMHV2Fx+y04svq6M9353Pq0vloYWUg9m8S4DtNFzRVZtg5hKrkvR/Px4ZZDOpr4aXYyJot5eVcsc0dyZZIhCK5pjAc0hFar45mAgo8/+0dp13Cp8COtduywtSlHX8N1jYAzks2kPHOJo/P8jO59HbhD5h6zq1BnDi18xAzhyl2qiOqbAOoDkC1JuQDsnUpq6yTbNen/UAEBmSIcuEk/Uanr2MhmTf5AAG/+RRpzYJlDdlN0ea8sG5+Bp41iIIvNyLuS8vzyGJOYYY/nhVbEcd7pAuLV0ri427VZ1Un2cSfQOF0HyfIvg==&version=1.0&app_id=2018042660058300&sign_type=RSA2&timestamp=2019-07-17 15:17:47^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-15","bill_type":"trade"}^_^Body:{"alipay_data_dataservice_bill_downloadurl_query_response":{"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在"},"sign":"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw=="}^_^51ms,586ms,23ms
2019-07-17 15:17:47,694  INFO 7587 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190715 response: {"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"isp.bill_not_exist\",\"sub_msg\":\"账单不存在\"},\"sign\":\"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw==\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-15\",\"bill_type\":\"trade\"}"},"success":false,"error_code":"40004"}
2019-07-17 15:17:47,695  WARN 7587 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: Business Failed # isp.bill_not_exist # 账单不存在
2019-07-17 15:17:47,698 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 15:17:47,704 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190715(String), null, Business Failed # isp.bill_not_exist # 账单不存在(String)
2019-07-17 15:17:47,713 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 15:17:47,743  INFO 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-15T15:17:46.436] parse successful
2019-07-17 15:17:47,779 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:17:47,781 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190715(String), alipay(String)
2019-07-17 15:17:47,789 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:17:47,791 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:17:47,793 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190715(String), alipay(String), 503(String)
2019-07-17 15:17:47,799 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:17:47,806 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 15:17:47,807 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190715(String)
2019-07-17 15:17:47,813 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 15:17:47,814 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:47,818 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190715(String)
2019-07-17 15:17:47,828 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:17:47,831 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 15:17:47,835 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190715(String), alipay(String), 20190715(String), 2019-07-17 15:17:47.831(Timestamp)
2019-07-17 15:17:47,842 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 15:17:47,845 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:47,846 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190715(String)
2019-07-17 15:17:47,852 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 15:17:47,853  INFO 7587 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-15T15:17:46.436 - result is Null
2019-07-17 15:17:47,884  INFO 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-15T15:17:46.436] createCompareBatch successful
2019-07-17 15:17:47,889 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:47,890 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190715(String)
2019-07-17 15:17:47,895 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:17:47,910  WARN 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-15T15:17:46.436] parse exception: 账单[20190715]已解析
2019-07-17 15:17:47,916 ERROR 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$91858493.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:17:47,921 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:47,922 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 15:17:47,928 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:17:47,928  INFO 7587 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 16 15:17:46 CST 2019)
2019-07-17 15:17:47,929  INFO 7587 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 16 15:17:46 CST 2019)
2019-07-17 15:17:47,929  INFO 7587 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 15:17:47,930  INFO 7587 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-16","bill_type":"trade"},"text_params":{},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-17 15:17:48,076 ERROR 7587 --- [           main] sdk.biz.err                              : ErrorScene^_^40004^_^isp.bill_not_exist^_^null^_^Mac OS X^_^2019-07-17 15:17:48^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=V4J6KfwQqvq9Urh34NpCVgIWwgslG4Q0e/ykfKcB/7JUvSl2X53PbQUQDlBeifVmvuaqmoLXZLznI7aZE/wuxk5CbetHk71WzGOVrSbmxPX+jhVBTcRFhZ7RUvAqM+Ig2PGclcWNUOEZMH3IbqgrXTRgNiSsmRHvprlXgSMZhS/wrF5ZtPVIxrJIfU9rEtGHLg1YefoFBUNujt3Oy4cVYkmLA2fpMMfLASmiSRAOeZMknj4OGYUoc7meVvbolBnQ2D2831e0dR0z8XwoqKdCBAi+cGhGyJYoUdDCLkHzwJ/tp/TpcqIZnn3EgYB5OoRqNZ1jwWtfrh0TCXi8lHm+zA==&version=1.0&app_id=2018042660058300&sign_type=RSA2&timestamp=2019-07-17 15:17:47^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-16","bill_type":"trade"}^_^Body:{"alipay_data_dataservice_bill_downloadurl_query_response":{"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在"},"sign":"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw=="}^_^8ms,136ms,1ms
2019-07-17 15:17:48,077  INFO 7587 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 response: {"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"isp.bill_not_exist\",\"sub_msg\":\"账单不存在\"},\"sign\":\"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw==\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-16\",\"bill_type\":\"trade\"}"},"success":false,"error_code":"40004"}
2019-07-17 15:17:48,078  WARN 7587 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: Business Failed # isp.bill_not_exist # 账单不存在
2019-07-17 15:17:48,079 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 15:17:48,080 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190716(String), null, Business Failed # isp.bill_not_exist # 账单不存在(String)
2019-07-17 15:17:48,086 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 15:17:48,116  INFO 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-16T15:17:46.436] parse successful
2019-07-17 15:17:48,118 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:17:48,118 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190716(String), alipay(String)
2019-07-17 15:17:48,123 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:17:48,125 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:17:48,126 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 503(String)
2019-07-17 15:17:48,130 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:17:48,134 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 15:17:48,135 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190716(String)
2019-07-17 15:17:48,140 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 15:17:48,142 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:48,142 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 15:17:48,149 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:17:48,150 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 15:17:48,153 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190716(String), alipay(String), 20190716(String), 2019-07-17 15:17:48.15(Timestamp)
2019-07-17 15:17:48,160 DEBUG 7587 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 15:17:48,163 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:48,164 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 15:17:48,169 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 15:17:48,170  INFO 7587 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-16T15:17:46.436 - result is Null
2019-07-17 15:17:48,205  INFO 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-16T15:17:46.436] createCompareBatch successful
2019-07-17 15:17:48,209 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:48,211 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 15:17:48,216 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:17:48,226  WARN 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-16T15:17:46.436] parse exception: 账单[20190716]已解析
2019-07-17 15:17:48,228 ERROR 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190716]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$91858493.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:17:48,233 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:48,233 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190715(String)
2019-07-17 15:17:48,241 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:17:48,251  WARN 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-15T15:17:46.436] parse exception: 账单[20190715]已解析
2019-07-17 15:17:48,253 ERROR 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$91858493.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:17:48,259 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:48,263 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190715(String)
2019-07-17 15:17:48,270 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:17:48,281  WARN 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-15T15:17:46.436] parse exception: 账单[20190715]已解析
2019-07-17 15:17:48,281 ERROR 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$91858493.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:17:48,284 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:48,285 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 15:17:48,293 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:17:48,303  WARN 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-16T15:17:46.436] parse exception: 账单[20190716]已解析
2019-07-17 15:17:48,304 ERROR 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190716]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$91858493.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:17:48,310 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:48,311 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 15:17:48,322 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:17:48,336  WARN 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-16T15:17:46.436] parse exception: 账单[20190716]已解析
2019-07-17 15:17:48,337 ERROR 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190716]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$91858493.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:17:48,341 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:48,342 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190715(String)
2019-07-17 15:17:48,348 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:17:48,356  WARN 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-15T15:17:46.436] parse exception: 账单[20190715]已解析
2019-07-17 15:17:48,357 ERROR 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$91858493.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:17:48,360 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:17:48,361 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 15:17:48,366 DEBUG 7587 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:17:48,372  WARN 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-16T15:17:46.436] parse exception: 账单[20190716]已解析
2019-07-17 15:17:48,372 ERROR 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190716]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$91858493.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:17:48,373  INFO 7587 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-17 15:17:48,678  INFO 7587 --- [       Thread-7] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 15:17:48,680  INFO 7587 --- [       Thread-7] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 15:17:48,697  INFO 7587 --- [       Thread-7] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-17 15:18:57,129  INFO 7589 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 7589 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 15:18:57,132  INFO 7589 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-17 15:19:00,707  INFO 7589 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$79f769a1] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:19:00,996  INFO 7589 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$9c08f043] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:19:01,045  INFO 7589 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$a645581e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:19:01,180  INFO 7589 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 15:19:01,541  INFO 7589 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 15:19:01,588  INFO 7589 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 15:19:01,603  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 15:19:01,609  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:19:01,611  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:19:01,613  INFO 7589 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:19:01,614  INFO 7589 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:19:01,615  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 15:19:01,616  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:19:01,616  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:19:01,617  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 15:19:01,618  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:19:01,621  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:19:01,623  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:19:01,624  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:19:01,624  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:19:01,625  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:19:01,626  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:19:01,626  INFO 7589 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:19:02,010  INFO 7589 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 15:19:03,396  INFO 7589 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 15:19:04,244  INFO 7589 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$1d434460
2019-07-17 15:19:04,269  INFO 7589 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$38a9121b
2019-07-17 15:19:04,475  INFO 7589 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 15:19:04,476  INFO 7589 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 15:19:06,439  INFO 7589 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 15:19:08,132  INFO 7589 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 15:19:09,010  INFO 7589 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 15:19:10,294  INFO 7589 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 14.525 seconds (JVM running for 17.72)
2019-07-17 15:19:10,887  INFO 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-17 15:19:11,284 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:11,360 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190715(String)
2019-07-17 15:19:11,460 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:19:11,475  WARN 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-15T15:19:10.893] parse exception: 账单[20190715]已解析
2019-07-17 15:19:11,534 ERROR 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$91858493.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:19:11,541 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:11,542 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190715(String)
2019-07-17 15:19:11,550 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:19:11,559  WARN 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-15T15:19:10.893] parse exception: 账单[20190715]已解析
2019-07-17 15:19:11,560 ERROR 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$91858493.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:19:11,564 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:11,565 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 15:19:11,573 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:19:11,600  INFO 7589 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 16 15:19:10 CST 2019)
2019-07-17 15:19:11,601  INFO 7589 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 16 15:19:10 CST 2019)
2019-07-17 15:19:11,602  INFO 7589 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 15:19:11,689  INFO 7589 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-16","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-17 15:19:12,200 ERROR 7589 --- [           main] sdk.biz.err                              : ErrorScene^_^40004^_^isp.bill_not_exist^_^null^_^Mac OS X^_^2019-07-17 15:19:12^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=JcaqR34NLXJc/v9qF2bTH9C5dQU/jCBlEDXb9fPzvHfAcJCCf4pgFD7sbTQ60oVvGs5jlbrzMIXZyaKwHTormff2TDi8lSKjMGNPiwog43jaYObQG/DKpugN9H45FFe3YlC4XnVKpftkYDrEVSQ2GTmWco1EY8tn4ViV2e/UEQVN8JrfTXDWlko2+C9kWp2QgG38K17Iw/O8pVOnPw9KPY4kap7oo80b4No6AxfW8PNsBWHi5gqHZZxC7TBv7bRpR1XvqhdD2Gw0vE/U6pr1MIjrPc+hgaWj71Yr1a953cwX0IB7+y52KX0BLlvLQr7HZXxDj8iwIn6EzWEeUWjleA==&version=1.0&app_id=2018042660058300&sign_type=RSA2&timestamp=2019-07-17 15:19:11^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-16","bill_type":"trade"}^_^Body:{"alipay_data_dataservice_bill_downloadurl_query_response":{"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在"},"sign":"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw=="}^_^121ms,346ms,40ms
2019-07-17 15:19:12,209  INFO 7589 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 response: {"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"isp.bill_not_exist\",\"sub_msg\":\"账单不存在\"},\"sign\":\"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw==\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-16\",\"bill_type\":\"trade\"}"},"success":false,"error_code":"40004"}
2019-07-17 15:19:12,211  WARN 7589 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: Business Failed # isp.bill_not_exist # 账单不存在
2019-07-17 15:19:12,214 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 15:19:12,219 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190716(String), null, Business Failed # isp.bill_not_exist # 账单不存在(String)
2019-07-17 15:19:12,226 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 15:19:12,268  INFO 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-16T15:19:10.893] parse successful
2019-07-17 15:19:12,273 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:19:12,275 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190716(String), alipay(String)
2019-07-17 15:19:12,282 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:19:12,285 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:12,288 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 503(String)
2019-07-17 15:19:12,298 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:19:12,309 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 15:19:12,310 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190716(String)
2019-07-17 15:19:12,317 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 15:19:12,325 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:12,328 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 15:19:12,334 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:19:12,340 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 15:19:12,346 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190716(String), alipay(String), 20190716(String), 2019-07-17 15:19:12.338(Timestamp)
2019-07-17 15:19:12,353 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 15:19:12,361 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:12,362 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 15:19:12,368 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 15:19:12,372  INFO 7589 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-16T15:19:10.893 - result is Null
2019-07-17 15:19:12,414  INFO 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-16T15:19:10.893] createCompareBatch successful
2019-07-17 15:19:12,418 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:12,419 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 15:19:12,427 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:19:12,428  INFO 7589 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 16 15:19:10 CST 2019)
2019-07-17 15:19:12,429  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 16 15:19:10 CST 2019)
2019-07-17 15:19:12,451  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 request: {nonce_str=vAY9xaYaizhRRbdt49nxRdsmEXb1UYRg, bill_date=20190716, appid=wxd86049a121654669, sign=851D9A773D4B23FBA405DAD1C23C5C8A6BB298EFA0B673D1C46EAFE7049CB62F, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-17 15:19:13,111  INFO 7589 --- [           main] wxpay java sdk                           : report worker num: 6
2019-07-17 15:19:13,114  INFO 7589 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,vAY9xaYaizhRRbdt49nxRdsmEXb1UYRg,1563347953,587,api.mch.weixin.qq.com,true,6000,8000,0,0,0,90307560BB77FE89E7254C0CA61AD68A3559AA7F89A0FE86D0BDF6A0428AB567
2019-07-17 15:19:13,114  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-17 15:19:13,114  INFO 7589 --- [pool-2-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,vAY9xaYaizhRRbdt49nxRdsmEXb1UYRg,1563347953,587,api.mch.weixin.qq.com,true,6000,8000,0,0,0,90307560BB77FE89E7254C0CA61AD68A3559AA7F89A0FE86D0BDF6A0428AB567
2019-07-17 15:19:13,115  INFO 7589 --- [pool-2-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 15:19:13,115  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 response content size: 149
2019-07-17 15:19:13,115  INFO 7589 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-17 15:19:13,119  INFO 7589 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-17 15:19:13,120  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-17 15:19:13,121  WARN 7589 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-17 15:19:13,122 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 15:19:13,122 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190716(String), null, No Bill Exist(String)
2019-07-17 15:19:13,127 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 15:19:13,178  INFO 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-16T15:19:10.893] parse successful
2019-07-17 15:19:13,180 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:19:13,181 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190716(String), wx(String)
2019-07-17 15:19:13,186 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:19:13,190 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:13,192 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 503(String)
2019-07-17 15:19:13,195 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:19:13,199 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 15:19:13,200 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190716(String)
2019-07-17 15:19:13,206 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 15:19:13,208 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:13,210 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 15:19:13,216 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:19:13,217 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 15:19:13,218 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 15:19:13.217(Timestamp)
2019-07-17 15:19:13,225 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 15:19:13,227 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:13,228 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 15:19:13,232 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 15:19:13,233  INFO 7589 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-16T15:19:10.893 - result is Null
2019-07-17 15:19:13,295  INFO 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-16T15:19:10.893] createCompareBatch successful
2019-07-17 15:19:13,299 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:13,300 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190715(String)
2019-07-17 15:19:13,304 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:19:13,314  WARN 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-15T15:19:10.893] parse exception: 账单[20190715]已解析
2019-07-17 15:19:13,315 ERROR 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$91858493.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:19:13,320 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:13,321 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190715(String)
2019-07-17 15:19:13,327 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:19:13,338  WARN 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-15T15:19:10.893] parse exception: 账单[20190715]已解析
2019-07-17 15:19:13,342 ERROR 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$91858493.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:19:13,347 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:13,349 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 15:19:13,354 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:19:13,355  INFO 7589 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 16 15:19:10 CST 2019)
2019-07-17 15:19:13,355  INFO 7589 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 16 15:19:10 CST 2019)
2019-07-17 15:19:13,355  INFO 7589 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=101,appId=alipay,config=AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:19:13,356  INFO 7589 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-16","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-17 15:19:13,482  INFO 7589 --- [           main] sdk.biz.err                              : Summary^_^10000^_^null^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=IfWm/XIlxE0wjmY9IQLu43gzgC0CC9t+ELJmqKRLEgoawopCYWyou/+6+CXaFy56mQ9jXfBih7BI/+X5xycXz8C4jnboFqMo2C6UVhgtWdPqoKfQ+6xYk1APy1EZJ3RVwD1p6eoMkQgAG2xA0ziFd+OxqpbJyFAs7ClE3JHdG9o=&version=1.0&app_id=2016052401436400&sign_type=RSA&timestamp=2019-07-17 15:19:13^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-16","bill_type":"trade"}^_^8ms,117ms,1ms
2019-07-17 15:19:13,483  INFO 7589 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 response: {"code":"10000","msg":"Success","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"10000\",\"msg\":\"Success\",\"bill_download_url\":\"http:\\/\\/dwbillcenter.alipay.com\\/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190716&downloadFileName=20882218614866000156_20190716.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190716.csv.zip&timestamp=1563347953&token=235e90d55878e0208cbdee5201ce671e\"},\"sign\":\"b3SzFQ3TQUm482Sxg2DchKenbv0pZmWFq7d/T0EcWLDdrUX9zbCjXXbgFhWzML8+Yc42RAcJSrs33gwLneGLn9WkBbfO9UfZNfk9mIlyAEtygYoKluxYP7zC7rGmCaF9cET1R0l4Ewhb2n7GPdgmelcdJ9uOnoS/R/mbdEP8+5c=\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-16\",\"bill_type\":\"trade\"}"},"bill_download_url":"http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190716&downloadFileName=20882218614866000156_20190716.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190716.csv.zip&timestamp=1563347953&token=235e90d55878e0208cbdee5201ce671e","success":true,"error_code":"10000"}
2019-07-17 15:19:13,483  INFO 7589 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : alipay 101-Tue Jul 16 15:19:10 CST 2019 download-url: http://dwbillcenter.alipay.com/downloadBillFile.resource?bizType=trade&userId=20882218614866000156&fileType=csv.zip&bizDates=20190716&downloadFileName=20882218614866000156_20190716.csv.zip&fileId=%2Ftrade%2F20882218614866000156%2F20190716.csv.zip&timestamp=1563347953&token=235e90d55878e0208cbdee5201ce671e
2019-07-17 15:19:13,719  WARN 7589 --- [           main] o.a.h.c.protocol.ResponseProcessCookies  : Cookie rejected [zone="GZ00C", version:1, domain:.${session_domain}, path:/, expiry:null] Domain attribute ".${session_domain}" violates RFC 2109: domain must contain an embedded dot
2019-07-17 15:19:13,721  INFO 7589 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file write to [alipay_101_2019-07-16.zip]
2019-07-17 15:19:13,725  INFO 7589 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : bill file [alipay_101_2019-07-16.zip] write success
2019-07-17 15:19:13,824 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:13,824 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 15:19:13,830 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 15:19:13,831 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 15:19:13,847 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190716(String), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":7,"退款订单总笔数":3,"订单金额（元）":578.01,"商家实收（元）":578.01,"服务费（元）":-9.32,"实收净额（元）":568.69}(String), null
2019-07-17 15:19:13,853 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 15:19:13,855 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:13,856 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 15:19:13,859 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:19:13,860 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 15:19:13,860 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190716(String), null, null
2019-07-17 15:19:13,865 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 15:19:13,902  INFO 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-16T15:19:10.893] parse successful
2019-07-17 15:19:13,905 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:19:13,906 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), alipay(String)
2019-07-17 15:19:13,912 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:19:13,913 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:13,914 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 101(String)
2019-07-17 15:19:13,919 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:19:13,922 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 15:19:13,923 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190716(String)
2019-07-17 15:19:13,929 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 15:19:13,929 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:13,930 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 15:19:13,934 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:19:13,935 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 15:19:13,935 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190716(String), alipay(String), 20190716(String), 2019-07-17 15:19:13.935(Timestamp)
2019-07-17 15:19:13,941 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 15:19:13,942 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:13,943 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 15:19:13,964 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 15:19:13,968 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:19:13,968 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), alipay(String)
2019-07-17 15:19:13,971 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:19:14,034 DEBUG 7589 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 15:19:14,035 DEBUG 7589 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-17 15:19:14,040 DEBUG 7589 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 15:19:14,041 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:14,042 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 101(String)
2019-07-17 15:19:14,048 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:19:14,049 DEBUG 7589 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-17 15:19:14,050 DEBUG 7589 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-17 15:19:14,056 DEBUG 7589 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 15:19:14,057  INFO 7589 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-16T15:19:10.893 - result paysCount: 0, refundsCount: 0
2019-07-17 15:19:14,092  INFO 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-16T15:19:10.893] createCompareBatch successful
2019-07-17 15:19:14,096 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:14,097 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 15:19:14,102 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:19:14,103  INFO 7589 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 16 15:19:10 CST 2019)
2019-07-17 15:19:14,103  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 16 15:19:10 CST 2019)
2019-07-17 15:19:14,106  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 request: {nonce_str=bBxkYJEOzJ7NzdZVevLCFuvMHu4Ezef1, bill_date=20190716, appid=wxf712db1e1042a294, sign=306953C80C1D3792CD4DDC2BC5A718969A244F6B7B7574CE2ABE72BFE11F3117, bill_type=ALL, mch_id=1367026602, sign_type=HMAC-SHA256}
2019-07-17 15:19:14,337  INFO 7589 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,bBxkYJEOzJ7NzdZVevLCFuvMHu4Ezef1,1563347954,226,api.mch.weixin.qq.com,true,6000,8000,0,0,0,6D8CADC0A01429F082FAA112F0A313403DCB5A333D8992E8A974CF1C079A4CFC
2019-07-17 15:19:14,338  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : ﻿交易时间,公众账号ID,商户号,子商户号,设备号,微信订单号,商户订单号,用户标识,交易类型,交易状态,付款银行,货币种类,总金额,企业红包金额,微信退款单号,商户退款单号,退款金额,企业红包退款金额,退款类型,退款状态,商品名称,商户数据包,手续费,费率
`2019-07-16 02:15:59,`wxf712db1e1042a294,`1367026602,`0,`,`4200000344201907162933352469,`10110011563214543366441,`oF9zhvpC02_XpCRvUXuT3D-2heT0,`MWEB,`SUCCESS,`CFT,`CNY,`99.00,`0.00,`0,`0,`0.00,`0.00,`,`,`【618特惠】VENUS MARBLE9色复古油画眼影盘2019新款,`,`0.59000,`0.60%
`2019-07-16 15:21:47,`wxf712db1e1042a294,`1367026602,`0,`,`4200000344201907160777817734,`10110011563261630366450,`oF9zhvlIDys9Hq4IlTyvLIB4A4cQ,`MWEB,`SUCCESS,`BOC_DEBIT,`CNY,`249.00,`0.00,`0,`0,`0.00,`0.00,`,`,`CHARLES＆KEITH 链条编织时尚百搭单肩斜挎包网红小包,`,`1.49000,`0.60%
`2019-07-16 23:08:58,`wxf712db1e1042a294,`1367026602,`0,`,`4200000339201907161958040759,`10110011563289727366454,`oF9zhvl3Tth6xpwiRVKT42BZYyag,`JSAPI,`SUCCESS,`ICBC_DEBIT,`CNY,`530.00,`0.00,`0,`0,`0.00,`0.00,`,`,`日本BEAUTY BAR美容棒24K美容黄金棒 瘦脸神器震动提拉紧致按摩仪,`,`3.18000,`0.60%
总交易单数,总交易额,总退款金额,总企业红包退款金额,手续费总金额
`3,`878.00,`0.00,`0.00,`5.26000

2019-07-17 15:19:14,338  INFO 7589 --- [pool-3-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,bBxkYJEOzJ7NzdZVevLCFuvMHu4Ezef1,1563347954,226,api.mch.weixin.qq.com,true,6000,8000,0,0,0,6D8CADC0A01429F082FAA112F0A313403DCB5A333D8992E8A974CF1C079A4CFC
2019-07-17 15:19:14,338  INFO 7589 --- [pool-3-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 15:19:14,338  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 response content size: 989
2019-07-17 15:19:14,338  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file write to [wx_101_20190716.csv]
2019-07-17 15:19:14,343  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file [wx_101_20190716.csv] write success
2019-07-17 15:19:14,353 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:14,353 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563214543366441(String), wx(String), 101(String)
2019-07-17 15:19:14,360 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:14,361 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:19:14,364 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563214543366441(String), 4200000344201907162933352469(String), 9900(Integer), 59(Integer), null, {"merchant_income_charge":99.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907162933352469","商户订单号":"10110011563214543366441","用户标识":"oF9zhvpC02_XpCRvUXuT3D-2heT0","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":99.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618特惠】VENUS MARBLE9色复古油画眼影盘2019新款","手续费":0.59000,"费率":"0.60%"}(String), 2019-07-17 15:19:14.352(Timestamp)
2019-07-17 15:19:14,374 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:19:14,376 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:14,376 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563261630366450(String), wx(String), 101(String)
2019-07-17 15:19:14,382 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:14,383 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:19:14,385 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563261630366450(String), 4200000344201907160777817734(String), 24900(Integer), 149(Integer), null, {"merchant_income_charge":249.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907160777817734","商户订单号":"10110011563261630366450","用户标识":"oF9zhvlIDys9Hq4IlTyvLIB4A4cQ","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"BOC_DEBIT","货币种类":"CNY","总金额":249.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"CHARLES＆KEITH 链条编织时尚百搭单肩斜挎包网红小包","手续费":1.49000,"费率":"0.60%"}(String), 2019-07-17 15:19:14.375(Timestamp)
2019-07-17 15:19:14,397 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:19:14,399 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:14,399 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563289727366454(String), wx(String), 101(String)
2019-07-17 15:19:14,405 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:14,406 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:19:14,408 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563289727366454(String), 4200000339201907161958040759(String), 53000(Integer), 318(Integer), null, {"merchant_income_charge":530.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000339201907161958040759","商户订单号":"10110011563289727366454","用户标识":"oF9zhvl3Tth6xpwiRVKT42BZYyag","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"ICBC_DEBIT","货币种类":"CNY","总金额":530.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"日本BEAUTY BAR美容棒24K美容黄金棒 瘦脸神器震动提拉紧致按摩仪","手续费":3.18000,"费率":"0.60%"}(String), 2019-07-17 15:19:14.398(Timestamp)
2019-07-17 15:19:14,414 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:19:14,415 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:14,416 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 15:19:14,420 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 15:19:14,420 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 15:19:14,425 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190716(String), 3(Integer), 0(Integer), 87800(Integer), 0(Integer), 5(Integer), {"总交易单数":3,"总交易额":878.00,"总退款金额":0.00,"手续费总金额":5.26000}(String), null
2019-07-17 15:19:14,435 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 15:19:14,436 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:14,436 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 15:19:14,441 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:19:14,441 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 15:19:14,442 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190716(String), null, null
2019-07-17 15:19:14,449 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 15:19:14,495  INFO 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-16T15:19:10.893] parse successful
2019-07-17 15:19:14,497 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:19:14,497 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), wx(String)
2019-07-17 15:19:14,507 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 15:19:14,509 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:19:14,510 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563214543366441(String), wx(String)
2019-07-17 15:19:14,514 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:14,515  INFO 7589 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563214543366441)
2019-07-17 15:19:14,515  INFO 7589 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563214543366441,payType=wx,appId=101
2019-07-17 15:19:14,516  INFO 7589 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563214543366441
2019-07-17 15:19:14,517 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 15:19:14,517 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563214543366441(String), wx(String)
2019-07-17 15:19:14,521 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 15:19:14,522 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 15:19:14,523 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563214543366441(String), wx(String)
2019-07-17 15:19:14,530 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 15:19:14,531  INFO 7589 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563214543366441
2019-07-17 15:19:14,532 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:14,533 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563214543366441(String), wx(String), 101(String)
2019-07-17 15:19:14,538 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:14,538 ERROR 7589 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563214543366441] exception: not find PayRequestLog record by [orderNo:10110011563214543366441,payType:wx] 
2019-07-17 15:19:14,539 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:19:14,539 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563261630366450(String), wx(String)
2019-07-17 15:19:14,542 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:14,543  INFO 7589 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563261630366450)
2019-07-17 15:19:14,544  INFO 7589 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563261630366450,payType=wx,appId=101
2019-07-17 15:19:14,544  INFO 7589 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563261630366450
2019-07-17 15:19:14,545 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 15:19:14,545 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563261630366450(String), wx(String)
2019-07-17 15:19:14,548 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 15:19:14,550 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 15:19:14,550 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563261630366450(String), wx(String)
2019-07-17 15:19:14,554 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 15:19:14,555  INFO 7589 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563261630366450
2019-07-17 15:19:14,557 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:14,558 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563261630366450(String), wx(String), 101(String)
2019-07-17 15:19:14,561 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:14,562 ERROR 7589 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563261630366450] exception: not find PayRequestLog record by [orderNo:10110011563261630366450,payType:wx] 
2019-07-17 15:19:14,563 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:19:14,563 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563289727366454(String), wx(String)
2019-07-17 15:19:14,568 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:14,569  INFO 7589 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563289727366454)
2019-07-17 15:19:14,570  INFO 7589 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563289727366454,payType=wx,appId=101
2019-07-17 15:19:14,570  INFO 7589 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563289727366454
2019-07-17 15:19:14,572 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 15:19:14,575 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563289727366454(String), wx(String)
2019-07-17 15:19:14,581 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 15:19:14,582 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 15:19:14,582 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563289727366454(String), wx(String)
2019-07-17 15:19:14,586 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 15:19:14,589  INFO 7589 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563289727366454
2019-07-17 15:19:14,590 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:14,591 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563289727366454(String), wx(String), 101(String)
2019-07-17 15:19:14,596 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:14,597 ERROR 7589 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563289727366454] exception: not find PayRequestLog record by [orderNo:10110011563289727366454,payType:wx] 
2019-07-17 15:19:14,598 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:14,600 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 101(String)
2019-07-17 15:19:14,604 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:19:14,609 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 15:19:14,610 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190716(String)
2019-07-17 15:19:14,615 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 15:19:14,617 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:14,618 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 15:19:14,622 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:19:14,622 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 15:19:14,624 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 15:19:14.622(Timestamp)
2019-07-17 15:19:14,630 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 15:19:14,631 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:14,632 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 15:19:14,638 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 15:19:14,642 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:19:14,642 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), wx(String)
2019-07-17 15:19:14,651 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 15:19:14,652 DEBUG 7589 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 15:19:14,653 DEBUG 7589 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-17 15:19:14,658 DEBUG 7589 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 15:19:14,669 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? , ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? , ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 15:19:14,676 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2077(Integer), 101(String), wx(String), 20190716(String), 10110011563214543366441(String), 4200000344201907162933352469(String), 9900(Integer), 59(Integer), 2019-07-18 04:18:25.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":99,"手续费":0.59,"交易状态":"SUCCESS","交易类型":"MWEB","付款银行":"CFT","商品名称":"【618特惠】VENUS MARBLE9色复古油画眼影盘2019新款","子商户号":"0","用户标识":"oF9zhvpC02_XpCRvUXuT3D-2heT0","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563214543366441","微信订单号":"4200000344201907162933352469","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":99}(String), 2019-07-17 15:19:14.0(Timestamp), 2078(Integer), 101(String), wx(String), 20190716(String), 10110011563261630366450(String), 4200000344201907160777817734(String), 24900(Integer), 149(Integer), 2019-07-18 04:18:25.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":249,"手续费":1.49,"交易状态":"SUCCESS","交易类型":"MWEB","付款银行":"BOC_DEBIT","商品名称":"CHARLES＆KEITH 链条编织时尚百搭单肩斜挎包网红小包","子商户号":"0","用户标识":"oF9zhvlIDys9Hq4IlTyvLIB4A4cQ","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563261630366450","微信订单号":"4200000344201907160777817734","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":249}(String), 2019-07-17 15:19:14.0(Timestamp), 2079(Integer), 101(String), wx(String), 20190716(String), 10110011563289727366454(String), 4200000339201907161958040759(String), 53000(Integer), 318(Integer), 2019-07-18 04:18:25.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":530,"手续费":3.18,"交易状态":"SUCCESS","交易类型":"JSAPI","付款银行":"ICBC_DEBIT","商品名称":"日本BEAUTY BAR美容棒24K美容黄金棒 瘦脸神器震动提拉紧致按摩仪","子商户号":"0","用户标识":"oF9zhvl3Tth6xpwiRVKT42BZYyag","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563289727366454","微信订单号":"4200000339201907161958040759","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":530}(String), 2019-07-17 15:19:14.0(Timestamp)
2019-07-17 15:19:14,838  WARN 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-16T15:19:10.893] compare exception: 
### Error updating database.  Cause: java.sql.SQLException: Column count doesn't match value count at row 1
### The error may involve com.intbee.payment.modules.trade.dao.BillPayLogCachMapper.saveBatch-Inline
### The error occurred while setting parameters
### SQL: insert into pay_center3_bill_pay_log_cach      (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`)      values       (                  ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?                    ,                 ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?                    ,                 ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?                    )
### Cause: java.sql.SQLException: Column count doesn't match value count at row 1
; bad SQL grammar []; nested exception is java.sql.SQLException: Column count doesn't match value count at row 1
2019-07-17 15:19:14,843 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:14,844 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190715(String)
2019-07-17 15:19:14,852 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:19:14,862  WARN 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-15T15:19:10.893] parse exception: 账单[20190715]已解析
2019-07-17 15:19:14,863 ERROR 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$91858493.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:19:14,866 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:14,867 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 15:19:14,869 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:19:14,870  INFO 7589 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 16 15:19:10 CST 2019)
2019-07-17 15:19:14,870  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 16 15:19:10 CST 2019)
2019-07-17 15:19:14,871  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 request: {nonce_str=2iRNFRjDTcfdl45znyuY2HQn3wa9QgwI, bill_date=20190716, appid=wx1e86ddc5b2485ab2, sign=ADD7F99DED35D2D424F4FD997885CA50317EA2ED58089B55B0CEE0FB247057AF, bill_type=ALL, mch_id=1429146602, sign_type=HMAC-SHA256}
2019-07-17 15:19:15,049  INFO 7589 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,2iRNFRjDTcfdl45znyuY2HQn3wa9QgwI,1563347955,174,api.mch.weixin.qq.com,true,6000,8000,0,0,0,1B0E0F20650E020441DDF3CB78A6D731DA4A1805C3FECD3EC9A4E48631478279
2019-07-17 15:19:15,050  INFO 7589 --- [pool-4-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,2iRNFRjDTcfdl45znyuY2HQn3wa9QgwI,1563347955,174,api.mch.weixin.qq.com,true,6000,8000,0,0,0,1B0E0F20650E020441DDF3CB78A6D731DA4A1805C3FECD3EC9A4E48631478279
2019-07-17 15:19:15,051  INFO 7589 --- [pool-4-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 15:19:15,050  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : ﻿交易时间,公众账号ID,商户号,子商户号,设备号,微信订单号,商户订单号,用户标识,交易类型,交易状态,付款银行,货币种类,总金额,企业红包金额,微信退款单号,商户退款单号,退款金额,企业红包退款金额,退款类型,退款状态,商品名称,商户数据包,手续费,费率
`2019-07-16 16:33:11,`wx9b5cb757426e00d9,`1429146602,`0,`,`4200000358201907161857178396,`10110031563265944364364,`ok1_lwxblMHbvIPMdkjXoECK2EwU,`NATIVE,`SUCCESS,`ABC_DEBIT,`CNY,`24.21,`0.00,`0,`0,`0.00,`0.00,`,`,`雄鸡标 淡椰浆 270ml,`,`0.15000,`0.60%
`2019-07-16 10:46:40,`wx9b5cb757426e00d9,`1429146602,`0,`,`4200000353201907162527638733,`10110031563245163364362,`ok1_lwxblMHbvIPMdkjXoECK2EwU,`NATIVE,`SUCCESS,`ABC_DEBIT,`CNY,`142.00,`0.00,`0,`0,`0.00,`0.00,`,`,`丹麦蓝罐 Kjeldsens 曲奇 908g,`,`0.85000,`0.60%
`2019-07-16 10:35:14,`wx9b5cb757426e00d9,`1429146602,`0,`,`4200000353201907163645128652,`10110031563244439364361,`ok1_lwxblMHbvIPMdkjXoECK2EwU,`NATIVE,`SUCCESS,`ABC_DEBIT,`CNY,`142.00,`0.00,`0,`0,`0.00,`0.00,`,`,`丹麦蓝罐 Kjeldsens 曲奇 908g,`,`0.85000,`0.60%
`2019-07-16 17:10:29,`wx9b5cb757426e00d9,`1429146602,`0,`,`4200000339201907165618278756,`10110031563268210364365,`ok1_lwxblMHbvIPMdkjXoECK2EwU,`NATIVE,`SUCCESS,`ABC_DEBIT,`CNY,`29.50,`0.00,`0,`0,`0.00,`0.00,`,`,`雄鸡标 特级初榨橄榄油浸金枪鱼块 185g,`,`0.18000,`0.60%
`2019-07-16 10:36:45,`wx9b5cb757426e00d9,`1429146602,`0,`,`4200000353201907163645128652,`10110031563244439364361,`ok1_lwxblMHbvIPMdkjXoECK2EwU,`NATIVE,`REFUND,`ABC_DEBIT,`CNY,`0.00,`0.00,`50000400972019071610644839459,`refund10110031563244439364361,`142.00,`0.00,`ORIGINAL,`SUCCESS,`丹麦蓝罐 Kjeldsens 曲奇 908g,`,`-0.85000,`0.60%
`2019-07-16 10:47:13,`wx9b5cb757426e00d9,`1429146602,`0,`,`4200000353201907162527638733,`10110031563245163364362,`ok1_lwxblMHbvIPMdkjXoECK2EwU,`NATIVE,`REFUND,`ABC_DEBIT,`CNY,`0.00,`0.00,`50000500972019071610665371485,`refund10110031563245163364362,`142.00,`0.00,`ORIGINAL,`SUCCESS,`丹麦蓝罐 Kjeldsens 曲奇 908g,`,`-0.85000,`0.60%
`2019-07-16 17:17:10,`wx9b5cb757426e00d9,`1429146602,`0,`,`4200000339201907165618278756,`10110031563268210364365,`ok1_lwxblMHbvIPMdkjXoECK2EwU,`NATIVE,`REFUND,`ABC_DEBIT,`CNY,`0.00,`0.00,`50000400992019071610646993811,`refund10110031563268210364365,`29.50,`0.00,`ORIGINAL,`SUCCESS,`雄鸡标 特级初榨橄榄油浸金枪鱼块 185g,`,`-0.18000,`0.60%
总交易单数,总交易额,总退款金额,总企业红包退款金额,手续费总金额
`7,`337.71,`313.50,`0.00,`0.15000

2019-07-17 15:19:15,051  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 response content size: 2185
2019-07-17 15:19:15,051  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file write to [wx_501_20190716.csv]
2019-07-17 15:19:15,052  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : bill file [wx_501_20190716.csv] write success
2019-07-17 15:19:15,059 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:15,060 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563265944364364(String), wx(String), 501(String)
2019-07-17 15:19:15,064 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:15,065 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:19:15,067 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563265944364364(String), 4200000358201907161857178396(String), 2421(Integer), 15(Integer), null, {"merchant_income_charge":24.21,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000358201907161857178396","商户订单号":"10110031563265944364364","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":24.21,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"雄鸡标 淡椰浆 270ml","手续费":0.15000,"费率":"0.60%"}(String), 2019-07-17 15:19:15.059(Timestamp)
2019-07-17 15:19:15,076 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:19:15,078 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:15,079 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563245163364362(String), wx(String), 501(String)
2019-07-17 15:19:15,084 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:15,086 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:19:15,088 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), 85(Integer), null, {"merchant_income_charge":142.00,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000353201907162527638733","商户订单号":"10110031563245163364362","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":142.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","手续费":0.85000,"费率":"0.60%"}(String), 2019-07-17 15:19:15.077(Timestamp)
2019-07-17 15:19:15,094 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:19:15,095 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:15,096 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563244439364361(String), wx(String), 501(String)
2019-07-17 15:19:15,101 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:15,103 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:19:15,105 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563244439364361(String), 4200000353201907163645128652(String), 14200(Integer), 85(Integer), null, {"merchant_income_charge":142.00,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000353201907163645128652","商户订单号":"10110031563244439364361","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":142.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","手续费":0.85000,"费率":"0.60%"}(String), 2019-07-17 15:19:15.095(Timestamp)
2019-07-17 15:19:15,129 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:19:15,130 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:15,131 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563268210364365(String), wx(String), 501(String)
2019-07-17 15:19:15,135 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:15,136 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:19:15,137 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563268210364365(String), 4200000339201907165618278756(String), 2950(Integer), 18(Integer), null, {"merchant_income_charge":29.50,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000339201907165618278756","商户订单号":"10110031563268210364365","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":29.50,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"雄鸡标 特级初榨橄榄油浸金枪鱼块 185g","手续费":0.18000,"费率":"0.60%"}(String), 2019-07-17 15:19:15.13(Timestamp)
2019-07-17 15:19:15,143 DEBUG 7589 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:19:15,145 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:15,146 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563244439364361(String), wx(String), 501(String)
2019-07-17 15:19:15,152 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 15:19:15,153 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:15,153 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563245163364362(String), wx(String), 501(String)
2019-07-17 15:19:15,160 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 15:19:15,161 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:15,161 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563268210364365(String), wx(String), 501(String)
2019-07-17 15:19:15,168 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 15:19:15,169 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:15,170 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 15:19:15,173 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 15:19:15,174 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 15:19:15,176 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190716(String), 4(Integer), 3(Integer), 33771(Integer), 31350(Integer), 0(Integer), {"总交易单数":7,"总交易额":337.71,"总退款金额":313.50,"手续费总金额":0.15000}(String), null
2019-07-17 15:19:15,186 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 15:19:15,188 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:15,188 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 15:19:15,191 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:19:15,192 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 15:19:15,194 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190716(String), null, null
2019-07-17 15:19:15,200 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 15:19:15,238  INFO 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-16T15:19:10.893] parse successful
2019-07-17 15:19:15,240 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:19:15,240 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190716(String), wx(String)
2019-07-17 15:19:15,249 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-17 15:19:15,251 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:19:15,251 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563265944364364(String), wx(String)
2019-07-17 15:19:15,263 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-17 15:19:15,263 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:19:15,264 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563245163364362(String), wx(String)
2019-07-17 15:19:15,267 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:15,268  INFO 7589 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563245163364362)
2019-07-17 15:19:15,273  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563245163364362: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563245163364362)
2019-07-17 15:19:15,273  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563245163364362 request: {out_trade_no=10110031563245163364362}
2019-07-17 15:19:15,569  INFO 7589 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,d4TYxM3ex9CGzOHHbfkNKV5jNHTM91Y0,1563347955,292,api.mch.weixin.qq.com,true,6000,8000,0,0,0,2F5AA1A15B2C1407F66CED7CC232F5C7EE07EF8785235CD5B178F158E1F7B687
2019-07-17 15:19:15,570  INFO 7589 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[mHHBFAoKVuzdwlna]]></nonce_str>
<sign><![CDATA[721F40188FADED79B405E574D1F91008733ED476FEB07ED5E685851EE735A22D]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>14200</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000353201907162527638733]]></transaction_id>
<out_trade_no><![CDATA[10110031563245163364362]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716104640]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>14200</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 15:19:15,570  INFO 7589 --- [pool-5-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,d4TYxM3ex9CGzOHHbfkNKV5jNHTM91Y0,1563347955,292,api.mch.weixin.qq.com,true,6000,8000,0,0,0,2F5AA1A15B2C1407F66CED7CC232F5C7EE07EF8785235CD5B178F158E1F7B687
2019-07-17 15:19:15,570  INFO 7589 --- [pool-5-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 15:19:15,575  INFO 7589 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000353201907162527638733, nonce_str=mHHBFAoKVuzdwlna, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=721F40188FADED79B405E574D1F91008733ED476FEB07ED5E685851EE735A22D, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563245163364362, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716104640, is_subscribe=N, return_code=SUCCESS}
2019-07-17 15:19:15,576  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563245163364362 response: {transaction_id=4200000353201907162527638733, nonce_str=mHHBFAoKVuzdwlna, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=721F40188FADED79B405E574D1F91008733ED476FEB07ED5E685851EE735A22D, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563245163364362, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716104640, is_subscribe=N, return_code=SUCCESS}
2019-07-17 15:19:15,585 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:19:15,585 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563244439364361(String), wx(String)
2019-07-17 15:19:15,589 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:15,590  INFO 7589 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563244439364361)
2019-07-17 15:19:15,593  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563244439364361: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563244439364361)
2019-07-17 15:19:15,594  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563244439364361 request: {out_trade_no=10110031563244439364361}
2019-07-17 15:19:15,848  INFO 7589 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,QlovHOODBz2u7TjmBZ23MLL7bWyMVq2L,1563347955,251,api.mch.weixin.qq.com,true,6000,8000,0,0,0,087A60D3282B458A6828034BC5875921A049411CDE07001885838B98EE67E961
2019-07-17 15:19:15,848  INFO 7589 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[7VqKAnGULKCaoJdl]]></nonce_str>
<sign><![CDATA[9AF043194CA8D81E6460F6A4D4A30E7371E27349D8C596AADC98E415C5D69556]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>14200</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000353201907163645128652]]></transaction_id>
<out_trade_no><![CDATA[10110031563244439364361]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716103514]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>14200</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 15:19:15,848  INFO 7589 --- [pool-6-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,QlovHOODBz2u7TjmBZ23MLL7bWyMVq2L,1563347955,251,api.mch.weixin.qq.com,true,6000,8000,0,0,0,087A60D3282B458A6828034BC5875921A049411CDE07001885838B98EE67E961
2019-07-17 15:19:15,849  INFO 7589 --- [pool-6-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 15:19:15,850  INFO 7589 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000353201907163645128652, nonce_str=7VqKAnGULKCaoJdl, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=9AF043194CA8D81E6460F6A4D4A30E7371E27349D8C596AADC98E415C5D69556, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563244439364361, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716103514, is_subscribe=N, return_code=SUCCESS}
2019-07-17 15:19:15,851  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563244439364361 response: {transaction_id=4200000353201907163645128652, nonce_str=7VqKAnGULKCaoJdl, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=9AF043194CA8D81E6460F6A4D4A30E7371E27349D8C596AADC98E415C5D69556, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563244439364361, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716103514, is_subscribe=N, return_code=SUCCESS}
2019-07-17 15:19:15,867 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:19:15,868 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563268210364365(String), wx(String)
2019-07-17 15:19:15,873 DEBUG 7589 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:19:15,874  INFO 7589 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563268210364365)
2019-07-17 15:19:15,879  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563268210364365: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563268210364365)
2019-07-17 15:19:15,879  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563268210364365 request: {out_trade_no=10110031563268210364365}
2019-07-17 15:19:16,158  INFO 7589 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,UpwMcQLAPRM32VT2S9hq6LQMe8PnbTin,1563347956,276,api.mch.weixin.qq.com,true,6000,8000,0,0,0,751BDF63898DFE3BC58600D3C7A219787A270CA910A07CEB04A6A7B3333F8ECB
2019-07-17 15:19:16,158  INFO 7589 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[HbRg24o84m94y6cI]]></nonce_str>
<sign><![CDATA[39AE3DFD461FAF6105146BC85BA96E4459161062754034AA8E46B03BBEAB8E76]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>2950</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000339201907165618278756]]></transaction_id>
<out_trade_no><![CDATA[10110031563268210364365]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716171029]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>2950</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 15:19:16,158  INFO 7589 --- [pool-7-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,UpwMcQLAPRM32VT2S9hq6LQMe8PnbTin,1563347956,276,api.mch.weixin.qq.com,true,6000,8000,0,0,0,751BDF63898DFE3BC58600D3C7A219787A270CA910A07CEB04A6A7B3333F8ECB
2019-07-17 15:19:16,158  INFO 7589 --- [pool-7-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 15:19:16,160  INFO 7589 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000339201907165618278756, nonce_str=HbRg24o84m94y6cI, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=39AE3DFD461FAF6105146BC85BA96E4459161062754034AA8E46B03BBEAB8E76, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=2950, out_trade_no=10110031563268210364365, appid=wx1e86ddc5b2485ab2, total_fee=2950, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716171029, is_subscribe=N, return_code=SUCCESS}
2019-07-17 15:19:16,161  INFO 7589 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563268210364365 response: {transaction_id=4200000339201907165618278756, nonce_str=HbRg24o84m94y6cI, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=39AE3DFD461FAF6105146BC85BA96E4459161062754034AA8E46B03BBEAB8E76, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=2950, out_trade_no=10110031563268210364365, appid=wx1e86ddc5b2485ab2, total_fee=2950, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716171029, is_subscribe=N, return_code=SUCCESS}
2019-07-17 15:19:16,174 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:19:16,174 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 501(String)
2019-07-17 15:19:16,182 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 15:19:16,183 DEBUG 7589 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 15:19:16,184 DEBUG 7589 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563244439364361(String), wx(String)
2019-07-17 15:19:16,189 DEBUG 7589 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 15:19:16,190 DEBUG 7589 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 15:19:16,191 DEBUG 7589 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563245163364362(String), wx(String)
2019-07-17 15:19:16,197 DEBUG 7589 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 15:19:16,198 DEBUG 7589 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 15:19:16,198 DEBUG 7589 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563268210364365(String), wx(String)
2019-07-17 15:19:16,203 DEBUG 7589 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 15:19:16,208 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 15:19:16,209 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190716(String)
2019-07-17 15:19:16,215 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 15:19:16,215 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:16,216 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 15:19:16,221 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:19:16,222 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 15:19:16,224 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 15:19:16.222(Timestamp)
2019-07-17 15:19:16,234 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 15:19:16,235 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:19:16,236 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 15:19:16,243 DEBUG 7589 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 15:19:16,244 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:19:16,245 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190716(String), wx(String)
2019-07-17 15:19:16,259 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-17 15:19:16,260 DEBUG 7589 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 15:19:16,262 DEBUG 7589 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-17 15:19:16,269 DEBUG 7589 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 15:19:16,271 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? , ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? , ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? , ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 15:19:16,275 DEBUG 7589 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2080(Integer), 501(String), wx(String), 20190716(String), 10110031563265944364364(String), 4200000358201907161857178396(String), 2421(Integer), 15(Integer), 2019-07-18 04:18:25.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":24.21,"手续费":0.15,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 淡椰浆 270ml","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563265944364364","微信订单号":"4200000358201907161857178396","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":24.21}(String), 2019-07-17 15:19:15.0(Timestamp), 2081(Integer), 501(String), wx(String), 20190716(String), 10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), 85(Integer), 2019-07-18 04:18:25.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":142,"手续费":0.85,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563245163364362","微信订单号":"4200000353201907162527638733","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":142}(String), 2019-07-17 15:19:15.0(Timestamp), 2082(Integer), 501(String), wx(String), 20190716(String), 10110031563244439364361(String), 4200000353201907163645128652(String), 14200(Integer), 85(Integer), 2019-07-18 04:18:25.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":142,"手续费":0.85,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563244439364361","微信订单号":"4200000353201907163645128652","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":142}(String), 2019-07-17 15:19:15.0(Timestamp), 2083(Integer), 501(String), wx(String), 20190716(String), 10110031563268210364365(String), 4200000339201907165618278756(String), 2950(Integer), 18(Integer), 2019-07-18 04:18:25.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":29.5,"手续费":0.18,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 特级初榨橄榄油浸金枪鱼块 185g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563268210364365","微信订单号":"4200000339201907165618278756","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":29.5}(String), 2019-07-17 15:19:15.0(Timestamp)
2019-07-17 15:19:16,324  WARN 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-16T15:19:10.893] compare exception: 
### Error updating database.  Cause: java.sql.SQLException: Column count doesn't match value count at row 1
### The error may involve com.intbee.payment.modules.trade.dao.BillPayLogCachMapper.saveBatch-Inline
### The error occurred while setting parameters
### SQL: insert into pay_center3_bill_pay_log_cach      (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`)      values       (                  ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?                    ,                 ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?                    ,                 ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?                    ,                 ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?                    )
### Cause: java.sql.SQLException: Column count doesn't match value count at row 1
; bad SQL grammar []; nested exception is java.sql.SQLException: Column count doesn't match value count at row 1
2019-07-17 15:19:16,324  INFO 7589 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-17 15:19:16,670  INFO 7589 --- [       Thread-7] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 15:19:16,672  INFO 7589 --- [       Thread-7] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 15:19:16,694  INFO 7589 --- [       Thread-7] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-17 15:34:34,560  INFO 7603 --- [           main] c.i.p.m.t.service.BillPayLogCachTest     : Starting BillPayLogCachTest on lishihaideMac-mini.local with PID 7603 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 15:34:34,561  INFO 7603 --- [           main] c.i.p.m.t.service.BillPayLogCachTest     : The following profiles are active: szdev
2019-07-17 15:34:37,091  INFO 7603 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$f0f5807c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:34:37,441  INFO 7603 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$1307071e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:34:37,482  INFO 7603 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$1d436ef9] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:34:37,578  INFO 7603 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 15:34:37,867  INFO 7603 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 15:34:37,895  INFO 7603 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 15:34:37,913  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 15:34:37,917  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:34:37,918  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:34:37,918  INFO 7603 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:34:37,919  INFO 7603 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:34:37,919  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 15:34:37,920  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:34:37,920  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:34:37,921  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 15:34:37,922  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:34:37,922  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:34:37,923  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:34:37,924  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:34:37,924  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:34:37,925  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:34:37,925  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:34:37,926  INFO 7603 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:34:38,215  INFO 7603 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 15:34:39,527  INFO 7603 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 15:34:40,214  INFO 7603 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$97dc5017
2019-07-17 15:34:40,230  INFO 7603 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$b3421dd2
2019-07-17 15:34:40,404  INFO 7603 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 15:34:40,404  INFO 7603 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 15:34:42,018  INFO 7603 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 15:34:43,047  INFO 7603 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 15:34:43,725  INFO 7603 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 15:34:44,641  INFO 7603 --- [           main] c.i.p.m.t.service.BillPayLogCachTest     : Started BillPayLogCachTest in 10.937 seconds (JVM running for 12.133)
2019-07-17 15:34:45,237 DEBUG 7603 --- [           main] c.i.p.m.t.d.B.findInOrders               : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no in ( ? , ? ) and pay_type = ? 
2019-07-17 15:34:45,289 DEBUG 7603 --- [           main] c.i.p.m.t.d.B.findInOrders               : ==> Parameters: 10110031563265944364364(String), 10110031563245163364362(String), wx(String)
2019-07-17 15:34:45,417 DEBUG 7603 --- [           main] c.i.p.m.t.d.B.findInOrders               : <==      Total: 2
2019-07-17 15:34:45,426 DEBUG 7603 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? , ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 15:34:45,456 DEBUG 7603 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2081(Integer), 501(String), wx(String), 20190716(String), 10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), 85(Integer), 2019-07-18 04:18:25.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":142,"手续费":0.85,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563245163364362","微信订单号":"4200000353201907162527638733","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":142}(String), 2019-07-17 15:19:15.0(Timestamp), 2080(Integer), 501(String), wx(String), 20190716(String), 10110031563265944364364(String), 4200000358201907161857178396(String), 2421(Integer), 15(Integer), 2019-07-18 04:18:25.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":24.21,"手续费":0.15,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 淡椰浆 270ml","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563265944364364","微信订单号":"4200000358201907161857178396","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":24.21}(String), 2019-07-17 15:19:15.0(Timestamp)
2019-07-17 15:34:45,612  INFO 7603 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 15:34:45,615  INFO 7603 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 15:34:45,631  INFO 7603 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-17 15:36:57,923  INFO 7608 --- [           main] c.i.p.m.t.service.BillPayLogCachTest     : Starting BillPayLogCachTest on lishihaideMac-mini.local with PID 7608 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 15:36:57,925  INFO 7608 --- [           main] c.i.p.m.t.service.BillPayLogCachTest     : The following profiles are active: szdev
2019-07-17 15:37:00,905  INFO 7608 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$1e7e3700] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:37:01,328  INFO 7608 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$408fbda2] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:37:01,375  INFO 7608 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$4acc257d] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:37:01,518  INFO 7608 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 15:37:01,824  INFO 7608 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 15:37:01,846  INFO 7608 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 15:37:01,870  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 15:37:01,873  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:37:01,874  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:37:01,875  INFO 7608 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:37:01,876  INFO 7608 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:37:01,877  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 15:37:01,878  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:37:01,878  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:37:01,880  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 15:37:01,880  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:37:01,881  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:37:01,882  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:37:01,883  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:37:01,883  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:37:01,883  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:37:01,884  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:37:01,885  INFO 7608 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:37:02,251  INFO 7608 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 15:37:05,194  INFO 7608 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 15:37:05,987  INFO 7608 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$536c034f
2019-07-17 15:37:06,005  INFO 7608 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$6ed1d10a
2019-07-17 15:37:06,287  INFO 7608 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 15:37:06,288  INFO 7608 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 15:37:08,998  INFO 7608 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 15:37:10,325  INFO 7608 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 15:37:11,394  INFO 7608 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 15:37:12,620  INFO 7608 --- [           main] c.i.p.m.t.service.BillPayLogCachTest     : Started BillPayLogCachTest in 15.905 seconds (JVM running for 17.357)
2019-07-17 15:37:13,363 DEBUG 7608 --- [           main] c.i.p.m.t.d.B.findInOrders               : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no in ( ? , ? ) and pay_type = ? 
2019-07-17 15:37:13,443 DEBUG 7608 --- [           main] c.i.p.m.t.d.B.findInOrders               : ==> Parameters: 10110031563265944364364(String), 10110031563245163364362(String), wx(String)
2019-07-17 15:37:13,635 DEBUG 7608 --- [           main] c.i.p.m.t.d.B.findInOrders               : <==      Total: 2
2019-07-17 15:37:13,647 DEBUG 7608 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values （ ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ） , （ ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ） 
2019-07-17 15:37:13,682 DEBUG 7608 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2081(Integer), 501(String), wx(String), 20190716(String), 10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), 85(Integer), 2019-07-18 04:18:25.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":142,"手续费":0.85,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563245163364362","微信订单号":"4200000353201907162527638733","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":142}(String), 2019-07-17 15:19:15.0(Timestamp), 2080(Integer), 501(String), wx(String), 20190716(String), 10110031563265944364364(String), 4200000358201907161857178396(String), 2421(Integer), 15(Integer), 2019-07-18 04:18:25.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":24.21,"手续费":0.15,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 淡椰浆 270ml","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563265944364364","微信订单号":"4200000358201907161857178396","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":24.21}(String), 2019-07-17 15:19:15.0(Timestamp)
2019-07-17 15:37:13,884  INFO 7608 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 15:37:13,887  INFO 7608 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 15:37:13,907  INFO 7608 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-17 15:50:54,969  INFO 7646 --- [           main] c.i.p.m.t.service.BillPayLogCachTest     : Starting BillPayLogCachTest on lishihaideMac-mini.local with PID 7646 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 15:50:54,973  INFO 7646 --- [           main] c.i.p.m.t.service.BillPayLogCachTest     : The following profiles are active: szdev
2019-07-17 15:50:57,577  INFO 7646 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$1eecbac5] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:50:57,933  INFO 7646 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$40fe4167] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:50:57,972  INFO 7646 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$4b3aa942] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:50:58,079  INFO 7646 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 15:50:58,344  INFO 7646 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 15:50:58,362  INFO 7646 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 15:50:58,381  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 15:50:58,385  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:50:58,386  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:50:58,387  INFO 7646 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:50:58,387  INFO 7646 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:50:58,388  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 15:50:58,388  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:50:58,389  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:50:58,390  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 15:50:58,391  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:50:58,391  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:50:58,392  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:50:58,392  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:50:58,393  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:50:58,393  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:50:58,394  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:50:58,394  INFO 7646 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:50:58,654  INFO 7646 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 15:50:59,878  INFO 7646 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 15:51:00,582  INFO 7646 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$d708423b
2019-07-17 15:51:00,599  INFO 7646 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$f26e0ff6
2019-07-17 15:51:00,768  INFO 7646 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 15:51:00,769  INFO 7646 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 15:51:02,392  INFO 7646 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 15:51:03,481  INFO 7646 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 15:51:04,220  INFO 7646 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 15:51:05,139  INFO 7646 --- [           main] c.i.p.m.t.service.BillPayLogCachTest     : Started BillPayLogCachTest in 11.027 seconds (JVM running for 12.202)
2019-07-17 15:51:05,737 DEBUG 7646 --- [           main] c.i.p.m.t.d.B.findInOrders               : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no in ( ? , ? ) and pay_type = ? 
2019-07-17 15:51:05,789 DEBUG 7646 --- [           main] c.i.p.m.t.d.B.findInOrders               : ==> Parameters: 10110031563265944364364(String), 10110031563245163364362(String), wx(String)
2019-07-17 15:51:05,889 DEBUG 7646 --- [           main] c.i.p.m.t.d.B.findInOrders               : <==      Total: 2
2019-07-17 15:51:05,898 DEBUG 7646 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 15:51:05,929 DEBUG 7646 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2081(Integer), 501(String), wx(String), 20190716(String), 10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), 85(Integer), 2019-07-18 04:18:25.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":142,"手续费":0.85,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563245163364362","微信订单号":"4200000353201907162527638733","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":142}(String), 2019-07-17 15:19:15.0(Timestamp), 2080(Integer), 501(String), wx(String), 20190716(String), 10110031563265944364364(String), 4200000358201907161857178396(String), 2421(Integer), 15(Integer), 2019-07-18 04:18:25.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":24.21,"手续费":0.15,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 淡椰浆 270ml","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563265944364364","微信订单号":"4200000358201907161857178396","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":24.21}(String), 2019-07-17 15:19:15.0(Timestamp)
2019-07-17 15:51:05,971 DEBUG 7646 --- [           main] c.i.p.m.t.d.B.saveBatch                  : <==    Updates: 2
2019-07-17 15:51:05,985  INFO 7646 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 15:51:05,988  INFO 7646 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 15:51:06,005  INFO 7646 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-17 15:54:41,995  INFO 7648 --- [           main] c.i.p.m.t.service.BillPayLogCachTest     : Starting BillPayLogCachTest on lishihaideMac-mini.local with PID 7648 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 15:54:41,998  INFO 7648 --- [           main] c.i.p.m.t.service.BillPayLogCachTest     : The following profiles are active: szdev
2019-07-17 15:54:44,387  INFO 7648 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$1eecbac5] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:54:44,728  INFO 7648 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$40fe4167] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:54:44,766  INFO 7648 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$4b3aa942] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:54:44,878  INFO 7648 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 15:54:45,121  INFO 7648 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 15:54:45,141  INFO 7648 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 15:54:45,158  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 15:54:45,161  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:54:45,162  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:54:45,162  INFO 7648 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:54:45,163  INFO 7648 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:54:45,164  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 15:54:45,164  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:54:45,165  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:54:45,165  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 15:54:45,166  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:54:45,167  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:54:45,167  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:54:45,168  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:54:45,168  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:54:45,169  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:54:45,169  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:54:45,169  INFO 7648 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:54:45,441  INFO 7648 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 15:54:46,615  INFO 7648 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 15:54:47,258  INFO 7648 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$d708423b
2019-07-17 15:54:47,274  INFO 7648 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$f26e0ff6
2019-07-17 15:54:47,442  INFO 7648 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 15:54:47,442  INFO 7648 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 15:54:49,049  INFO 7648 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 15:54:50,115  INFO 7648 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 15:54:50,782  INFO 7648 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 15:54:51,660  INFO 7648 --- [           main] c.i.p.m.t.service.BillPayLogCachTest     : Started BillPayLogCachTest in 11.068 seconds (JVM running for 12.31)
2019-07-17 15:54:52,213 DEBUG 7648 --- [           main] c.i.p.m.t.d.B.findListByPayTypeAndAppId  : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log_cach where pay_type = ? and app_id = ? 
2019-07-17 15:54:52,263 DEBUG 7648 --- [           main] c.i.p.m.t.d.B.findListByPayTypeAndAppId  : ==> Parameters: wx(String), 501(String)
2019-07-17 15:54:52,363 DEBUG 7648 --- [           main] c.i.p.m.t.d.B.findListByPayTypeAndAppId  : <==      Total: 2
2019-07-17 15:54:52,419 DEBUG 7648 --- [           main] c.i.p.m.t.d.B.deleteBatch                : ==>  Preparing: delete from pay_center3_bill_pay_log_cach where id in ( ? , ? ) 
2019-07-17 15:54:52,421 DEBUG 7648 --- [           main] c.i.p.m.t.d.B.deleteBatch                : ==> Parameters: 2080(Integer), 2081(Integer)
2019-07-17 15:54:52,447 DEBUG 7648 --- [           main] c.i.p.m.t.d.B.deleteBatch                : <==    Updates: 2
2019-07-17 15:54:52,461  INFO 7648 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 15:54:52,463  INFO 7648 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 15:54:52,480  INFO 7648 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-17 15:55:58,882  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 7651 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 15:55:58,886  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-17 15:56:02,603  INFO 7651 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$1a69d597] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:56:02,893  INFO 7651 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$3c7b5c39] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:56:02,945  INFO 7651 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$46b7c414] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 15:56:03,095  INFO 7651 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 15:56:03,452  INFO 7651 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 15:56:03,493  INFO 7651 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 15:56:03,505  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 15:56:03,511  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:56:03,511  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:56:03,513  INFO 7651 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:56:03,514  INFO 7651 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 15:56:03,515  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 15:56:03,516  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:56:03,518  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:56:03,520  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 15:56:03,525  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:56:03,526  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:56:03,529  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:56:03,532  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:56:03,532  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:56:03,533  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 15:56:03,536  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 15:56:03,537  INFO 7651 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 15:56:03,889  INFO 7651 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 15:56:05,334  INFO 7651 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 15:56:06,340  INFO 7651 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$4a8a9302
2019-07-17 15:56:06,373  INFO 7651 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$65f060bd
2019-07-17 15:56:06,657  INFO 7651 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 15:56:06,657  INFO 7651 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 15:56:09,132  INFO 7651 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 15:56:10,902  INFO 7651 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 15:56:11,935  INFO 7651 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 15:56:13,674  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 16.084 seconds (JVM running for 19.314)
2019-07-17 15:56:14,232  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-17 15:56:14,535 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:14,606 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190715(String)
2019-07-17 15:56:14,687 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:56:14,701  WARN 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-15T15:56:14.239] parse exception: 账单[20190715]已解析
2019-07-17 15:56:14,726 ERROR 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$beccd335.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:56:14,731 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:14,732 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190715(String)
2019-07-17 15:56:14,735 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:56:14,743  WARN 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-15T15:56:14.239] parse exception: 账单[20190715]已解析
2019-07-17 15:56:14,744 ERROR 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$beccd335.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:56:14,749 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:14,750 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 15:56:14,757 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:56:14,803  INFO 7651 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 16 15:56:14 CST 2019)
2019-07-17 15:56:14,806  INFO 7651 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 16 15:56:14 CST 2019)
2019-07-17 15:56:14,806  INFO 7651 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 15:56:14,899  INFO 7651 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-16","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-17 15:56:15,388 ERROR 7651 --- [           main] sdk.biz.err                              : ErrorScene^_^40004^_^isp.bill_not_exist^_^null^_^Mac OS X^_^2019-07-17 15:56:15^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=P6t4LIdeMDUBJ7UP14OgTN0+2QoBQE4dkiMSSqQgR+ezsGlBgG9F1+C4caVfDDpSTPXXG0x7qaObkEOhaqpBUDZBF0TfwFXw8Aw3LLPZ2yuKdabdnp2UAoEva5+gOUmGnRMyOkUiVEPL5tDSqSaV8+lzIK94krIrAr2DjTTU6nDVPdFM9J2tZ5Nph1an5OCvBHW2Hg6UOgdxG18jKboxewjjJ7BGuuW9vR3b8nU8/C8JlmC8sBJrhzRTx6wE1lsyWlXolHQs3lCFkYdmN3xuPYlChxa/vYrQBWjm8Vh6NgUotP3gTvWufQML+870GG77fT7uaX2Kqs0FP2hfUUou4Q==&version=1.0&app_id=2018042660058300&sign_type=RSA2&timestamp=2019-07-17 15:56:14^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-16","bill_type":"trade"}^_^Body:{"alipay_data_dataservice_bill_downloadurl_query_response":{"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在"},"sign":"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw=="}^_^116ms,343ms,28ms
2019-07-17 15:56:15,392  INFO 7651 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 response: {"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"isp.bill_not_exist\",\"sub_msg\":\"账单不存在\"},\"sign\":\"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw==\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-16\",\"bill_type\":\"trade\"}"},"success":false,"error_code":"40004"}
2019-07-17 15:56:15,393  WARN 7651 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: Business Failed # isp.bill_not_exist # 账单不存在
2019-07-17 15:56:15,396 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 15:56:15,401 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190716(String), null, Business Failed # isp.bill_not_exist # 账单不存在(String)
2019-07-17 15:56:15,409 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 15:56:15,453  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-16T15:56:14.239] parse successful
2019-07-17 15:56:15,461 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:56:15,464 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190716(String), alipay(String)
2019-07-17 15:56:15,471 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:56:15,475 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:15,477 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 503(String)
2019-07-17 15:56:15,486 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:56:15,495 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 15:56:15,499 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190716(String)
2019-07-17 15:56:15,505 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 15:56:15,507 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:15,508 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 15:56:15,515 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:56:15,516 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 15:56:15,523 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190716(String), alipay(String), 20190716(String), 2019-07-17 15:56:15.516(Timestamp)
2019-07-17 15:56:15,531 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 15:56:15,534 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:15,536 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 15:56:15,540 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 15:56:15,542  INFO 7651 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-16T15:56:14.239 - result is Null
2019-07-17 15:56:15,583  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-16T15:56:14.239] createCompareBatch successful
2019-07-17 15:56:15,587 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:15,588 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 15:56:15,592 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:56:15,595  INFO 7651 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 16 15:56:14 CST 2019)
2019-07-17 15:56:15,596  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 16 15:56:14 CST 2019)
2019-07-17 15:56:15,609  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 request: {nonce_str=3zltTFepsswjGKFeteFTtNuo4SSo7C0z, bill_date=20190716, appid=wxd86049a121654669, sign=ECECE6B4350B06429D9CE62B4C34165710D5FF26F4A7A01A4FFD989EE9774A4E, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-17 15:56:16,322  INFO 7651 --- [           main] wxpay java sdk                           : report worker num: 6
2019-07-17 15:56:16,328  INFO 7651 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,3zltTFepsswjGKFeteFTtNuo4SSo7C0z,1563350176,664,api.mch.weixin.qq.com,true,6000,8000,0,0,0,7C72D2DEC02EF918B8B16FA83D996534DC2FFC2BD5D0908224CFAE5A573430D3
2019-07-17 15:56:16,328  INFO 7651 --- [pool-2-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,3zltTFepsswjGKFeteFTtNuo4SSo7C0z,1563350176,664,api.mch.weixin.qq.com,true,6000,8000,0,0,0,7C72D2DEC02EF918B8B16FA83D996534DC2FFC2BD5D0908224CFAE5A573430D3
2019-07-17 15:56:16,329  INFO 7651 --- [pool-2-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 15:56:16,330  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-17 15:56:16,332  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 response content size: 149
2019-07-17 15:56:16,334  INFO 7651 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-17 15:56:16,343  INFO 7651 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-17 15:56:16,343  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-17 15:56:16,344  WARN 7651 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-17 15:56:16,345 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 15:56:16,346 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190716(String), null, No Bill Exist(String)
2019-07-17 15:56:16,351 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 15:56:16,377  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-16T15:56:14.239] parse successful
2019-07-17 15:56:16,380 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:56:16,380 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190716(String), wx(String)
2019-07-17 15:56:16,384 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:56:16,385 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:16,386 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 503(String)
2019-07-17 15:56:16,389 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:56:16,392 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 15:56:16,393 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190716(String)
2019-07-17 15:56:16,397 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 15:56:16,398 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:16,400 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 15:56:16,404 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:56:16,407 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 15:56:16,408 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 15:56:16.407(Timestamp)
2019-07-17 15:56:16,415 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 15:56:16,416 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:16,416 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 15:56:16,419 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 15:56:16,420  INFO 7651 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-16T15:56:14.239 - result is Null
2019-07-17 15:56:16,460  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-16T15:56:14.239] createCompareBatch successful
2019-07-17 15:56:16,463 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:16,464 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190715(String)
2019-07-17 15:56:16,469 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:56:16,475  WARN 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-15T15:56:14.239] parse exception: 账单[20190715]已解析
2019-07-17 15:56:16,476 ERROR 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$beccd335.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:56:16,484 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:16,486 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190715(String)
2019-07-17 15:56:16,497 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:56:16,509  WARN 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-15T15:56:14.239] parse exception: 账单[20190715]已解析
2019-07-17 15:56:16,514 ERROR 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$beccd335.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:56:16,519 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:16,521 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 15:56:16,527 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:56:16,527  INFO 7651 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 16 15:56:14 CST 2019)
2019-07-17 15:56:16,528  INFO 7651 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 16 15:56:14 CST 2019)
2019-07-17 15:56:16,686 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:16,687 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 15:56:16,690 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 15:56:16,691 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 15:56:16,707 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190716(String), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":7,"退款订单总笔数":3,"订单金额（元）":578.01,"商家实收（元）":578.01,"服务费（元）":-9.32,"实收净额（元）":568.69}(String), null
2019-07-17 15:56:16,712 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 15:56:16,713 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:16,714 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 15:56:16,716 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:56:16,717 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 15:56:16,719 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190716(String), null, null
2019-07-17 15:56:16,724 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 15:56:16,752  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-16T15:56:14.239] parse successful
2019-07-17 15:56:16,753 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:56:16,753 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), alipay(String)
2019-07-17 15:56:16,757 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:56:16,758 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:16,758 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 101(String)
2019-07-17 15:56:16,761 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:56:16,764 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 15:56:16,764 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190716(String)
2019-07-17 15:56:16,768 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 15:56:16,768 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:16,769 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 15:56:16,772 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:56:16,773 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 15:56:16,773 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190716(String), alipay(String), 20190716(String), 2019-07-17 15:56:16.773(Timestamp)
2019-07-17 15:56:16,777 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 15:56:16,779 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:16,779 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 15:56:16,805 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 15:56:16,809 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:56:16,809 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), alipay(String)
2019-07-17 15:56:16,813 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:56:16,860 DEBUG 7651 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 15:56:16,861 DEBUG 7651 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-17 15:56:16,867 DEBUG 7651 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 15:56:16,868 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:16,869 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 101(String)
2019-07-17 15:56:16,873 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:56:16,874 DEBUG 7651 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-17 15:56:16,876 DEBUG 7651 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-17 15:56:16,882 DEBUG 7651 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 15:56:16,883  INFO 7651 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-16T15:56:14.239 - result paysCount: 0, refundsCount: 0
2019-07-17 15:56:16,926  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-16T15:56:14.239] createCompareBatch successful
2019-07-17 15:56:16,930 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:16,931 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 15:56:16,934 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:56:16,934  INFO 7651 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 16 15:56:14 CST 2019)
2019-07-17 15:56:16,935  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 16 15:56:14 CST 2019)
2019-07-17 15:56:16,935  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_101_20190716.csv] already exists, return local file
2019-07-17 15:56:16,949 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:16,950 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563214543366441(String), wx(String), 101(String)
2019-07-17 15:56:16,954 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:16,956 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:56:16,960 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563214543366441(String), 4200000344201907162933352469(String), 9900(Integer), 59(Integer), null, {"merchant_income_charge":99.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907162933352469","商户订单号":"10110011563214543366441","用户标识":"oF9zhvpC02_XpCRvUXuT3D-2heT0","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":99.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618特惠】VENUS MARBLE9色复古油画眼影盘2019新款","手续费":0.59000,"费率":"0.60%"}(String), 2019-07-17 15:56:16.949(Timestamp)
2019-07-17 15:56:16,965 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:56:16,967 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:16,968 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563261630366450(String), wx(String), 101(String)
2019-07-17 15:56:16,973 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:16,974 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:56:16,976 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563261630366450(String), 4200000344201907160777817734(String), 24900(Integer), 149(Integer), null, {"merchant_income_charge":249.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907160777817734","商户订单号":"10110011563261630366450","用户标识":"oF9zhvlIDys9Hq4IlTyvLIB4A4cQ","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"BOC_DEBIT","货币种类":"CNY","总金额":249.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"CHARLES＆KEITH 链条编织时尚百搭单肩斜挎包网红小包","手续费":1.49000,"费率":"0.60%"}(String), 2019-07-17 15:56:16.966(Timestamp)
2019-07-17 15:56:16,982 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:56:16,983 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:16,984 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563289727366454(String), wx(String), 101(String)
2019-07-17 15:56:16,990 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:16,991 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:56:16,993 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563289727366454(String), 4200000339201907161958040759(String), 53000(Integer), 318(Integer), null, {"merchant_income_charge":530.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000339201907161958040759","商户订单号":"10110011563289727366454","用户标识":"oF9zhvl3Tth6xpwiRVKT42BZYyag","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"ICBC_DEBIT","货币种类":"CNY","总金额":530.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"日本BEAUTY BAR美容棒24K美容黄金棒 瘦脸神器震动提拉紧致按摩仪","手续费":3.18000,"费率":"0.60%"}(String), 2019-07-17 15:56:16.983(Timestamp)
2019-07-17 15:56:16,997 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:56:16,998 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:16,999 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 15:56:17,003 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 15:56:17,008 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 15:56:17,013 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190716(String), 3(Integer), 0(Integer), 87800(Integer), 0(Integer), 5(Integer), {"总交易单数":3,"总交易额":878.00,"总退款金额":0.00,"手续费总金额":5.26000}(String), null
2019-07-17 15:56:17,019 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 15:56:17,022 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:17,024 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 15:56:17,027 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:56:17,028 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 15:56:17,030 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190716(String), null, null
2019-07-17 15:56:17,034 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 15:56:17,095  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-16T15:56:14.239] parse successful
2019-07-17 15:56:17,097 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:56:17,097 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), wx(String)
2019-07-17 15:56:17,105 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 15:56:17,107 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:56:17,108 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563214543366441(String), wx(String)
2019-07-17 15:56:17,110 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:17,111  INFO 7651 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563214543366441)
2019-07-17 15:56:17,112  INFO 7651 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563214543366441,payType=wx,appId=101
2019-07-17 15:56:17,112  INFO 7651 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563214543366441
2019-07-17 15:56:17,113 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 15:56:17,114 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563214543366441(String), wx(String)
2019-07-17 15:56:17,116 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 15:56:17,118 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 15:56:17,118 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563214543366441(String), wx(String)
2019-07-17 15:56:17,123 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 15:56:17,123  INFO 7651 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563214543366441
2019-07-17 15:56:17,124 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:17,124 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563214543366441(String), wx(String), 101(String)
2019-07-17 15:56:17,127 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:17,128 ERROR 7651 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563214543366441] exception: not find PayRequestLog record by [orderNo:10110011563214543366441,payType:wx] 
2019-07-17 15:56:17,129 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:56:17,129 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563261630366450(String), wx(String)
2019-07-17 15:56:17,132 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:17,133  INFO 7651 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563261630366450)
2019-07-17 15:56:17,133  INFO 7651 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563261630366450,payType=wx,appId=101
2019-07-17 15:56:17,133  INFO 7651 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563261630366450
2019-07-17 15:56:17,134 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 15:56:17,134 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563261630366450(String), wx(String)
2019-07-17 15:56:17,137 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 15:56:17,138 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 15:56:17,139 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563261630366450(String), wx(String)
2019-07-17 15:56:17,143 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 15:56:17,144  INFO 7651 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563261630366450
2019-07-17 15:56:17,144 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:17,145 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563261630366450(String), wx(String), 101(String)
2019-07-17 15:56:17,148 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:17,149 ERROR 7651 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563261630366450] exception: not find PayRequestLog record by [orderNo:10110011563261630366450,payType:wx] 
2019-07-17 15:56:17,150 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:56:17,151 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563289727366454(String), wx(String)
2019-07-17 15:56:17,156 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:17,158  INFO 7651 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563289727366454)
2019-07-17 15:56:17,159  INFO 7651 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563289727366454,payType=wx,appId=101
2019-07-17 15:56:17,159  INFO 7651 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563289727366454
2019-07-17 15:56:17,160 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 15:56:17,161 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563289727366454(String), wx(String)
2019-07-17 15:56:17,164 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 15:56:17,166 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 15:56:17,166 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563289727366454(String), wx(String)
2019-07-17 15:56:17,170 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 15:56:17,171  INFO 7651 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563289727366454
2019-07-17 15:56:17,171 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:17,172 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563289727366454(String), wx(String), 101(String)
2019-07-17 15:56:17,178 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:17,180 ERROR 7651 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563289727366454] exception: not find PayRequestLog record by [orderNo:10110011563289727366454,payType:wx] 
2019-07-17 15:56:17,180 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:17,181 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 101(String)
2019-07-17 15:56:17,185 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:56:17,187 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 15:56:17,188 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190716(String)
2019-07-17 15:56:17,192 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 15:56:17,193 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:17,194 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 15:56:17,198 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:56:17,199 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 15:56:17,200 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 15:56:17.199(Timestamp)
2019-07-17 15:56:17,205 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 15:56:17,206 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:17,207 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 15:56:17,211 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 15:56:17,212 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:56:17,212 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), wx(String)
2019-07-17 15:56:17,218 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 15:56:17,219 DEBUG 7651 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 15:56:17,220 DEBUG 7651 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-17 15:56:17,225 DEBUG 7651 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 15:56:17,243 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 15:56:17,252 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2084(Integer), 101(String), wx(String), 20190716(String), 10110011563214543366441(String), 4200000344201907162933352469(String), 9900(Integer), 59(Integer), 2019-07-18 04:55:27.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":99,"手续费":0.59,"交易状态":"SUCCESS","交易类型":"MWEB","付款银行":"CFT","商品名称":"【618特惠】VENUS MARBLE9色复古油画眼影盘2019新款","子商户号":"0","用户标识":"oF9zhvpC02_XpCRvUXuT3D-2heT0","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563214543366441","微信订单号":"4200000344201907162933352469","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":99}(String), 2019-07-17 15:56:17.0(Timestamp), 2085(Integer), 101(String), wx(String), 20190716(String), 10110011563261630366450(String), 4200000344201907160777817734(String), 24900(Integer), 149(Integer), 2019-07-18 04:55:27.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":249,"手续费":1.49,"交易状态":"SUCCESS","交易类型":"MWEB","付款银行":"BOC_DEBIT","商品名称":"CHARLES＆KEITH 链条编织时尚百搭单肩斜挎包网红小包","子商户号":"0","用户标识":"oF9zhvlIDys9Hq4IlTyvLIB4A4cQ","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563261630366450","微信订单号":"4200000344201907160777817734","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":249}(String), 2019-07-17 15:56:17.0(Timestamp), 2086(Integer), 101(String), wx(String), 20190716(String), 10110011563289727366454(String), 4200000339201907161958040759(String), 53000(Integer), 318(Integer), 2019-07-18 04:55:27.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":530,"手续费":3.18,"交易状态":"SUCCESS","交易类型":"JSAPI","付款银行":"ICBC_DEBIT","商品名称":"日本BEAUTY BAR美容棒24K美容黄金棒 瘦脸神器震动提拉紧致按摩仪","子商户号":"0","用户标识":"oF9zhvl3Tth6xpwiRVKT42BZYyag","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563289727366454","微信订单号":"4200000339201907161958040759","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":530}(String), 2019-07-17 15:56:17.0(Timestamp)
2019-07-17 15:56:17,257 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.saveBatch                  : <==    Updates: 3
2019-07-17 15:56:17,257  INFO 7651 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : comparePayList-billPayLogCachService.saveBatch:  appId=101; payType=wx;leftBillPayLogs=[BillPayLog(id=2084, appId=101, payType=wx, billDate=20190716, orderNo=10110011563214543366441, tradeNo=4200000344201907162933352469, payAmount=9900, serviceCharge=59, tradeTime=Thu Jul 18 04:55:27 CST 2019, details={费率=0.60%, 商户号=1367026602, 总金额=99, 手续费=0.59, 交易状态=SUCCESS, 交易类型=MWEB, 付款银行=CFT, 商品名称=【618特惠】VENUS MARBLE9色复古油画眼影盘2019新款, 子商户号=0, 用户标识=oF9zhvpC02_XpCRvUXuT3D-2heT0, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wxf712db1e1042a294, 商户订单号=10110011563214543366441, 微信订单号=4200000344201907162933352469, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=99}, createTime=Wed Jul 17 15:56:17 CST 2019), BillPayLog(id=2085, appId=101, payType=wx, billDate=20190716, orderNo=10110011563261630366450, tradeNo=4200000344201907160777817734, payAmount=24900, serviceCharge=149, tradeTime=Thu Jul 18 04:55:27 CST 2019, details={费率=0.60%, 商户号=1367026602, 总金额=249, 手续费=1.49, 交易状态=SUCCESS, 交易类型=MWEB, 付款银行=BOC_DEBIT, 商品名称=CHARLES＆KEITH 链条编织时尚百搭单肩斜挎包网红小包, 子商户号=0, 用户标识=oF9zhvlIDys9Hq4IlTyvLIB4A4cQ, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wxf712db1e1042a294, 商户订单号=10110011563261630366450, 微信订单号=4200000344201907160777817734, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=249}, createTime=Wed Jul 17 15:56:17 CST 2019), BillPayLog(id=2086, appId=101, payType=wx, billDate=20190716, orderNo=10110011563289727366454, tradeNo=4200000339201907161958040759, payAmount=53000, serviceCharge=318, tradeTime=Thu Jul 18 04:55:27 CST 2019, details={费率=0.60%, 商户号=1367026602, 总金额=530, 手续费=3.18, 交易状态=SUCCESS, 交易类型=JSAPI, 付款银行=ICBC_DEBIT, 商品名称=日本BEAUTY BAR美容棒24K美容黄金棒 瘦脸神器震动提拉紧致按摩仪, 子商户号=0, 用户标识=oF9zhvl3Tth6xpwiRVKT42BZYyag, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wxf712db1e1042a294, 商户订单号=10110011563289727366454, 微信订单号=4200000339201907161958040759, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=530}, createTime=Wed Jul 17 15:56:17 CST 2019)]
2019-07-17 15:56:17,258 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log_cach where pay_type = ? and app_id = ? and DATE_ADD(create_time,INTERVAL 4 DAY) < NOW() ORDER BY create_time DESC 
2019-07-17 15:56:17,260 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==> Parameters: wx(String), 101(String)
2019-07-17 15:56:17,265 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : <==      Total: 0
2019-07-17 15:56:17,267 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:17,267 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 101(String)
2019-07-17 15:56:17,271 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 15:56:17,273 DEBUG 7651 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-17 15:56:17,274 DEBUG 7651 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-17 15:56:17,277 DEBUG 7651 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 15:56:17,278  INFO 7651 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: wx, date: 2019-07-16T15:56:14.239 - result paysCount: 0, refundsCount: 0
2019-07-17 15:56:17,310  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-16T15:56:14.239] createCompareBatch successful
2019-07-17 15:56:17,314 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:17,315 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190715(String)
2019-07-17 15:56:17,319 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:56:17,326  WARN 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-15T15:56:14.239] parse exception: 账单[20190715]已解析
2019-07-17 15:56:17,327 ERROR 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$beccd335.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 15:56:17,331 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:17,331 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 15:56:17,334 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:56:17,335  INFO 7651 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 16 15:56:14 CST 2019)
2019-07-17 15:56:17,335  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 16 15:56:14 CST 2019)
2019-07-17 15:56:17,336  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_501_20190716.csv] already exists, return local file
2019-07-17 15:56:17,342 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:17,344 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563265944364364(String), wx(String), 501(String)
2019-07-17 15:56:17,348 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:17,349 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:56:17,353 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563265944364364(String), 4200000358201907161857178396(String), 2421(Integer), 15(Integer), null, {"merchant_income_charge":24.21,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000358201907161857178396","商户订单号":"10110031563265944364364","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":24.21,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"雄鸡标 淡椰浆 270ml","手续费":0.15000,"费率":"0.60%"}(String), 2019-07-17 15:56:17.341(Timestamp)
2019-07-17 15:56:17,357 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:56:17,359 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:17,359 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563245163364362(String), wx(String), 501(String)
2019-07-17 15:56:17,362 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:17,363 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:56:17,365 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), 85(Integer), null, {"merchant_income_charge":142.00,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000353201907162527638733","商户订单号":"10110031563245163364362","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":142.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","手续费":0.85000,"费率":"0.60%"}(String), 2019-07-17 15:56:17.358(Timestamp)
2019-07-17 15:56:17,369 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:56:17,373 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:17,374 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563244439364361(String), wx(String), 501(String)
2019-07-17 15:56:17,377 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:17,378 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:56:17,381 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563244439364361(String), 4200000353201907163645128652(String), 14200(Integer), 85(Integer), null, {"merchant_income_charge":142.00,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000353201907163645128652","商户订单号":"10110031563244439364361","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":142.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","手续费":0.85000,"费率":"0.60%"}(String), 2019-07-17 15:56:17.373(Timestamp)
2019-07-17 15:56:17,385 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:56:17,388 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:17,389 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563268210364365(String), wx(String), 501(String)
2019-07-17 15:56:17,392 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:17,393 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 15:56:17,394 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563268210364365(String), 4200000339201907165618278756(String), 2950(Integer), 18(Integer), null, {"merchant_income_charge":29.50,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000339201907165618278756","商户订单号":"10110031563268210364365","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":29.50,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"雄鸡标 特级初榨橄榄油浸金枪鱼块 185g","手续费":0.18000,"费率":"0.60%"}(String), 2019-07-17 15:56:17.387(Timestamp)
2019-07-17 15:56:17,402 DEBUG 7651 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 15:56:17,406 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:17,407 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563244439364361(String), wx(String), 501(String)
2019-07-17 15:56:17,417 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 15:56:17,419 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:17,420 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563245163364362(String), wx(String), 501(String)
2019-07-17 15:56:17,428 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 15:56:17,431 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:17,432 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563268210364365(String), wx(String), 501(String)
2019-07-17 15:56:17,438 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 15:56:17,440 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:17,441 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 15:56:17,447 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 15:56:17,448 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 15:56:17,449 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190716(String), 4(Integer), 3(Integer), 33771(Integer), 31350(Integer), 0(Integer), {"总交易单数":7,"总交易额":337.71,"总退款金额":313.50,"手续费总金额":0.15000}(String), null
2019-07-17 15:56:17,458 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 15:56:17,461 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:17,465 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 15:56:17,470 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 15:56:17,473 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 15:56:17,475 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190716(String), null, null
2019-07-17 15:56:17,483 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 15:56:17,529  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-16T15:56:14.239] parse successful
2019-07-17 15:56:17,531 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:56:17,532 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190716(String), wx(String)
2019-07-17 15:56:17,547 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-17 15:56:17,548 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:56:17,549 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563265944364364(String), wx(String)
2019-07-17 15:56:17,565 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-17 15:56:17,567 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:56:17,567 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563245163364362(String), wx(String)
2019-07-17 15:56:17,573 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:17,574  INFO 7651 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563245163364362)
2019-07-17 15:56:17,580  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563245163364362: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563245163364362)
2019-07-17 15:56:17,580  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563245163364362 request: {out_trade_no=10110031563245163364362}
2019-07-17 15:56:17,882  INFO 7651 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,E2nGJXAQrw6K4yoUXZCdpr8YziXel5qv,1563350177,297,api.mch.weixin.qq.com,true,6000,8000,0,0,0,C0D796DE163BDEEFC1E5B0386BCE75FCB6C23604F8A210DE2DDDF6B843E6A5F6
2019-07-17 15:56:17,883  INFO 7651 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[mXXnCcsXjfupLSnx]]></nonce_str>
<sign><![CDATA[808AB77C03EF085229FB0D5D57A92AE58B6E970C22845F0F295F2E9C40EAACA8]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>14200</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000353201907162527638733]]></transaction_id>
<out_trade_no><![CDATA[10110031563245163364362]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716104640]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>14200</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 15:56:17,883  INFO 7651 --- [pool-3-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,E2nGJXAQrw6K4yoUXZCdpr8YziXel5qv,1563350177,297,api.mch.weixin.qq.com,true,6000,8000,0,0,0,C0D796DE163BDEEFC1E5B0386BCE75FCB6C23604F8A210DE2DDDF6B843E6A5F6
2019-07-17 15:56:17,883  INFO 7651 --- [pool-3-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 15:56:17,885  INFO 7651 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000353201907162527638733, nonce_str=mXXnCcsXjfupLSnx, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=808AB77C03EF085229FB0D5D57A92AE58B6E970C22845F0F295F2E9C40EAACA8, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563245163364362, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716104640, is_subscribe=N, return_code=SUCCESS}
2019-07-17 15:56:17,885  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563245163364362 response: {transaction_id=4200000353201907162527638733, nonce_str=mXXnCcsXjfupLSnx, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=808AB77C03EF085229FB0D5D57A92AE58B6E970C22845F0F295F2E9C40EAACA8, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563245163364362, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716104640, is_subscribe=N, return_code=SUCCESS}
2019-07-17 15:56:17,893 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:56:17,893 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563244439364361(String), wx(String)
2019-07-17 15:56:17,896 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:17,897  INFO 7651 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563244439364361)
2019-07-17 15:56:17,899  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563244439364361: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563244439364361)
2019-07-17 15:56:17,899  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563244439364361 request: {out_trade_no=10110031563244439364361}
2019-07-17 15:56:18,195  INFO 7651 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,QMcLFcbpbOcEPdOq9gPHdLbaXlSnMFsL,1563350178,292,api.mch.weixin.qq.com,true,6000,8000,0,0,0,49EE7661BE1DBE764B3EA3EE54C8DEFF2FB4E555DE6BEDC1CCBAB7C8C76C5BDC
2019-07-17 15:56:18,196  INFO 7651 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[ik83YRuyjRyYPfSL]]></nonce_str>
<sign><![CDATA[1FEC1C19657DC6954788125213C693CD70361D3D4E1FE61D708F403BE6CE0F48]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>14200</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000353201907163645128652]]></transaction_id>
<out_trade_no><![CDATA[10110031563244439364361]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716103514]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>14200</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 15:56:18,196  INFO 7651 --- [pool-4-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,QMcLFcbpbOcEPdOq9gPHdLbaXlSnMFsL,1563350178,292,api.mch.weixin.qq.com,true,6000,8000,0,0,0,49EE7661BE1DBE764B3EA3EE54C8DEFF2FB4E555DE6BEDC1CCBAB7C8C76C5BDC
2019-07-17 15:56:18,196  INFO 7651 --- [pool-4-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 15:56:18,198  INFO 7651 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000353201907163645128652, nonce_str=ik83YRuyjRyYPfSL, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=1FEC1C19657DC6954788125213C693CD70361D3D4E1FE61D708F403BE6CE0F48, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563244439364361, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716103514, is_subscribe=N, return_code=SUCCESS}
2019-07-17 15:56:18,198  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563244439364361 response: {transaction_id=4200000353201907163645128652, nonce_str=ik83YRuyjRyYPfSL, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=1FEC1C19657DC6954788125213C693CD70361D3D4E1FE61D708F403BE6CE0F48, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563244439364361, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716103514, is_subscribe=N, return_code=SUCCESS}
2019-07-17 15:56:18,208 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 15:56:18,208 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563268210364365(String), wx(String)
2019-07-17 15:56:18,213 DEBUG 7651 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 15:56:18,213  INFO 7651 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563268210364365)
2019-07-17 15:56:18,217  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563268210364365: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563268210364365)
2019-07-17 15:56:18,217  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563268210364365 request: {out_trade_no=10110031563268210364365}
2019-07-17 15:56:18,508  INFO 7651 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,hPQElZBu5njZv6AUUy4QYbPY8tHIrEnA,1563350178,286,api.mch.weixin.qq.com,true,6000,8000,0,0,0,BF0719B609CBF654E2D39B91ED29907DCB215C7042F17DCAE118E53A3EF32BC5
2019-07-17 15:56:18,509  INFO 7651 --- [pool-5-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,hPQElZBu5njZv6AUUy4QYbPY8tHIrEnA,1563350178,286,api.mch.weixin.qq.com,true,6000,8000,0,0,0,BF0719B609CBF654E2D39B91ED29907DCB215C7042F17DCAE118E53A3EF32BC5
2019-07-17 15:56:18,509  INFO 7651 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[gFCyE6Mi2267rojL]]></nonce_str>
<sign><![CDATA[42177A35DC6B77FA5FE62F4184943F7EA8BF32D2B2739880B2C2E9425A49997F]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>2950</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000339201907165618278756]]></transaction_id>
<out_trade_no><![CDATA[10110031563268210364365]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716171029]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>2950</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 15:56:18,509  INFO 7651 --- [pool-5-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 15:56:18,511  INFO 7651 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000339201907165618278756, nonce_str=gFCyE6Mi2267rojL, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=42177A35DC6B77FA5FE62F4184943F7EA8BF32D2B2739880B2C2E9425A49997F, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=2950, out_trade_no=10110031563268210364365, appid=wx1e86ddc5b2485ab2, total_fee=2950, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716171029, is_subscribe=N, return_code=SUCCESS}
2019-07-17 15:56:18,512  INFO 7651 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563268210364365 response: {transaction_id=4200000339201907165618278756, nonce_str=gFCyE6Mi2267rojL, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=42177A35DC6B77FA5FE62F4184943F7EA8BF32D2B2739880B2C2E9425A49997F, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=2950, out_trade_no=10110031563268210364365, appid=wx1e86ddc5b2485ab2, total_fee=2950, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716171029, is_subscribe=N, return_code=SUCCESS}
2019-07-17 15:56:18,518 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:18,519 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 501(String)
2019-07-17 15:56:18,525 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 15:56:18,526 DEBUG 7651 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 15:56:18,527 DEBUG 7651 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563244439364361(String), wx(String)
2019-07-17 15:56:18,532 DEBUG 7651 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 15:56:18,533 DEBUG 7651 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 15:56:18,533 DEBUG 7651 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563245163364362(String), wx(String)
2019-07-17 15:56:18,538 DEBUG 7651 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 15:56:18,539 DEBUG 7651 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 15:56:18,539 DEBUG 7651 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563268210364365(String), wx(String)
2019-07-17 15:56:18,543 DEBUG 7651 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 15:56:18,548 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 15:56:18,548 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190716(String)
2019-07-17 15:56:18,552 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 15:56:18,553 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:18,553 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 15:56:18,556 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 15:56:18,557 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 15:56:18,558 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 15:56:18.557(Timestamp)
2019-07-17 15:56:18,561 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 15:56:18,563 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 15:56:18,563 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 15:56:18,574 DEBUG 7651 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 15:56:18,575 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 15:56:18,576 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190716(String), wx(String)
2019-07-17 15:56:18,584 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-17 15:56:18,585 DEBUG 7651 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 15:56:18,587 DEBUG 7651 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-17 15:56:18,590 DEBUG 7651 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 15:56:18,593 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 15:56:18,598 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2087(Integer), 501(String), wx(String), 20190716(String), 10110031563265944364364(String), 4200000358201907161857178396(String), 2421(Integer), 15(Integer), 2019-07-18 04:55:28.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":24.21,"手续费":0.15,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 淡椰浆 270ml","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563265944364364","微信订单号":"4200000358201907161857178396","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":24.21}(String), 2019-07-17 15:56:17.0(Timestamp), 2088(Integer), 501(String), wx(String), 20190716(String), 10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), 85(Integer), 2019-07-18 04:55:28.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":142,"手续费":0.85,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563245163364362","微信订单号":"4200000353201907162527638733","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":142}(String), 2019-07-17 15:56:17.0(Timestamp), 2089(Integer), 501(String), wx(String), 20190716(String), 10110031563244439364361(String), 4200000353201907163645128652(String), 14200(Integer), 85(Integer), 2019-07-18 04:55:28.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":142,"手续费":0.85,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563244439364361","微信订单号":"4200000353201907163645128652","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":142}(String), 2019-07-17 15:56:17.0(Timestamp), 2090(Integer), 501(String), wx(String), 20190716(String), 10110031563268210364365(String), 4200000339201907165618278756(String), 2950(Integer), 18(Integer), 2019-07-18 04:55:28.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":29.5,"手续费":0.18,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 特级初榨橄榄油浸金枪鱼块 185g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563268210364365","微信订单号":"4200000339201907165618278756","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":29.5}(String), 2019-07-17 15:56:17.0(Timestamp)
2019-07-17 15:56:18,603 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.saveBatch                  : <==    Updates: 4
2019-07-17 15:56:18,603  INFO 7651 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : comparePayList-billPayLogCachService.saveBatch:  appId=501; payType=wx;leftBillPayLogs=[BillPayLog(id=2087, appId=501, payType=wx, billDate=20190716, orderNo=10110031563265944364364, tradeNo=4200000358201907161857178396, payAmount=2421, serviceCharge=15, tradeTime=Thu Jul 18 04:55:28 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=24.21, 手续费=0.15, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=雄鸡标 淡椰浆 270ml, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563265944364364, 微信订单号=4200000358201907161857178396, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=24.21}, createTime=Wed Jul 17 15:56:17 CST 2019), BillPayLog(id=2088, appId=501, payType=wx, billDate=20190716, orderNo=10110031563245163364362, tradeNo=4200000353201907162527638733, payAmount=14200, serviceCharge=85, tradeTime=Thu Jul 18 04:55:28 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=142, 手续费=0.85, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=丹麦蓝罐 Kjeldsens 曲奇 908g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563245163364362, 微信订单号=4200000353201907162527638733, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=142}, createTime=Wed Jul 17 15:56:17 CST 2019), BillPayLog(id=2089, appId=501, payType=wx, billDate=20190716, orderNo=10110031563244439364361, tradeNo=4200000353201907163645128652, payAmount=14200, serviceCharge=85, tradeTime=Thu Jul 18 04:55:28 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=142, 手续费=0.85, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=丹麦蓝罐 Kjeldsens 曲奇 908g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563244439364361, 微信订单号=4200000353201907163645128652, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=142}, createTime=Wed Jul 17 15:56:17 CST 2019), BillPayLog(id=2090, appId=501, payType=wx, billDate=20190716, orderNo=10110031563268210364365, tradeNo=4200000339201907165618278756, payAmount=2950, serviceCharge=18, tradeTime=Thu Jul 18 04:55:28 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=29.5, 手续费=0.18, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=雄鸡标 特级初榨橄榄油浸金枪鱼块 185g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563268210364365, 微信订单号=4200000339201907165618278756, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=29.5}, createTime=Wed Jul 17 15:56:17 CST 2019)]
2019-07-17 15:56:18,604 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log_cach where pay_type = ? and app_id = ? and DATE_ADD(create_time,INTERVAL 4 DAY) < NOW() ORDER BY create_time DESC 
2019-07-17 15:56:18,605 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==> Parameters: wx(String), 501(String)
2019-07-17 15:56:18,610 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : <==      Total: 0
2019-07-17 15:56:18,611 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 15:56:18,611 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 501(String)
2019-07-17 15:56:18,617 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 15:56:18,618 DEBUG 7651 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-17 15:56:18,620 DEBUG 7651 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-17 15:56:18,623 DEBUG 7651 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 15:56:18,627 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findListByPayTypeAndAppId  : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log_cach where pay_type = ? and app_id = ? 
2019-07-17 15:56:18,630 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findListByPayTypeAndAppId  : ==> Parameters: wx(String), 501(String)
2019-07-17 15:56:18,634 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.findListByPayTypeAndAppId  : <==      Total: 0
2019-07-17 15:56:18,636 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.deleteBatch                : ==>  Preparing: delete from pay_center3_bill_refund_log_cach where id in 
2019-07-17 15:56:18,637 DEBUG 7651 --- [           main] c.i.p.m.t.d.B.deleteBatch                : ==> Parameters: 
2019-07-17 15:56:18,803  WARN 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-16T15:56:14.239] compare exception: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 2
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: delete from pay_center3_bill_refund_log_cach   where id in
### Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 2
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 2
2019-07-17 15:56:18,804  INFO 7651 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-17 15:56:19,301  INFO 7651 --- [       Thread-7] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 15:56:19,303  INFO 7651 --- [       Thread-7] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 15:56:19,361  INFO 7651 --- [       Thread-7] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-17 16:10:53,294  INFO 7669 --- [           main] c.i.p.m.t.service.BillRefundLogCachTest  : Starting BillRefundLogCachTest on lishihaideMac-mini.local with PID 7669 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 16:10:53,297  INFO 7669 --- [           main] c.i.p.m.t.service.BillRefundLogCachTest  : The following profiles are active: szdev
2019-07-17 16:10:56,435  INFO 7669 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$ffbd4f92] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:10:56,856  INFO 7669 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$21ced634] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:10:56,908  INFO 7669 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$2c0b3e0f] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:10:57,046  INFO 7669 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 16:10:57,399  INFO 7669 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 16:10:57,421  INFO 7669 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 16:10:57,442  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 16:10:57,446  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:10:57,447  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:10:57,447  INFO 7669 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 16:10:57,448  INFO 7669 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 16:10:57,449  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 16:10:57,449  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:10:57,450  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:10:57,451  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 16:10:57,451  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:10:57,451  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:10:57,452  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 16:10:57,453  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:10:57,453  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:10:57,454  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 16:10:57,454  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:10:57,455  INFO 7669 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:10:57,717  INFO 7669 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 16:10:59,063  INFO 7669 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 16:10:59,794  INFO 7669 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$6c6090f
2019-07-17 16:10:59,810  INFO 7669 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$222bd6ca
2019-07-17 16:10:59,999  INFO 7669 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 16:11:00,000  INFO 7669 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 16:11:02,407  INFO 7669 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 16:11:03,625  INFO 7669 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 16:11:04,499  INFO 7669 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 16:11:05,740  INFO 7669 --- [           main] c.i.p.m.t.service.BillRefundLogCachTest  : Started BillRefundLogCachTest in 13.366 seconds (JVM running for 14.555)
2019-07-17 16:11:06,438 DEBUG 7669 --- [           main] c.i.p.m.t.d.B.deleteBatch                : ==>  Preparing: delete from pay_center3_bill_refund_log_cach where id in ( ? , ? ) 
2019-07-17 16:11:06,505 DEBUG 7669 --- [           main] c.i.p.m.t.d.B.deleteBatch                : ==> Parameters: 300(Integer), null
2019-07-17 16:11:06,520 DEBUG 7669 --- [           main] c.i.p.m.t.d.B.deleteBatch                : <==    Updates: 0
2019-07-17 16:11:06,536 DEBUG 7669 --- [           main] c.i.p.m.t.d.B.findInOrders               : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where order_no in ( ? , ? ) and pay_type = ? 
2019-07-17 16:11:06,538 DEBUG 7669 --- [           main] c.i.p.m.t.d.B.findInOrders               : ==> Parameters: 10110031563245163364362(String), 10110031563244439364361(String), wx(String)
2019-07-17 16:11:06,653 DEBUG 7669 --- [           main] c.i.p.m.t.d.B.findInOrders               : <==      Total: 2
2019-07-17 16:11:06,662 DEBUG 7669 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: INSERT INTO pay_center3_bill_refund_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 16:11:06,706  INFO 7669 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 16:11:06,709  INFO 7669 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 16:11:06,732  INFO 7669 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-17 16:12:51,516  INFO 7671 --- [           main] c.i.p.m.t.service.BillRefundLogCachTest  : Starting BillRefundLogCachTest on lishihaideMac-mini.local with PID 7671 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 16:12:51,521  INFO 7671 --- [           main] c.i.p.m.t.service.BillRefundLogCachTest  : The following profiles are active: szdev
2019-07-17 16:12:54,138  INFO 7671 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$6e91e151] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:12:54,362  INFO 7671 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$90a367f3] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:12:54,399  INFO 7671 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$9adfcfce] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:12:54,494  INFO 7671 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 16:12:54,755  INFO 7671 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 16:12:54,777  INFO 7671 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 16:12:54,796  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 16:12:54,799  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:12:54,799  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:12:54,800  INFO 7671 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 16:12:54,801  INFO 7671 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 16:12:54,801  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 16:12:54,802  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:12:54,802  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:12:54,803  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 16:12:54,804  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:12:54,804  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:12:54,804  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 16:12:54,805  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:12:54,805  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:12:54,806  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 16:12:54,807  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:12:54,807  INFO 7671 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:12:55,058  INFO 7671 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 16:12:56,154  INFO 7671 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 16:12:56,920  INFO 7671 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$1e9855f9
2019-07-17 16:12:56,945  INFO 7671 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$39fe23b4
2019-07-17 16:12:57,172  INFO 7671 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 16:12:57,174  INFO 7671 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 16:12:58,802  INFO 7671 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 16:13:00,159  INFO 7671 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 16:13:00,881  INFO 7671 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 16:13:01,791  INFO 7671 --- [           main] c.i.p.m.t.service.BillRefundLogCachTest  : Started BillRefundLogCachTest in 11.143 seconds (JVM running for 12.337)
2019-07-17 16:13:02,386 DEBUG 7671 --- [           main] c.i.p.m.t.d.B.deleteBatch                : ==>  Preparing: delete from pay_center3_bill_refund_log_cach where id in ( ? , ? ) 
2019-07-17 16:13:02,433 DEBUG 7671 --- [           main] c.i.p.m.t.d.B.deleteBatch                : ==> Parameters: 299(Integer), 300(Integer)
2019-07-17 16:13:02,445 DEBUG 7671 --- [           main] c.i.p.m.t.d.B.deleteBatch                : <==    Updates: 0
2019-07-17 16:13:02,459 DEBUG 7671 --- [           main] c.i.p.m.t.d.B.findInOrders               : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where order_no in ( ? , ? ) and pay_type = ? 
2019-07-17 16:13:02,461 DEBUG 7671 --- [           main] c.i.p.m.t.d.B.findInOrders               : ==> Parameters: 10110031563245163364362(String), 10110031563244439364361(String), wx(String)
2019-07-17 16:13:02,589 DEBUG 7671 --- [           main] c.i.p.m.t.d.B.findInOrders               : <==      Total: 2
2019-07-17 16:13:02,594 DEBUG 7671 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: INSERT INTO pay_center3_bill_refund_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 16:13:02,629  INFO 7671 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 16:13:02,631  INFO 7671 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 16:13:02,650  INFO 7671 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-17 16:15:34,576  INFO 7674 --- [           main] c.i.p.m.t.service.BillRefundLogCachTest  : Starting BillRefundLogCachTest on lishihaideMac-mini.local with PID 7674 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 16:15:34,578  INFO 7674 --- [           main] c.i.p.m.t.service.BillRefundLogCachTest  : The following profiles are active: szdev
2019-07-17 16:15:37,248  INFO 7674 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$a9b4e90d] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:15:37,611  INFO 7674 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$cbc66faf] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:15:37,654  INFO 7674 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$d602d78a] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:15:37,777  INFO 7674 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 16:15:38,019  INFO 7674 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 16:15:38,041  INFO 7674 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 16:15:38,060  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 16:15:38,063  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:15:38,064  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:15:38,064  INFO 7674 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 16:15:38,065  INFO 7674 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 16:15:38,066  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 16:15:38,066  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:15:38,067  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:15:38,067  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 16:15:38,068  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:15:38,068  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:15:38,069  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 16:15:38,069  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:15:38,069  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:15:38,070  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 16:15:38,071  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:15:38,071  INFO 7674 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:15:38,357  INFO 7674 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 16:15:39,481  INFO 7674 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 16:15:40,150  INFO 7674 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$d671f23
2019-07-17 16:15:40,163  INFO 7674 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$28ccecde
2019-07-17 16:15:40,350  INFO 7674 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 16:15:40,350  INFO 7674 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 16:15:42,183  INFO 7674 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 16:15:43,419  INFO 7674 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 16:15:44,265  INFO 7674 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 16:15:45,268  INFO 7674 --- [           main] c.i.p.m.t.service.BillRefundLogCachTest  : Started BillRefundLogCachTest in 11.817 seconds (JVM running for 13.022)
2019-07-17 16:15:45,913 DEBUG 7674 --- [           main] c.i.p.m.t.d.B.deleteBatch                : ==>  Preparing: delete from pay_center3_bill_refund_log_cach where id in ( ? , ? ) 
2019-07-17 16:15:45,968 DEBUG 7674 --- [           main] c.i.p.m.t.d.B.deleteBatch                : ==> Parameters: 299(Integer), 300(Integer)
2019-07-17 16:15:45,981 DEBUG 7674 --- [           main] c.i.p.m.t.d.B.deleteBatch                : <==    Updates: 0
2019-07-17 16:15:45,995 DEBUG 7674 --- [           main] c.i.p.m.t.d.B.findInOrders               : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where order_no in ( ? , ? ) and pay_type = ? 
2019-07-17 16:15:45,997 DEBUG 7674 --- [           main] c.i.p.m.t.d.B.findInOrders               : ==> Parameters: 10110031563245163364362(String), 10110031563244439364361(String), wx(String)
2019-07-17 16:15:46,085 DEBUG 7674 --- [           main] c.i.p.m.t.d.B.findInOrders               : <==      Total: 2
2019-07-17 16:15:46,089 DEBUG 7674 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: INSERT INTO pay_center3_bill_refund_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 16:15:46,118 DEBUG 7674 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 299(Integer), 501(String), wx(String), 20190716(String), 10110031563244439364361(String), refund10110031563244439364361(String), 4200000353201907163645128652(String), 14200(Integer), -85(Integer), 2019-07-17 23:42:26.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":0,"手续费":-0.85,"交易状态":"REFUND","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"SUCCESS","退款类型":"ORIGINAL","退款金额":142,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563244439364361","微信订单号":"4200000353201907163645128652","商户退款单号":"refund10110031563244439364361","微信退款单号":"50000400972019071610644839459","merchant_income_charge":0}(String), 2019-07-17 10:40:05.0(Timestamp), 300(Integer), 501(String), wx(String), 20190716(String), 10110031563245163364362(String), refund10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), -85(Integer), 2019-07-17 23:42:26.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":0,"手续费":-0.85,"交易状态":"REFUND","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"SUCCESS","退款类型":"ORIGINAL","退款金额":142,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563245163364362","微信订单号":"4200000353201907162527638733","商户退款单号":"refund10110031563245163364362","微信退款单号":"50000500972019071610665371485","merchant_income_charge":0}(String), 2019-07-17 10:40:05.0(Timestamp)
2019-07-17 16:15:46,146 DEBUG 7674 --- [           main] c.i.p.m.t.d.B.saveBatch                  : <==    Updates: 2
2019-07-17 16:15:46,158  INFO 7674 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 16:15:46,161  INFO 7674 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 16:15:46,178  INFO 7674 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-17 16:16:16,150  INFO 7675 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 7675 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 16:16:16,151  INFO 7675 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-17 16:16:18,867  INFO 7675 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$914928eb] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:16:19,228  INFO 7675 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$b35aaf8d] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:16:19,268  INFO 7675 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$bd971768] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:16:19,382  INFO 7675 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 16:16:19,632  INFO 7675 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 16:16:19,659  INFO 7675 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 16:16:19,694  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 16:16:19,709  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:16:19,718  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:16:19,724  INFO 7675 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 16:16:19,728  INFO 7675 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 16:16:19,730  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 16:16:19,731  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:16:19,732  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:16:19,749  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 16:16:19,753  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:16:19,753  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:16:19,754  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 16:16:19,755  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:16:19,759  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:16:19,760  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 16:16:19,762  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:16:19,764  INFO 7675 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:16:20,053  INFO 7675 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 16:16:21,144  INFO 7675 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 16:16:21,852  INFO 7675 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$92143331
2019-07-17 16:16:21,866  INFO 7675 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$ad7a00ec
2019-07-17 16:16:22,045  INFO 7675 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 16:16:22,045  INFO 7675 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 16:16:23,706  INFO 7675 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 16:16:24,812  INFO 7675 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 16:16:25,540  INFO 7675 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 16:16:26,600  INFO 7675 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 11.332 seconds (JVM running for 12.595)
2019-07-17 16:16:27,134  INFO 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-17 16:16:27,319 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:27,381 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190715(String)
2019-07-17 16:16:27,440 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:16:27,454  WARN 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-15T16:16:27.137] parse exception: 账单[20190715]已解析
2019-07-17 16:16:27,482 ERROR 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$6567364.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:16:27,489 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:27,490 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190715(String)
2019-07-17 16:16:27,494 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:16:27,503  WARN 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-15T16:16:27.137] parse exception: 账单[20190715]已解析
2019-07-17 16:16:27,504 ERROR 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$6567364.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:16:27,507 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:27,508 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 16:16:27,512 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:16:27,524  INFO 7675 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 16 16:16:27 CST 2019)
2019-07-17 16:16:27,525  INFO 7675 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 16 16:16:27 CST 2019)
2019-07-17 16:16:27,526  INFO 7675 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 16:16:27,596  INFO 7675 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-16","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-17 16:16:28,069 ERROR 7675 --- [           main] sdk.biz.err                              : ErrorScene^_^40004^_^isp.bill_not_exist^_^null^_^Mac OS X^_^2019-07-17 16:16:28^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=ePfzNGr84AwXnZ3aFigMzSUkyqa0xzQOaWF6tLNVgIryzqYmuiUUu/HsPzQgEYmJPKpKsKY/tjuK81A2b/4lCVYP5yylck0A1DOGdZ/VYOHp40D2WOWnJCjepGgLZGct+42m7Lb0I4lkAaDrqgpUHDINe+i59JYvwyzBNEtVv0sTfReK+cLzB06VzJpgxvTk+qrWZuOjWeJ6riImGSwl4mZDlu4S0zGvWXU4/TEdAnzU9Ef9e8zAts8IE+H0Yg4ZkuqcRYlfZ7/Z5K6HERwLG1q/0CqcInugbcUR6HJzirwxyq8Gka3NodeUOymAQscO5m7VuQvZ7mn5Y4cHmhtEJA==&version=1.0&app_id=2018042660058300&sign_type=RSA2&timestamp=2019-07-17 16:16:27^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-16","bill_type":"trade"}^_^Body:{"alipay_data_dataservice_bill_downloadurl_query_response":{"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在"},"sign":"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw=="}^_^47ms,407ms,18ms
2019-07-17 16:16:28,072  INFO 7675 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 response: {"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"isp.bill_not_exist\",\"sub_msg\":\"账单不存在\"},\"sign\":\"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw==\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-16\",\"bill_type\":\"trade\"}"},"success":false,"error_code":"40004"}
2019-07-17 16:16:28,073  WARN 7675 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: Business Failed # isp.bill_not_exist # 账单不存在
2019-07-17 16:16:28,076 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:16:28,078 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190716(String), null, Business Failed # isp.bill_not_exist # 账单不存在(String)
2019-07-17 16:16:28,083 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:16:28,117  INFO 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-16T16:16:27.137] parse successful
2019-07-17 16:16:28,120 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:16:28,121 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190716(String), alipay(String)
2019-07-17 16:16:28,127 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:16:28,128 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:28,131 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 503(String)
2019-07-17 16:16:28,135 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:16:28,140 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:16:28,141 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190716(String)
2019-07-17 16:16:28,147 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:16:28,149 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:28,149 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 16:16:28,156 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:16:28,157 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:16:28,161 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190716(String), alipay(String), 20190716(String), 2019-07-17 16:16:28.157(Timestamp)
2019-07-17 16:16:28,167 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:16:28,170 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:28,171 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 16:16:28,174 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:16:28,175  INFO 7675 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-16T16:16:27.137 - result is Null
2019-07-17 16:16:28,210  INFO 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-16T16:16:27.137] createCompareBatch successful
2019-07-17 16:16:28,221 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:28,223 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 16:16:28,250 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:16:28,252  INFO 7675 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 16 16:16:27 CST 2019)
2019-07-17 16:16:28,255  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 16 16:16:27 CST 2019)
2019-07-17 16:16:28,266  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 request: {nonce_str=l0K8J8SHgrsxfhb3wP9lT9HBC60HEKCN, bill_date=20190716, appid=wxd86049a121654669, sign=04833ED0907721F97A11925391F35922A65A070CB8201D90ADF9307F5F5BB82E, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-17 16:16:28,876  INFO 7675 --- [           main] wxpay java sdk                           : report worker num: 6
2019-07-17 16:16:28,879  INFO 7675 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,l0K8J8SHgrsxfhb3wP9lT9HBC60HEKCN,1563351388,538,api.mch.weixin.qq.com,true,6000,8000,0,0,0,528D7C03E92F264D2D1DD1ED2A92150E4917E7975C58192BB607EAB34F63E9B6
2019-07-17 16:16:28,880  INFO 7675 --- [pool-2-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,l0K8J8SHgrsxfhb3wP9lT9HBC60HEKCN,1563351388,538,api.mch.weixin.qq.com,true,6000,8000,0,0,0,528D7C03E92F264D2D1DD1ED2A92150E4917E7975C58192BB607EAB34F63E9B6
2019-07-17 16:16:28,880  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-17 16:16:28,880  INFO 7675 --- [pool-2-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 16:16:28,880  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 response content size: 149
2019-07-17 16:16:28,880  INFO 7675 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-17 16:16:28,883  INFO 7675 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-17 16:16:28,883  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-17 16:16:28,884  WARN 7675 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-17 16:16:28,884 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:16:28,885 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190716(String), null, No Bill Exist(String)
2019-07-17 16:16:28,890 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:16:28,916  INFO 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-16T16:16:27.137] parse successful
2019-07-17 16:16:28,917 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:16:28,917 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190716(String), wx(String)
2019-07-17 16:16:28,921 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:16:28,922 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:28,922 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 503(String)
2019-07-17 16:16:28,926 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:16:28,929 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:16:28,930 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190716(String)
2019-07-17 16:16:28,935 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:16:28,937 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:28,939 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 16:16:28,944 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:16:28,945 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:16:28,946 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 16:16:28.945(Timestamp)
2019-07-17 16:16:28,950 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:16:28,951 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:28,951 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 16:16:28,954 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:16:28,955  INFO 7675 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-16T16:16:27.137 - result is Null
2019-07-17 16:16:28,992  INFO 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-16T16:16:27.137] createCompareBatch successful
2019-07-17 16:16:28,995 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:28,996 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190715(String)
2019-07-17 16:16:28,999 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:16:29,005  WARN 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-15T16:16:27.137] parse exception: 账单[20190715]已解析
2019-07-17 16:16:29,006 ERROR 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$6567364.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:16:29,009 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,010 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190715(String)
2019-07-17 16:16:29,015 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:16:29,023  WARN 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-15T16:16:27.137] parse exception: 账单[20190715]已解析
2019-07-17 16:16:29,024 ERROR 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$6567364.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:16:29,027 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,028 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:16:29,032 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:16:29,033  INFO 7675 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 16 16:16:27 CST 2019)
2019-07-17 16:16:29,033  INFO 7675 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 16 16:16:27 CST 2019)
2019-07-17 16:16:29,137 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,138 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:16:29,142 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:16:29,143 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 16:16:29,155 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190716(String), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":7,"退款订单总笔数":3,"订单金额（元）":578.01,"商家实收（元）":578.01,"服务费（元）":-9.32,"实收净额（元）":568.69}(String), null
2019-07-17 16:16:29,162 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 16:16:29,166 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,167 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:16:29,169 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:16:29,170 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:16:29,171 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190716(String), null, null
2019-07-17 16:16:29,176 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:16:29,200  INFO 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-16T16:16:27.137] parse successful
2019-07-17 16:16:29,201 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:16:29,202 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), alipay(String)
2019-07-17 16:16:29,205 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:16:29,206 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,206 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 101(String)
2019-07-17 16:16:29,209 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:16:29,213 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:16:29,215 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190716(String)
2019-07-17 16:16:29,218 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:16:29,219 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,219 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:16:29,223 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:16:29,223 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:16:29,224 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190716(String), alipay(String), 20190716(String), 2019-07-17 16:16:29.223(Timestamp)
2019-07-17 16:16:29,228 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:16:29,230 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,230 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:16:29,250 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 16:16:29,253 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:16:29,254 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), alipay(String)
2019-07-17 16:16:29,257 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:16:29,322 DEBUG 7675 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 16:16:29,324 DEBUG 7675 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-17 16:16:29,330 DEBUG 7675 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:16:29,333 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,334 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 101(String)
2019-07-17 16:16:29,337 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:16:29,339 DEBUG 7675 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-17 16:16:29,341 DEBUG 7675 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-17 16:16:29,344 DEBUG 7675 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:16:29,345  INFO 7675 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-16T16:16:27.137 - result paysCount: 0, refundsCount: 0
2019-07-17 16:16:29,402  INFO 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-16T16:16:27.137] createCompareBatch successful
2019-07-17 16:16:29,408 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,409 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:16:29,412 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:16:29,413  INFO 7675 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 16 16:16:27 CST 2019)
2019-07-17 16:16:29,414  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 16 16:16:27 CST 2019)
2019-07-17 16:16:29,414  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_101_20190716.csv] already exists, return local file
2019-07-17 16:16:29,424 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,425 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563214543366441(String), wx(String), 101(String)
2019-07-17 16:16:29,428 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:29,429 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:16:29,432 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563214543366441(String), 4200000344201907162933352469(String), 9900(Integer), 59(Integer), null, {"merchant_income_charge":99.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907162933352469","商户订单号":"10110011563214543366441","用户标识":"oF9zhvpC02_XpCRvUXuT3D-2heT0","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":99.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618特惠】VENUS MARBLE9色复古油画眼影盘2019新款","手续费":0.59000,"费率":"0.60%"}(String), 2019-07-17 16:16:29.424(Timestamp)
2019-07-17 16:16:29,436 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:16:29,437 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,438 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563261630366450(String), wx(String), 101(String)
2019-07-17 16:16:29,441 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:29,441 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:16:29,443 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563261630366450(String), 4200000344201907160777817734(String), 24900(Integer), 149(Integer), null, {"merchant_income_charge":249.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907160777817734","商户订单号":"10110011563261630366450","用户标识":"oF9zhvlIDys9Hq4IlTyvLIB4A4cQ","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"BOC_DEBIT","货币种类":"CNY","总金额":249.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"CHARLES＆KEITH 链条编织时尚百搭单肩斜挎包网红小包","手续费":1.49000,"费率":"0.60%"}(String), 2019-07-17 16:16:29.437(Timestamp)
2019-07-17 16:16:29,447 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:16:29,451 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,451 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563289727366454(String), wx(String), 101(String)
2019-07-17 16:16:29,454 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:29,455 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:16:29,457 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563289727366454(String), 4200000339201907161958040759(String), 53000(Integer), 318(Integer), null, {"merchant_income_charge":530.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000339201907161958040759","商户订单号":"10110011563289727366454","用户标识":"oF9zhvl3Tth6xpwiRVKT42BZYyag","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"ICBC_DEBIT","货币种类":"CNY","总金额":530.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"日本BEAUTY BAR美容棒24K美容黄金棒 瘦脸神器震动提拉紧致按摩仪","手续费":3.18000,"费率":"0.60%"}(String), 2019-07-17 16:16:29.45(Timestamp)
2019-07-17 16:16:29,461 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:16:29,462 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,464 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:16:29,467 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:16:29,468 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 16:16:29,472 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190716(String), 3(Integer), 0(Integer), 87800(Integer), 0(Integer), 5(Integer), {"总交易单数":3,"总交易额":878.00,"总退款金额":0.00,"手续费总金额":5.26000}(String), null
2019-07-17 16:16:29,476 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 16:16:29,478 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,479 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:16:29,481 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:16:29,482 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:16:29,483 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190716(String), null, null
2019-07-17 16:16:29,488 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:16:29,533  INFO 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-16T16:16:27.137] parse successful
2019-07-17 16:16:29,534 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:16:29,534 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), wx(String)
2019-07-17 16:16:29,541 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 16:16:29,542 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:16:29,543 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563214543366441(String), wx(String)
2019-07-17 16:16:29,546 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:29,547  INFO 7675 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563214543366441)
2019-07-17 16:16:29,547  INFO 7675 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563214543366441,payType=wx,appId=101
2019-07-17 16:16:29,547  INFO 7675 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563214543366441
2019-07-17 16:16:29,548 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:16:29,549 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563214543366441(String), wx(String)
2019-07-17 16:16:29,552 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:16:29,555 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:16:29,556 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563214543366441(String), wx(String)
2019-07-17 16:16:29,559 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:16:29,563  INFO 7675 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563214543366441
2019-07-17 16:16:29,563 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,564 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563214543366441(String), wx(String), 101(String)
2019-07-17 16:16:29,567 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:29,568 ERROR 7675 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563214543366441] exception: not find PayRequestLog record by [orderNo:10110011563214543366441,payType:wx] 
2019-07-17 16:16:29,569 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:16:29,569 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563261630366450(String), wx(String)
2019-07-17 16:16:29,572 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:29,573  INFO 7675 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563261630366450)
2019-07-17 16:16:29,573  INFO 7675 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563261630366450,payType=wx,appId=101
2019-07-17 16:16:29,573  INFO 7675 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563261630366450
2019-07-17 16:16:29,574 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:16:29,575 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563261630366450(String), wx(String)
2019-07-17 16:16:29,578 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:16:29,579 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:16:29,579 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563261630366450(String), wx(String)
2019-07-17 16:16:29,583 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:16:29,584  INFO 7675 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563261630366450
2019-07-17 16:16:29,585 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,585 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563261630366450(String), wx(String), 101(String)
2019-07-17 16:16:29,588 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:29,589 ERROR 7675 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563261630366450] exception: not find PayRequestLog record by [orderNo:10110011563261630366450,payType:wx] 
2019-07-17 16:16:29,590 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:16:29,590 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563289727366454(String), wx(String)
2019-07-17 16:16:29,594 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:29,595  INFO 7675 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563289727366454)
2019-07-17 16:16:29,595  INFO 7675 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563289727366454,payType=wx,appId=101
2019-07-17 16:16:29,595  INFO 7675 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563289727366454
2019-07-17 16:16:29,597 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:16:29,599 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563289727366454(String), wx(String)
2019-07-17 16:16:29,603 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:16:29,604 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:16:29,605 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563289727366454(String), wx(String)
2019-07-17 16:16:29,611 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:16:29,612  INFO 7675 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563289727366454
2019-07-17 16:16:29,613 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,613 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563289727366454(String), wx(String), 101(String)
2019-07-17 16:16:29,617 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:29,618 ERROR 7675 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563289727366454] exception: not find PayRequestLog record by [orderNo:10110011563289727366454,payType:wx] 
2019-07-17 16:16:29,619 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,620 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 101(String)
2019-07-17 16:16:29,623 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:16:29,627 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:16:29,628 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190716(String)
2019-07-17 16:16:29,632 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:16:29,634 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,635 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:16:29,638 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:16:29,638 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:16:29,639 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 16:16:29.638(Timestamp)
2019-07-17 16:16:29,644 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:16:29,647 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,648 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:16:29,652 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 16:16:29,654 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:16:29,654 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), wx(String)
2019-07-17 16:16:29,660 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 16:16:29,662 DEBUG 7675 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 16:16:29,663 DEBUG 7675 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-17 16:16:29,666 DEBUG 7675 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:16:29,679 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 16:16:29,689 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2091(Integer), 101(String), wx(String), 20190716(String), 10110011563214543366441(String), 4200000344201907162933352469(String), 9900(Integer), 59(Integer), 2019-07-18 05:15:40.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":99,"手续费":0.59,"交易状态":"SUCCESS","交易类型":"MWEB","付款银行":"CFT","商品名称":"【618特惠】VENUS MARBLE9色复古油画眼影盘2019新款","子商户号":"0","用户标识":"oF9zhvpC02_XpCRvUXuT3D-2heT0","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563214543366441","微信订单号":"4200000344201907162933352469","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":99}(String), 2019-07-17 16:16:29.0(Timestamp), 2092(Integer), 101(String), wx(String), 20190716(String), 10110011563261630366450(String), 4200000344201907160777817734(String), 24900(Integer), 149(Integer), 2019-07-18 05:15:40.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":249,"手续费":1.49,"交易状态":"SUCCESS","交易类型":"MWEB","付款银行":"BOC_DEBIT","商品名称":"CHARLES＆KEITH 链条编织时尚百搭单肩斜挎包网红小包","子商户号":"0","用户标识":"oF9zhvlIDys9Hq4IlTyvLIB4A4cQ","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563261630366450","微信订单号":"4200000344201907160777817734","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":249}(String), 2019-07-17 16:16:29.0(Timestamp), 2093(Integer), 101(String), wx(String), 20190716(String), 10110011563289727366454(String), 4200000339201907161958040759(String), 53000(Integer), 318(Integer), 2019-07-18 05:15:40.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":530,"手续费":3.18,"交易状态":"SUCCESS","交易类型":"JSAPI","付款银行":"ICBC_DEBIT","商品名称":"日本BEAUTY BAR美容棒24K美容黄金棒 瘦脸神器震动提拉紧致按摩仪","子商户号":"0","用户标识":"oF9zhvl3Tth6xpwiRVKT42BZYyag","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563289727366454","微信订单号":"4200000339201907161958040759","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":530}(String), 2019-07-17 16:16:29.0(Timestamp)
2019-07-17 16:16:29,859  WARN 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-16T16:16:27.137] compare exception: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '10110011563214543366441-101-wx' for key 'idx_oNo_aId_pType'
### The error may involve com.intbee.payment.modules.trade.dao.BillPayLogCachMapper.saveBatch-Inline
### The error occurred while setting parameters
### SQL: insert into pay_center3_bill_pay_log_cach      (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`)      values                (        ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?         )           ,         (        ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?         )           ,         (        ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?         )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '10110011563214543366441-101-wx' for key 'idx_oNo_aId_pType'
; Duplicate entry '10110011563214543366441-101-wx' for key 'idx_oNo_aId_pType'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '10110011563214543366441-101-wx' for key 'idx_oNo_aId_pType'
2019-07-17 16:16:29,867 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,868 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190715(String)
2019-07-17 16:16:29,873 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:16:29,882  WARN 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-15T16:16:27.137] parse exception: 账单[20190715]已解析
2019-07-17 16:16:29,883 ERROR 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$6567364.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:16:29,886 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,886 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:16:29,889 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:16:29,889  INFO 7675 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 16 16:16:27 CST 2019)
2019-07-17 16:16:29,890  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 16 16:16:27 CST 2019)
2019-07-17 16:16:29,890  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_501_20190716.csv] already exists, return local file
2019-07-17 16:16:29,893 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,894 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563265944364364(String), wx(String), 501(String)
2019-07-17 16:16:29,898 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:29,898 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:16:29,901 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563265944364364(String), 4200000358201907161857178396(String), 2421(Integer), 15(Integer), null, {"merchant_income_charge":24.21,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000358201907161857178396","商户订单号":"10110031563265944364364","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":24.21,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"雄鸡标 淡椰浆 270ml","手续费":0.15000,"费率":"0.60%"}(String), 2019-07-17 16:16:29.893(Timestamp)
2019-07-17 16:16:29,905 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:16:29,907 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,908 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563245163364362(String), wx(String), 501(String)
2019-07-17 16:16:29,911 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:29,913 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:16:29,915 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), 85(Integer), null, {"merchant_income_charge":142.00,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000353201907162527638733","商户订单号":"10110031563245163364362","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":142.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","手续费":0.85000,"费率":"0.60%"}(String), 2019-07-17 16:16:29.906(Timestamp)
2019-07-17 16:16:29,920 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:16:29,921 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,922 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563244439364361(String), wx(String), 501(String)
2019-07-17 16:16:29,926 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:29,927 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:16:29,930 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563244439364361(String), 4200000353201907163645128652(String), 14200(Integer), 85(Integer), null, {"merchant_income_charge":142.00,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000353201907163645128652","商户订单号":"10110031563244439364361","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":142.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","手续费":0.85000,"费率":"0.60%"}(String), 2019-07-17 16:16:29.921(Timestamp)
2019-07-17 16:16:29,936 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:16:29,938 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,938 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563268210364365(String), wx(String), 501(String)
2019-07-17 16:16:29,942 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:29,942 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:16:29,944 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563268210364365(String), 4200000339201907165618278756(String), 2950(Integer), 18(Integer), null, {"merchant_income_charge":29.50,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000339201907165618278756","商户订单号":"10110031563268210364365","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":29.50,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"雄鸡标 特级初榨橄榄油浸金枪鱼块 185g","手续费":0.18000,"费率":"0.60%"}(String), 2019-07-17 16:16:29.937(Timestamp)
2019-07-17 16:16:29,950 DEBUG 7675 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:16:29,952 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,953 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563244439364361(String), wx(String), 501(String)
2019-07-17 16:16:29,959 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 16:16:29,960 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,961 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563245163364362(String), wx(String), 501(String)
2019-07-17 16:16:29,965 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 16:16:29,966 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:29,966 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563268210364365(String), wx(String), 501(String)
2019-07-17 16:16:29,971 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 16:16:29,972 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,972 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:16:29,975 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:16:29,976 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 16:16:29,977 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190716(String), 4(Integer), 3(Integer), 33771(Integer), 31350(Integer), 0(Integer), {"总交易单数":7,"总交易额":337.71,"总退款金额":313.50,"手续费总金额":0.15000}(String), null
2019-07-17 16:16:29,982 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 16:16:29,983 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:29,984 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:16:29,987 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:16:29,988 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:16:29,989 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190716(String), null, null
2019-07-17 16:16:29,994 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:16:30,035  INFO 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-16T16:16:27.137] parse successful
2019-07-17 16:16:30,036 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:16:30,037 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190716(String), wx(String)
2019-07-17 16:16:30,044 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-17 16:16:30,048 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:16:30,050 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563265944364364(String), wx(String)
2019-07-17 16:16:30,060 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-17 16:16:30,061 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:16:30,062 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563245163364362(String), wx(String)
2019-07-17 16:16:30,066 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:30,067  INFO 7675 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563245163364362)
2019-07-17 16:16:30,071  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563245163364362: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563245163364362)
2019-07-17 16:16:30,071  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563245163364362 request: {out_trade_no=10110031563245163364362}
2019-07-17 16:16:30,369  INFO 7675 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,B8ldVSyz3TWzR0k1EWzXWCGEGShz3zas,1563351390,290,api.mch.weixin.qq.com,true,6000,8000,0,0,0,712670235F7974F4A89707AB268902BCA4FE5F8AF23EDEC609C87BB5A5729974
2019-07-17 16:16:30,369  INFO 7675 --- [pool-3-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,B8ldVSyz3TWzR0k1EWzXWCGEGShz3zas,1563351390,290,api.mch.weixin.qq.com,true,6000,8000,0,0,0,712670235F7974F4A89707AB268902BCA4FE5F8AF23EDEC609C87BB5A5729974
2019-07-17 16:16:30,369  INFO 7675 --- [pool-3-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 16:16:30,369  INFO 7675 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[eOSKGHJ6d8e52cc6]]></nonce_str>
<sign><![CDATA[0564BCAD6BCCBBDB1BF69B0F0C96A6FBCDF603305BBDE386C61735B54DAD4AA1]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>14200</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000353201907162527638733]]></transaction_id>
<out_trade_no><![CDATA[10110031563245163364362]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716104640]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>14200</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 16:16:30,372  INFO 7675 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000353201907162527638733, nonce_str=eOSKGHJ6d8e52cc6, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=0564BCAD6BCCBBDB1BF69B0F0C96A6FBCDF603305BBDE386C61735B54DAD4AA1, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563245163364362, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716104640, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:16:30,373  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563245163364362 response: {transaction_id=4200000353201907162527638733, nonce_str=eOSKGHJ6d8e52cc6, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=0564BCAD6BCCBBDB1BF69B0F0C96A6FBCDF603305BBDE386C61735B54DAD4AA1, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563245163364362, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716104640, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:16:30,378 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:16:30,379 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563244439364361(String), wx(String)
2019-07-17 16:16:30,382 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:30,383  INFO 7675 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563244439364361)
2019-07-17 16:16:30,385  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563244439364361: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563244439364361)
2019-07-17 16:16:30,385  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563244439364361 request: {out_trade_no=10110031563244439364361}
2019-07-17 16:16:30,674  INFO 7675 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,0bCHBxSjSbBpDM6o6rd0yEInkT8Hydko,1563351390,287,api.mch.weixin.qq.com,true,6000,8000,0,0,0,E9DC04E942ED6DD3A9242ACE1840AED8D0C76FE4D3005EB5F0A666D7D94F41C2
2019-07-17 16:16:30,675  INFO 7675 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[meknAIRogoY766hr]]></nonce_str>
<sign><![CDATA[8CFBAACE611CABB43C04BBB5F66052FB16BBCDE4C148F6DA34D0447887926EBF]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>14200</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000353201907163645128652]]></transaction_id>
<out_trade_no><![CDATA[10110031563244439364361]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716103514]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>14200</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 16:16:30,675  INFO 7675 --- [pool-4-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,0bCHBxSjSbBpDM6o6rd0yEInkT8Hydko,1563351390,287,api.mch.weixin.qq.com,true,6000,8000,0,0,0,E9DC04E942ED6DD3A9242ACE1840AED8D0C76FE4D3005EB5F0A666D7D94F41C2
2019-07-17 16:16:30,675  INFO 7675 --- [pool-4-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 16:16:30,676  INFO 7675 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000353201907163645128652, nonce_str=meknAIRogoY766hr, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=8CFBAACE611CABB43C04BBB5F66052FB16BBCDE4C148F6DA34D0447887926EBF, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563244439364361, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716103514, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:16:30,677  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563244439364361 response: {transaction_id=4200000353201907163645128652, nonce_str=meknAIRogoY766hr, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=8CFBAACE611CABB43C04BBB5F66052FB16BBCDE4C148F6DA34D0447887926EBF, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563244439364361, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716103514, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:16:30,682 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:16:30,682 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563268210364365(String), wx(String)
2019-07-17 16:16:30,685 DEBUG 7675 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:16:30,686  INFO 7675 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563268210364365)
2019-07-17 16:16:30,688  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563268210364365: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563268210364365)
2019-07-17 16:16:30,688  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563268210364365 request: {out_trade_no=10110031563268210364365}
2019-07-17 16:16:30,968  INFO 7675 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,ra604XyuRa4bsApEexoe0YSeD2GUAnsp,1563351390,277,api.mch.weixin.qq.com,true,6000,8000,0,0,0,58A2F0C2D8930DBBEDD96E6AC3F30AF3D673BF3A3093ED0400586F9D23605C48
2019-07-17 16:16:30,969  INFO 7675 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[Y4RpNJ6e955p9HkS]]></nonce_str>
<sign><![CDATA[151ABC0FC5FE958F7B1F54BB5C15A3BFAE595CB589F60A994E26033FE047B555]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>2950</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000339201907165618278756]]></transaction_id>
<out_trade_no><![CDATA[10110031563268210364365]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716171029]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>2950</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 16:16:30,969  INFO 7675 --- [pool-5-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,ra604XyuRa4bsApEexoe0YSeD2GUAnsp,1563351390,277,api.mch.weixin.qq.com,true,6000,8000,0,0,0,58A2F0C2D8930DBBEDD96E6AC3F30AF3D673BF3A3093ED0400586F9D23605C48
2019-07-17 16:16:30,969  INFO 7675 --- [pool-5-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 16:16:30,971  INFO 7675 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000339201907165618278756, nonce_str=Y4RpNJ6e955p9HkS, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=151ABC0FC5FE958F7B1F54BB5C15A3BFAE595CB589F60A994E26033FE047B555, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=2950, out_trade_no=10110031563268210364365, appid=wx1e86ddc5b2485ab2, total_fee=2950, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716171029, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:16:30,972  INFO 7675 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563268210364365 response: {transaction_id=4200000339201907165618278756, nonce_str=Y4RpNJ6e955p9HkS, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=151ABC0FC5FE958F7B1F54BB5C15A3BFAE595CB589F60A994E26033FE047B555, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=2950, out_trade_no=10110031563268210364365, appid=wx1e86ddc5b2485ab2, total_fee=2950, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716171029, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:16:30,981 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:30,982 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 501(String)
2019-07-17 16:16:30,988 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 16:16:30,989 DEBUG 7675 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 16:16:30,989 DEBUG 7675 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563244439364361(String), wx(String)
2019-07-17 16:16:30,994 DEBUG 7675 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 16:16:30,996 DEBUG 7675 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 16:16:30,997 DEBUG 7675 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563245163364362(String), wx(String)
2019-07-17 16:16:31,001 DEBUG 7675 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 16:16:31,001 DEBUG 7675 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 16:16:31,002 DEBUG 7675 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563268210364365(String), wx(String)
2019-07-17 16:16:31,005 DEBUG 7675 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 16:16:31,008 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:16:31,009 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190716(String)
2019-07-17 16:16:31,011 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:16:31,012 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:31,012 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:16:31,016 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:16:31,019 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:16:31,021 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 16:16:31.018(Timestamp)
2019-07-17 16:16:31,025 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:16:31,026 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:16:31,027 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:16:31,034 DEBUG 7675 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 16:16:31,035 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:16:31,035 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190716(String), wx(String)
2019-07-17 16:16:31,043 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-17 16:16:31,044 DEBUG 7675 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 16:16:31,045 DEBUG 7675 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-17 16:16:31,048 DEBUG 7675 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:16:31,051 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 16:16:31,054 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2094(Integer), 501(String), wx(String), 20190716(String), 10110031563265944364364(String), 4200000358201907161857178396(String), 2421(Integer), 15(Integer), 2019-07-18 05:15:40.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":24.21,"手续费":0.15,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 淡椰浆 270ml","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563265944364364","微信订单号":"4200000358201907161857178396","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":24.21}(String), 2019-07-17 16:16:30.0(Timestamp), 2095(Integer), 501(String), wx(String), 20190716(String), 10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), 85(Integer), 2019-07-18 05:15:40.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":142,"手续费":0.85,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563245163364362","微信订单号":"4200000353201907162527638733","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":142}(String), 2019-07-17 16:16:30.0(Timestamp), 2096(Integer), 501(String), wx(String), 20190716(String), 10110031563244439364361(String), 4200000353201907163645128652(String), 14200(Integer), 85(Integer), 2019-07-18 05:15:40.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":142,"手续费":0.85,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563244439364361","微信订单号":"4200000353201907163645128652","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":142}(String), 2019-07-17 16:16:30.0(Timestamp), 2097(Integer), 501(String), wx(String), 20190716(String), 10110031563268210364365(String), 4200000339201907165618278756(String), 2950(Integer), 18(Integer), 2019-07-18 05:15:40.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":29.5,"手续费":0.18,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 特级初榨橄榄油浸金枪鱼块 185g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563268210364365","微信订单号":"4200000339201907165618278756","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":29.5}(String), 2019-07-17 16:16:30.0(Timestamp)
2019-07-17 16:16:31,060 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.saveBatch                  : <==    Updates: 4
2019-07-17 16:16:31,060  INFO 7675 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : comparePayList-billPayLogCachService.saveBatch:  appId=501; payType=wx;leftBillPayLogs=[BillPayLog(id=2094, appId=501, payType=wx, billDate=20190716, orderNo=10110031563265944364364, tradeNo=4200000358201907161857178396, payAmount=2421, serviceCharge=15, tradeTime=Thu Jul 18 05:15:40 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=24.21, 手续费=0.15, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=雄鸡标 淡椰浆 270ml, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563265944364364, 微信订单号=4200000358201907161857178396, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=24.21}, createTime=Wed Jul 17 16:16:30 CST 2019), BillPayLog(id=2095, appId=501, payType=wx, billDate=20190716, orderNo=10110031563245163364362, tradeNo=4200000353201907162527638733, payAmount=14200, serviceCharge=85, tradeTime=Thu Jul 18 05:15:40 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=142, 手续费=0.85, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=丹麦蓝罐 Kjeldsens 曲奇 908g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563245163364362, 微信订单号=4200000353201907162527638733, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=142}, createTime=Wed Jul 17 16:16:30 CST 2019), BillPayLog(id=2096, appId=501, payType=wx, billDate=20190716, orderNo=10110031563244439364361, tradeNo=4200000353201907163645128652, payAmount=14200, serviceCharge=85, tradeTime=Thu Jul 18 05:15:40 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=142, 手续费=0.85, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=丹麦蓝罐 Kjeldsens 曲奇 908g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563244439364361, 微信订单号=4200000353201907163645128652, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=142}, createTime=Wed Jul 17 16:16:30 CST 2019), BillPayLog(id=2097, appId=501, payType=wx, billDate=20190716, orderNo=10110031563268210364365, tradeNo=4200000339201907165618278756, payAmount=2950, serviceCharge=18, tradeTime=Thu Jul 18 05:15:40 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=29.5, 手续费=0.18, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=雄鸡标 特级初榨橄榄油浸金枪鱼块 185g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563268210364365, 微信订单号=4200000339201907165618278756, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=29.5}, createTime=Wed Jul 17 16:16:30 CST 2019)]
2019-07-17 16:16:31,061 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log_cach where pay_type = ? and app_id = ? and DATE_ADD(create_time,INTERVAL 4 DAY) < NOW() ORDER BY create_time DESC 
2019-07-17 16:16:31,062 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==> Parameters: wx(String), 501(String)
2019-07-17 16:16:31,065 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : <==      Total: 0
2019-07-17 16:16:31,065 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:16:31,066 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 501(String)
2019-07-17 16:16:31,071 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 16:16:31,072 DEBUG 7675 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-17 16:16:31,073 DEBUG 7675 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-17 16:16:31,076 DEBUG 7675 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:16:31,078 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findListByPayTypeAndAppId  : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log_cach where pay_type = ? and app_id = ? 
2019-07-17 16:16:31,079 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findListByPayTypeAndAppId  : ==> Parameters: wx(String), 501(String)
2019-07-17 16:16:31,083 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.findListByPayTypeAndAppId  : <==      Total: 2
2019-07-17 16:16:31,084 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.deleteBatch                : ==>  Preparing: delete from pay_center3_bill_refund_log_cach where id in 
2019-07-17 16:16:31,085 DEBUG 7675 --- [           main] c.i.p.m.t.d.B.deleteBatch                : ==> Parameters: 
2019-07-17 16:16:31,118  WARN 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-16T16:16:27.137] compare exception: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 2
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: delete from pay_center3_bill_refund_log_cach   where id in
### Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 2
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 2
2019-07-17 16:16:31,119  INFO 7675 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-17 16:16:31,136  INFO 7675 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 16:16:31,138  INFO 7675 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 16:16:31,159  INFO 7675 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-17 16:20:40,286  INFO 7679 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 7679 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 16:20:40,299  INFO 7679 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-17 16:20:42,851  INFO 7679 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$eff5e9bb] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:20:43,098  INFO 7679 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$1207705d] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:20:43,140  INFO 7679 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$1c43d838] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:20:43,244  INFO 7679 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 16:20:43,507  INFO 7679 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 16:20:43,528  INFO 7679 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 16:20:43,546  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 16:20:43,550  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:20:43,550  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:20:43,551  INFO 7679 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 16:20:43,552  INFO 7679 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 16:20:43,552  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 16:20:43,553  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:20:43,553  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:20:43,554  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 16:20:43,555  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:20:43,556  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:20:43,556  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 16:20:43,557  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:20:43,557  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:20:43,557  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 16:20:43,558  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:20:43,559  INFO 7679 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:20:43,813  INFO 7679 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 16:20:45,131  INFO 7679 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 16:20:45,807  INFO 7679 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$ce82b7e4
2019-07-17 16:20:45,822  INFO 7679 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$e9e8859f
2019-07-17 16:20:45,988  INFO 7679 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 16:20:45,988  INFO 7679 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 16:20:47,586  INFO 7679 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 16:20:48,745  INFO 7679 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 16:20:49,502  INFO 7679 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 16:20:50,455  INFO 7679 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 11.257 seconds (JVM running for 12.491)
2019-07-17 16:20:50,993  INFO 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-17 16:20:51,165 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:51,238 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190715(String)
2019-07-17 16:20:51,291 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:20:51,301  WARN 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-15T16:20:50.996] parse exception: 账单[20190715]已解析
2019-07-17 16:20:51,329 ERROR 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$42c4f817.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:20:51,333 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:51,334 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190715(String)
2019-07-17 16:20:51,339 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:20:51,347  WARN 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-15T16:20:50.996] parse exception: 账单[20190715]已解析
2019-07-17 16:20:51,348 ERROR 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$42c4f817.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:20:51,351 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:51,352 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 16:20:51,355 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:20:51,367  INFO 7679 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 16 16:20:50 CST 2019)
2019-07-17 16:20:51,368  INFO 7679 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 16 16:20:50 CST 2019)
2019-07-17 16:20:51,368  INFO 7679 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 16:20:51,419  INFO 7679 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-16","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-17 16:20:51,761 ERROR 7679 --- [           main] sdk.biz.err                              : ErrorScene^_^40004^_^isp.bill_not_exist^_^null^_^Mac OS X^_^2019-07-17 16:20:51^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=adoH7G5gYBb3MrS0GQhaMJfzivlSd88wwoJW8GJx7FdLH8ZAqs+yxZKL9x0J+eI5cpsTXicl+MvZqndFZ+X6JEn9ts7W9rKHzmmfWS3vo02JCCgMA4v5FQoWKPLy9UjMQVPpR3mK53wVYAJB63diVfCV/QTFjcFSj7bxLj89O66xh8hPL3NxH+wEgv0c0cFpMdMcDQ2qFMSjWV9mQ5Aw1cvb67yIM4Y7VSnyY8rU0ZUE3RE2ejwSJjB63lmuvcnXP4hTOxKfQ9fE7FNiBK9sYe+nn+2hYD4LCrSswD9bD8z9gVVEOXaBazlEjz2BFsJUyV3KrAUpck1Cen/2yEruqg==&version=1.0&app_id=2018042660058300&sign_type=RSA2&timestamp=2019-07-17 16:20:51^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-16","bill_type":"trade"}^_^Body:{"alipay_data_dataservice_bill_downloadurl_query_response":{"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在"},"sign":"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw=="}^_^62ms,261ms,17ms
2019-07-17 16:20:51,764  INFO 7679 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 response: {"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"isp.bill_not_exist\",\"sub_msg\":\"账单不存在\"},\"sign\":\"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw==\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-16\",\"bill_type\":\"trade\"}"},"success":false,"error_code":"40004"}
2019-07-17 16:20:51,765  WARN 7679 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: Business Failed # isp.bill_not_exist # 账单不存在
2019-07-17 16:20:51,767 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:20:51,771 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190716(String), null, Business Failed # isp.bill_not_exist # 账单不存在(String)
2019-07-17 16:20:51,776 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:20:51,809  INFO 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-16T16:20:50.996] parse successful
2019-07-17 16:20:51,812 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:20:51,813 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190716(String), alipay(String)
2019-07-17 16:20:51,819 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:20:51,820 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:51,822 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 503(String)
2019-07-17 16:20:51,826 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:20:51,829 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:20:51,830 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190716(String)
2019-07-17 16:20:51,835 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:20:51,836 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:51,837 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 16:20:51,843 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:20:51,844 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:20:51,847 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190716(String), alipay(String), 20190716(String), 2019-07-17 16:20:51.844(Timestamp)
2019-07-17 16:20:51,852 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:20:51,854 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:51,855 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 16:20:51,859 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:20:51,861  INFO 7679 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-16T16:20:50.996 - result is Null
2019-07-17 16:20:51,899  INFO 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-16T16:20:50.996] createCompareBatch successful
2019-07-17 16:20:51,902 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:51,903 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 16:20:51,906 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:20:51,907  INFO 7679 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 16 16:20:50 CST 2019)
2019-07-17 16:20:51,907  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 16 16:20:50 CST 2019)
2019-07-17 16:20:51,914  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 request: {nonce_str=Qf849cj5Tp5BbzqAt9KswR9GZPg2N2XL, bill_date=20190716, appid=wxd86049a121654669, sign=51CD463EE6EF389C28E2184D269191C71C5788580A5CBB6DE12A864624DB63EE, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-17 16:20:52,434  INFO 7679 --- [           main] wxpay java sdk                           : report worker num: 6
2019-07-17 16:20:52,437  INFO 7679 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,Qf849cj5Tp5BbzqAt9KswR9GZPg2N2XL,1563351652,462,api.mch.weixin.qq.com,true,6000,8000,0,0,0,620E30CDA2A2BA19D089D1B47FBA20997E32681B65FF7937F83AC4E054D5CA78
2019-07-17 16:20:52,438  INFO 7679 --- [pool-2-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,Qf849cj5Tp5BbzqAt9KswR9GZPg2N2XL,1563351652,462,api.mch.weixin.qq.com,true,6000,8000,0,0,0,620E30CDA2A2BA19D089D1B47FBA20997E32681B65FF7937F83AC4E054D5CA78
2019-07-17 16:20:52,438  INFO 7679 --- [pool-2-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 16:20:52,438  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-17 16:20:52,438  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 response content size: 149
2019-07-17 16:20:52,439  INFO 7679 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-17 16:20:52,442  INFO 7679 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-17 16:20:52,443  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-17 16:20:52,443  WARN 7679 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-17 16:20:52,444 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:20:52,445 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190716(String), null, No Bill Exist(String)
2019-07-17 16:20:52,449 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:20:52,474  INFO 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-16T16:20:50.996] parse successful
2019-07-17 16:20:52,475 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:20:52,476 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190716(String), wx(String)
2019-07-17 16:20:52,480 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:20:52,481 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:52,482 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 503(String)
2019-07-17 16:20:52,485 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:20:52,489 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:20:52,489 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190716(String)
2019-07-17 16:20:52,494 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:20:52,496 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:52,498 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 16:20:52,503 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:20:52,505 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:20:52,506 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 16:20:52.505(Timestamp)
2019-07-17 16:20:52,511 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:20:52,512 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:52,514 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 16:20:52,517 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:20:52,518  INFO 7679 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-16T16:20:50.996 - result is Null
2019-07-17 16:20:52,549  INFO 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-16T16:20:50.996] createCompareBatch successful
2019-07-17 16:20:52,552 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:52,553 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190715(String)
2019-07-17 16:20:52,562 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:20:52,569  WARN 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-15T16:20:50.996] parse exception: 账单[20190715]已解析
2019-07-17 16:20:52,569 ERROR 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$42c4f817.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:20:52,573 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:52,575 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190715(String)
2019-07-17 16:20:52,580 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:20:52,592  WARN 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-15T16:20:50.996] parse exception: 账单[20190715]已解析
2019-07-17 16:20:52,593 ERROR 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$42c4f817.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:20:52,597 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:52,599 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:20:52,603 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:20:52,603  INFO 7679 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 16 16:20:50 CST 2019)
2019-07-17 16:20:52,604  INFO 7679 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 16 16:20:50 CST 2019)
2019-07-17 16:20:52,694 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:52,696 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:20:52,701 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:20:52,704 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 16:20:52,722 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190716(String), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":7,"退款订单总笔数":3,"订单金额（元）":578.01,"商家实收（元）":578.01,"服务费（元）":-9.32,"实收净额（元）":568.69}(String), null
2019-07-17 16:20:52,733 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 16:20:52,734 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:52,735 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:20:52,739 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:20:52,740 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:20:52,743 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190716(String), null, null
2019-07-17 16:20:52,748 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:20:52,777  INFO 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-16T16:20:50.996] parse successful
2019-07-17 16:20:52,778 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:20:52,779 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), alipay(String)
2019-07-17 16:20:52,784 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:20:52,785 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:52,785 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 101(String)
2019-07-17 16:20:52,790 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:20:52,796 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:20:52,797 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190716(String)
2019-07-17 16:20:52,802 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:20:52,803 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:52,803 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:20:52,808 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:20:52,810 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:20:52,811 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190716(String), alipay(String), 20190716(String), 2019-07-17 16:20:52.81(Timestamp)
2019-07-17 16:20:52,816 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:20:52,818 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:52,818 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:20:52,847 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 16:20:52,850 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:20:52,851 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), alipay(String)
2019-07-17 16:20:52,855 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:20:52,895 DEBUG 7679 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 16:20:52,898 DEBUG 7679 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-17 16:20:52,905 DEBUG 7679 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:20:52,908 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:52,908 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 101(String)
2019-07-17 16:20:52,913 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:20:52,915 DEBUG 7679 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-17 16:20:52,916 DEBUG 7679 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-17 16:20:52,921 DEBUG 7679 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:20:52,922  INFO 7679 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-16T16:20:50.996 - result paysCount: 0, refundsCount: 0
2019-07-17 16:20:52,953  INFO 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-16T16:20:50.996] createCompareBatch successful
2019-07-17 16:20:52,956 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:52,957 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:20:52,960 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:20:52,961  INFO 7679 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 16 16:20:50 CST 2019)
2019-07-17 16:20:52,961  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 16 16:20:50 CST 2019)
2019-07-17 16:20:52,961  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_101_20190716.csv] already exists, return local file
2019-07-17 16:20:52,972 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:52,972 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563214543366441(String), wx(String), 101(String)
2019-07-17 16:20:52,976 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:52,977 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:20:52,980 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563214543366441(String), 4200000344201907162933352469(String), 9900(Integer), 59(Integer), null, {"merchant_income_charge":99.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907162933352469","商户订单号":"10110011563214543366441","用户标识":"oF9zhvpC02_XpCRvUXuT3D-2heT0","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":99.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618特惠】VENUS MARBLE9色复古油画眼影盘2019新款","手续费":0.59000,"费率":"0.60%"}(String), 2019-07-17 16:20:52.971(Timestamp)
2019-07-17 16:20:52,987 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:20:52,989 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:52,989 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563261630366450(String), wx(String), 101(String)
2019-07-17 16:20:52,992 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:52,993 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:20:52,995 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563261630366450(String), 4200000344201907160777817734(String), 24900(Integer), 149(Integer), null, {"merchant_income_charge":249.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907160777817734","商户订单号":"10110011563261630366450","用户标识":"oF9zhvlIDys9Hq4IlTyvLIB4A4cQ","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"BOC_DEBIT","货币种类":"CNY","总金额":249.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"CHARLES＆KEITH 链条编织时尚百搭单肩斜挎包网红小包","手续费":1.49000,"费率":"0.60%"}(String), 2019-07-17 16:20:52.989(Timestamp)
2019-07-17 16:20:53,000 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:20:53,002 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:53,003 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563289727366454(String), wx(String), 101(String)
2019-07-17 16:20:53,010 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:53,011 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:20:53,012 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563289727366454(String), 4200000339201907161958040759(String), 53000(Integer), 318(Integer), null, {"merchant_income_charge":530.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000339201907161958040759","商户订单号":"10110011563289727366454","用户标识":"oF9zhvl3Tth6xpwiRVKT42BZYyag","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"ICBC_DEBIT","货币种类":"CNY","总金额":530.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"日本BEAUTY BAR美容棒24K美容黄金棒 瘦脸神器震动提拉紧致按摩仪","手续费":3.18000,"费率":"0.60%"}(String), 2019-07-17 16:20:53.002(Timestamp)
2019-07-17 16:20:53,018 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:20:53,020 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:53,021 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:20:53,024 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:20:53,025 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 16:20:53,030 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190716(String), 3(Integer), 0(Integer), 87800(Integer), 0(Integer), 5(Integer), {"总交易单数":3,"总交易额":878.00,"总退款金额":0.00,"手续费总金额":5.26000}(String), null
2019-07-17 16:20:53,036 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 16:20:53,037 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:53,038 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:20:53,042 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:20:53,044 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:20:53,045 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190716(String), null, null
2019-07-17 16:20:53,050 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:20:53,108  INFO 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-16T16:20:50.996] parse successful
2019-07-17 16:20:53,109 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:20:53,110 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), wx(String)
2019-07-17 16:20:53,117 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 16:20:53,119 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:20:53,119 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563214543366441(String), wx(String)
2019-07-17 16:20:53,122 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:53,124  INFO 7679 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563214543366441)
2019-07-17 16:20:53,125  INFO 7679 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563214543366441,payType=wx,appId=101
2019-07-17 16:20:53,125  INFO 7679 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563214543366441
2019-07-17 16:20:53,127 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:20:53,128 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563214543366441(String), wx(String)
2019-07-17 16:20:53,130 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:20:53,132 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:20:53,132 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563214543366441(String), wx(String)
2019-07-17 16:20:53,135 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:20:53,136  INFO 7679 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563214543366441
2019-07-17 16:20:53,137 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:53,137 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563214543366441(String), wx(String), 101(String)
2019-07-17 16:20:53,141 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:53,142 ERROR 7679 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563214543366441] exception: not find PayRequestLog record by [orderNo:10110011563214543366441,payType:wx] 
2019-07-17 16:20:53,143 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:20:53,144 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563261630366450(String), wx(String)
2019-07-17 16:20:53,148 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:53,149  INFO 7679 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563261630366450)
2019-07-17 16:20:53,149  INFO 7679 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563261630366450,payType=wx,appId=101
2019-07-17 16:20:53,149  INFO 7679 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563261630366450
2019-07-17 16:20:53,150 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:20:53,150 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563261630366450(String), wx(String)
2019-07-17 16:20:53,153 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:20:53,154 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:20:53,155 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563261630366450(String), wx(String)
2019-07-17 16:20:53,160 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:20:53,160  INFO 7679 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563261630366450
2019-07-17 16:20:53,161 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:53,161 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563261630366450(String), wx(String), 101(String)
2019-07-17 16:20:53,164 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:53,165 ERROR 7679 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563261630366450] exception: not find PayRequestLog record by [orderNo:10110011563261630366450,payType:wx] 
2019-07-17 16:20:53,166 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:20:53,167 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563289727366454(String), wx(String)
2019-07-17 16:20:53,171 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:53,172  INFO 7679 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563289727366454)
2019-07-17 16:20:53,172  INFO 7679 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563289727366454,payType=wx,appId=101
2019-07-17 16:20:53,172  INFO 7679 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563289727366454
2019-07-17 16:20:53,173 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:20:53,177 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563289727366454(String), wx(String)
2019-07-17 16:20:53,181 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:20:53,182 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:20:53,182 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563289727366454(String), wx(String)
2019-07-17 16:20:53,185 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:20:53,186  INFO 7679 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563289727366454
2019-07-17 16:20:53,186 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:53,187 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563289727366454(String), wx(String), 101(String)
2019-07-17 16:20:53,189 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:53,190 ERROR 7679 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563289727366454] exception: not find PayRequestLog record by [orderNo:10110011563289727366454,payType:wx] 
2019-07-17 16:20:53,191 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:53,191 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 101(String)
2019-07-17 16:20:53,196 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:20:53,198 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:20:53,199 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190716(String)
2019-07-17 16:20:53,203 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:20:53,204 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:53,205 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:20:53,210 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:20:53,211 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:20:53,212 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 16:20:53.21(Timestamp)
2019-07-17 16:20:53,215 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:20:53,216 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:53,217 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:20:53,221 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 16:20:53,222 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:20:53,223 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), wx(String)
2019-07-17 16:20:53,231 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 16:20:53,232 DEBUG 7679 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 16:20:53,235 DEBUG 7679 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-17 16:20:53,239 DEBUG 7679 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:20:53,251 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 16:20:53,260 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2098(Integer), 101(String), wx(String), 20190716(String), 10110011563214543366441(String), 4200000344201907162933352469(String), 9900(Integer), 59(Integer), 2019-07-18 05:20:03.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":99,"手续费":0.59,"交易状态":"SUCCESS","交易类型":"MWEB","付款银行":"CFT","商品名称":"【618特惠】VENUS MARBLE9色复古油画眼影盘2019新款","子商户号":"0","用户标识":"oF9zhvpC02_XpCRvUXuT3D-2heT0","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563214543366441","微信订单号":"4200000344201907162933352469","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":99}(String), 2019-07-17 16:20:53.0(Timestamp), 2099(Integer), 101(String), wx(String), 20190716(String), 10110011563261630366450(String), 4200000344201907160777817734(String), 24900(Integer), 149(Integer), 2019-07-18 05:20:03.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":249,"手续费":1.49,"交易状态":"SUCCESS","交易类型":"MWEB","付款银行":"BOC_DEBIT","商品名称":"CHARLES＆KEITH 链条编织时尚百搭单肩斜挎包网红小包","子商户号":"0","用户标识":"oF9zhvlIDys9Hq4IlTyvLIB4A4cQ","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563261630366450","微信订单号":"4200000344201907160777817734","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":249}(String), 2019-07-17 16:20:53.0(Timestamp), 2100(Integer), 101(String), wx(String), 20190716(String), 10110011563289727366454(String), 4200000339201907161958040759(String), 53000(Integer), 318(Integer), 2019-07-18 05:20:03.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":530,"手续费":3.18,"交易状态":"SUCCESS","交易类型":"JSAPI","付款银行":"ICBC_DEBIT","商品名称":"日本BEAUTY BAR美容棒24K美容黄金棒 瘦脸神器震动提拉紧致按摩仪","子商户号":"0","用户标识":"oF9zhvl3Tth6xpwiRVKT42BZYyag","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563289727366454","微信订单号":"4200000339201907161958040759","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":530}(String), 2019-07-17 16:20:53.0(Timestamp)
2019-07-17 16:20:53,433  WARN 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-16T16:20:50.996] compare exception: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '10110011563214543366441-101-wx' for key 'idx_oNo_aId_pType'
### The error may involve com.intbee.payment.modules.trade.dao.BillPayLogCachMapper.saveBatch-Inline
### The error occurred while setting parameters
### SQL: insert into pay_center3_bill_pay_log_cach      (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`)      values                (        ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?         )           ,         (        ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?         )           ,         (        ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?         )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '10110011563214543366441-101-wx' for key 'idx_oNo_aId_pType'
; Duplicate entry '10110011563214543366441-101-wx' for key 'idx_oNo_aId_pType'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '10110011563214543366441-101-wx' for key 'idx_oNo_aId_pType'
2019-07-17 16:20:53,436 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:53,436 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190715(String)
2019-07-17 16:20:53,440 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:20:53,445  WARN 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-15T16:20:50.996] parse exception: 账单[20190715]已解析
2019-07-17 16:20:53,446 ERROR 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$42c4f817.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:20:53,450 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:53,451 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:20:53,453 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:20:53,453  INFO 7679 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 16 16:20:50 CST 2019)
2019-07-17 16:20:53,454  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 16 16:20:50 CST 2019)
2019-07-17 16:20:53,454  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_501_20190716.csv] already exists, return local file
2019-07-17 16:20:53,456 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:53,457 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563265944364364(String), wx(String), 501(String)
2019-07-17 16:20:53,460 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:53,460 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:20:53,461 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563265944364364(String), 4200000358201907161857178396(String), 2421(Integer), 15(Integer), null, {"merchant_income_charge":24.21,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000358201907161857178396","商户订单号":"10110031563265944364364","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":24.21,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"雄鸡标 淡椰浆 270ml","手续费":0.15000,"费率":"0.60%"}(String), 2019-07-17 16:20:53.456(Timestamp)
2019-07-17 16:20:53,465 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:20:53,465 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:53,466 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563245163364362(String), wx(String), 501(String)
2019-07-17 16:20:53,468 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:53,469 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:20:53,470 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), 85(Integer), null, {"merchant_income_charge":142.00,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000353201907162527638733","商户订单号":"10110031563245163364362","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":142.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","手续费":0.85000,"费率":"0.60%"}(String), 2019-07-17 16:20:53.465(Timestamp)
2019-07-17 16:20:53,473 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:20:53,475 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:53,475 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563244439364361(String), wx(String), 501(String)
2019-07-17 16:20:53,478 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:53,479 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:20:53,480 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563244439364361(String), 4200000353201907163645128652(String), 14200(Integer), 85(Integer), null, {"merchant_income_charge":142.00,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000353201907163645128652","商户订单号":"10110031563244439364361","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":142.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","手续费":0.85000,"费率":"0.60%"}(String), 2019-07-17 16:20:53.474(Timestamp)
2019-07-17 16:20:53,484 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:20:53,485 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:53,485 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563268210364365(String), wx(String), 501(String)
2019-07-17 16:20:53,488 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:53,488 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:20:53,489 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563268210364365(String), 4200000339201907165618278756(String), 2950(Integer), 18(Integer), null, {"merchant_income_charge":29.50,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000339201907165618278756","商户订单号":"10110031563268210364365","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":29.50,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"雄鸡标 特级初榨橄榄油浸金枪鱼块 185g","手续费":0.18000,"费率":"0.60%"}(String), 2019-07-17 16:20:53.485(Timestamp)
2019-07-17 16:20:53,492 DEBUG 7679 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:20:53,493 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:53,494 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563244439364361(String), wx(String), 501(String)
2019-07-17 16:20:53,497 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 16:20:53,498 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:53,498 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563245163364362(String), wx(String), 501(String)
2019-07-17 16:20:53,502 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 16:20:53,502 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:53,503 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563268210364365(String), wx(String), 501(String)
2019-07-17 16:20:53,506 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 16:20:53,507 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:53,508 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:20:53,510 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:20:53,511 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 16:20:53,512 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190716(String), 4(Integer), 3(Integer), 33771(Integer), 31350(Integer), 0(Integer), {"总交易单数":7,"总交易额":337.71,"总退款金额":313.50,"手续费总金额":0.15000}(String), null
2019-07-17 16:20:53,515 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 16:20:53,517 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:53,517 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:20:53,519 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:20:53,520 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:20:53,521 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190716(String), null, null
2019-07-17 16:20:53,524 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:20:53,558  INFO 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-16T16:20:50.996] parse successful
2019-07-17 16:20:53,559 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:20:53,559 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190716(String), wx(String)
2019-07-17 16:20:53,566 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-17 16:20:53,567 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:20:53,568 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563265944364364(String), wx(String)
2019-07-17 16:20:53,577 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-17 16:20:53,580 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:20:53,580 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563245163364362(String), wx(String)
2019-07-17 16:20:53,584 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:53,585  INFO 7679 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563245163364362)
2019-07-17 16:20:53,591  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563245163364362: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563245163364362)
2019-07-17 16:20:53,591  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563245163364362 request: {out_trade_no=10110031563245163364362}
2019-07-17 16:20:53,864  INFO 7679 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,XfnyRtXMX5Rbh3JxxF1oo8ZTHzZ4ycPn,1563351653,267,api.mch.weixin.qq.com,true,6000,8000,0,0,0,AA21BFEEE0E7FC6246556D47A7893D7AF6A0709764BF649E7571859AD44B070C
2019-07-17 16:20:53,864  INFO 7679 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[zZDxVIv7mm1L2pwX]]></nonce_str>
<sign><![CDATA[745C115145862C93B766807BFDC41D93CD7FB7373DC10C668821572099C9D4E1]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>14200</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000353201907162527638733]]></transaction_id>
<out_trade_no><![CDATA[10110031563245163364362]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716104640]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>14200</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 16:20:53,864  INFO 7679 --- [pool-3-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,XfnyRtXMX5Rbh3JxxF1oo8ZTHzZ4ycPn,1563351653,267,api.mch.weixin.qq.com,true,6000,8000,0,0,0,AA21BFEEE0E7FC6246556D47A7893D7AF6A0709764BF649E7571859AD44B070C
2019-07-17 16:20:53,864  INFO 7679 --- [pool-3-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 16:20:53,867  INFO 7679 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000353201907162527638733, nonce_str=zZDxVIv7mm1L2pwX, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=745C115145862C93B766807BFDC41D93CD7FB7373DC10C668821572099C9D4E1, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563245163364362, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716104640, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:20:53,867  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563245163364362 response: {transaction_id=4200000353201907162527638733, nonce_str=zZDxVIv7mm1L2pwX, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=745C115145862C93B766807BFDC41D93CD7FB7373DC10C668821572099C9D4E1, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563245163364362, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716104640, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:20:53,872 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:20:53,872 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563244439364361(String), wx(String)
2019-07-17 16:20:53,875 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:53,875  INFO 7679 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563244439364361)
2019-07-17 16:20:53,877  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563244439364361: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563244439364361)
2019-07-17 16:20:53,877  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563244439364361 request: {out_trade_no=10110031563244439364361}
2019-07-17 16:20:54,108  INFO 7679 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,0tfBD1tnXZi8SLDKUwoYQSJ5InnNtxzh,1563351654,228,api.mch.weixin.qq.com,true,6000,8000,0,0,0,41DA497C4A1280F578DAADF37AF5F3E75E3444F6F2E063A0E9ACD52CF75194CC
2019-07-17 16:20:54,108  INFO 7679 --- [pool-4-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,0tfBD1tnXZi8SLDKUwoYQSJ5InnNtxzh,1563351654,228,api.mch.weixin.qq.com,true,6000,8000,0,0,0,41DA497C4A1280F578DAADF37AF5F3E75E3444F6F2E063A0E9ACD52CF75194CC
2019-07-17 16:20:54,108  INFO 7679 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[qwPCQhr3mTt6WIru]]></nonce_str>
<sign><![CDATA[FCFADA004A0B7F7F4F9B6D88E0A2D9C626BE57F41BBE1F715CF9BFC2511FF3B8]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>14200</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000353201907163645128652]]></transaction_id>
<out_trade_no><![CDATA[10110031563244439364361]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716103514]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>14200</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 16:20:54,108  INFO 7679 --- [pool-4-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 16:20:54,110  INFO 7679 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000353201907163645128652, nonce_str=qwPCQhr3mTt6WIru, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=FCFADA004A0B7F7F4F9B6D88E0A2D9C626BE57F41BBE1F715CF9BFC2511FF3B8, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563244439364361, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716103514, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:20:54,110  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563244439364361 response: {transaction_id=4200000353201907163645128652, nonce_str=qwPCQhr3mTt6WIru, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=FCFADA004A0B7F7F4F9B6D88E0A2D9C626BE57F41BBE1F715CF9BFC2511FF3B8, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563244439364361, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716103514, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:20:54,115 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:20:54,115 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563268210364365(String), wx(String)
2019-07-17 16:20:54,117 DEBUG 7679 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:20:54,118  INFO 7679 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563268210364365)
2019-07-17 16:20:54,119  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563268210364365: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563268210364365)
2019-07-17 16:20:54,120  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563268210364365 request: {out_trade_no=10110031563268210364365}
2019-07-17 16:20:54,359  INFO 7679 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,hgpPWKjuKJRkoZeu9xrimMUGEyhm2ohf,1563351654,237,api.mch.weixin.qq.com,true,6000,8000,0,0,0,88C02806609E3A5421E13EF0B51B9DDB71A15A63D2E1F7614389EF5BD3909E17
2019-07-17 16:20:54,359  INFO 7679 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[fvwfQuWliLO2jumw]]></nonce_str>
<sign><![CDATA[D660AD6BEEDAFF4F7365309BCB50A13CD95BB394DDC774D516851D73B52241D7]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>2950</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000339201907165618278756]]></transaction_id>
<out_trade_no><![CDATA[10110031563268210364365]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716171029]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>2950</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 16:20:54,359  INFO 7679 --- [pool-5-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,hgpPWKjuKJRkoZeu9xrimMUGEyhm2ohf,1563351654,237,api.mch.weixin.qq.com,true,6000,8000,0,0,0,88C02806609E3A5421E13EF0B51B9DDB71A15A63D2E1F7614389EF5BD3909E17
2019-07-17 16:20:54,360  INFO 7679 --- [pool-5-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 16:20:54,361  INFO 7679 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000339201907165618278756, nonce_str=fvwfQuWliLO2jumw, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=D660AD6BEEDAFF4F7365309BCB50A13CD95BB394DDC774D516851D73B52241D7, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=2950, out_trade_no=10110031563268210364365, appid=wx1e86ddc5b2485ab2, total_fee=2950, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716171029, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:20:54,361  INFO 7679 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563268210364365 response: {transaction_id=4200000339201907165618278756, nonce_str=fvwfQuWliLO2jumw, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=D660AD6BEEDAFF4F7365309BCB50A13CD95BB394DDC774D516851D73B52241D7, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=2950, out_trade_no=10110031563268210364365, appid=wx1e86ddc5b2485ab2, total_fee=2950, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716171029, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:20:54,366 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:54,366 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 501(String)
2019-07-17 16:20:54,372 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 16:20:54,373 DEBUG 7679 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 16:20:54,373 DEBUG 7679 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563244439364361(String), wx(String)
2019-07-17 16:20:54,378 DEBUG 7679 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 16:20:54,379 DEBUG 7679 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 16:20:54,379 DEBUG 7679 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563245163364362(String), wx(String)
2019-07-17 16:20:54,383 DEBUG 7679 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 16:20:54,384 DEBUG 7679 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 16:20:54,384 DEBUG 7679 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563268210364365(String), wx(String)
2019-07-17 16:20:54,387 DEBUG 7679 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 16:20:54,390 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:20:54,391 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190716(String)
2019-07-17 16:20:54,394 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:20:54,394 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:54,395 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:20:54,397 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:20:54,398 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:20:54,399 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 16:20:54.398(Timestamp)
2019-07-17 16:20:54,402 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:20:54,403 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:20:54,404 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:20:54,407 DEBUG 7679 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 16:20:54,408 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:20:54,408 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190716(String), wx(String)
2019-07-17 16:20:54,419 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-17 16:20:54,421 DEBUG 7679 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 16:20:54,423 DEBUG 7679 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-17 16:20:54,426 DEBUG 7679 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:20:54,428 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 16:20:54,431 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2101(Integer), 501(String), wx(String), 20190716(String), 10110031563265944364364(String), 4200000358201907161857178396(String), 2421(Integer), 15(Integer), 2019-07-18 05:20:04.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":24.21,"手续费":0.15,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 淡椰浆 270ml","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563265944364364","微信订单号":"4200000358201907161857178396","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":24.21}(String), 2019-07-17 16:20:53.0(Timestamp), 2102(Integer), 501(String), wx(String), 20190716(String), 10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), 85(Integer), 2019-07-18 05:20:04.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":142,"手续费":0.85,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563245163364362","微信订单号":"4200000353201907162527638733","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":142}(String), 2019-07-17 16:20:53.0(Timestamp), 2103(Integer), 501(String), wx(String), 20190716(String), 10110031563244439364361(String), 4200000353201907163645128652(String), 14200(Integer), 85(Integer), 2019-07-18 05:20:04.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":142,"手续费":0.85,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563244439364361","微信订单号":"4200000353201907163645128652","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":142}(String), 2019-07-17 16:20:53.0(Timestamp), 2104(Integer), 501(String), wx(String), 20190716(String), 10110031563268210364365(String), 4200000339201907165618278756(String), 2950(Integer), 18(Integer), 2019-07-18 05:20:04.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":29.5,"手续费":0.18,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 特级初榨橄榄油浸金枪鱼块 185g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563268210364365","微信订单号":"4200000339201907165618278756","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":29.5}(String), 2019-07-17 16:20:53.0(Timestamp)
2019-07-17 16:20:54,436 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.saveBatch                  : <==    Updates: 4
2019-07-17 16:20:54,436  INFO 7679 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : comparePayList-billPayLogCachService.saveBatch:  appId=501; payType=wx;leftBillPayLogs=[BillPayLog(id=2101, appId=501, payType=wx, billDate=20190716, orderNo=10110031563265944364364, tradeNo=4200000358201907161857178396, payAmount=2421, serviceCharge=15, tradeTime=Thu Jul 18 05:20:04 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=24.21, 手续费=0.15, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=雄鸡标 淡椰浆 270ml, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563265944364364, 微信订单号=4200000358201907161857178396, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=24.21}, createTime=Wed Jul 17 16:20:53 CST 2019), BillPayLog(id=2102, appId=501, payType=wx, billDate=20190716, orderNo=10110031563245163364362, tradeNo=4200000353201907162527638733, payAmount=14200, serviceCharge=85, tradeTime=Thu Jul 18 05:20:04 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=142, 手续费=0.85, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=丹麦蓝罐 Kjeldsens 曲奇 908g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563245163364362, 微信订单号=4200000353201907162527638733, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=142}, createTime=Wed Jul 17 16:20:53 CST 2019), BillPayLog(id=2103, appId=501, payType=wx, billDate=20190716, orderNo=10110031563244439364361, tradeNo=4200000353201907163645128652, payAmount=14200, serviceCharge=85, tradeTime=Thu Jul 18 05:20:04 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=142, 手续费=0.85, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=丹麦蓝罐 Kjeldsens 曲奇 908g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563244439364361, 微信订单号=4200000353201907163645128652, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=142}, createTime=Wed Jul 17 16:20:53 CST 2019), BillPayLog(id=2104, appId=501, payType=wx, billDate=20190716, orderNo=10110031563268210364365, tradeNo=4200000339201907165618278756, payAmount=2950, serviceCharge=18, tradeTime=Thu Jul 18 05:20:04 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=29.5, 手续费=0.18, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=雄鸡标 特级初榨橄榄油浸金枪鱼块 185g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563268210364365, 微信订单号=4200000339201907165618278756, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=29.5}, createTime=Wed Jul 17 16:20:53 CST 2019)]
2019-07-17 16:20:54,437 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log_cach where pay_type = ? and app_id = ? and DATE_ADD(create_time,INTERVAL 4 DAY) < NOW() ORDER BY create_time DESC 
2019-07-17 16:20:54,438 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==> Parameters: wx(String), 501(String)
2019-07-17 16:20:54,440 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : <==      Total: 0
2019-07-17 16:20:54,441 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:20:54,442 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 501(String)
2019-07-17 16:20:54,446 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 16:20:54,447 DEBUG 7679 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-17 16:20:54,448 DEBUG 7679 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-17 16:20:54,450 DEBUG 7679 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:20:54,451  INFO 7679 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : compareRefundList-billRefundLogCachService.saveBatch:  appId=501; payType=wx; valueList=[BillRefundLog(id=300, appId=501, payType=wx, billDate=20190716, orderNo=10110031563245163364362, refundNo=refund10110031563245163364362, tradeNo=4200000353201907162527638733, refundAmount=14200, serviceCharge=-85, tradeTime=Wed Jul 17 23:42:26 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=0, 手续费=-0.85, 交易状态=REFUND, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=丹麦蓝罐 Kjeldsens 曲奇 908g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=SUCCESS, 退款类型=ORIGINAL, 退款金额=142, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563245163364362, 微信订单号=4200000353201907162527638733, 商户退款单号=refund10110031563245163364362, 微信退款单号=50000500972019071610665371485, merchant_income_charge=0}, createTime=Wed Jul 17 10:40:05 CST 2019), BillRefundLog(id=299, appId=501, payType=wx, billDate=20190716, orderNo=10110031563244439364361, refundNo=refund10110031563244439364361, tradeNo=4200000353201907163645128652, refundAmount=14200, serviceCharge=-85, tradeTime=Wed Jul 17 23:42:26 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=0, 手续费=-0.85, 交易状态=REFUND, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=丹麦蓝罐 Kjeldsens 曲奇 908g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=SUCCESS, 退款类型=ORIGINAL, 退款金额=142, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563244439364361, 微信订单号=4200000353201907163645128652, 商户退款单号=refund10110031563244439364361, 微信退款单号=50000400972019071610644839459, merchant_income_charge=0}, createTime=Wed Jul 17 10:40:05 CST 2019), BillRefundLog(id=301, appId=501, payType=wx, billDate=20190716, orderNo=10110031563268210364365, refundNo=refund10110031563268210364365, tradeNo=4200000339201907165618278756, refundAmount=2950, serviceCharge=-18, tradeTime=Wed Jul 17 23:42:26 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=0, 手续费=-0.18, 交易状态=REFUND, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=雄鸡标 特级初榨橄榄油浸金枪鱼块 185g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=SUCCESS, 退款类型=ORIGINAL, 退款金额=29.5, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563268210364365, 微信订单号=4200000339201907165618278756, 商户退款单号=refund10110031563268210364365, 微信退款单号=50000400992019071610646993811, merchant_income_charge=0}, createTime=Wed Jul 17 10:40:05 CST 2019)]
2019-07-17 16:20:54,453 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: INSERT INTO pay_center3_bill_refund_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 16:20:54,455 DEBUG 7679 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 300(Integer), 501(String), wx(String), 20190716(String), 10110031563245163364362(String), refund10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), -85(Integer), 2019-07-17 23:42:26.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":0,"手续费":-0.85,"交易状态":"REFUND","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"SUCCESS","退款类型":"ORIGINAL","退款金额":142,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563245163364362","微信订单号":"4200000353201907162527638733","商户退款单号":"refund10110031563245163364362","微信退款单号":"50000500972019071610665371485","merchant_income_charge":0}(String), 2019-07-17 10:40:05.0(Timestamp), 299(Integer), 501(String), wx(String), 20190716(String), 10110031563244439364361(String), refund10110031563244439364361(String), 4200000353201907163645128652(String), 14200(Integer), -85(Integer), 2019-07-17 23:42:26.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":0,"手续费":-0.85,"交易状态":"REFUND","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"SUCCESS","退款类型":"ORIGINAL","退款金额":142,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563244439364361","微信订单号":"4200000353201907163645128652","商户退款单号":"refund10110031563244439364361","微信退款单号":"50000400972019071610644839459","merchant_income_charge":0}(String), 2019-07-17 10:40:05.0(Timestamp), 301(Integer), 501(String), wx(String), 20190716(String), 10110031563268210364365(String), refund10110031563268210364365(String), 4200000339201907165618278756(String), 2950(Integer), -18(Integer), 2019-07-17 23:42:26.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":0,"手续费":-0.18,"交易状态":"REFUND","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 特级初榨橄榄油浸金枪鱼块 185g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"SUCCESS","退款类型":"ORIGINAL","退款金额":29.5,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563268210364365","微信订单号":"4200000339201907165618278756","商户退款单号":"refund10110031563268210364365","微信退款单号":"50000400992019071610646993811","merchant_income_charge":0}(String), 2019-07-17 10:40:05.0(Timestamp)
2019-07-17 16:20:54,516  WARN 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-16T16:20:50.996] compare exception: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '300' for key 'PRIMARY'
### The error may involve com.intbee.payment.modules.trade.dao.BillRefundLogCachMapper.saveBatch-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO pay_center3_bill_refund_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time`)   VALUES                  (        ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?                )      ,         (        ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?                )      ,         (        ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?,         ?                )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '300' for key 'PRIMARY'
; Duplicate entry '300' for key 'PRIMARY'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '300' for key 'PRIMARY'
2019-07-17 16:20:54,516  INFO 7679 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-17 16:20:54,532  INFO 7679 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 16:20:54,533  INFO 7679 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 16:20:54,575  INFO 7679 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-07-17 16:21:49,354  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Starting BillDownloadTimerTest on lishihaideMac-mini.local with PID 7680 (started by zhenling in /Users/zhenling/Nesting/zc-service-pay)
2019-07-17 16:21:49,357  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : The following profiles are active: szdev
2019-07-17 16:21:52,029  INFO 7680 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.kafka.annotation.KafkaBootstrapConfiguration' of type [org.springframework.kafka.annotation.KafkaBootstrapConfiguration$$EnhancerBySpringCGLIB$$914928eb] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:21:52,384  INFO 7680 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.retry.annotation.RetryConfiguration' of type [org.springframework.retry.annotation.RetryConfiguration$$EnhancerBySpringCGLIB$$b35aaf8d] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:21:52,423  INFO 7680 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$bd971768] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-07-17 16:21:52,536  INFO 7680 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2019-07-17 16:21:52,768  INFO 7680 --- [           main] c.i.payment.common.config.PaymentConfig  : payment domain config: http://116.85.33.137:21999
2019-07-17 16:21:52,786  INFO 7680 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [503] alipay initialized: AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 16:21:52,809  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-503-app.p12]
2019-07-17 16:21:52,812  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:21:52,812  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [503] wx initialized: WxpayConfig(id=503, payType=null, tradeType=wap, remark=全球带-微信, key=6RPA3YLKonTECiHH9uDGbYw0MdJUK5QJ, appid=wxd86049a121654669, mchid=1505417821, certPath=classpath:cert/wx/apiclient_cert-503-app.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/503/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:21:52,813  INFO 7680 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=智蜂-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 16:21:52,814  INFO 7680 --- [           main] c.i.payment.common.config.AlipayConfig   : appid [101] alipay initialized: AlipayConfig(id=101, remark=抖音小程序-支付宝, mchid=2088221861486600, appid=2016052401436400, signType=RSA, environment=dev, privateKey=MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAJzAkjQpzJ34jaCSwhuIVWL+1cHBmtv8L5e/3ABufLB+23QqGHqXwpOYM25TAeHzzcjsFZi8s2sIcxADbZZrBZS+30S/DxzTEJlufoVYg4jPnfjwedKhcvfvr79iNSEFUTOxP04ESxOHoBIW+Ob57x01e/+la++CS22T2rmvPksvAgMBAAECgYAET181w/h2V4E9awufSi5e3HbwLuydI+ADIilgcalICRTrqsSlikq1WDgBzpJ8rgF4htVJL9cXGFJhnFaFDkhG9bxY2IZJmx9uVyJVOzc9kDpaYhsNiBe1RHfrst5wOs29p3T3tlt5z5ERSAK6FPzcA7YVzEIuH9U+0KY+Dk0P8QJBAMoT+KlORI71ckjhghLcQCs0UyWzSlcpTGzhah3CtmJGau0Uqc2banCh+xjFSYibB8Y/cEjnnEAu6miH3a0Uhf0CQQDGlGCz2h0b5Ydi47V8I58Xx+Q8ORZ52GS84jLGjvUdgXwqXVWbGVUfrP4e4BFoYwALNYbJ6No3sCrR9P8pyEebAkApB/MWlYDQMkA5UiiyIayZ2S8E2am/lvAgr4h3cIDN5ZRyfR6ZU/RB2HH+rphmt2vVsi3fb7/HPH92KBg3u5IVAkBSv0+Qgknw7vM8fOCKKxnHQg9UHQHFoitQHf3EiZuQQP2pdZ0PdT3oZiC6Yuo+EkrZYOOazUHpRKqDNNEC6ycTAkEAqCd9GrBrW7K5eJ9+kReD2Tad7jDEI49sAwrTrpQccYwFdYIsBD57KTSanjn1BsuOBxTXOu0Lw4EkaJjq0+NTOQ==, publicKey=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/alipay/refundNotify)
2019-07-17 16:21:52,814  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1367026602.p12]
2019-07-17 16:21:52,815  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:21:52,815  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=wap, remark=智蜂-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxf712db1e1042a294, mchid=1367026602, certPath=classpath:cert/wx/apiclient_cert-1367026602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:21:52,817  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-1429146602.p12]
2019-07-17 16:21:52,817  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:21:52,817  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [101] wx initialized: WxpayConfig(id=101, payType=null, tradeType=lite, remark=小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wxc9d0a70977ecf5fe, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-1429146602.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/101/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/101/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:21:52,818  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 16:21:52,819  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:21:52,819  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=wap, remark=高校通-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/wap/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:21:52,820  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile from [classpath:cert/wx/apiclient_cert-501-lite.p12]
2019-07-17 16:21:52,820  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : load wx certfile successful
2019-07-17 16:21:52,820  INFO 7680 --- [           main] c.i.payment.common.config.WxpayConfig    : appid [501] wx initialized: WxpayConfig(id=501, payType=null, tradeType=lite, remark=高校通小程序-微信, key=d195f111fd3bf436951b90973f0ccac8, appid=wx1e86ddc5b2485ab2, mchid=1429146602, certPath=classpath:cert/wx/apiclient_cert-501-lite.p12, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/501/wx/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/wx/lite/501/refundNotify, reportURL=https://api.mch.weixin.qq.com/payitil/report, connectTimeout=6000, readTimeout=8000)
2019-07-17 16:21:53,093  INFO 7680 --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-07-17 16:21:54,134  INFO 7680 --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-07-17 16:21:54,791  INFO 7680 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayServiceImpl$$EnhancerBySpringCGLIB$$92143331
2019-07-17 16:21:54,805  INFO 7680 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : registe PaymentService: wx -> class com.intbee.payment.modules.trade.service.impl.WxServiceImpl$$EnhancerBySpringCGLIB$$ad7a00ec
2019-07-17 16:21:54,983  INFO 7680 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: alipay -> class com.intbee.payment.modules.trade.service.impl.AlipayBillServiceImpl
2019-07-17 16:21:54,984  INFO 7680 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : registe BillService: wx -> class com.intbee.payment.modules.trade.service.impl.WxBillServiceImpl
2019-07-17 16:21:56,529  INFO 7680 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 5 endpoint(s) beneath base path '/actuator'
2019-07-17 16:21:57,544  INFO 7680 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-07-17 16:21:58,179  INFO 7680 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'
2019-07-17 16:21:59,071  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimerTest  : Started BillDownloadTimerTest in 10.589 seconds (JVM running for 11.762)
2019-07-17 16:21:59,604  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload start...
2019-07-17 16:21:59,777 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:21:59,844 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190715(String)
2019-07-17 16:21:59,901 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:21:59,912  WARN 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-15T16:21:59.606] parse exception: 账单[20190715]已解析
2019-07-17 16:21:59,938 ERROR 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$6567364.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:21:59,945 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:21:59,946 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190715(String)
2019-07-17 16:21:59,955 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:21:59,963  WARN 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-15T16:21:59.606] parse exception: 账单[20190715]已解析
2019-07-17 16:21:59,964 ERROR 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$6567364.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:21:59,971 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:21:59,972 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 16:21:59,976 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:21:59,986  INFO 7680 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 16 16:21:59 CST 2019)
2019-07-17 16:21:59,987  INFO 7680 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=503, payType=alipay, billDate=Tue Jul 16 16:21:59 CST 2019)
2019-07-17 16:21:59,987  INFO 7680 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : getDownloadBillUrl=: orderNo=503,appId=alipay,config=AlipayConfig(id=503, remark=全球带-支付宝, mchid=2088221861802194, appid=2018042660058300, signType=RSA2, environment=dev, privateKey=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC1CJrFUDa7IPp6gCK6vbAIlzMDmQc43LWRzK8wATEBE/EqzR/Di4GgNK58Ufe5jXBijvD76b62yaXE+WrFXYgG6CfOZV05DtToElm0fcFF3CYfn9K2f5ixvvu3GVmSO06iZah6HFWdGvj0w2YgTycCMREYlibLNw8zVD2kvzOwdMv/3+Nx0rO6hqntw11/zAFFzyPUZRwHWd89MD9MI1mbdW44FdKybc8Ffm51QbTAt2/uvDmk6YojZjiuptgiPdM1I1x5w58oXglFhxdoz0tvke8OMlXy7vERzbuIbOC1XX8nX7okxqIM3G+jVJ32B9qiLRfEJ+zbv418R5ehznX5AgMBAAECggEARfdyYcoTrRUc2ZWGVqgTTe6p770IFojuv8/c8W+0cdc0QTeQDDJxweo6eZ/wX01z3xOhvarkY57hq5Q+GNOCTDETmWiBtBiwXpUhCGoF9asVLOnHNXNxH1lRzb1Fagfz5z3k9HTY/eQ7zdVrNheBWw59rgPyMF4ySMNJI9Al+Q8zpBfx0WCO5HzkxquGPb8Vns/chQTq5anFjNL+7OP6MSiJ5PCFxDfhkcRHsPzDZ4/yVngmwXa1/KyBQ2KSjGU+Xilaabt6VX3H0eGoqhrFtKLOKsBTJDMZTGrOr7ZI6MMT4WE18bZ9LIvVezn7sCRZRXst1RIu2VQst8FBZiLGNQKBgQDva/XPDOovJNKVcVOwhNpPcT3iP6Lr+3Cw4xWMLsFPAT6lCqzvJdWj4+/D6htO98iDnBgdz4gpj5e65OFtEVvwGveN5HgVx+AEgwUuhCbv9zU9DJZXhv/jCeWkXUqABGej6DvSoLdpHLEYLmDh5Mpt7tKJmtnlvVFJII4GfNi0bwKBgQDBkaT9Occm6ad+gLLG5E+vm5wROv5ySCl4MAiR/DZ6vPRXiiWzV2o7/jwgu2VrvBBEYX5OaazxU2j1CBUaOG7hze/Ysw0YT3DLpgqUwT+ZqhqBswhaG2Dvc7eBUSWgOSwlCxQF410wW2JajImAO5FRjhCCIanr4BcvSTLzTK3AFwKBgHoq643QODsAHhg1cI/U6pS44uvsrtSdQ75u0VLrlKYcq3uJu/53ntD3ASRF89NSqlVFtCSZ/g++/pxWKBUAU5psGD+mAgSTLeL/fAhlVH0D9n2FS72z3CRcq3o4REiYds3zNXtfmNcg1djR6Yu6s/Ruda3TfzY0aSLYYsA6ulUvAoGAKAqt26g5F0acXGHZGaWfCk+hUDso6ZEd6vvcuf43ctplnTo5pEi/9Bsaaxb42vlzUAHu89+OY/mCK7X5T4w++7zzEZuwaMf+KFJ3u9/h/TKf+xaC8sjZG4+PdVPI+cT56cvJ35Hx9A/jX6HUy88Gt50wswqtsNqRUTnOLWA+TQ8CgYEAueLJq01HEPY2ts0Cc08VG6QAz8bKLgc2KZZMXOUuRV/SRBXtD4xiPhR4vWlrPePWwHrrwTAmBj8P7uWVL3RQmwJ06W+DCaMG/DhN6kyCuf3A1+w32AR6P6vgsTIh5LSRJUGwZsXdtMyE7MldLM3kEgO7SWM4/bVRA2vwxjvfCHM=, publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0vzt4C5hkRx2RyRpajy6vO5XoehBeljtXbRPRMYTtGl9sGZraJFF+uQMIjhI8vzEl5w+gRxTmqSeeX8vZLhhzNDb+4fZQHrIFPVEpXuekL2G3JhQwnbjTkrdE/4dRDHvoNVp0o2sSFqeHdT9JjXieGwmvUqcU0sOJ81Wa1aijmcM1gk1yHtBHIsxJqJO+XFOieKZU1gS/K4CdpdBm7i5S+ejLW708MkAR7vER1s/t+HENDMAmA6pFqaS3xiRCarE5NVw+mYyWBmx5TQB2XGCNsdKelsi9H00ve3uzFLe4uiZtmTvJNueHhKhaFn8w/L0AzVsDVZBaXqjCv63tOvspQIDAQAB, payNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/payNotify, refundNotifyUrl=http://116.85.33.137:21999/api/trade/payment/503/alipay/refundNotify)
2019-07-17 16:22:00,043  INFO 7680 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 request: {"api_version":"1.0","need_encrypt":false,"biz_model":{"bill_date":"2019-07-16","bill_type":"trade"},"api_method_name":"alipay.data.dataservice.bill.downloadurl.query","text_params":{},"response_class":"com.alipay.api.response.AlipayDataDataserviceBillDownloadurlQueryResponse"}
2019-07-17 16:22:00,472 ERROR 7680 --- [           main] sdk.biz.err                              : ErrorScene^_^40004^_^isp.bill_not_exist^_^null^_^Mac OS X^_^2019-07-17 16:22:00^_^ProtocalMustParams:charset=UTF-8&method=alipay.data.dataservice.bill.downloadurl.query&sign=j/mRHTTOKuZSPJgLvr255117hBFVpCS/kk/L17UyFJ+3t5tQJXLdEe2BagPuZPWicKCGtsfukKQDLaOTIWSoL7b0uExaDQCW/HlM9Ft5185P84UbvGJfROU8Ph9LMQCKxGQq3v2cE5TKa40aOGevoabVkxY6hdKFvJ1xLzjBAnsDGfa34VX1DIyfR+63HHmsN6C3UemgfdlfSGw6jpSq9kawEgNdjezMF0r2DPqmljeCs8rghwC7w/ZhHn/mznScmtDNAWgxHM5tIv2OlsrD20H2Duq6nv7799LmmabeJZ7KqTeYzsAQFzax16Reztnlzny3pGLcomHiuzK/JwrPpw==&version=1.0&app_id=2018042660058300&sign_type=RSA2&timestamp=2019-07-17 16:22:00^_^ProtocalOptParams:alipay_sdk=alipay-sdk-java-3.3.49.ALL&format=json^_^ApplicationParams:biz_content={"bill_date":"2019-07-16","bill_type":"trade"}^_^Body:{"alipay_data_dataservice_bill_downloadurl_query_response":{"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在"},"sign":"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw=="}^_^51ms,358ms,19ms
2019-07-17 16:22:00,475  INFO 7680 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : log-id downloadBill-20190716 response: {"code":"40004","msg":"Business Failed","sub_code":"isp.bill_not_exist","sub_msg":"账单不存在","body":"{\"alipay_data_dataservice_bill_downloadurl_query_response\":{\"code\":\"40004\",\"msg\":\"Business Failed\",\"sub_code\":\"isp.bill_not_exist\",\"sub_msg\":\"账单不存在\"},\"sign\":\"Gq+kjxgtcIxPkqPaWE44LRxNLhZgQQ9URlgEk4FhMivzPrH/I8kvXpJddhQqUof66/u6AJGeyIUxWlhjJH6JGubeRpTPS+vGcSd7qndlX47YKvxe4PIrRpxiM95dPkXrtdDVkGW4y6vDOj8Wg3Ullh/Q2PVXmNa9XxJ8ka5iuUtNA+Y1/t/QvlUcf7QI35IqkQLHZrht30LNsDh20++fT65gb8FV4nVdbvvkiX0yiAiZVAW90o/EWSdYktEIMGfH5wYBqLhQRMATtZeQ49Ya3lj3Ja+fnCNh92WNciuFoZm9Uk4wCnyJ5k4SO06FlOqwpX0s0X7ePyw+IKhDEciSOw==\"}","params":{"biz_content":"{\"bill_date\":\"2019-07-16\",\"bill_type\":\"trade\"}"},"success":false,"error_code":"40004"}
2019-07-17 16:22:00,475  WARN 7680 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: Business Failed # isp.bill_not_exist # 账单不存在
2019-07-17 16:22:00,478 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:22:00,481 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), alipay(String), 20190716(String), null, Business Failed # isp.bill_not_exist # 账单不存在(String)
2019-07-17 16:22:00,485 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:22:00,519  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-16T16:21:59.606] parse successful
2019-07-17 16:22:00,522 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:22:00,523 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190716(String), alipay(String)
2019-07-17 16:22:00,528 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:22:00,530 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:00,531 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 503(String)
2019-07-17 16:22:00,535 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:22:00,539 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:22:00,540 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), alipay20190716(String)
2019-07-17 16:22:00,544 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:22:00,546 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:00,547 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 16:22:00,553 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:22:00,554 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:22:00,557 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), alipay20190716(String), alipay(String), 20190716(String), 2019-07-17 16:22:00.554(Timestamp)
2019-07-17 16:22:00,563 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:22:00,565 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:00,567 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), alipay(String), 20190716(String)
2019-07-17 16:22:00,573 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:22:00,574  INFO 7680 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: alipay, date: 2019-07-16T16:21:59.606 - result is Null
2019-07-17 16:22:00,612  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 503, date:2019-07-16T16:21:59.606] createCompareBatch successful
2019-07-17 16:22:00,614 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:00,615 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 16:22:00,618 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:22:00,619  INFO 7680 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 16 16:21:59 CST 2019)
2019-07-17 16:22:00,620  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=503, payType=wx, billDate=Tue Jul 16 16:21:59 CST 2019)
2019-07-17 16:22:00,628  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 request: {nonce_str=9vKAK3JhXndh5rmhJKtNVO8xEN8cfkcD, bill_date=20190716, appid=wxd86049a121654669, sign=08436F0978D6E61266F33F3B9DBE012033ED37A3DBB277515324984FFCB4AA17, bill_type=ALL, mch_id=1505417821, sign_type=HMAC-SHA256}
2019-07-17 16:22:01,129  INFO 7680 --- [           main] wxpay java sdk                           : report worker num: 6
2019-07-17 16:22:01,132  INFO 7680 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,9vKAK3JhXndh5rmhJKtNVO8xEN8cfkcD,1563351721,456,api.mch.weixin.qq.com,true,6000,8000,0,0,0,08487B8006D64C7ECCDEBD0D254183E295407BDB445D5AEC1487FC1AB31686DB
2019-07-17 16:22:01,132  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : <xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-17 16:22:01,132  INFO 7680 --- [pool-2-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,9vKAK3JhXndh5rmhJKtNVO8xEN8cfkcD,1563351721,456,api.mch.weixin.qq.com,true,6000,8000,0,0,0,08487B8006D64C7ECCDEBD0D254183E295407BDB445D5AEC1487FC1AB31686DB
2019-07-17 16:22:01,132  INFO 7680 --- [pool-2-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 16:22:01,132  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 response content size: 149
2019-07-17 16:22:01,133  INFO 7680 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[FAIL]]></return_code>
<return_msg><![CDATA[No Bill Exist]]></return_msg>
<error_code><![CDATA[20002]]></error_code>
</xml>
2019-07-17 16:22:01,136  INFO 7680 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-17 16:22:01,136  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id downloadBill-20190716 response: {return_msg=No Bill Exist, error_code=20002, return_code=FAIL}
2019-07-17 16:22:01,136  WARN 7680 --- [           main] c.i.p.m.t.service.impl.BillServiceProxy  : bill-file not exists: No Bill Exist
2019-07-17 16:22:01,137 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:22:01,137 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 503(String), wx(String), 20190716(String), null, No Bill Exist(String)
2019-07-17 16:22:01,143 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:22:01,169  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-16T16:21:59.606] parse successful
2019-07-17 16:22:01,170 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:22:01,171 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 503(String), 20190716(String), wx(String)
2019-07-17 16:22:01,175 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:22:01,176 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:01,176 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 503(String)
2019-07-17 16:22:01,180 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:22:01,183 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:22:01,184 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 503(String), wx20190716(String)
2019-07-17 16:22:01,189 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:22:01,190 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,192 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 16:22:01,200 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:22:01,202 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:22:01,203 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 503(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 16:22:01.202(Timestamp)
2019-07-17 16:22:01,207 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:22:01,208 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,210 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 503(String), wx(String), 20190716(String)
2019-07-17 16:22:01,216 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:22:01,217  INFO 7680 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 503, payType: wx, date: 2019-07-16T16:21:59.606 - result is Null
2019-07-17 16:22:01,244  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 503, date:2019-07-16T16:21:59.606] createCompareBatch successful
2019-07-17 16:22:01,247 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,248 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190715(String)
2019-07-17 16:22:01,252 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:22:01,257  WARN 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-15T16:21:59.606] parse exception: 账单[20190715]已解析
2019-07-17 16:22:01,258 ERROR 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$6567364.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:52)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:22:01,268 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,270 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190715(String)
2019-07-17 16:22:01,276 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:22:01,284  WARN 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-15T16:21:59.606] parse exception: 账单[20190715]已解析
2019-07-17 16:22:01,285 ERROR 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$6567364.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:22:01,288 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,288 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:22:01,291 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:22:01,291  INFO 7680 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 16 16:21:59 CST 2019)
2019-07-17 16:22:01,291  INFO 7680 --- [           main] c.i.p.m.t.s.impl.AlipayServiceImpl       : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=101, payType=alipay, billDate=Tue Jul 16 16:21:59 CST 2019)
2019-07-17 16:22:01,384 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,384 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:22:01,388 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:22:01,390 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 16:22:01,403 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190716(String), 0(Integer), 0(Integer), 0(Integer), 0(Integer), 0(Integer), {"门店编号":"合计","交易订单总笔数":7,"退款订单总笔数":3,"订单金额（元）":578.01,"商家实收（元）":578.01,"服务费（元）":-9.32,"实收净额（元）":568.69}(String), null
2019-07-17 16:22:01,408 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 16:22:01,409 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,410 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:22:01,418 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:22:01,419 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:22:01,420 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), alipay(String), 20190716(String), null, null
2019-07-17 16:22:01,424 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:22:01,478  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-16T16:21:59.606] parse successful
2019-07-17 16:22:01,479 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:22:01,480 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), alipay(String)
2019-07-17 16:22:01,482 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:22:01,483 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:01,484 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 101(String)
2019-07-17 16:22:01,487 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:22:01,490 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:22:01,490 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), alipay20190716(String)
2019-07-17 16:22:01,493 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:22:01,496 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,498 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:22:01,501 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:22:01,502 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:22:01,503 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), alipay20190716(String), alipay(String), 20190716(String), 2019-07-17 16:22:01.502(Timestamp)
2019-07-17 16:22:01,506 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:22:01,507 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,508 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), alipay(String), 20190716(String)
2019-07-17 16:22:01,537 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 16:22:01,541 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:22:01,542 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), alipay(String)
2019-07-17 16:22:01,548 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:22:01,590 DEBUG 7680 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 16:22:01,591 DEBUG 7680 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-17 16:22:01,594 DEBUG 7680 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:22:01,595 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:01,596 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), alipay(String), 101(String)
2019-07-17 16:22:01,598 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:22:01,600 DEBUG 7680 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-17 16:22:01,601 DEBUG 7680 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), alipay(String), 101(String)
2019-07-17 16:22:01,607 DEBUG 7680 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:22:01,608  INFO 7680 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 101, payType: alipay, date: 2019-07-16T16:21:59.606 - result paysCount: 0, refundsCount: 0
2019-07-17 16:22:01,644  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : alipay-bill [appId: 101, date:2019-07-16T16:21:59.606] createCompareBatch successful
2019-07-17 16:22:01,647 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,648 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:22:01,651 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:22:01,652  INFO 7680 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 16 16:21:59 CST 2019)
2019-07-17 16:22:01,652  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=101, payType=wx, billDate=Tue Jul 16 16:21:59 CST 2019)
2019-07-17 16:22:01,653  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_101_20190716.csv] already exists, return local file
2019-07-17 16:22:01,659 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:01,661 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563214543366441(String), wx(String), 101(String)
2019-07-17 16:22:01,665 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:01,666 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:22:01,669 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563214543366441(String), 4200000344201907162933352469(String), 9900(Integer), 59(Integer), null, {"merchant_income_charge":99.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907162933352469","商户订单号":"10110011563214543366441","用户标识":"oF9zhvpC02_XpCRvUXuT3D-2heT0","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"CFT","货币种类":"CNY","总金额":99.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"【618特惠】VENUS MARBLE9色复古油画眼影盘2019新款","手续费":0.59000,"费率":"0.60%"}(String), 2019-07-17 16:22:01.659(Timestamp)
2019-07-17 16:22:01,674 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:22:01,675 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:01,675 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563261630366450(String), wx(String), 101(String)
2019-07-17 16:22:01,678 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:01,678 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:22:01,680 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563261630366450(String), 4200000344201907160777817734(String), 24900(Integer), 149(Integer), null, {"merchant_income_charge":249.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000344201907160777817734","商户订单号":"10110011563261630366450","用户标识":"oF9zhvlIDys9Hq4IlTyvLIB4A4cQ","交易类型":"MWEB","交易状态":"SUCCESS","付款银行":"BOC_DEBIT","货币种类":"CNY","总金额":249.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"CHARLES＆KEITH 链条编织时尚百搭单肩斜挎包网红小包","手续费":1.49000,"费率":"0.60%"}(String), 2019-07-17 16:22:01.675(Timestamp)
2019-07-17 16:22:01,684 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:22:01,685 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:01,685 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110011563289727366454(String), wx(String), 101(String)
2019-07-17 16:22:01,688 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:01,689 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:22:01,689 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 101(String), wx(String), 20190716(String), 10110011563289727366454(String), 4200000339201907161958040759(String), 53000(Integer), 318(Integer), null, {"merchant_income_charge":530.00,"公众账号ID":"wxf712db1e1042a294","商户号":"1367026602","子商户号":"0","微信订单号":"4200000339201907161958040759","商户订单号":"10110011563289727366454","用户标识":"oF9zhvl3Tth6xpwiRVKT42BZYyag","交易类型":"JSAPI","交易状态":"SUCCESS","付款银行":"ICBC_DEBIT","货币种类":"CNY","总金额":530.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"日本BEAUTY BAR美容棒24K美容黄金棒 瘦脸神器震动提拉紧致按摩仪","手续费":3.18000,"费率":"0.60%"}(String), 2019-07-17 16:22:01.685(Timestamp)
2019-07-17 16:22:01,694 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:22:01,695 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,696 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:22:01,699 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:22:01,700 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 16:22:01,704 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190716(String), 3(Integer), 0(Integer), 87800(Integer), 0(Integer), 5(Integer), {"总交易单数":3,"总交易额":878.00,"总退款金额":0.00,"手续费总金额":5.26000}(String), null
2019-07-17 16:22:01,708 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 16:22:01,709 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,710 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:22:01,714 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:22:01,715 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:22:01,716 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 101(String), wx(String), 20190716(String), null, null
2019-07-17 16:22:01,720 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:22:01,753  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-16T16:21:59.606] parse successful
2019-07-17 16:22:01,754 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:22:01,754 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), wx(String)
2019-07-17 16:22:01,763 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 16:22:01,764 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:22:01,765 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563214543366441(String), wx(String)
2019-07-17 16:22:01,768 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:01,769  INFO 7680 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563214543366441)
2019-07-17 16:22:01,770  INFO 7680 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563214543366441,payType=wx,appId=101
2019-07-17 16:22:01,770  INFO 7680 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563214543366441
2019-07-17 16:22:01,771 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:22:01,772 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563214543366441(String), wx(String)
2019-07-17 16:22:01,776 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:22:01,777 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:22:01,778 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563214543366441(String), wx(String)
2019-07-17 16:22:01,783 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:22:01,784  INFO 7680 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563214543366441
2019-07-17 16:22:01,785 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:01,786 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563214543366441(String), wx(String), 101(String)
2019-07-17 16:22:01,789 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:01,790 ERROR 7680 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563214543366441] exception: not find PayRequestLog record by [orderNo:10110011563214543366441,payType:wx] 
2019-07-17 16:22:01,791 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:22:01,791 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563261630366450(String), wx(String)
2019-07-17 16:22:01,795 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:01,795  INFO 7680 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563261630366450)
2019-07-17 16:22:01,796  INFO 7680 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563261630366450,payType=wx,appId=101
2019-07-17 16:22:01,796  INFO 7680 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563261630366450
2019-07-17 16:22:01,796 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:22:01,797 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563261630366450(String), wx(String)
2019-07-17 16:22:01,801 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:22:01,802 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:22:01,803 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563261630366450(String), wx(String)
2019-07-17 16:22:01,807 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:22:01,807  INFO 7680 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563261630366450
2019-07-17 16:22:01,808 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:01,809 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563261630366450(String), wx(String), 101(String)
2019-07-17 16:22:01,812 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:01,813 ERROR 7680 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563261630366450] exception: not find PayRequestLog record by [orderNo:10110011563261630366450,payType:wx] 
2019-07-17 16:22:01,814 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:22:01,814 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 101(String), 10110011563289727366454(String), wx(String)
2019-07-17 16:22:01,818 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:01,820  INFO 7680 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=101, tradeType=null, payType=wx, orderNo=10110011563289727366454)
2019-07-17 16:22:01,820  INFO 7680 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : getTradeType request:  orderNo=10110011563289727366454,payType=wx,appId=101
2019-07-17 16:22:01,821  INFO 7680 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======start ,getPayOrderNo method, orderNo:10110011563289727366454
2019-07-17 16:22:01,822 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_notify where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:22:01,822 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563289727366454(String), wx(String)
2019-07-17 16:22:01,826 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:22:01,828 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where order_no like CONCAT(?,'%') and pay_type = ? 
2019-07-17 16:22:01,830 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : ==> Parameters: 10110011563289727366454(String), wx(String)
2019-07-17 16:22:01,834 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNoLike          : <==      Total: 0
2019-07-17 16:22:01,835  INFO 7680 --- [           main] c.i.p.m.t.service.impl.TradeServiceImpl  : =======end ,getPayOrderNo method,noList return orderNo:10110011563289727366454
2019-07-17 16:22:01,835 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, channel, order_no, amount, subject, sign_type, client_ip, extra, create_time from pay_center3_pay_request where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:01,835 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 10110011563289727366454(String), wx(String), 101(String)
2019-07-17 16:22:01,838 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:01,839 ERROR 7680 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : payQuery [10110011563289727366454] exception: not find PayRequestLog record by [orderNo:10110011563289727366454,payType:wx] 
2019-07-17 16:22:01,839 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:01,840 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 101(String)
2019-07-17 16:22:01,843 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 0
2019-07-17 16:22:01,847 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:22:01,848 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 101(String), wx20190716(String)
2019-07-17 16:22:01,851 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:22:01,852 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,853 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:22:01,856 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:22:01,857 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:22:01,859 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 101(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 16:22:01.857(Timestamp)
2019-07-17 16:22:01,867 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:22:01,869 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:01,871 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 101(String), wx(String), 20190716(String)
2019-07-17 16:22:01,878 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 16:22:01,880 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:22:01,881 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 101(String), 20190716(String), wx(String)
2019-07-17 16:22:01,887 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 16:22:01,888 DEBUG 7680 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 16:22:01,890 DEBUG 7680 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 101(String)
2019-07-17 16:22:01,893 DEBUG 7680 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:22:01,910 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 16:22:01,918 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2105(Integer), 101(String), wx(String), 20190716(String), 10110011563214543366441(String), 4200000344201907162933352469(String), 9900(Integer), 59(Integer), 2019-07-18 05:21:12.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":99,"手续费":0.59,"交易状态":"SUCCESS","交易类型":"MWEB","付款银行":"CFT","商品名称":"【618特惠】VENUS MARBLE9色复古油画眼影盘2019新款","子商户号":"0","用户标识":"oF9zhvpC02_XpCRvUXuT3D-2heT0","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563214543366441","微信订单号":"4200000344201907162933352469","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":99}(String), 2019-07-17 16:22:02.0(Timestamp), 2106(Integer), 101(String), wx(String), 20190716(String), 10110011563261630366450(String), 4200000344201907160777817734(String), 24900(Integer), 149(Integer), 2019-07-18 05:21:12.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":249,"手续费":1.49,"交易状态":"SUCCESS","交易类型":"MWEB","付款银行":"BOC_DEBIT","商品名称":"CHARLES＆KEITH 链条编织时尚百搭单肩斜挎包网红小包","子商户号":"0","用户标识":"oF9zhvlIDys9Hq4IlTyvLIB4A4cQ","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563261630366450","微信订单号":"4200000344201907160777817734","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":249}(String), 2019-07-17 16:22:02.0(Timestamp), 2107(Integer), 101(String), wx(String), 20190716(String), 10110011563289727366454(String), 4200000339201907161958040759(String), 53000(Integer), 318(Integer), 2019-07-18 05:21:12.0(Timestamp), {"费率":"0.60%","商户号":"1367026602","总金额":530,"手续费":3.18,"交易状态":"SUCCESS","交易类型":"JSAPI","付款银行":"ICBC_DEBIT","商品名称":"日本BEAUTY BAR美容棒24K美容黄金棒 瘦脸神器震动提拉紧致按摩仪","子商户号":"0","用户标识":"oF9zhvl3Tth6xpwiRVKT42BZYyag","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wxf712db1e1042a294","商户订单号":"10110011563289727366454","微信订单号":"4200000339201907161958040759","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":530}(String), 2019-07-17 16:22:02.0(Timestamp)
2019-07-17 16:22:02,079  WARN 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 101, date:2019-07-16T16:21:59.606] compare exception: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '10110011563214543366441-101-wx' for key 'idx_oNo_aId_pType'
### The error may involve com.intbee.payment.modules.trade.dao.BillPayLogCachMapper.saveBatch-Inline
### The error occurred while setting parameters
### SQL: insert into pay_center3_bill_pay_log_cach      (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`)      values                (        ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?         )           ,         (        ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?         )           ,         (        ?,         ?,         ?,         ?,         ?,         ?,        ?,         ?,         ?,         ?,         ?         )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '10110011563214543366441-101-wx' for key 'idx_oNo_aId_pType'
; Duplicate entry '10110011563214543366441-101-wx' for key 'idx_oNo_aId_pType'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '10110011563214543366441-101-wx' for key 'idx_oNo_aId_pType'
2019-07-17 16:22:02,082 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:02,083 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190715(String)
2019-07-17 16:22:02,086 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:22:02,092  WARN 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-15T16:21:59.606] parse exception: 账单[20190715]已解析
2019-07-17 16:22:02,093 ERROR 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : parseAndCompare
java.lang.IllegalStateException: 账单[20190715]已解析
	at org.springframework.util.Assert.state(Assert.java:73)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy.parse(BillServiceProxy.java:89)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$FastClassBySpringCGLIB$$ccc7c08e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at com.intbee.payment.modules.trade.service.impl.BillServiceProxy$$EnhancerBySpringCGLIB$$6567364.parse(<generated>)
	at com.intbee.payment.timer.BillDownloadTimer.parseAndCompare(BillDownloadTimer.java:93)
	at com.intbee.payment.timer.BillDownloadTimer.billDownloadTask(BillDownloadTimer.java:55)
	at com.intbee.payment.timer.BillDownloadTimerTest.billDownloadTask(BillDownloadTimerTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)
2019-07-17 16:22:02,096 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:02,097 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:22:02,101 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:22:02,102  INFO 7680 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request downloadBill: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 16 16:21:59 CST 2019)
2019-07-17 16:22:02,102  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute downloadBill downloadBill-20190716: DownloadBillRequestVO(appId=501, payType=wx, billDate=Tue Jul 16 16:21:59 CST 2019)
2019-07-17 16:22:02,102  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : file [/Users/zhenling/Nesting/zc-service-pay/./bill/wx_501_20190716.csv] already exists, return local file
2019-07-17 16:22:02,104 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:02,110 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563265944364364(String), wx(String), 501(String)
2019-07-17 16:22:02,114 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:02,114 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:22:02,115 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563265944364364(String), 4200000358201907161857178396(String), 2421(Integer), 15(Integer), null, {"merchant_income_charge":24.21,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000358201907161857178396","商户订单号":"10110031563265944364364","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":24.21,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"雄鸡标 淡椰浆 270ml","手续费":0.15000,"费率":"0.60%"}(String), 2019-07-17 16:22:02.104(Timestamp)
2019-07-17 16:22:02,120 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:22:02,121 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:02,121 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563245163364362(String), wx(String), 501(String)
2019-07-17 16:22:02,125 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:02,126 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:22:02,130 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), 85(Integer), null, {"merchant_income_charge":142.00,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000353201907162527638733","商户订单号":"10110031563245163364362","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":142.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","手续费":0.85000,"费率":"0.60%"}(String), 2019-07-17 16:22:02.121(Timestamp)
2019-07-17 16:22:02,140 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:22:02,141 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:02,142 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563244439364361(String), wx(String), 501(String)
2019-07-17 16:22:02,146 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:02,147 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:22:02,148 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563244439364361(String), 4200000353201907163645128652(String), 14200(Integer), 85(Integer), null, {"merchant_income_charge":142.00,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000353201907163645128652","商户订单号":"10110031563244439364361","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":142.00,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","手续费":0.85000,"费率":"0.60%"}(String), 2019-07-17 16:22:02.141(Timestamp)
2019-07-17 16:22:02,153 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:22:02,154 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where order_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:02,155 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : ==> Parameters: 10110031563268210364365(String), wx(String), 501(String)
2019-07-17 16:22:02,158 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:02,158 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==>  Preparing: INSERT INTO pay_center3_bill_pay_log (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
2019-07-17 16:22:02,159 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : ==> Parameters: null, 501(String), wx(String), 20190716(String), 10110031563268210364365(String), 4200000339201907165618278756(String), 2950(Integer), 18(Integer), null, {"merchant_income_charge":29.50,"公众账号ID":"wx9b5cb757426e00d9","商户号":"1429146602","子商户号":"0","微信订单号":"4200000339201907165618278756","商户订单号":"10110031563268210364365","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","交易类型":"NATIVE","交易状态":"SUCCESS","付款银行":"ABC_DEBIT","货币种类":"CNY","总金额":29.50,"微信退款单号":"0","商户退款单号":"0","退款金额":0.00,"退款类型":"","退款状态":"","商品名称":"雄鸡标 特级初榨橄榄油浸金枪鱼块 185g","手续费":0.18000,"费率":"0.60%"}(String), 2019-07-17 16:22:02.154(Timestamp)
2019-07-17 16:22:02,164 DEBUG 7680 --- [           main] c.i.p.m.trade.dao.BillPayLogMapper.save  : <==    Updates: 1
2019-07-17 16:22:02,165 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:02,166 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563244439364361(String), wx(String), 501(String)
2019-07-17 16:22:02,170 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 16:22:02,171 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:02,172 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563245163364362(String), wx(String), 501(String)
2019-07-17 16:22:02,176 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 16:22:02,177 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where refund_no = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:02,177 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : ==> Parameters: refund10110031563268210364365(String), wx(String), 501(String)
2019-07-17 16:22:02,182 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByRefundNo             : <==      Total: 1
2019-07-17 16:22:02,183 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:02,184 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:22:02,187 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 0
2019-07-17 16:22:02,187 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_count_log (`id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, `income`, ?, ?) 
2019-07-17 16:22:02,188 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190716(String), 4(Integer), 3(Integer), 33771(Integer), 31350(Integer), 0(Integer), {"总交易单数":7,"总交易额":337.71,"总退款金额":313.50,"手续费总金额":0.15000}(String), null
2019-07-17 16:22:02,192 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.save    : <==    Updates: 1
2019-07-17 16:22:02,193 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:02,193 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:22:02,196 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 0
2019-07-17 16:22:02,196 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==>  Preparing: INSERT INTO pay_center3_bill_parse_log (id, app_id, pay_type, bill_date, create_time, remark) VALUES (?, ?, ?, ?, ?, ?) 
2019-07-17 16:22:02,197 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : ==> Parameters: null, 501(String), wx(String), 20190716(String), null, null
2019-07-17 16:22:02,200 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.save    : <==    Updates: 1
2019-07-17 16:22:02,253  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-16T16:21:59.606] parse successful
2019-07-17 16:22:02,255 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:22:02,255 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190716(String), wx(String)
2019-07-17 16:22:02,263 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-17 16:22:02,264 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:22:02,265 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563265944364364(String), wx(String)
2019-07-17 16:22:02,274 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 1
2019-07-17 16:22:02,274 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:22:02,275 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563245163364362(String), wx(String)
2019-07-17 16:22:02,277 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:02,282  INFO 7680 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563245163364362)
2019-07-17 16:22:02,286  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563245163364362: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563245163364362)
2019-07-17 16:22:02,287  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563245163364362 request: {out_trade_no=10110031563245163364362}
2019-07-17 16:22:02,547  INFO 7680 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,7FdO5nf3y8Zv5BLnrJRQzunl9nMmrB27,1563351722,257,api.mch.weixin.qq.com,true,6000,8000,0,0,0,7D122C68326F275A2F721FA604CA5214316F19E9041C9469AECBFE3E6B9EA6A3
2019-07-17 16:22:02,547  INFO 7680 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[a1Ky62L5blcfDDHi]]></nonce_str>
<sign><![CDATA[D36F5A770FDB69990B6654439BFAD08EF424ADE57AB8D28A4709432786EEDE82]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>14200</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000353201907162527638733]]></transaction_id>
<out_trade_no><![CDATA[10110031563245163364362]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716104640]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>14200</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 16:22:02,547  INFO 7680 --- [pool-3-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,7FdO5nf3y8Zv5BLnrJRQzunl9nMmrB27,1563351722,257,api.mch.weixin.qq.com,true,6000,8000,0,0,0,7D122C68326F275A2F721FA604CA5214316F19E9041C9469AECBFE3E6B9EA6A3
2019-07-17 16:22:02,547  INFO 7680 --- [pool-3-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 16:22:02,550  INFO 7680 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000353201907162527638733, nonce_str=a1Ky62L5blcfDDHi, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=D36F5A770FDB69990B6654439BFAD08EF424ADE57AB8D28A4709432786EEDE82, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563245163364362, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716104640, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:22:02,550  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563245163364362 response: {transaction_id=4200000353201907162527638733, nonce_str=a1Ky62L5blcfDDHi, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=D36F5A770FDB69990B6654439BFAD08EF424ADE57AB8D28A4709432786EEDE82, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563245163364362, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716104640, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:22:02,555 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:22:02,556 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563244439364361(String), wx(String)
2019-07-17 16:22:02,558 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:02,559  INFO 7680 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563244439364361)
2019-07-17 16:22:02,561  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563244439364361: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563244439364361)
2019-07-17 16:22:02,561  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563244439364361 request: {out_trade_no=10110031563244439364361}
2019-07-17 16:22:02,825  INFO 7680 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,7iHAlpdHfF5UShBMkjLMZ8MIPjyLrCkK,1563351722,261,api.mch.weixin.qq.com,true,6000,8000,0,0,0,22CBFEEF35A5549C2FCCDCA41E7EF6121E814AB1F9D2F1DB89CDB527077C78D0
2019-07-17 16:22:02,825  INFO 7680 --- [pool-4-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,7iHAlpdHfF5UShBMkjLMZ8MIPjyLrCkK,1563351722,261,api.mch.weixin.qq.com,true,6000,8000,0,0,0,22CBFEEF35A5549C2FCCDCA41E7EF6121E814AB1F9D2F1DB89CDB527077C78D0
2019-07-17 16:22:02,825  INFO 7680 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[lDMkmVuMkTflwgU3]]></nonce_str>
<sign><![CDATA[09460A9A1CC7A944FAB304376D19D075AE79EBC37E8AE5E8C5541D550B3E96A1]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>14200</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000353201907163645128652]]></transaction_id>
<out_trade_no><![CDATA[10110031563244439364361]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716103514]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>14200</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 16:22:02,826  INFO 7680 --- [pool-4-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 16:22:02,827  INFO 7680 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000353201907163645128652, nonce_str=lDMkmVuMkTflwgU3, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=09460A9A1CC7A944FAB304376D19D075AE79EBC37E8AE5E8C5541D550B3E96A1, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563244439364361, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716103514, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:22:02,828  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563244439364361 response: {transaction_id=4200000353201907163645128652, nonce_str=lDMkmVuMkTflwgU3, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=09460A9A1CC7A944FAB304376D19D075AE79EBC37E8AE5E8C5541D550B3E96A1, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=14200, out_trade_no=10110031563244439364361, appid=wx1e86ddc5b2485ab2, total_fee=14200, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716103514, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:22:02,832 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==>  Preparing: select id, app_id, pay_type, order_no, trade_no, fee_type, cash_amount, total_amount, extra, trade_time, create_time, details from pay_center3_pay_query_result where app_id = ? and order_no = ? and pay_type = ? 
2019-07-17 16:22:02,833 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : ==> Parameters: 501(String), 10110031563268210364365(String), wx(String)
2019-07-17 16:22:02,835 DEBUG 7680 --- [           main] c.i.p.m.t.d.P.findByOrderNo              : <==      Total: 0
2019-07-17 16:22:02,836  INFO 7680 --- [           main] c.i.p.m.t.s.impl.PaymentServiceProxy     : request payQuery: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563268210364365)
2019-07-17 16:22:02,837  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : execute payQuery payQuery-wx-10110031563268210364365: PayQueryRequestVO(appId=501, tradeType=null, payType=wx, orderNo=10110031563268210364365)
2019-07-17 16:22:02,838  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563268210364365 request: {out_trade_no=10110031563268210364365}
2019-07-17 16:22:03,144  INFO 7680 --- [           main] wxpay java sdk                           : report v1,WXPaySDK/3.0.9,Mc5OaW4Ve7pTQy7GRJ1N3mvvxtmkggaJ,1563351723,303,api.mch.weixin.qq.com,true,6000,8000,0,0,0,F74BC710418EBF7431C0225357CD8A0C54162BF83B1C0DF10FA47C3386FDDE39
2019-07-17 16:22:03,145  INFO 7680 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: requst=<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wx1e86ddc5b2485ab2]]></appid>
<mch_id><![CDATA[1429146602]]></mch_id>
<nonce_str><![CDATA[I1ifalOmfaaNDJDy]]></nonce_str>
<sign><![CDATA[5A4117F24652CC7E2C40B46E96F5082F9D361CD8E9FB0AAFD18655B19EDD99F6]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<openid><![CDATA[ok1_lwxblMHbvIPMdkjXoECK2EwU]]></openid>
<is_subscribe><![CDATA[N]]></is_subscribe>
<trade_type><![CDATA[NATIVE]]></trade_type>
<bank_type><![CDATA[ABC_DEBIT]]></bank_type>
<total_fee>2950</total_fee>
<fee_type><![CDATA[CNY]]></fee_type>
<transaction_id><![CDATA[4200000339201907165618278756]]></transaction_id>
<out_trade_no><![CDATA[10110031563268210364365]]></out_trade_no>
<attach><![CDATA[]]></attach>
<time_end><![CDATA[20190716171029]]></time_end>
<trade_state><![CDATA[REFUND]]></trade_state>
<cash_fee>2950</cash_fee>
<trade_state_desc><![CDATA[订单发生过退款，退款详情请查询退款单]]></trade_state_desc>
</xml>
2019-07-17 16:22:03,145  INFO 7680 --- [pool-5-thread-1] wxpay java sdk                           : get first report msg: v1,WXPaySDK/3.0.9,Mc5OaW4Ve7pTQy7GRJ1N3mvvxtmkggaJ,1563351723,303,api.mch.weixin.qq.com,true,6000,8000,0,0,0,F74BC710418EBF7431C0225357CD8A0C54162BF83B1C0DF10FA47C3386FDDE39
2019-07-17 16:22:03,145  INFO 7680 --- [pool-5-thread-1] wxpay java sdk                           : try get remain report msg
2019-07-17 16:22:03,147  INFO 7680 --- [           main] com.github.wxpay.sdk.WXPay               : processResponseXml: return={transaction_id=4200000339201907165618278756, nonce_str=I1ifalOmfaaNDJDy, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=5A4117F24652CC7E2C40B46E96F5082F9D361CD8E9FB0AAFD18655B19EDD99F6, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=2950, out_trade_no=10110031563268210364365, appid=wx1e86ddc5b2485ab2, total_fee=2950, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716171029, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:22:03,148  INFO 7680 --- [           main] c.i.p.m.t.service.impl.WxServiceImpl     : log-id payQuery-wx-10110031563268210364365 response: {transaction_id=4200000339201907165618278756, nonce_str=I1ifalOmfaaNDJDy, trade_state=REFUND, bank_type=ABC_DEBIT, openid=ok1_lwxblMHbvIPMdkjXoECK2EwU, sign=5A4117F24652CC7E2C40B46E96F5082F9D361CD8E9FB0AAFD18655B19EDD99F6, return_msg=OK, fee_type=CNY, mch_id=1429146602, cash_fee=2950, out_trade_no=10110031563268210364365, appid=wx1e86ddc5b2485ab2, total_fee=2950, trade_state_desc=订单发生过退款，退款详情请查询退款单, trade_type=NATIVE, result_code=SUCCESS, attach=, time_end=20190716171029, is_subscribe=N, return_code=SUCCESS}
2019-07-17 16:22:03,152 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:03,156 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 501(String)
2019-07-17 16:22:03,161 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 16:22:03,162 DEBUG 7680 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 16:22:03,163 DEBUG 7680 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563244439364361(String), wx(String)
2019-07-17 16:22:03,166 DEBUG 7680 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 16:22:03,167 DEBUG 7680 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 16:22:03,167 DEBUG 7680 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563245163364362(String), wx(String)
2019-07-17 16:22:03,171 DEBUG 7680 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 16:22:03,171 DEBUG 7680 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==>  Preparing: select id, app_id, pay_type, refund_no, order_no, trade_no, refund_amount, total_amount, extra, create_time, details from pay_center3_refund_query_result where refund_no=? and pay_type=? 
2019-07-17 16:22:03,172 DEBUG 7680 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : ==> Parameters: refund10110031563268210364365(String), wx(String)
2019-07-17 16:22:03,175 DEBUG 7680 --- [           main] c.i.p.m.t.d.R.findByRefundNo             : <==      Total: 1
2019-07-17 16:22:03,177 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==>  Preparing: select `id`,`app_id`, `name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`, `update_time` from pay_center3_bill_compare_batch where app_id=? and name = ? 
2019-07-17 16:22:03,178 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : ==> Parameters: 501(String), wx20190716(String)
2019-07-17 16:22:03,181 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByappIdAndName         : <==      Total: 0
2019-07-17 16:22:03,181 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==>  Preparing: select id, app_id, pay_type, bill_date, create_time, remark from pay_center3_bill_parse_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:03,181 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:22:03,184 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillParseLogMapper.find    : <==      Total: 1
2019-07-17 16:22:03,184 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : ==>  Preparing: INSERT INTO pay_center3_bill_compare_batch (`id`, `app_id`,`name`, `pay_type`, `bill_date`, `mistake_count`, `unhandle_mistake_count`, `bill_pay_count`, `request_pay_count`, `bill_refund_count`, `request_refund_count`, `bill_pay_amount`, `request_pay_amount`, `bill_refund_amount`, `request_refund_amount`, `pay_service_charge`, `refund_service_charge`, `create_time`) VALUES (?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ?) 
2019-07-17 16:22:03,185 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : ==> Parameters: null, 501(String), wx20190716(String), wx(String), 20190716(String), 2019-07-17 16:22:03.184(Timestamp)
2019-07-17 16:22:03,188 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.create                     : <==    Updates: 1
2019-07-17 16:22:03,189 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `pay_count`, `refund_count`, `pay_total_amount`, `refund_total_amount`, `service_charge`, `income`, `details`, `create_time` from pay_center3_bill_count_log where app_id = ? and pay_type = ? and bill_date = ? 
2019-07-17 16:22:03,190 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : ==> Parameters: 501(String), wx(String), 20190716(String)
2019-07-17 16:22:03,193 DEBUG 7680 --- [           main] c.i.p.m.t.dao.BillCountLogMapper.find    : <==      Total: 1
2019-07-17 16:22:03,193 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log where app_id = ? and bill_date = ? and pay_type = ? 
2019-07-17 16:22:03,193 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 501(String), 20190716(String), wx(String)
2019-07-17 16:22:03,199 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 4
2019-07-17 16:22:03,200 DEBUG 7680 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==>  Preparing: select pay.id, pay.app_id, pay.pay_type, pay.channel, pay.order_no, pay.amount, pay.subject, pay.sign_type, pay.client_ip, pay.extra, pay.create_time from pay_center3_pay_request AS pay INNER JOIN pay_center3_pay_notify AS notify ON pay.order_no=notify.order_no AND pay.pay_type=notify.pay_type AND pay.app_id=notify.app_id where pay.create_time between ? and ? and pay.pay_type=? and pay.app_id=? 
2019-07-17 16:22:03,201 DEBUG 7680 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-17 16:22:03,204 DEBUG 7680 --- [           main] p.m.t.d.P.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:22:03,205 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: insert into pay_center3_bill_pay_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time`) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 16:22:03,209 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 2108(Integer), 501(String), wx(String), 20190716(String), 10110031563265944364364(String), 4200000358201907161857178396(String), 2421(Integer), 15(Integer), 2019-07-18 05:21:12.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":24.21,"手续费":0.15,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 淡椰浆 270ml","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563265944364364","微信订单号":"4200000358201907161857178396","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":24.21}(String), 2019-07-17 16:22:02.0(Timestamp), 2109(Integer), 501(String), wx(String), 20190716(String), 10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), 85(Integer), 2019-07-18 05:21:12.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":142,"手续费":0.85,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563245163364362","微信订单号":"4200000353201907162527638733","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":142}(String), 2019-07-17 16:22:02.0(Timestamp), 2110(Integer), 501(String), wx(String), 20190716(String), 10110031563244439364361(String), 4200000353201907163645128652(String), 14200(Integer), 85(Integer), 2019-07-18 05:21:12.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":142,"手续费":0.85,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563244439364361","微信订单号":"4200000353201907163645128652","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":142}(String), 2019-07-17 16:22:02.0(Timestamp), 2111(Integer), 501(String), wx(String), 20190716(String), 10110031563268210364365(String), 4200000339201907165618278756(String), 2950(Integer), 18(Integer), 2019-07-18 05:21:12.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":29.5,"手续费":0.18,"交易状态":"SUCCESS","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 特级初榨橄榄油浸金枪鱼块 185g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"","退款类型":"","退款金额":0,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563268210364365","微信订单号":"4200000339201907165618278756","商户退款单号":"0","微信退款单号":"0","merchant_income_charge":29.5}(String), 2019-07-17 16:22:02.0(Timestamp)
2019-07-17 16:22:03,215 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.saveBatch                  : <==    Updates: 4
2019-07-17 16:22:03,216  INFO 7680 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : comparePayList-billPayLogCachService.saveBatch:  appId=501; payType=wx;leftBillPayLogs=[BillPayLog(id=2108, appId=501, payType=wx, billDate=20190716, orderNo=10110031563265944364364, tradeNo=4200000358201907161857178396, payAmount=2421, serviceCharge=15, tradeTime=Thu Jul 18 05:21:12 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=24.21, 手续费=0.15, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=雄鸡标 淡椰浆 270ml, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563265944364364, 微信订单号=4200000358201907161857178396, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=24.21}, createTime=Wed Jul 17 16:22:02 CST 2019), BillPayLog(id=2109, appId=501, payType=wx, billDate=20190716, orderNo=10110031563245163364362, tradeNo=4200000353201907162527638733, payAmount=14200, serviceCharge=85, tradeTime=Thu Jul 18 05:21:12 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=142, 手续费=0.85, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=丹麦蓝罐 Kjeldsens 曲奇 908g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563245163364362, 微信订单号=4200000353201907162527638733, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=142}, createTime=Wed Jul 17 16:22:02 CST 2019), BillPayLog(id=2110, appId=501, payType=wx, billDate=20190716, orderNo=10110031563244439364361, tradeNo=4200000353201907163645128652, payAmount=14200, serviceCharge=85, tradeTime=Thu Jul 18 05:21:12 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=142, 手续费=0.85, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=丹麦蓝罐 Kjeldsens 曲奇 908g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563244439364361, 微信订单号=4200000353201907163645128652, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=142}, createTime=Wed Jul 17 16:22:02 CST 2019), BillPayLog(id=2111, appId=501, payType=wx, billDate=20190716, orderNo=10110031563268210364365, tradeNo=4200000339201907165618278756, payAmount=2950, serviceCharge=18, tradeTime=Thu Jul 18 05:21:12 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=29.5, 手续费=0.18, 交易状态=SUCCESS, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=雄鸡标 特级初榨橄榄油浸金枪鱼块 185g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=, 退款类型=, 退款金额=0, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563268210364365, 微信订单号=4200000339201907165618278756, 商户退款单号=0, 微信退款单号=0, merchant_income_charge=29.5}, createTime=Wed Jul 17 16:22:02 CST 2019)]
2019-07-17 16:22:03,217 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `trade_no`, `pay_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_pay_log_cach where pay_type = ? and app_id = ? and DATE_ADD(create_time,INTERVAL 4 DAY) < NOW() ORDER BY create_time DESC 
2019-07-17 16:22:03,218 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==> Parameters: wx(String), 501(String)
2019-07-17 16:22:03,220 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : <==      Total: 0
2019-07-17 16:22:03,221 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log where bill_date = ? and pay_type = ? and app_id = ? 
2019-07-17 16:22:03,221 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : ==> Parameters: 20190716(String), wx(String), 501(String)
2019-07-17 16:22:03,226 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findByBillDate             : <==      Total: 3
2019-07-17 16:22:03,227 DEBUG 7680 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==>  Preparing: select refund.id, refund.app_id, refund.pay_type, refund.order_no, refund.refund_no, refund.total_amount, refund.refund_amount, refund.client_ip, refund.extra, refund.create_time from pay_center3_refund_request AS refund INNER JOIN pay_center3_refund_notify AS notify ON refund.order_no=notify.order_no AND refund.pay_type=notify.pay_type AND refund.app_id=notify.app_id where refund.create_time between ? and ? and refund.pay_type=? and refund.app_id=? 
2019-07-17 16:22:03,229 DEBUG 7680 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : ==> Parameters: 2019-07-16 00:00:00.0(Timestamp), 2019-07-16 23:59:59.999(Timestamp), wx(String), 501(String)
2019-07-17 16:22:03,232 DEBUG 7680 --- [           main] p.m.t.d.R.findBetweenDateInnerJoinNotify : <==      Total: 0
2019-07-17 16:22:03,234  INFO 7680 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : compareRefundList-billRefundLogCachService.saveBatch:  appId=501; payType=wx; valueList=[BillRefundLog(id=300, appId=501, payType=wx, billDate=20190716, orderNo=10110031563245163364362, refundNo=refund10110031563245163364362, tradeNo=4200000353201907162527638733, refundAmount=14200, serviceCharge=-85, tradeTime=Wed Jul 17 23:42:26 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=0, 手续费=-0.85, 交易状态=REFUND, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=丹麦蓝罐 Kjeldsens 曲奇 908g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=SUCCESS, 退款类型=ORIGINAL, 退款金额=142, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563245163364362, 微信订单号=4200000353201907162527638733, 商户退款单号=refund10110031563245163364362, 微信退款单号=50000500972019071610665371485, merchant_income_charge=0}, createTime=Wed Jul 17 10:40:05 CST 2019), BillRefundLog(id=299, appId=501, payType=wx, billDate=20190716, orderNo=10110031563244439364361, refundNo=refund10110031563244439364361, tradeNo=4200000353201907163645128652, refundAmount=14200, serviceCharge=-85, tradeTime=Wed Jul 17 23:42:26 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=0, 手续费=-0.85, 交易状态=REFUND, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=丹麦蓝罐 Kjeldsens 曲奇 908g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=SUCCESS, 退款类型=ORIGINAL, 退款金额=142, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563244439364361, 微信订单号=4200000353201907163645128652, 商户退款单号=refund10110031563244439364361, 微信退款单号=50000400972019071610644839459, merchant_income_charge=0}, createTime=Wed Jul 17 10:40:05 CST 2019), BillRefundLog(id=301, appId=501, payType=wx, billDate=20190716, orderNo=10110031563268210364365, refundNo=refund10110031563268210364365, tradeNo=4200000339201907165618278756, refundAmount=2950, serviceCharge=-18, tradeTime=Wed Jul 17 23:42:26 CST 2019, details={费率=0.60%, 商户号=1429146602, 总金额=0, 手续费=-0.18, 交易状态=REFUND, 交易类型=NATIVE, 付款银行=ABC_DEBIT, 商品名称=雄鸡标 特级初榨橄榄油浸金枪鱼块 185g, 子商户号=0, 用户标识=ok1_lwxblMHbvIPMdkjXoECK2EwU, 货币种类=CNY, 退款状态=SUCCESS, 退款类型=ORIGINAL, 退款金额=29.5, 公众账号ID=wx9b5cb757426e00d9, 商户订单号=10110031563268210364365, 微信订单号=4200000339201907165618278756, 商户退款单号=refund10110031563268210364365, 微信退款单号=50000400992019071610646993811, merchant_income_charge=0}, createTime=Wed Jul 17 10:40:05 CST 2019)]
2019-07-17 16:22:03,236 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==>  Preparing: INSERT INTO pay_center3_bill_refund_log_cach (`id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time`) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) , ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2019-07-17 16:22:03,239 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.saveBatch                  : ==> Parameters: 300(Integer), 501(String), wx(String), 20190716(String), 10110031563245163364362(String), refund10110031563245163364362(String), 4200000353201907162527638733(String), 14200(Integer), -85(Integer), 2019-07-17 23:42:26.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":0,"手续费":-0.85,"交易状态":"REFUND","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"SUCCESS","退款类型":"ORIGINAL","退款金额":142,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563245163364362","微信订单号":"4200000353201907162527638733","商户退款单号":"refund10110031563245163364362","微信退款单号":"50000500972019071610665371485","merchant_income_charge":0}(String), 2019-07-17 10:40:05.0(Timestamp), 299(Integer), 501(String), wx(String), 20190716(String), 10110031563244439364361(String), refund10110031563244439364361(String), 4200000353201907163645128652(String), 14200(Integer), -85(Integer), 2019-07-17 23:42:26.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":0,"手续费":-0.85,"交易状态":"REFUND","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"丹麦蓝罐 Kjeldsens 曲奇 908g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"SUCCESS","退款类型":"ORIGINAL","退款金额":142,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563244439364361","微信订单号":"4200000353201907163645128652","商户退款单号":"refund10110031563244439364361","微信退款单号":"50000400972019071610644839459","merchant_income_charge":0}(String), 2019-07-17 10:40:05.0(Timestamp), 301(Integer), 501(String), wx(String), 20190716(String), 10110031563268210364365(String), refund10110031563268210364365(String), 4200000339201907165618278756(String), 2950(Integer), -18(Integer), 2019-07-17 23:42:26.0(Timestamp), {"费率":"0.60%","商户号":"1429146602","总金额":0,"手续费":-0.18,"交易状态":"REFUND","交易类型":"NATIVE","付款银行":"ABC_DEBIT","商品名称":"雄鸡标 特级初榨橄榄油浸金枪鱼块 185g","子商户号":"0","用户标识":"ok1_lwxblMHbvIPMdkjXoECK2EwU","货币种类":"CNY","退款状态":"SUCCESS","退款类型":"ORIGINAL","退款金额":29.5,"公众账号ID":"wx9b5cb757426e00d9","商户订单号":"10110031563268210364365","微信订单号":"4200000339201907165618278756","商户退款单号":"refund10110031563268210364365","微信退款单号":"50000400992019071610646993811","merchant_income_charge":0}(String), 2019-07-17 10:40:05.0(Timestamp)
2019-07-17 16:22:03,284 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.saveBatch                  : <==    Updates: 3
2019-07-17 16:22:03,285 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==>  Preparing: select `id`, `app_id`, `pay_type`, `bill_date`, `order_no`, `refund_no`, `trade_no`, `refund_amount`, `service_charge`, `trade_time`, `details`, `create_time` from pay_center3_bill_refund_log_cach where pay_type = ? and app_id = ? and DATE_ADD(create_time,INTERVAL 4 DAY) < NOW() ORDER BY create_time DESC 
2019-07-17 16:22:03,286 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : ==> Parameters: wx(String), 501(String)
2019-07-17 16:22:03,290 DEBUG 7680 --- [           main] c.i.p.m.t.d.B.findListMoreThanThreeDay   : <==      Total: 0
2019-07-17 16:22:03,290  INFO 7680 --- [           main] c.i.p.m.t.service.impl.BaseBillService   : dayCompare appId: 501, payType: wx, date: 2019-07-16T16:21:59.606 - result paysCount: 0, refundsCount: 0
2019-07-17 16:22:03,321  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : wx-bill [appId: 501, date:2019-07-16T16:21:59.606] createCompareBatch successful
2019-07-17 16:22:03,322  INFO 7680 --- [           main] c.i.payment.timer.BillDownloadTimer      : task billDownload finished...
2019-07-17 16:22:03,335  INFO 7680 --- [       Thread-5] o.s.s.c.ThreadPoolTaskScheduler          : Shutting down ExecutorService 'taskScheduler'
2019-07-17 16:22:03,337  INFO 7680 --- [       Thread-5] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-07-17 16:22:03,353  INFO 7680 --- [       Thread-5] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bs.payment.modules.trade.dao.TransferRequestLogMapper">

	<insert id="save" parameterType="TransferRequestLog" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO pay_center3_transfer_request (id, app_id, pay_type, transfer_no, account, amount, real_name, client_ip, extra, create_time)
		VALUES (#{id}, #{appId}, #{payType}, #{transferNo}, #{account}, #{amount}, #{realName}, #{clientIp}, #{extra}, #{createTime})
	</insert>

	<select id="findByTransferNo" resultMap="transferRequestLog">
		select id, app_id, pay_type, transfer_no, account, amount, real_name, client_ip, extra, create_time
		from pay_center3_transfer_request 
		where transfer_no = #{transferNo}
	</select>
	
	<select id="findInOrders" parameterType="java.util.HashSet" resultMap="transferRequestLog">
		select id, app_id, pay_type, transfer_no, account, amount, real_name, client_ip, extra, create_time
		from pay_center3_transfer_request 
		where transfer_no in <foreach collection="orders" item="id" open="(" separator="," close=")">#{id}</foreach>
		and pay_type = #{payType}
	</select>
	
	<select id="findBetweenDate" parameterType="java.util.HashSet" resultMap="transferRequestLog">
		select id, app_id, pay_type, transfer_no, account, amount, real_name, client_ip, extra, create_time
		from pay_center3_transfer_request 
		where create_time between #{startDate} and #{endDate}
		<if test="payType != null"> and pay_type=#{payType}</if>
	</select>
	
	<resultMap type="TransferRequestLog" id="transferRequestLog">
		<id column="id" property="id" />
		<result column="app_id" property="appId" />
		<result column="pay_type" property="payType" />
		<result column="transfer_no" property="transferNo" />
		<result column="account" property="account" />
		<result column="amount" property="amount" />
		<result column="real_name" property="realName" />
		<result column="client_ip" property="clientIp" />
		<result column="extra" property="extra" />
		<result column="create_time" property="createTime" />
	</resultMap>
</mapper>